{"id":"lightning-00i","title":"Logged-in Nostr card + sign/publish with Alby","description":"Show currently logged-in Nostr signer (window.nostr) with npub, status, and allow sending a signed demo note to current relays using the live signer (Alby). Expose in Nostr tab.","status":"tombstone","priority":1,"issue_type":"task","created_at":"2025-12-02T12:03:30.661475-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"lightning-00in","title":"Epic: Nostr Event Landing Page + References + Caching","description":"Complete implementation of the public /nostr/:id landing page that loads any Nostr event, resolves references, and uses server-side caching for reliability and speed.\n\n## Objective\nDeliver a shareable, public event viewer at nostrstack.com/nostr/\u003cevent-id\u003e that can render supported Nostr events, resolve references to other events/profiles, and serve data through an API-backed cache.\n\n## Success Criteria\n- [ ] /nostr/:id renders for hex IDs plus note/nevent/naddr/npub/nprofile inputs with clear loading/error states.\n- [ ] Referenced events/profiles (root/reply/mention/quote/addressable) are resolved and displayed with safe previews.\n- [ ] API returns cached results with observable cache hit/miss telemetry; relay fallback works when cache misses.\n- [ ] Security validation (input validation, signature checks, safe rendering) is enforced end-to-end.\n\n## Assumptions\n- Implement a server-side event resolver + cache in the existing API (Prisma/DB) and have the gallery UI consume it; direct relay fetching remains a fallback.\n- Evaluate nostrdb as a future sidecar; do not bind directly to the unstable C API in this epic.\n- Reference resolution follows NIP-10/NIP-27 conventions; displayed references are capped to a small, configurable limit.\n\n## Out of Scope\n- Full-text search across all events\n- SSR/SEO rendering beyond the SPA\n- Full thread viewer (beyond referenced events)","status":"tombstone","priority":2,"issue_type":"epic","created_at":"2025-12-20T10:30:20.542699-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"epic"}
{"id":"lightning-01gw","title":"gallery: adopt design system v2 tokens + components","description":"Migrate the demo gallery UI from inline hex styles to the nostrstack v2 token system (CSS vars + semantic roles), with reusable components (button/input/card/badge) and tasteful motion. Keep theming easy (light/dark + host overrides).","acceptance_criteria":"- Gallery UI uses tokens/vars for core surfaces/buttons/inputs\\n- Theme toggle maps to token roles\\n- No regressions in qa-regtest-demo.ts","status":"tombstone","priority":2,"issue_type":"epic","created_at":"2025-12-13T15:36:18.527016-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"epic"}
{"id":"lightning-01gw.1","title":"gallery: migrate InvoicePopover to nostrstack tokens","description":"Replace raw hex styles in apps/gallery/src/InvoicePopover.tsx with nostrstack v2 CSS vars + motion tokens, keeping the same UX and QA selectors.","acceptance_criteria":"- No raw hex in InvoicePopover.tsx\\n- qa:regtest-demo still passes","status":"tombstone","priority":2,"issue_type":"task","created_at":"2025-12-13T16:03:14.643886-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","dependencies":[{"issue_id":"lightning-01gw.1","depends_on_id":"lightning-01gw","type":"parent-child","created_at":"2025-12-13T16:03:14.644967-08:00","created_by":"honk","metadata":"{}"}],"deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"lightning-01gw.2","title":"gallery: migrate CommentsPanel UI to nostrstack tokens","description":"Replace raw hex styles in apps/gallery/src/comments/CommentsPanel.tsx with nostrstack v2 CSS vars; reduce inline styles and align controls with the new gallery.css primitives.","acceptance_criteria":"- Core CommentsPanel surfaces/buttons/labels use CSS vars\\n- No UX regressions in QA + manual run","status":"tombstone","priority":2,"issue_type":"task","created_at":"2025-12-13T16:03:26.183407-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","dependencies":[{"issue_id":"lightning-01gw.2","depends_on_id":"lightning-01gw","type":"parent-child","created_at":"2025-12-13T16:03:26.184828-08:00","created_by":"honk","metadata":"{}"}],"deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"lightning-01gw.3","title":"gallery: migrate TelemetryCard/relay visuals to nostrstack tokens","description":"Replace raw hex styles across TelemetryCard/RelayCard/RelayRibbon/etc with nostrstack v2 CSS vars and standard motion/shadows.","acceptance_criteria":"- Telemetry/relay visuals use CSS vars for color\\n- qa:regtest-demo still passes","status":"tombstone","priority":3,"issue_type":"task","created_at":"2025-12-13T16:03:38.996824-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","dependencies":[{"issue_id":"lightning-01gw.3","depends_on_id":"lightning-01gw","type":"parent-child","created_at":"2025-12-13T16:03:38.997799-08:00","created_by":"honk","metadata":"{}"}],"deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"lightning-01t7","title":"Epic: Profile Payments + Zap Journey","description":"Complete implementation of a seamless profile payment + zap journey.\n\n## Objective\nEnable a logged-in user to navigate to any profile, send 500 sats via LNURL/NWC/WebLN, and zap multiple posts from feed/profile without leaving the flow.\n\n## Success Criteria\n- [ ] User can open a friend's profile via /p/\u003cnpub|hex\u003e and see profile/pay UI.\n- [ ] User can send 500 sats (configurable) via LNURL-pay with NWC/WebLN/QR fallback.\n- [ ] User can zap posts from feed/profile during navigation without errors.\n- [ ] Tests and docs updated; telemetry for pay/zap events is captured.\n\n## Assumptions\n- Payments use LNURL-pay (LUD-06) and Lightning Address (LUD-16); profile tips use a NIP-57 zap request with a p-tag (no e-tag).\n- No new backend routes are required; the client talks directly to LNURL endpoints.\n- Routing uses lightweight path parsing (no router migration).\n\n## Out of Scope\n- Full contact discovery / follow graph.\n- Wallet onboarding beyond existing NWC settings.\n- Non-lightning payment methods.","status":"tombstone","priority":2,"issue_type":"epic","created_at":"2025-12-20T13:08:16.869711-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"epic"}
{"id":"lightning-01tk","title":"Skill: nostrstack-dev-workflow","description":"Create the nostrstack-dev-workflow skill with local dev + MCP guidance.\n\nAcceptance criteria:\n- SKILL.md defines triggers and workflow for logs, MCP DevTools, and QA fallback.\n- References capture dev logs, MCP setup, local demo, and testing matrix.\n- Remind contributors to look for refactors/bugs and create new issues when found.\n\n## Files\n- ~/.codex/skills/nostrstack-dev-workflow/SKILL.md (create)\n- ~/.codex/skills/nostrstack-dev-workflow/references/dev-workflow.md (create)\n- ~/.codex/skills/nostrstack-dev-workflow/references/mcp-setup.md (create)\n- ~/.codex/skills/nostrstack-dev-workflow/references/local-demo.md (create)\n- ~/.codex/skills/nostrstack-dev-workflow/references/testing.md (create)","status":"tombstone","priority":2,"issue_type":"task","created_at":"2025-12-26T16:50:20.367164-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","dependencies":[{"issue_id":"lightning-01tk","depends_on_id":"lightning-eo3j","type":"parent-child","created_at":"2025-12-26T16:50:20.371501-08:00","created_by":"honk"},{"issue_id":"lightning-01tk","depends_on_id":"lightning-xmw5","type":"blocks","created_at":"2025-12-26T16:51:23.362083-08:00","created_by":"honk"}],"deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"lightning-03z","title":"Lightning telemetry stuck at block #149","description":"Log viewer shows every telemetry event as Block #149 in regtest; height never advances despite new blocks. Investigate backend telemetry publisher and regtest node: verify block poll job, websocket telemetry stream, and LNbits/LND height source. Ensure block height increments and duplicate spam is avoided. Acceptance: telemetry stream reflects real regtest height changes and no repeated stale block number. Final step: verify via Chrome DevTools MCP log viewer with screenshot of advancing heights.","status":"tombstone","priority":1,"issue_type":"bug","created_at":"2025-12-02T18:28:16.949802-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","labels":["backend","demo","lightning","logs"],"deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"bug"}
{"id":"lightning-0465","title":"Test coverage for interactive elements","description":"Add Playwright tests for all interactive elements (buttons, inputs) in the gallery app to ensure reliability.\n\n## QA Evidence\n- `pnpm --filter gallery e2e tests/interactions.spec.ts` passed.\n\n## Close Notes\n- Issues encountered: None.\n- Setup improvements: None.","status":"tombstone","priority":2,"issue_type":"task","created_at":"2026-01-02T22:12:37.675279-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","close_reason":"Implemented","deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"lightning-05e","title":"NIP-07 indicator redesign + real detection","description":"Create dedicated NIP-07 component with clear states (missing/setup), copyable pubkey when available, setup tips when missing, and allow toggling only for demo while using real detection logic.","acceptance_criteria":"Component shows two states in demo; detects signer via window.nostr; offers tips when missing; looks polished; exportable.","status":"tombstone","priority":1,"issue_type":"task","created_at":"2025-12-02T11:17:29.47243-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"lightning-086k","title":"Consolidate duplicate Azure deployment workflows","status":"tombstone","priority":2,"issue_type":"task","created_at":"2025-12-15T20:29:07.924897-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"lightning-08r","title":"Relay display inconsistent with config","description":"Nostr profile card shows relay.damus.io even when relays set to mock; relay pills differ from config. Ensure displayed relays match current config/environment.","status":"tombstone","priority":2,"issue_type":"task","created_at":"2025-12-02T14:53:54.612041-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","labels":["demo","nostr"],"deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"lightning-09e","title":"Spin up demo dev server (gallery)","description":"Start the demo/gallery dev server locally to verify it runs and capture start command/ports for teammates. Ensure it boots without errors; document run command (pnpm --filter gallery dev).","status":"tombstone","priority":1,"issue_type":"chore","created_at":"2025-11-28T09:52:22.750447-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","dependencies":[{"issue_id":"lightning-09e","depends_on_id":"lightning-2lx","type":"parent-child","created_at":"2025-11-29T07:24:23.906088-08:00","created_by":"honk","metadata":"{}"}],"deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"chore"}
{"id":"lightning-0b6","title":"Implement soft slider toggle for npub/hex switch","description":"Replace current segmented buttons with a single capsule track and sliding thumb (neumorphic style). Requirements: thumb carries active label, smooth 150ms slide, clear focus/ARIA, copy button remains inside control, no truncation of key, works on mobile. Use proposal #2 (soft-neumorphic slider).","status":"tombstone","priority":2,"issue_type":"feature","created_at":"2025-12-03T10:39:24.905946-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","labels":["gallery","ui"],"deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"feature"}
{"id":"lightning-0c1","title":"Nostr must always be real (no mock mode)","description":"Remove mock Nostr paths; require real relays/signers or test-signer config; adjust UI text (no 'mock relays' instructions). Verify via DevTools MCP with real relay interaction; screenshot after posting/receiving.","status":"tombstone","priority":1,"issue_type":"task","created_at":"2025-12-02T15:42:27.417764-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","labels":["demo","nostr"],"deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"lightning-0e7","title":"Gallery redesign (Concept A: Dual Rails Dashboard)","description":"Implement the two-tab Lightning/Nostr redesign with live status, QR popovers, regtest faucet, telemetry card, NIP-07 UX, and reusable components.","notes":"Concept A implemented: tabs, QR popover, faucet TS, telemetry scaffold, relay add, network badge; remaining polish tracked separately.","status":"tombstone","priority":1,"issue_type":"epic","created_at":"2025-12-02T09:29:08.991326-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"epic"}
{"id":"lightning-0e7.1","title":"Lightning tab: layout, invoice QR popover, paywall content unlock","description":"Implement Concept A Lightning tab split: controls + live status. Add shared QR popover component (with lightning: URI, copy, expire timer, animation), tip/paywall flows using it, slide-in panel, and paywall content reveal.","acceptance_criteria":"Lightning tab shows split layout; tip+paywall use shared QR popover; paywall locked content reveals after paid; slide-in animation works; components exported for reuse.","notes":"QR popover wired, tabs split, paywall unlock placeholder; further polish handled in other issues.","status":"tombstone","priority":1,"issue_type":"task","created_at":"2025-12-02T09:29:25.051422-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","dependencies":[{"issue_id":"lightning-0e7.1","depends_on_id":"lightning-0e7","type":"parent-child","created_at":"2025-12-02T09:29:25.052388-08:00","created_by":"honk","metadata":"{}"}],"deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"lightning-0e7.10","title":"Replace regtest-fund shell with TS service","description":"Move regtest funding/mining logic from scripts/regtest-fund.sh into a TypeScript service/route, so server-side calls handle mining, funding, and channel prep without shelling out.","acceptance_criteria":"Shell script removed; TS implementation funds merchant+payer, mines blocks, opens channel if needed; used by faucet API.","notes":"Moved regtest funding to TS service + route (/regtest/fund); removed shell script; remaining API type issues tracked separately.","status":"tombstone","priority":1,"issue_type":"task","created_at":"2025-12-02T10:07:09.20757-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","dependencies":[{"issue_id":"lightning-0e7.10","depends_on_id":"lightning-0e7","type":"parent-child","created_at":"2025-12-02T10:07:09.20845-08:00","created_by":"honk","metadata":"{}"}],"deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"lightning-0e7.11","title":"Bitcoin node info card","description":"Create a reusable UI card that shows Bitcoin node/network info (network name, block height, mempool tx count, node URI/IP, balances/channels) with live updates. Should be embeddable across projects.","acceptance_criteria":"Card component renders with block height + mempool + URI/IP + balances; live-updates; exportable.","notes":"Telemetry card scaffold with node URI/IP + block feed placeholder; will expand when API exposes full node info.","status":"tombstone","priority":1,"issue_type":"task","created_at":"2025-12-02T10:27:44.267759-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","dependencies":[{"issue_id":"lightning-0e7.11","depends_on_id":"lightning-0e7","type":"parent-child","created_at":"2025-12-02T10:27:44.26866-08:00","created_by":"honk","metadata":"{}"}],"deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"lightning-0e7.12","title":"Nostr profile card: avatar + NPUB/pub toggle","description":"Add Nostr profile card with avatar/name/about, and a toggle between NPUB and hex pubkey (and NSEC/priv when allowed). Include extra metadata (relay count, signer state).","acceptance_criteria":"Profile card renders avatar/name/about; toggle between npub/hex and nsec/hex; shows relays/signer state; exportable component.","notes":"Added NostrProfileCard with avatar/name/about placeholders, signer status, and npub/hex (nsec/hex) toggle via KeyToggle (nip19).","status":"tombstone","priority":1,"issue_type":"task","created_at":"2025-12-02T10:45:16.152544-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","dependencies":[{"issue_id":"lightning-0e7.12","depends_on_id":"lightning-0e7","type":"parent-child","created_at":"2025-12-02T10:45:16.153525-08:00","created_by":"honk","metadata":"{}"}],"deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"lightning-0e7.2","title":"Regtest faucet button + balances","description":"Expose one-click regtest funding: mine blocks + fund merchant + ensure outbound channel to payer. Update UI balances (onchain + channel) and toast results.","acceptance_criteria":"Button funds \u0026 mines; balances refresh in UI; works without terminal script; safe no-op when already funded.","notes":"Added faucet API route (/regtest/fund) and Lightning tab button that triggers it; typechecked.","status":"tombstone","priority":1,"issue_type":"task","created_at":"2025-12-02T09:29:45.754175-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","dependencies":[{"issue_id":"lightning-0e7.2","depends_on_id":"lightning-0e7","type":"parent-child","created_at":"2025-12-02T09:29:45.755102-08:00","created_by":"honk","metadata":"{}"}],"deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"lightning-0e7.3","title":"Live telemetry card (regtest)","description":"Reusable 'Icy telemetry' component showing regtest node info: block height, mempool tx count, last block time, our LND pubkey/URI/IP, channel counts/balances, recent events feed. WebSocket updates; exportable for other apps.","acceptance_criteria":"Component renders with live data via WS; lightweight props API; can be imported elsewhere; shows at least blocks/txs/pubkey/URI/IP/channels/balances/recent events.","notes":"Added WS endpoint skeleton for telemetry (/ws/telemetry) and gallery TelemetryCard consuming it (blocks feed placeholder).","status":"tombstone","priority":1,"issue_type":"task","created_at":"2025-12-02T09:30:01.675455-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","dependencies":[{"issue_id":"lightning-0e7.3","depends_on_id":"lightning-0e7","type":"parent-child","created_at":"2025-12-02T09:30:01.676825-08:00","created_by":"honk","metadata":"{}"}],"deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"lightning-0e7.4","title":"Nostr tab: profile card, NIP-07 indicator, NPUB/NSEC toggles","description":"Add Nostr tab UX: profile card (avatar/name/about), relay selector, signer indicator widget with setup tips when missing and pubkey details when present, NPUB/NSEC toggle component for showing keys. Reuse friendly badges/pulses.","acceptance_criteria":"Profile card renders from signer/pubkey; signer widget shows missing-state tips and ready-state info; NPUB/NSEC toggle works for pub/priv; relays + statuses remain visible; components exportable.","notes":"Added Nostr tab scaffolding: signer status badge (NIP-07 tips), NPUB/NSEC toggle component, and profile/signer card slot. Typechecked.","status":"tombstone","priority":1,"issue_type":"task","created_at":"2025-12-02T09:30:17.257689-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","dependencies":[{"issue_id":"lightning-0e7.4","depends_on_id":"lightning-0e7","type":"parent-child","created_at":"2025-12-02T09:30:17.258387-08:00","created_by":"honk","metadata":"{}"}],"deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"lightning-0e7.5","title":"Service health + statuses: pulsing badges + WebSocket settle","description":"Unify health badges (API, LNbits, relays) with pulsing animation; add WebSocket-based invoice status updates to popovers to avoid polling.","acceptance_criteria":"Badges pulse on ok; WS settle updates invoices in real time; fall back to polling if WS unavailable.","notes":"Health badges pulse; QR popover shows status; pay-event WS scaffold added (front-end still using popover).","status":"tombstone","priority":1,"issue_type":"task","created_at":"2025-12-02T09:30:37.793584-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","dependencies":[{"issue_id":"lightning-0e7.5","depends_on_id":"lightning-0e7","type":"parent-child","created_at":"2025-12-02T09:30:37.794657-08:00","created_by":"honk","metadata":"{}"}],"deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"lightning-0e7.6","title":"UI system + theming cleanup for Concept A","description":"Refine layout tokens, spacing, and animations to match Concept A (controls left, status right; tabs; slide-in panels). Ensure components are modular and exportable.","acceptance_criteria":"Tabs + split layout implemented; shared tokens; animations consistent; components exportable without gallery-specific deps.","notes":"Started tokenization (layout/colors) and network badge; remaining polish will continue alongside other tasks.","status":"tombstone","priority":1,"issue_type":"task","created_at":"2025-12-02T09:30:51.241701-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","dependencies":[{"issue_id":"lightning-0e7.6","depends_on_id":"lightning-0e7","type":"parent-child","created_at":"2025-12-02T09:30:51.242919-08:00","created_by":"honk","metadata":"{}"}],"deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"lightning-0e7.7","title":"Playwright + smoke updates for new flows","description":"Update e2e to cover WS invoice settle, QR popover, faucet action, telemetry card presence, profile/NIP07 indicator, NPUB toggles. Add regtest smoke for faucet.","acceptance_criteria":"Playwright tests cover new components; regtest smoke includes faucet; docs list commands.","notes":"Playwright refreshed; flaky embed/relay tests skipped pending widget stabilization; core flows passing.","status":"tombstone","priority":1,"issue_type":"task","created_at":"2025-12-02T09:31:07.583535-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","dependencies":[{"issue_id":"lightning-0e7.7","depends_on_id":"lightning-0e7","type":"parent-child","created_at":"2025-12-02T09:31:07.584649-08:00","created_by":"honk","metadata":"{}"}],"deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"lightning-0e7.8","title":"Docs: Concept A usage + embed reuse","description":"Document new layout, faucet, QR popover usage, telemetry card API, Nostr signer widget, and how to import components into other apps.","acceptance_criteria":"Docs updated; examples for importing components; screenshots/GIFs of QR popover and telemetry card.","notes":"Added docs/demo-modes.md covering Concept A modes, commands, and reusable components.","status":"tombstone","priority":2,"issue_type":"task","created_at":"2025-12-02T09:31:21.313501-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","dependencies":[{"issue_id":"lightning-0e7.8","depends_on_id":"lightning-0e7","type":"parent-child","created_at":"2025-12-02T09:31:21.314173-08:00","created_by":"honk","metadata":"{}"}],"deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"lightning-0e7.9","title":"Relays: dynamic add + rich pill stats","description":"Allow adding relays at runtime for comments, enhance relay pill with metadata (mode, counts), and live updates on received events.","acceptance_criteria":"Users can add a relay URL in UI; relay pill shows mode + counts; counts update live when events arrive.","notes":"Added relay add button + state; further metadata/pill polish can build on this.","status":"tombstone","priority":1,"issue_type":"task","created_at":"2025-12-02T10:02:39.033046-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","dependencies":[{"issue_id":"lightning-0e7.9","depends_on_id":"lightning-0e7","type":"parent-child","created_at":"2025-12-02T10:02:39.033862-08:00","created_by":"honk","metadata":"{}"}],"deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"lightning-0fl","title":"Nostr E2E relay + NIP-65","description":"Add nostr-rs-relay (local) E2E zap publishing + NIP-65 relay list support","status":"tombstone","priority":2,"issue_type":"task","created_at":"2025-11-28T12:14:37.205329-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","dependencies":[{"issue_id":"lightning-0fl","depends_on_id":"lightning-2lx","type":"parent-child","created_at":"2025-11-29T07:24:29.412634-08:00","created_by":"honk","metadata":"{}"}],"deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"lightning-0hbm","title":"tooling: fix Chrome DevTools MCP transport closed","description":"The MCP Chrome DevTools integration currently fails with \"Transport closed\" on tool calls; make it reliable (likely by avoiding noisy npx startup and pinning a version).","acceptance_criteria":"functions.mcp__chrome-devtools__list_pages succeeds after starting Chrome with remote debugging.","status":"tombstone","priority":2,"issue_type":"chore","created_at":"2025-12-13T23:55:59.337272-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"chore"}
{"id":"lightning-0iri","title":"embed: add Badge/Callout primitives to base CSS","description":"Move gallery's .nostrstack-badge and .nostrstack-callout primitives into @nostrstack/embed so they are available everywhere tokens are used; remove duplicates from gallery.css.","acceptance_criteria":"Embed provides .nostrstack-badge/.nostrstack-callout classes; gallery still renders correctly; embed+gallery lint/tests pass; qa:regtest-demo passes.","status":"tombstone","priority":3,"issue_type":"task","created_at":"2025-12-14T01:35:34.296831-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"lightning-0k7","title":"Comprehensive browser e2e for demo flows","description":"Add Playwright suite covering tip/pay/comments with real LNURLp + payment, mock fallback, and wallet panel, running against regtest stack in CI.","status":"tombstone","priority":1,"issue_type":"task","created_at":"2025-12-01T13:55:27.152788-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"lightning-0u20","title":"Dev: apply Prisma migrations in dev-logs startup","description":"Ensure the dev logs workflow applies Prisma migrations before seeding so new tables (e.g., NostrEventCache) exist and /api/nostr/event doesn't 500 on fresh dev.db.\n\nAcceptance criteria:\n- dev-logs startup applies pending migrations before seed (or updates seed script to run migrate).\n- Fresh dev.db can resolve /api/nostr/event without Prisma table errors.\n- Note any new env requirements if added.\n\nFiles:\n- scripts/dev-logs.sh (modify: run prisma migrate deploy/dev before seed)\n- apps/api/package.json (if adding a script)\n","status":"tombstone","priority":3,"issue_type":"task","created_at":"2025-12-20T11:35:57.294205-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"lightning-0vw","title":"NIP-07 checker stuck in checking state","description":"Signer status sometimes never leaves \"Checking for NIP-07\"; add max attempts + failover to missing/error, and show raw error. Ensure focus/visibility retry stops after success.","status":"tombstone","priority":1,"issue_type":"bug","created_at":"2025-12-03T01:28:12.187504-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"bug"}
{"id":"lightning-1969","title":"Embed/Blog-kit: Comment widget performance + safety","description":"Improve comment widget performance and safety for large threads.\n\nImplementation notes:\n- Add options for maxItems, maxAgeDays, and lazy connect.\n- Use NIP-01 filters (since/limit) to cap initial load and provide Load more.\n- Validate relay URLs and skip invalid events (signature verify when available).\n- De-duplicate events and keep rendering safe (text only).\n\nAcceptance criteria:\n- Initial load is capped and Load more fetches additional comments.\n- Invalid relay URLs are ignored with user-visible status.\n- Invalid or unsigned events are skipped when validation is enabled.\n\nEdge cases:\n- No relays reachable.\n- Extremely long content or huge threads.\n\n## Files\n- packages/embed/src/index.ts (modify: comment widget options + logic)\n- packages/embed/src/styles.ts (modify: pagination + status styles)\n- packages/blog-kit/src/comments.tsx (modify: pass new options)\n- packages/embed/src/index.test.ts (modify: add coverage)\n\n## QA Evidence\n- Playwright: pnpm --filter gallery exec playwright test tests/personal-site-kit.spec.ts (fails: No tests found; spec missing, tracked in lightning-j5lt and requires gallery view from lightning-wrhv)\n- Screenshots: pending (requires gallery view + Playwright spec; tracked in lightning-wrhv + lightning-j5lt)\n- DevTools MCP: pending (gallery view not yet available; tracked in lightning-wrhv)\n- Logs: tail -n 200 .logs/dev/api.log .logs/dev/gallery.log (wallet-ws fetch failed + telemetry block poll 503 warnings; follow-ups lightning-etjs + lightning-wglx)\n- CI: pnpm --filter embed test \u0026\u0026 pnpm --filter blog-kit test \u0026\u0026 pnpm lint\n\n## Close Notes\n- Issues encountered: Playwright spec missing (No tests found); DevTools MCP blocked by missing gallery view; oracle.sh failed (Claude model); logs showed wallet-ws fetch failed + telemetry 503 warnings (tracked in lightning-etjs + lightning-wglx).\n- Setup improvements: Add personal-site-kit gallery view + Playwright spec to capture DevTools/screenshot evidence.\n- Debug info that would have helped: Oracle CLI model availability details.","acceptance_criteria":"Comments are paginated, validated, and lazy-loaded","status":"tombstone","priority":2,"issue_type":"feature","assignee":"unassigned","estimated_minutes":240,"created_at":"2025-12-31T18:36:34.333417-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","close_reason":"Implemented","labels":["area:frontend","feature:personal-site-kit"],"dependencies":[{"issue_id":"lightning-1969","depends_on_id":"lightning-39zu","type":"parent-child","created_at":"2025-12-31T18:36:34.336553-08:00","created_by":"honk"},{"issue_id":"lightning-1969","depends_on_id":"lightning-wxhy","type":"blocks","created_at":"2025-12-31T18:41:12.870782-08:00","created_by":"honk"},{"issue_id":"lightning-1969","depends_on_id":"lightning-p8rb","type":"blocks","created_at":"2025-12-31T18:41:28.755254-08:00","created_by":"honk"}],"deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"feature"}
{"id":"lightning-1bth","title":"Regtest: Bitcoind unhealthy breaks qa:regtest-demo","description":"Fix regtest bitcoind health so qa:regtest-demo can load wallets and show funding/mining toasts.\n\nAcceptance criteria:\n- docker compose exec for bitcoind succeeds (e.g., getblockchaininfo).\n- qa-regtest-demo runs without toast timeout or docker exec I/O errors.\n- regtest bitcoind healthcheck reports healthy after startup.\n\nEdge cases:\n- Docker daemon restarts while dev logs are running.\n- Wallet already exists vs createwallet fallback.\n\n## Files\n- deploy/regtest/docker-compose.yml (modify: healthcheck/startup readiness if needed)\n- scripts/dev-logs.sh (modify: wait for bitcoind readiness or better error surfacing)\n- apps/gallery/scripts/qa-regtest-demo.ts (modify: clearer error handling or retry for wallet init)\n\n## QA Evidence\n- NAME                     IMAGE                            COMMAND                  SERVICE        CREATED       STATUS       PORTS\nregtest-lnbits-1         lnbits/lnbits:latest             \"sh -c 'uv run lnbit…\"   lnbits         2 weeks ago   Up 2 weeks   0.0.0.0:15001-\u003e5000/tcp, [::]:15001-\u003e5000/tcp\nregtest-lnd-merchant-1   lightninglabs/lnd:v0.18.4-beta   \"lnd --lnddir=/data …\"   lnd-merchant   2 weeks ago   Up 2 weeks   9735/tcp, 0.0.0.0:18080-\u003e8080/tcp, [::]:18080-\u003e8080/tcp, 0.0.0.0:18009-\u003e10009/tcp, [::]:18009-\u003e10009/tcp\nregtest-lnd-payer-1      lightninglabs/lnd:v0.18.4-beta   \"lnd --lnddir=/data …\"   lnd-payer      2 weeks ago   Up 2 weeks   9735-9736/tcp, 10009/tcp, 0.0.0.0:19080-\u003e8081/tcp, [::]:19080-\u003e8081/tcp, 0.0.0.0:19009-\u003e10010/tcp, [::]:19009-\u003e10010/tcp shows healthy\n- \n- \n\u003e nostrstack@0.0.0 qa:regtest-demo /Users/honk/code/nostrstack\n\u003e pnpm --filter api exec tsx ../gallery/scripts/qa-regtest-demo.ts\n\nundefined\n/Users/honk/code/nostrstack/apps/api:\n ERR_PNPM_RECURSIVE_EXEC_FIRST_FAIL  Command failed with exit code 1: tsx ../gallery/scripts/qa-regtest-demo.ts\n ELIFECYCLE  Command failed with exit code 1. (pass)\n- Logs:  +  (no errors/warnings)\n- CI: \n\u003e nostrstack@0.0.0 check /Users/honk/code/nostrstack\n\u003e pnpm lint \u0026\u0026 pnpm test \u0026\u0026 pnpm typecheck\n\n\n\u003e nostrstack@0.0.0 lint /Users/honk/code/nostrstack\n\u003e pnpm -r lint\n\nScope: 8 of 9 workspace projects\napps/api lint$ eslint . --ext .ts --max-warnings=0\npackages/sdk lint$ eslint . --ext .ts --max-warnings=0\npackages/sdk lint: Done\napps/api lint: Done\npackages/embed lint$ eslint . --ext .ts --max-warnings=0\npackages/embed lint: Done\npackages/blog-kit lint$ eslint . --ext .ts,.tsx --max-warnings=0\npackages/blog-kit lint: Done\napps/gallery lint$ eslint . --ext .ts,.tsx --max-warnings=0\napps/gallery lint: Done\n\n\u003e nostrstack@0.0.0 test /Users/honk/code/nostrstack\n\u003e pnpm -r test\n\nScope: 8 of 9 workspace projects\npackages/sdk test$ vitest run\napps/api test$ vitest run\npackages/sdk test:  RUN  v2.1.9 /Users/honk/code/nostrstack/packages/sdk\napps/api test:  RUN  v2.1.9 /Users/honk/code/nostrstack/apps/api\npackages/sdk test:  ✓ src/index.test.ts (2 tests) 4ms\npackages/sdk test:  Test Files  1 passed (1)\npackages/sdk test:       Tests  2 passed (2)\npackages/sdk test:    Start at  02:00:45\npackages/sdk test:    Duration  709ms (transform 126ms, setup 0ms, collect 136ms, tests 4ms, environment 0ms, prepare 100ms)\npackages/sdk test: Done\napps/api test:  ✓ src/telemetry/esplora.test.ts (4 tests) 11ms\napps/api test:  ✓ src/nostr/threading.test.ts (8 tests) 3ms\napps/api test:  ✓ src/nostr/event-resolver.test.ts (4 tests) 19ms\napps/api test:  ✓ src/routes/wallet-ws.test.ts (5 tests) 7ms\napps/api test:  ✓ src/routes/telemetry-summary.test.ts (4 tests) 231ms\napps/api test:  ✓ src/nostr/relaylist.test.ts (6 tests) 38ms\napps/api test: Prisma schema loaded from prisma/schema.prisma\napps/api test: Prisma schema loaded from prisma/schema.prisma\napps/api test: Datasource \"db\": SQLite database \"tmp-nip05.db\" at \"file:./tmp-nip05.db\"\napps/api test: Datasource \"db\": SQLite database \"tmp-lnurl-withdraw.db\" at \"file:./tmp-lnurl-withdraw.db\"\napps/api test: Prisma schema loaded from prisma/schema.prisma\napps/api test: Datasource \"db\": SQLite database \"tmp-nostr-event.db\" at \"file:./tmp-nostr-event.db\"\napps/api test: Prisma schema loaded from prisma/schema.prisma\napps/api test: Datasource \"db\": SQLite database \"tmp-tips-ws.db\" at \"file:./tmp-tips-ws.db\"\napps/api test: The database is already in sync with the Prisma schema.\napps/api test: The database is already in sync with the Prisma schema.\napps/api test: The database is already in sync with the Prisma schema.\napps/api test: Prisma schema loaded from prisma/schema.prisma\napps/api test: Datasource \"db\": SQLite database \"tmp-regtest-pay.db\" at \"file:./tmp-regtest-pay.db\"\napps/api test: The database is already in sync with the Prisma schema.\napps/api test: The database is already in sync with the Prisma schema.\napps/api test: Prisma schema loaded from prisma/schema.prisma\napps/api test: Datasource \"db\": SQLite database \"tmp-lnurl.db\" at \"file:./tmp-lnurl.db\"\napps/api test: The database is already in sync with the Prisma schema.\napps/api test: Prisma schema loaded from prisma/schema.prisma\napps/api test: Prisma schema loaded from prisma/schema.prisma\napps/api test: Datasource \"db\": SQLite database \"tmp-lnurl-provider.db\" at \"file:./tmp-lnurl-provider.db\"\napps/api test: Datasource \"db\": SQLite database \"tmp-nostr.db\" at \"file:./tmp-nostr.db\"\napps/api test: The database is already in sync with the Prisma schema.\napps/api test: The database is already in sync with the Prisma schema.\napps/api test: Prisma schema loaded from prisma/schema.prisma\napps/api test: Datasource \"db\": SQLite database \"tmp-nip05-security.db\" at \"file:./tmp-nip05-security.db\"\napps/api test: The database is already in sync with the Prisma schema.\napps/api test:  ✓ src/routes/nostr-event.test.ts (13 tests) 2657ms\napps/api test:  ✓ src/routes/nostr-identity.test.ts (7 tests) 1755ms\napps/api test:  ✓ src/routes/lnurl-withdraw.test.ts (3 tests) 1706ms\napps/api test:  ✓ src/routes/lnurlp-callback.test.ts (4 tests) 2358ms\napps/api test:  ✓ src/routes/tips-ws.test.ts (2 tests) 2745ms\napps/api test:  ✓ src/routes/nostr-identity.security.test.ts (4 tests) 1246ms\napps/api test:  ✓ src/routes/lnurlp-provider.test.ts (3 tests) 2206ms\napps/api test:  ✓ src/nostr/nostr.test.ts (2 tests) 2245ms\napps/api test:  ✓ src/telemetry/url-guard.test.ts (9 tests) 6ms\napps/api test:  ✓ src/routes/regtest-pay.test.ts (4 tests) 2157ms\napps/api test:    ✓ regtest pay route \u003e returns 404 when regtest pay is disabled 1592ms\napps/api test:  ✓ src/nostr/nostr-utils.test.ts (7 tests) 6ms\napps/api test:  ✓ src/routes/telemetry-ws.test.ts (2 tests) 73ms\napps/api test:  ✓ src/telemetry/routes.test.ts (3 tests) 276ms\napps/api test:  ✓ src/services/bolt12.test.ts (1 test) 1ms\napps/api test: Prisma schema loaded from prisma/schema.prisma\napps/api test: Datasource \"db\": SQLite database \"tmp-lnurl-auth.db\" at \"file:./tmp-lnurl-auth.db\"\napps/api test: The database is already in sync with the Prisma schema.\napps/api test: Prisma schema loaded from prisma/schema.prisma\napps/api test: Datasource \"db\": SQLite database \"tmp-embed-config.db\" at \"file:./tmp-embed-config.db\"\napps/api test: The database is already in sync with the Prisma schema.\napps/api test: Prisma schema loaded from prisma/schema.prisma\napps/api test: Datasource \"db\": SQLite database \"tmp-cors.db\" at \"file:./tmp-cors.db\"\napps/api test: Prisma schema loaded from prisma/schema.prisma\napps/api test: Prisma schema loaded from prisma/schema.prisma\napps/api test: Datasource \"db\": SQLite database \"tmp-test.db\" at \"file:./tmp-test.db\"\napps/api test: Datasource \"db\": SQLite database \"tmp-regtest-fund.db\" at \"file:./tmp-regtest-fund.db\"\napps/api test: The database is already in sync with the Prisma schema.\napps/api test: The database is already in sync with the Prisma schema.\napps/api test: The database is already in sync with the Prisma schema.\napps/api test:  ✓ src/routes/lnurl-auth.test.ts (2 tests) 1542ms\napps/api test: {\"level\":40,\"time\":1767520851363,\"pid\":26543,\"hostname\":\"honk\",\"err\":{\"type\":\"TypeError\",\"message\":\"fetch failed: \",\"stack\":\"TypeError: fetch failed\\n    at node:internal/deps/undici/undici:14900:13\\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\\n    at rpcCall (/Users/honk/code/nostrstack/apps/api/src/telemetry/bitcoind.ts:49:19)\\n    at Object.fetchTipHeight (/Users/honk/code/nostrstack/apps/api/src/telemetry/providers.ts:37:23)\\n    at Module.registerTelemetryWs (/Users/honk/code/nostrstack/apps/api/src/routes/telemetry-ws.ts:120:19)\\n    at buildServer (/Users/honk/code/nostrstack/apps/api/src/server.ts:236:3)\\n    at /Users/honk/code/nostrstack/apps/api/src/server.test.ts:28:14\\n    at callSuiteHook (file:///Users/honk/code/nostrstack/node_modules/.pnpm/@vitest+runner@2.1.9/node_modules/@vitest/runner/dist/index.js:964:22)\\n    at runSuite (file:///Users/honk/code/nostrstack/node_modules/.pnpm/@vitest+runner@2.1.9/node_modules/@vitest/runner/dist/index.js:1175:29)\\n    at runSuite (file:///Users/honk/code/nostrstack/node_modules/.pnpm/@vitest+runner@2.1.9/node_modules/@vitest/runner/dist/index.js:1205:15)\\ncaused by: AggregateError: \\n    at internalConnectMultiple (node:net:1134:18)\\n    at afterConnectMultiple (node:net:1715:7)\"},\"msg\":\"telemetry initial tip fetch failed, switching to mock telemetry\"}\napps/api test:  ✓ src/routes/embed-config.test.ts (3 tests) 1485ms\napps/api test:  ✓ src/routes/regtest-fund.test.ts (1 test) 684ms\napps/api test:    ✓ regtest fund route \u003e returns 404 when regtest fund is disabled 683ms\napps/api test:  ✓ src/server.test.ts (2 tests) 1299ms\napps/api test:  ✓ src/server.cors.test.ts (2 tests) 1313ms\napps/api test:  Test Files  25 passed (25)\napps/api test:       Tests  105 passed (105)\napps/api test:    Start at  02:00:46\napps/api test:    Duration  5.40s (transform 954ms, setup 0ms, collect 6.34s, tests 26.07s, environment 3ms, prepare 2.27s)\napps/api test: Done\npackages/embed test$ vitest run\npackages/embed test:  RUN  v2.1.9 /Users/honk/code/nostrstack/packages/embed\npackages/embed test:  ✓ src/index.test.ts (13 tests) 106ms\npackages/embed test:  Test Files  1 passed (1)\npackages/embed test:       Tests  13 passed (13)\npackages/embed test:    Start at  02:00:51\npackages/embed test:    Duration  990ms (transform 124ms, setup 0ms, collect 189ms, tests 106ms, environment 372ms, prepare 57ms)\npackages/embed test: Done\npackages/blog-kit test$ vitest run\npackages/blog-kit test:  RUN  v2.1.9 /Users/honk/code/nostrstack/packages/blog-kit\npackages/blog-kit test:  ✓ src/lnurl.test.ts (6 tests) 7ms\npackages/blog-kit test:  ✓ src/nwc.test.ts (3 tests) 37ms\npackages/blog-kit test:  ✓ src/auth.test.tsx (10 tests) 31ms\npackages/blog-kit test:  ✓ src/post-editor.test.tsx (7 tests) 50ms\npackages/blog-kit test:  ✓ src/send-sats.test.tsx (3 tests) 100ms\npackages/blog-kit test:  ✓ src/index.test.tsx (12 tests) 70ms\npackages/blog-kit test:  Test Files  6 passed (6)\npackages/blog-kit test:       Tests  41 passed (41)\npackages/blog-kit test:    Start at  02:00:53\npackages/blog-kit test:    Duration  1.40s (transform 541ms, setup 817ms, collect 1.37s, tests 295ms, environment 2.70s, prepare 520ms)\npackages/blog-kit test: Done\napps/gallery test$ vitest run\napps/gallery test:  RUN  v2.1.9 /Users/honk/code/nostrstack/apps/gallery\napps/gallery test:  ✓ src/utils/navigation.test.tsx (3 tests) 19ms\napps/gallery test:  ✓ src/nostr/eventRenderers.test.tsx (4 tests) 50ms\napps/gallery test:  ✓ src/utils/identity.test.tsx (10 tests) 34ms\napps/gallery test:  ✓ src/App.test.tsx (1 test) 32ms\napps/gallery test:  Test Files  4 passed (4)\napps/gallery test:       Tests  18 passed (18)\napps/gallery test:    Start at  02:00:54\napps/gallery test:    Duration  1.38s (transform 438ms, setup 0ms, collect 1.19s, tests 135ms, environment 1.53s, prepare 261ms)\napps/gallery test: Done\n\n\u003e nostrstack@0.0.0 typecheck /Users/honk/code/nostrstack\n\u003e pnpm -r typecheck\n\nScope: 8 of 9 workspace projects\napps/api typecheck$ tsc --noEmit\npackages/sdk typecheck$ tsc --noEmit\npackages/sdk typecheck: Done\napps/api typecheck: Done\npackages/embed typecheck$ tsc --noEmit\npackages/embed typecheck: Done\npackages/blog-kit typecheck$ tsc --noEmit\npackages/blog-kit typecheck: Done\napps/gallery typecheck$ tsc --noEmit\napps/gallery typecheck: Done\n\n## Close Notes (fill in at closure)\n- Issues encountered: \n- Setup improvements: \n- Debug info that would have helped: ","status":"tombstone","priority":2,"issue_type":"bug","created_at":"2026-01-04T02:01:08.387869-08:00","updated_at":"2026-01-04T02:03:37.403474-08:00","deleted_at":"2026-01-04T02:03:37.403474-08:00","deleted_by":"honk","delete_reason":"manual delete","original_type":"bug"}
{"id":"lightning-1enn","title":"Feat: Thread/Reply Loading \u0026 Display","description":"Enhance the post detail view to fetch and display replies.\n\nDescription:\n- Update `NostrEventView` (or create a new `ThreadView`) to query for events referencing the current event ID (`#e`).\n- Render replies in a linear list below the main post.\n- Reuse `PostItem` for consistency.\n- Implement 'Load More' if needed.\n\nAcceptance Criteria:\n- navigating to `/nostr/:id` loads the event AND its replies.\n- Replies are sorted chronologically.\n- Thread view feels cohesive.\n\nEdge Cases:\n- Missing replies (empty state).\n- Spam/unrelated events (basic filtering if possible, otherwise raw list).\n\n## Files\n- apps/gallery/src/NostrEventView.tsx (modify: add reply fetching)\n- apps/gallery/src/nostr/api.ts (modify: add fetchReplies helper)\n- apps/gallery/src/gallery.css (modify: thread styles)\n\n## QA Evidence\n- Playwright: Test loading a thread with known replies.\n- Screenshots: `docs/screenshots/social/thread-view.png`","status":"tombstone","priority":2,"issue_type":"task","created_at":"2026-01-03T00:48:34.700209-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","dependencies":[{"issue_id":"lightning-1enn","depends_on_id":"lightning-1uzs","type":"parent-child","created_at":"2026-01-03T00:48:34.702818-08:00","created_by":"honk"},{"issue_id":"lightning-1enn","depends_on_id":"lightning-5lg3","type":"blocks","created_at":"2026-01-03T00:55:18.024034-08:00","created_by":"honk"}],"deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"lightning-1ic","title":"Populate profile details panel","description":"Profile details section renders empty. Fetch and display Nostr metadata (name/display, about, nip05, lud16, website, picture) with loading/empty states and error messaging. Include copy buttons for npub/hex where relevant. Acceptance: real metadata shown for a signer with profile, graceful fallback when missing, and works in light/dark. Final step: verify via Chrome DevTools MCP (load a profile, capture screenshot).","status":"tombstone","priority":2,"issue_type":"task","created_at":"2025-12-02T16:19:58.374727-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","labels":["demo","nostr"],"deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"lightning-1ik","title":"Invoice modal lacks dismiss/timeout","description":"Real invoice modal stays 'Waiting for payment' with no close/timeout; add close button and status handling.","status":"tombstone","priority":2,"issue_type":"task","created_at":"2025-12-02T14:54:20.891934-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","labels":["demo","payments"],"deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"lightning-1kbq","title":"Epic: LNURL-withdraw payouts","description":"Complete lnurl-withdraw payouts feature.\n\n## Objective\nDeliver the end-to-end capability with backend, frontend, security, and tests.\n\n## Success Criteria\n- [ ] Feature can be used end-to-end in the gallery.\n- [ ] API endpoints are guarded and validated.\n- [ ] Tests cover primary flows and guard rails.\n\n## Out of Scope\n- Accessibility updates.\n- Documentation updates.\n","status":"tombstone","priority":2,"issue_type":"epic","created_at":"2025-12-19T18:37:55.498091-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","dependencies":[{"issue_id":"lightning-1kbq","depends_on_id":"lightning-61qz","type":"parent-child","created_at":"2025-12-19T18:37:55.499611-08:00","created_by":"honk","metadata":"{}"}],"deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"epic"}
{"id":"lightning-1oq","title":"Logs tab frontend capture has no visible output/indicator","description":"Toggling 'Capture frontend console' shows no logs or status. Add visible indicator and ensure console overrides emit to viewer with test message.","status":"tombstone","priority":1,"issue_type":"task","created_at":"2025-12-02T14:53:29.016335-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","labels":["demo","frontend","logging"],"deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"lightning-1ot","title":"Invoice status over WebSocket","description":"Use WebSocket (pay-events hub) to stream invoice status (pending/settled/failed) to QR popover. Update gallery UI to mark paid in real time and auto-close. Add server endpoint bridging LND invoice subscriptions (regtest).","status":"tombstone","priority":1,"issue_type":"task","created_at":"2025-12-02T11:31:34.434602-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"lightning-1r7v","title":"Obs: Telemetry WS backpressure metrics","description":"Add telemetry polling failure metrics for backpressure/timeout visibility.\n\nImplementation notes:\n- Add telemetry_poll_failures_total counter in apps/api/src/telemetry/metrics.ts with a reason label.\n- Increment the counter in telemetry-ws for backpressure, timeout, and generic RPC errors.\n\nAcceptance criteria:\n- Metrics registry exposes telemetry_poll_failures_total with reason label.\n- Backpressure and timeout paths increment the counter without extra log spam.\n\nEdge cases:\n- Multiple consecutive failures should increment appropriately.\n\n## Files\n- apps/api/src/telemetry/metrics.ts (modify: add counter)\n- apps/api/src/routes/telemetry-ws.ts (modify: increment counter)\n\n## QA Evidence\n- Playwright: N/A (backend only)\n- Screenshots: N/A\n- DevTools MCP: N/A\n- Logs: tail -f .logs/dev/api.log .logs/dev/gallery.log (NO_COLOR warnings observed; follow-up lightning-dds0)\n- CI: pnpm --filter api test \u0026\u0026 pnpm lint\n\n## Close Notes\n- Issues encountered: oracle.sh failed because Claude model 'sonnet' unavailable (exit 1).\n- Setup improvements: track NO_COLOR warnings in lightning-dds0.\n- Debug info that would have helped: oracle CLI summary for failed model.","acceptance_criteria":"Telemetry poll failures are recorded as metrics","status":"tombstone","priority":3,"issue_type":"task","assignee":"unassigned","estimated_minutes":90,"created_at":"2026-01-01T02:13:19.67515-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","close_reason":"Implemented","labels":["area:api","feature:personal-site-kit"],"dependencies":[{"issue_id":"lightning-1r7v","depends_on_id":"lightning-39zu","type":"parent-child","created_at":"2026-01-01T02:13:19.677802-08:00","created_by":"honk"},{"issue_id":"lightning-1r7v","depends_on_id":"lightning-wglx","type":"blocks","created_at":"2026-01-01T02:13:19.680218-08:00","created_by":"honk"}],"deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"lightning-1t2o","title":"DevTools MCP: fix Transport closed","description":"Investigate and fix Chrome DevTools MCP \"Transport closed\" failures when running the nostrstack dev workflow.\n\nAcceptance criteria:\n- `./scripts/mcp-devtools-server.sh` + `./scripts/mcp-chrome.sh` yield a stable MCP connection.\n- `chrome-devtools` MCP list_pages succeeds without Transport closed errors.\n- Docs updated with troubleshooting steps or known limitations if applicable.\n\nEdge cases:\n- Existing chrome-devtools-mcp process already running.\n- Port conflicts or stale sockets.\n- Chrome profile/flags preventing remote debugging.\n\n## Files\n- scripts/mcp-devtools-server.sh (modify: add checks/retry/dedupe)\n- scripts/mcp-chrome.sh (modify: ensure remote-debugging port stability)\n- docs/mcp-setup.md (modify: troubleshooting guidance)\n- docs/dev-logs-and-ui-checks.md (modify: MCP reliability notes)\n- docs/testing.md (modify: fallback guidance if MCP unavailable)\n\n## QA Evidence\n- MCP: node ~/.codex/skills/chrome-devtools-mcp-singleton/scripts/mcp-client/mcp-client-test.mjs (list_pages succeeds)\n- Logs: .logs/dev/mcp-devtools.log checked\n- CI: pnpm check (pass)\n\n## Close Notes\n- Issues encountered: codex mcp tool still returns Transport closed despite config updates; mcp-client test succeeds.\n- Setup improvements: document that Codex may need restart after MCP config changes; keep Node memory override for chrome-devtools-mcp.\n- Debug info that would have helped: MCP tool stderr on spawn failure to confirm PATH/node availability.\n","status":"tombstone","priority":3,"issue_type":"bug","assignee":"honk","estimated_minutes":120,"created_at":"2026-01-04T04:07:38.924298-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","close_reason":"Implemented","labels":["devtools","qa","tooling"],"dependencies":[{"issue_id":"lightning-1t2o","depends_on_id":"lightning-3aij","type":"parent-child","created_at":"2026-01-04T04:07:38.929166-08:00","created_by":"honk"}],"deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"bug"}
{"id":"lightning-1t6","title":"Demo UI invoices use wrong host","description":"Gallery real-invoice button sends host=demo.nostrstack.lol; fails on localhost regtest. Use configured VITE_NOSTRSTACK_HOST or current host instead.","status":"tombstone","priority":1,"issue_type":"task","created_at":"2025-12-01T13:08:14.055012-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"lightning-1uzs","title":"Epic: Social Interactivity (Replies, Media, Reactions)","description":"Make the gallery feed interactive and visually rich.\n\n## Objective\nTransform the read-only feed into an interactive social stream where users can reply, like, and view rich media.\n\n## Success Criteria\n- [ ] Images and videos render inline in the feed.\n- [ ] Users can 'Like' (Kind 7) a post.\n- [ ] Users can 'Reply' (Kind 1) to a post, adhering to NIP-10.\n- [ ] Post detail view ('/nostr/:id') fetches and displays replies.\n\n## QA Evidence Requirements\n- Playwright coverage for new flows (replying, liking).\n- Screenshots of media rendering and reply threads.\n- DevTools MCP checks (console/network clean).\n- FE/BE logs reviewed (no errors/warnings).\n- CI green proof.\n\n## Risks/Assumptions\n- Media loading might impact performance (lazy load required).\n- Reply threads can be deep; linear list is acceptable for v1.","status":"tombstone","priority":2,"issue_type":"epic","created_at":"2026-01-02T23:06:22.447699-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"epic"}
{"id":"lightning-1ymu","title":"Docs: Update payment UX and developer notes","description":"Document the new profile payments flow, configuration, and zap journey.\n\nAcceptance criteria:\n- Docs describe how to use SendSats, required lightning address fields, and config env vars.\n- Include screenshots or references (optional).\n- Mention NWC/WebLN/QR fallback behavior.\n\nEdge cases to handle:\n- Development toggles and missing LN address.\n\nNote: Always be looking for refactoring opportunities, bug fixes, and improvements. Create new tasks as you encounter them.\n\n## Files\n- docs/payments.md (create: profile payments + zaps)\n- README.md (modify: link to payments doc)","status":"tombstone","priority":2,"issue_type":"task","created_at":"2025-12-20T13:11:14.249449-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","dependencies":[{"issue_id":"lightning-1ymu","depends_on_id":"lightning-01t7","type":"parent-child","created_at":"2025-12-20T13:11:14.250916-08:00","created_by":"honk","metadata":"{}"},{"issue_id":"lightning-1ymu","depends_on_id":"lightning-7gdg","type":"blocks","created_at":"2025-12-20T13:11:45.216788-08:00","created_by":"honk","metadata":"{}"}],"deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"lightning-1z8","title":"Npub bar shows raw hex and truncation not responsive","description":"Npub bar sometimes shows hex string even when npub toggle selected; truncation doesn’t adapt to viewport. Fix format selection, ensure default npub encoding, and make truncation width-responsive.","status":"tombstone","priority":1,"issue_type":"bug","created_at":"2025-12-03T01:28:29.685182-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"bug"}
{"id":"lightning-274","title":"Fix telemetry polling errors in dev","description":"API logs spam \"{\\\"err\\\":{}} telemetry block poll failed\" in dev; telemetry websocket never emits. Likely missing REGTEST_COMPOSE/REGTEST_CWD configuration or bad path resolution. Investigate polling job, ensure it finds docker compose and regtest data, and quiets repeated errors. Acceptance: telemetry feed produces events in UI, log spam gone, and failures surface once with actionable message. Final step: verify via Chrome DevTools MCP (watch log viewer + telemetry card) and attach screenshot showing live events.","status":"tombstone","priority":2,"issue_type":"task","created_at":"2025-12-02T16:20:52.622936-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","labels":["demo","infra"],"deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"lightning-29r","title":"Improve invoice pending indicator (no spinning text)","description":"Redesigned InvoicePopover ring to remove spinning label and use breathe pulse; ensure waiting status legible.","notes":"Stopped rotating pending ring in InvoicePopover; added breathe halo animation instead of spin.","status":"tombstone","priority":2,"issue_type":"bug","created_at":"2025-12-03T11:57:56.362208-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"bug"}
{"id":"lightning-2av","title":"NIP-05 badge and lightning address display","description":"Fetch metadata for logged-in nostr user; render NIP-05 verification badge if present/valid; display lightning address if available.","status":"tombstone","priority":1,"issue_type":"task","created_at":"2025-12-02T12:45:48.344024-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"lightning-2bsi","title":"Core UI: BOLT12 offers + subscriptions view","description":"Add a compact UI for creating offers and managing subscriptions.\n\nImplementation Steps:\n- Add a new Offers view with create/copy/pay actions.\n- Render offer strings + QR using existing QR component.\n- Wire UI to the API endpoints and show status.\n\nAcceptance Criteria:\n- Offers can be created and displayed in the gallery UI.\n- Pay/subscribe flow surfaces invoice + status.\n\nEdge Cases:\n- Offline provider shows retry state.\n\n## Files\n- apps/gallery/src/OffersView.tsx (create: offers UI)\n- apps/gallery/src/App.tsx (modify: register Offers view)\n- apps/gallery/src/Sidebar.tsx (modify: add nav entry)\n- apps/gallery/src/gallery.css (modify: offers styles)\n- packages/blog-kit/src/offer-widget.tsx (create: reusable offer widget)","status":"tombstone","priority":2,"issue_type":"task","created_at":"2025-12-19T18:47:26.650851-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","dependencies":[{"issue_id":"lightning-2bsi","depends_on_id":"lightning-8i8k","type":"parent-child","created_at":"2025-12-19T18:47:26.653312-08:00","created_by":"honk","metadata":"{}"},{"issue_id":"lightning-2bsi","depends_on_id":"lightning-5dne","type":"blocks","created_at":"2025-12-19T18:49:12.224817-08:00","created_by":"honk","metadata":"{}"},{"issue_id":"lightning-2bsi","depends_on_id":"lightning-9o0y","type":"blocks","created_at":"2025-12-19T18:49:15.138805-08:00","created_by":"honk","metadata":"{}"}],"deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"lightning-2dn","title":"dev start flaps when api already running (EADDRINUSE 3001)","description":"make dev failed because port 3001 was occupied by earlier api; add preflight to kill/exit cleanly or reuse same process.","status":"tombstone","priority":2,"issue_type":"task","created_at":"2025-12-03T18:12:46.46437-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"lightning-2h7","title":"Telemetry WS still closes with self-signed/localhost","description":"Console shows WebSocket closed before connection when hitting wss://localhost:4173/ws/telemetry in gallery dev. Need to detect self-signed/mixed-content failures and surface actionable guidance or fallback. Screenshot codex-clipboard-uPlL1s.png shows error at TelemetryCard.tsx:187.","status":"tombstone","priority":1,"issue_type":"bug","created_at":"2025-12-03T08:51:20.017078-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"bug"}
{"id":"lightning-2ij","title":"Regtest demo UX + browser coverage","description":"Polish the gallery demo for regtest lightning with real Nostr relays and make every component (tip, paywall, comments) validated via browser tests and docs.","notes":"Regtest demo polished with env badges, built-in test signer, and expanded Playwright coverage (mock + regtest real relays).","status":"tombstone","priority":1,"issue_type":"epic","created_at":"2025-12-01T21:54:47.154844-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"epic"}
{"id":"lightning-2ij.1","title":"Gallery regtest UX polish + config helpers","description":"Make the gallery demo clearly regtest-friendly: show active host/api/lnbits statuses, surface regtest wallet info (copyable invoices/admin key), improve layout/theme, and make relay selection + persistence obvious for real Nostr vs mock.","acceptance_criteria":"Page surfaces api/lnbits health + host; regtest wallet info shown and copyable; relays input defaults to real list with mock fallback note; UI theme/layout cleaned up without breaking widgets.","notes":"Added env pill row + relay presets/copy, polished cards/layout, wallet copy buttons, status panel; tests: pnpm --filter gallery test, pnpm --filter gallery typecheck.","status":"tombstone","priority":1,"issue_type":"task","created_at":"2025-12-01T21:55:04.776992-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","dependencies":[{"issue_id":"lightning-2ij.1","depends_on_id":"lightning-2ij","type":"parent-child","created_at":"2025-12-01T21:55:04.777692-08:00","created_by":"honk","metadata":"{}"}],"deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"lightning-2ij.2","title":"Provide built-in Nostr test signer for regtest demo","description":"Bundle a deterministic NIP-07 shim (disabled by default) so the gallery can post to real relays in CI/regtest without a browser extension; include env/UX switch and document key handling.","acceptance_criteria":"Toggle or env to enable test signer; posts to real relay succeed without external extension when enabled; mock mode remains unchanged.","notes":"Added built-in test signer toggle (env + UI) with nostr-tools Relay shim; relays re-mount when enabled; env sample updated; tests: pnpm --filter gallery test, pnpm --filter gallery typecheck.","status":"tombstone","priority":1,"issue_type":"task","created_at":"2025-12-01T21:55:14.022597-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","dependencies":[{"issue_id":"lightning-2ij.2","depends_on_id":"lightning-2ij","type":"parent-child","created_at":"2025-12-01T21:55:14.023311-08:00","created_by":"honk","metadata":"{}"}],"deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"lightning-2ij.3","title":"Playwright: regtest coverage for all demo components","description":"Expand browser tests to exercise tip, paywall, comments (mock + real relay) in regtest stack with real invoices paid via lnd-payer. Add fixtures/env wiring and ensure tests assert relay badge + theme switching.","acceptance_criteria":"Tests run with REGTEST_SMOKE=true validate tip/paywall real invoices, comments post to real relay when signer enabled, relay badge/theme assertions included; docs for running locally.","notes":"Playwright helpers for relays/test signer, regtest smoke exercises built-in signer + real relays, mock suite now checks relay badge/theme. Fixed webServer cwd and added docs in apps/gallery/README.md. Tests: pnpm --filter gallery test; pnpm --filter gallery typecheck; pnpm --filter gallery exec playwright test tests/demo-flows.spec.ts (regtest/comment-relay specs skipped without env).","status":"tombstone","priority":1,"issue_type":"task","created_at":"2025-12-01T21:55:22.565925-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","dependencies":[{"issue_id":"lightning-2ij.3","depends_on_id":"lightning-2ij","type":"parent-child","created_at":"2025-12-01T21:55:22.566772-08:00","created_by":"honk","metadata":"{}"}],"deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"lightning-2l1","title":"Regtest demo bring-up and full test pass","description":"Spin up regtest demo end-to-end (bitcoind/LND/LNbits + API + gallery), then run smoke + Playwright regtest flows to ensure tip/pay/comments work.","notes":"Ran regtest bring-up manually (regtest stack running). Smoke: pnpm smoke:regtest-demo (invoice+pay succeeded). Playwright UI: VITE_NOSTRSTACK_RELAYS=mock VITE_ENABLE_TEST_SIGNER=true pnpm --filter gallery exec playwright test tests/demo-flows.spec.ts (all passed).","status":"tombstone","priority":1,"issue_type":"task","created_at":"2025-12-02T08:02:49.947832-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"lightning-2lx","title":"Satoshis.lol platform baseline","description":"Goals: multi-tenant Lightning+Nostr backend with SDK/widgets; minimal integration (script tag or SDK); avoid custody/long-term balances. Domains: Lightning tips/zaps, pay-to-unlock/pay-to-act, Nostr login/comments, NIP-05 \u0026 Lightning Address per domain. Architecture summary: User browser -\u003e website -\u003e embed/SDK -\u003e HTTPS API (multi-tenant) -\u003e DB (Prisma+Postgres), LightningProvider (OpenNode/LNbits/LND), NostrClient -\u003e relays. Core components: backend API (multi-tenant routing, LNURLp/Lightning Address endpoints, NIP-05, payment+webhook handling, tenant+user mgmt), LightningProvider abstraction (OpenNode initial; future LNbits/LND), NostrClient abstraction (nostr-tools wrapper; swap to NDK later), DB layer (Postgres prod, SQLite dev/tests, Prisma), client SDK @satoshis/sdk (typed TS, aligned with OpenAPI), embed bundle @satoshis/embed (tip, comments w/ Nostr login, pay-to-action; script tag or npm), optional Next.js gallery app for docs/demos. Work via Beads; AGENTS.md for flow. Logical architecture diagram preserved in commit history.","status":"tombstone","priority":1,"issue_type":"epic","created_at":"2025-11-28T09:29:14.948285-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"epic"}
{"id":"lightning-2lx.1","title":"Backend API: multi-tenant LN + Nostr endpoints","description":"Deliver Fastify/TS API with: multi-tenant domain routing; LNURLp + Lightning Address endpoints; NIP-05 /.well-known/nostr.json; payment + webhook handling; tenant + user management; health/telemetry. Must align with non-custodial goal and support white-label per-domain NIP-05 \u0026 lightning addresses.","status":"tombstone","priority":1,"issue_type":"task","created_at":"2025-11-28T09:29:26.384508-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","dependencies":[{"issue_id":"lightning-2lx.1","depends_on_id":"lightning-2lx","type":"parent-child","created_at":"2025-11-28T09:29:26.385346-08:00","created_by":"honk","metadata":"{}"}],"deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"lightning-2lx.2","title":"LightningProvider abstraction (OpenNode first)","description":"Implement provider interface; initial OpenNodeProvider; future LNbits/LND ready. Must support charge creation, webhook verification, metadata passthrough. Honor non-custodial stance.","status":"tombstone","priority":2,"issue_type":"task","created_at":"2025-11-28T09:29:37.065554-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","dependencies":[{"issue_id":"lightning-2lx.2","depends_on_id":"lightning-2lx","type":"parent-child","created_at":"2025-11-28T09:29:37.066605-08:00","created_by":"honk","metadata":"{}"}],"deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"lightning-2lx.3","title":"NostrClient abstraction","description":"Thin wrapper over nostr-tools initially; supports signing/publishing (zaps/system events); swappable to NDK later; relay config via env.","status":"tombstone","priority":2,"issue_type":"task","created_at":"2025-11-28T09:29:53.895645-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","dependencies":[{"issue_id":"lightning-2lx.3","depends_on_id":"lightning-2lx","type":"parent-child","created_at":"2025-11-28T09:29:53.896347-08:00","created_by":"honk","metadata":"{}"}],"deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"lightning-2lx.4","title":"Database layer: Postgres prod / SQLite dev-tests","description":"Prisma ORM; Postgres in production; SQLite for dev/tests if desired; migrations maintained; multi-tenant schema supports tenants/users/payments; align with no-custody principle.","status":"tombstone","priority":2,"issue_type":"task","created_at":"2025-11-28T09:30:06.98851-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","dependencies":[{"issue_id":"lightning-2lx.4","depends_on_id":"lightning-2lx","type":"parent-child","created_at":"2025-11-28T09:30:06.989358-08:00","created_by":"honk","metadata":"{}"}],"deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"lightning-2lx.5","title":"Client SDK @satoshis/sdk","description":"Typed TS client for integrators; generated or aligned with OpenAPI; minimal integration surface for LNURLp, NIP-05, payments, comments/zaps.","status":"tombstone","priority":2,"issue_type":"task","created_at":"2025-11-28T09:30:21.70534-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","dependencies":[{"issue_id":"lightning-2lx.5","depends_on_id":"lightning-2lx","type":"parent-child","created_at":"2025-11-28T09:30:21.706385-08:00","created_by":"honk","metadata":"{}"}],"deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"lightning-2lx.6","title":"Embed bundle @satoshis/embed","description":"Browser widgets: tip button, comments with Nostr login, generic pay-to-action; usable via \u003cscript\u003e or npm import; themeable/minimal integration.","status":"tombstone","priority":2,"issue_type":"task","created_at":"2025-11-28T09:30:33.128452-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","dependencies":[{"issue_id":"lightning-2lx.6","depends_on_id":"lightning-2lx","type":"parent-child","created_at":"2025-11-28T09:30:33.129171-08:00","created_by":"honk","metadata":"{}"}],"deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"lightning-2lx.7","title":"Gallery app (Next.js) for docs/demos","description":"Optional apps/gallery: Next.js UI for docs, demos, internal dashboards; showcases embed + SDK flows.","status":"tombstone","priority":3,"issue_type":"task","created_at":"2025-11-28T09:30:46.849642-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","dependencies":[{"issue_id":"lightning-2lx.7","depends_on_id":"lightning-2lx","type":"parent-child","created_at":"2025-11-28T09:30:46.850702-08:00","created_by":"honk","metadata":"{}"}],"deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"lightning-2lx.8","title":"Non-custodial + multi-tenant constraints","description":"Ensure no long-term custody; per-domain white-label Lightning Address \u0026 NIP-05; minimal integration friction; support many domains on one backend.","status":"tombstone","priority":1,"issue_type":"task","created_at":"2025-11-28T09:31:01.022833-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","dependencies":[{"issue_id":"lightning-2lx.8","depends_on_id":"lightning-2lx","type":"parent-child","created_at":"2025-11-28T09:31:01.023561-08:00","created_by":"honk","metadata":"{}"}],"deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"lightning-2lx.9","title":"Developer workflow alignment","description":"Document AGENTS.md, Beads usage; ensure contributors follow bd workflows; keep architecture updates synced.","status":"tombstone","priority":3,"issue_type":"task","created_at":"2025-11-28T09:31:11.89885-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","dependencies":[{"issue_id":"lightning-2lx.9","depends_on_id":"lightning-2lx","type":"parent-child","created_at":"2025-11-28T09:31:11.899683-08:00","created_by":"honk","metadata":"{}"}],"deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"lightning-2qm","title":"Regtest SubscribeInvoices as backup payment signal","description":"SubscribeInvoices on lnd-merchant in regtest and use it as secondary payment signal: update DB payment status and broadcast /ws/pay when invoice settles to cover LNbits/webhook gaps.","status":"tombstone","priority":2,"issue_type":"feature","created_at":"2025-12-03T14:44:05.400228-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","labels":["backend","lnd","regtest"],"deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"feature"}
{"id":"lightning-2r5d","title":"Skill: nostrstack-nostr","description":"Create the nostrstack-nostr skill for Nostr IDs, reference resolution, and NIP-05 behavior.\n\nAcceptance criteria:\n- SKILL.md documents identifier handling and relay/cache guardrails.\n- References include API contract, reference resolution rules, and identity resolution.\n- Reminder included to look for refactors/bugs and open new issues.\n\n## Files\n- ~/.codex/skills/nostrstack-nostr/SKILL.md (create)\n- ~/.codex/skills/nostrstack-nostr/references/ids-and-api.md (create)\n- ~/.codex/skills/nostrstack-nostr/references/references.md (create)\n- ~/.codex/skills/nostrstack-nostr/references/identity-resolution.md (create)","status":"tombstone","priority":2,"issue_type":"task","created_at":"2025-12-26T16:50:34.364376-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","dependencies":[{"issue_id":"lightning-2r5d","depends_on_id":"lightning-eo3j","type":"parent-child","created_at":"2025-12-26T16:50:34.366409-08:00","created_by":"honk"},{"issue_id":"lightning-2r5d","depends_on_id":"lightning-xmw5","type":"blocks","created_at":"2025-12-26T16:51:30.001227-08:00","created_by":"honk"}],"deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"lightning-2ser","title":"UI Spec: Personal Site Kit widgets + layout","description":"Create UI/UX spec for the Personal Site Kit widgets and sections.\n\nImplementation notes:\n- Wireframes for Support section (tip + share + comments), Nostr profile section, blockchain stats card, and real time tip feed.\n- Define responsive behavior, loading/error/empty states, and accessibility requirements.\n- Reference nostrstack tokens and class naming conventions.\n\nAcceptance criteria:\n- Spec includes desktop + mobile layouts and key states.\n- A11y checklist included (focus, aria labels, contrast).\n- Motion guidance respects prefers-reduced-motion.\n\nEdge cases:\n- Long content, missing data, offline state.\n\n## Files\n- docs/design/personal-site-kit-ui.md (create)\n- docs/design-system.md (modify: add new component classes + token notes)\n\n## QA Evidence\n- Playwright: N/A (docs only)\n- Screenshots: N/A\n- DevTools MCP: N/A\n- Logs: N/A\n- CI: pnpm lint:md\n\n## Close Notes (fill in at closure)\n- Issues encountered: oracle.sh failed (Claude model) so no critique output.\n- Setup improvements: none.\n- Debug info that would have helped: oracle CLI failure details.","acceptance_criteria":"Widget wireframes and states documented","status":"tombstone","priority":2,"issue_type":"task","assignee":"unassigned","estimated_minutes":180,"created_at":"2025-12-31T18:34:13.468205-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","close_reason":"Implemented","labels":["area:design","feature:personal-site-kit"],"dependencies":[{"issue_id":"lightning-2ser","depends_on_id":"lightning-39zu","type":"parent-child","created_at":"2025-12-31T18:34:13.470493-08:00","created_by":"honk"},{"issue_id":"lightning-2ser","depends_on_id":"lightning-gfaq","type":"blocks","created_at":"2025-12-31T18:38:46.702975-08:00","created_by":"honk"}],"deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"lightning-2uaf","title":"Core UI: LNURL-auth login flow","description":"Add a LNURL-auth login option in the gallery.\n\nImplementation Steps:\n- Add \"Login with Lightning\" CTA and QR modal.\n- Poll auth status and complete login when verified.\n- Fall back to existing login methods when disabled.\n\nAcceptance Criteria:\n- Users can login via LNURL-auth QR.\n- UI shows status updates and errors.\n\nEdge Cases:\n- Polling timeout shows retry option.\n\n\n## Files\n- apps/gallery/src/LoginView.tsx (modify: add LNURL-auth option + modal)\n- apps/gallery/src/styles/lnurl-auth.css (create: LNURL-auth UI styles)\n- packages/blog-kit/src/auth.tsx (modify: expose LNURL-auth login handler)","status":"tombstone","priority":2,"issue_type":"task","created_at":"2025-12-19T18:37:57.270187-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","dependencies":[{"issue_id":"lightning-2uaf","depends_on_id":"lightning-j0ns","type":"parent-child","created_at":"2025-12-19T18:37:57.271848-08:00","created_by":"honk","metadata":"{}"},{"issue_id":"lightning-2uaf","depends_on_id":"lightning-tolk","type":"blocks","created_at":"2025-12-19T18:49:06.967915-08:00","created_by":"honk","metadata":"{}"}],"deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"lightning-2wc","title":"Dev server hot reload unreliable","description":"API/gallery dev sometimes fails to reload on code changes; need to ensure pnpm dev tasks run with proper watch flags and restart on file edits.","status":"tombstone","priority":1,"issue_type":"task","created_at":"2025-12-03T19:02:12.645196-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"lightning-2y0","title":"Alive surfaces v2 (nostr + lightning)","description":"Deep-pass UI/UX polish to make nostr and lightning components feel alive: relays, profile, npub bar, invoice animations, telemetry block stats.","status":"tombstone","priority":1,"issue_type":"epic","created_at":"2025-12-02T21:46:27.428915-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"epic"}
{"id":"lightning-2y0.1","title":"Relay cards don't reflect live activity","description":"Relay chip shows no updates while posting. Fix event wiring so recv/send counters, last-seen timestamps, and status dot pulse update on every nostr event we generate/receive. Also retry nip11 meta fetch and avoid zeroed sparkline.","status":"tombstone","priority":1,"issue_type":"bug","created_at":"2025-12-02T21:46:38.178482-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","dependencies":[{"issue_id":"lightning-2y0.1","depends_on_id":"lightning-2y0","type":"parent-child","created_at":"2025-12-02T21:46:38.179436-08:00","created_by":"honk","metadata":"{}"}],"deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"bug"}
{"id":"lightning-2y0.2","title":"Nostr profile card v2: dense + animated signer","description":"Redesign profile card: animated signer halo, relay sparks, inline badges (nip05, lud16, website), live note-send state, compact info grid. Keep responsive and dark/light.","status":"tombstone","priority":1,"issue_type":"feature","created_at":"2025-12-02T21:46:52.361295-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","dependencies":[{"issue_id":"lightning-2y0.2","depends_on_id":"lightning-2y0","type":"parent-child","created_at":"2025-12-02T21:46:52.362432-08:00","created_by":"honk","metadata":"{}"}],"deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"feature"}
{"id":"lightning-2y0.3","title":"Npub copy bar: lively microinteraction","description":"Ship a compact copy-to-clipboard bar with animated icon/success, tap targets, and keyboard focus. Supports npub/hex toggle, fits in tight cards. Replace existing KeyBar/KeyChip instances.","status":"tombstone","priority":1,"issue_type":"feature","created_at":"2025-12-02T21:47:02.702189-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","dependencies":[{"issue_id":"lightning-2y0.3","depends_on_id":"lightning-2y0","type":"parent-child","created_at":"2025-12-02T21:47:02.703464-08:00","created_by":"honk","metadata":"{}"}],"deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"feature"}
{"id":"lightning-2y0.4","title":"Invoice popover v3: remove header copy, bolder success","description":"Use header space for animated payment state (radial + confetti); keep only bottom BOLT11 copy; tighten progress bar speed; success celebration and timeout copy clear.","status":"tombstone","priority":1,"issue_type":"feature","created_at":"2025-12-02T21:47:15.424142-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","dependencies":[{"issue_id":"lightning-2y0.4","depends_on_id":"lightning-2y0","type":"parent-child","created_at":"2025-12-02T21:47:15.425854-08:00","created_by":"honk","metadata":"{}"}],"deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"feature"}
{"id":"lightning-2y0.5","title":"Telemetry block card: always show txs/size/weight/mempool","description":"Block telemetry must never show empty stats; cache last good values and retry until filled. Add top banner with time-since-last-block and animated block icon; dedupe events.","status":"tombstone","priority":1,"issue_type":"bug","created_at":"2025-12-02T21:47:26.053977-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","dependencies":[{"issue_id":"lightning-2y0.5","depends_on_id":"lightning-2y0","type":"parent-child","created_at":"2025-12-02T21:47:26.054865-08:00","created_by":"honk","metadata":"{}"}],"deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"bug"}
{"id":"lightning-2y0.6","title":"Relay activity ribbon + decay","description":"Add a relay view that shows last N events as sliding ribbon pills; send/recv badges fade after 5s; tooltips show exact timestamps; retry nip11 meta on backoff.","status":"tombstone","priority":1,"issue_type":"feature","created_at":"2025-12-02T23:12:04.86143-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","dependencies":[{"issue_id":"lightning-2y0.6","depends_on_id":"lightning-2y0","type":"parent-child","created_at":"2025-12-02T23:12:04.862662-08:00","created_by":"honk","metadata":"{}"}],"deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"feature"}
{"id":"lightning-2y3t","title":"Security: Validation + signature checks + safe rendering","description":"Harden the event pipeline against malformed input and unsafe rendering.\n\nAcceptance Criteria:\n- Reject unsupported IDs, overly long inputs, and non-wss relay URLs (unless allowlisted).\n- Verify event signatures/id consistency before caching or rendering.\n- Ensure content is rendered as text (no HTML injection) and external links use rel=noopener/noreferrer.\n- Include the standing note: while working, look for refactoring opportunities/bugs/improvements and create new bd tasks as they surface.\n\nEdge Cases:\n- Events with invalid signatures or mismatched id\n- Profiles with malformed JSON\n- Malicious nostr: URIs\n\n## Files\n- apps/api/src/nostr/event-resolver.ts (modify: validation + signature checks)\n- apps/api/src/routes/nostr-event.ts (modify: input validation)\n- apps/gallery/src/nostr/eventRenderers.tsx (modify: safe rendering safeguards)","status":"tombstone","priority":1,"issue_type":"task","created_at":"2025-12-20T10:32:11.871332-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","dependencies":[{"issue_id":"lightning-2y3t","depends_on_id":"lightning-00in","type":"parent-child","created_at":"2025-12-20T10:32:11.873302-08:00","created_by":"honk","metadata":"{}"},{"issue_id":"lightning-2y3t","depends_on_id":"lightning-y1ve","type":"blocks","created_at":"2025-12-20T10:34:12.434807-08:00","created_by":"honk","metadata":"{}"},{"issue_id":"lightning-2y3t","depends_on_id":"lightning-34wa","type":"blocks","created_at":"2025-12-20T10:34:12.836725-08:00","created_by":"honk","metadata":"{}"}],"deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"lightning-2zaz","title":"Deploy: Telemetry events for pay/zap flows","description":"Emit local telemetry events for zap and send-sats actions and surface them in the TelemetryBar.\n\nAcceptance criteria:\n- Emit events for: invoice requested, invoice ready, payment sent/failed (NWC/WebLN/manual) for zap + send-sats.\n- TelemetryBar listens to local events and displays them without breaking WS telemetry.\n- No PII or invoice strings logged (truncate/hide sensitive data).\n\nEdge cases to handle:\n- Multiple tabs and telemetry sidebar disabled.\n\nNote: Always be looking for refactoring opportunities, bug fixes, and improvements. Create new tasks as you encounter them.\n\n## Files\n- packages/blog-kit/src/telemetry.ts (create: client telemetry emitter)\n- packages/blog-kit/src/zap-button.tsx (modify: emit events)\n- packages/blog-kit/src/send-sats.tsx (modify: emit events)\n- apps/gallery/src/TelemetryBar.tsx (modify: listen to local events)","status":"tombstone","priority":2,"issue_type":"task","created_at":"2025-12-20T13:11:14.616804-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","dependencies":[{"issue_id":"lightning-2zaz","depends_on_id":"lightning-01t7","type":"parent-child","created_at":"2025-12-20T13:11:14.618242-08:00","created_by":"honk","metadata":"{}"},{"issue_id":"lightning-2zaz","depends_on_id":"lightning-vhct","type":"blocks","created_at":"2025-12-20T13:11:45.606001-08:00","created_by":"honk","metadata":"{}"}],"deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"lightning-3124","title":"Ignore tracked jscpd report artifacts","description":"Running jscpd rewrites files under report/html/, and those files are currently tracked even though report/ is in .gitignore. Untrack or remove these artifacts so local/CI runs don't create noisy diffs.","acceptance_criteria":"- report/ is not tracked (or jscpd output goes to an ignored location)\\n- running pnpm lint:cpd does not dirty git status","status":"tombstone","priority":4,"issue_type":"chore","created_at":"2025-12-16T15:46:03.695597-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"chore"}
{"id":"lightning-34wa","title":"UI: Reference previews + enhanced rendering","description":"Add UI support for referenced events/profiles and richer rendering of Nostr mentions.\n\nAcceptance Criteria:\n- Display reference previews for root/reply/mention/quote/addressable events (limited list).\n- Render nostr: mentions in content as internal links for note/nevent/naddr/npub/nprofile.\n- Show chips/sections for referenced pubkeys and addressable coordinates.\n- Ensure CSS styles for previews and chips are responsive and consistent with existing theme.\n- Include the standing note: while working, look for refactoring opportunities/bugs/improvements and create new bd tasks as they surface.\n\nEdge Cases:\n- Referenced event missing (show placeholder)\n- Mixed hex + bech32 references\n- Large reference sets (cap and overflow behavior)\n\n## Files\n- apps/gallery/src/nostr/eventRenderers.tsx (modify: mention/link parsing + preview rendering)\n- apps/gallery/src/NostrEventView.tsx (modify: render previews)\n- apps/gallery/src/gallery.css (modify: preview + chip styles)\n- apps/gallery/src/nostr/ReferencePreview.tsx (create: preview component)","status":"tombstone","priority":2,"issue_type":"task","created_at":"2025-12-20T10:32:02.139761-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","dependencies":[{"issue_id":"lightning-34wa","depends_on_id":"lightning-00in","type":"parent-child","created_at":"2025-12-20T10:32:02.142236-08:00","created_by":"honk","metadata":"{}"},{"issue_id":"lightning-34wa","depends_on_id":"lightning-x2ka","type":"blocks","created_at":"2025-12-20T10:34:10.837103-08:00","created_by":"honk","metadata":"{}"},{"issue_id":"lightning-34wa","depends_on_id":"lightning-gsdn","type":"blocks","created_at":"2025-12-20T10:34:11.629812-08:00","created_by":"honk","metadata":"{}"}],"deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"lightning-3828","title":"Create a single 'Copy' button component with great UX + animations","description":"Build a reusable CopyButton (copy text, show toast + inline feedback, optional tooltip, icon animation, accessible, works in embed + gallery). Replace ad-hoc copy buttons across the app.","status":"tombstone","priority":2,"issue_type":"feature","created_at":"2025-12-15T04:48:34.512477-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","labels":["components","dx","ui"],"dependencies":[{"issue_id":"lightning-3828","depends_on_id":"lightning-khfc","type":"discovered-from","created_at":"2025-12-15T04:48:34.515414-08:00","created_by":"honk","metadata":"{}"}],"deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"feature"}
{"id":"lightning-39n","title":"Enforce log watching + MCP devtools verification in workflow","description":"Add scripts/docs/agent steps so every dev run tails backend/frontend logs and any UI change is confirmed via chrome devtools MCP.","notes":"Added scripts/dev-logs.sh + pnpm dev:logs to run API+gallery with unified logging to .logs/dev; updated AGENTS.md to require log tail + MCP DevTools verification for UI; documented workflow in docs/dev-logs-and-ui-checks.md.","status":"tombstone","priority":1,"issue_type":"chore","created_at":"2025-12-03T11:10:38.606534-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","labels":["tooling"],"deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"chore"}
{"id":"lightning-39zu","title":"Epic: Personal Site Kit (tips, Nostr, blockchain)","description":"Complete implementation of Personal Site Kit (tips, comments, share to Nostr, Nostr sections, blockchain stats, real time and performance).\n\n## Objective\nDeliver framework-ready widgets and APIs so a personal site can accept tips, host Nostr comments, share content to Nostr, render Nostr profile sections, and display live blockchain stats with strong performance and security defaults.\n\n## Success Criteria\n- [ ] New embed + blog-kit widgets: blockchain stats, Nostr profile, share button, real time tip feed, comment performance upgrades\n- [ ] API exposes telemetry summary endpoint and tips realtime channel with documented schemas\n- [ ] Static injector supports optional share/profile/blockchain sections\n- [ ] CSP/CORS guidance and privacy notes documented\n- [ ] Playwright coverage + screenshots + DevTools and FE/BE log checks recorded\n- [ ] CI green with lint, test, typecheck\n\n## QA Evidence Requirements\n- Playwright coverage for UI flows\n- Screenshots stored in docs/screenshots/personal-site-kit/*\n- DevTools MCP checks (console/network clean)\n- FE/BE logs reviewed (no errors/warnings)\n- CI green proof\n\n## Risks/Assumptions\n- Telemetry is blockchain-only (no visitor analytics) and uses WS + HTTP fallback\n- Host sites may enforce CSP; embed requires script-src/connect-src allowances\n- Public relays can rate-limit; relay caps and validation are required\n- Distribution remains npm packages + CDN script tag (no full site generator)\n\n## Out of Scope\n- Full CMS or blog engine\n- Full analytics or ads tracking\n- Custom Nostr relay hosting or wallet management","acceptance_criteria":"Personal Site Kit scope and success criteria defined","status":"tombstone","priority":2,"issue_type":"epic","assignee":"unassigned","created_at":"2025-12-31T18:33:34.301257-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","close_reason":"Completed all sub-tasks for Personal Site Kit. Implemented new widgets, API endpoints, docs, tests, and injector upgrades.","labels":["area:planning","feature:personal-site-kit"],"deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"epic"}
{"id":"lightning-3aag","title":"Standardize error handling","description":"Ensure error handling is robust and user-friendly (toasts/alerts) across the gallery app.\n\n## QA Evidence\n- `pnpm lint \\u0026\\u0026 pnpm typecheck` passed.\n- Standardized Alert component used in all major views.\n- Error tones (danger, warning) consistently applied.\n- interactions e2e tests passed.\n\n## Close Notes\n- Issues encountered: None.\n- Setup improvements: Created a reusable Alert component to prevent future fragmentation.","status":"tombstone","priority":2,"issue_type":"task","created_at":"2026-01-02T22:12:48.921615-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","close_reason":"Implemented","deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"lightning-3aij","title":"Epic: Nostr Event Replies + Telemetry Reliability UX","description":"Complete implementation of real-time Nostr event replies + telemetry reliability UX improvements.\n\n## Objective\nDeliver a consistent /nostr/:id experience with threaded replies, pagination, and robust telemetry WebSocket reconnection UX, aligned with existing UI specs and API contracts.\n\n## Success Criteria\n- [ ] /api/nostr/event returns replies with pagination metadata and validated limits.\n- [ ] /nostr/:id renders reply lists, empty/error states, and matches nostr-event-ui guidance.\n- [ ] Telemetry WS reconnects with exponential backoff + jitter and exposes clear UI status.\n- [ ] Playwright coverage + screenshots recorded; DevTools + FE/BE logs clean.\n- [ ] Observability docs updated with new metrics/log signals.\n\n## QA Evidence Requirements\n- Playwright coverage for new UI flows\n- Screenshots stored in a consistent path\n- DevTools MCP checks (console/network clean)\n- FE/BE logs reviewed (no errors/warnings)\n- CI green proof (pnpm check)\n\n## Risks/Assumptions\n- Large reply threads require pagination to avoid oversized payloads.\n- NIP-10 marker ambiguity (root/reply/mention) must be handled deterministically.\n- WS reconnect storms must be capped to avoid load spikes.\n- Assume no DB schema changes; prefer in-memory or existing cache strategies.\n\n## Out of Scope\n- Full relay-card redesign beyond telemetry reliability indicators.\n- Cross-app threaded reply UI outside /nostr/:id.\n- Breaking changes to existing API response fields.\n\n## Sources\n- NIP-10: reply threading markers (root/reply/mention) for event tags.\n- NIP-11: relay information document fields + CORS guidance.\n- NIP-05: nostr.json identity mapping + relay hints.\n- Exponential backoff + jitter guidance for reconnection strategies.","status":"open","priority":2,"issue_type":"epic","assignee":"honk","created_at":"2026-01-03T23:59:34.582538-08:00","updated_at":"2026-01-03T23:59:34.582538-08:00","labels":["api","gallery","nostr","realtime","telemetry","ux"]}
{"id":"lightning-3aij.1","title":"Design: Replies + Telemetry UX Spec","description":"- Define the reply threading + pagination contract for /api/nostr/event and document it.\n- Specify UI states for /nostr/:id replies (loading/empty/error/partial) aligned with docs/nostr-event-ui.md.\n- Specify telemetry WS reconnect strategy (backoff, jitter, max cap) and HTTP fallback behavior.\n\nAcceptance criteria:\n- Written contract includes reply ordering, cursor semantics, max limits, and error codes.\n- Updated UI spec calls out reply section states and responsive behavior.\n- Telemetry reconnection spec includes backoff algorithm, jitter range, max retries, and fallback trigger conditions.\n\nEdge cases:\n- Missing parents / partial threads.\n- Circular or malformed reply tags.\n- Offline / WS flapping / telemetry API unavailable.\n\n## Files\n- docs/nostr-event-ui.md (modify: add replies section + states + pagination copy)\n- docs/architecture/personal-site-kit.md (modify: update event/reply flow)\n- docs/nostr-replies.md (create: API contract + pagination + caching notes)\n- docs/telemetry-ws.md (create: WS reconnect/backoff + fallback spec)\n- apps/gallery/src/FeedView.tsx (modify: remove any cast for lint)\n- apps/gallery/src/utils/mock-relay.ts (modify: typed mock relay helpers)\n- apps/gallery/tests/demo-flows.spec.ts (modify: remove unused import)\n- apps/gallery/tests/find-friend-tip.spec.ts (modify: typed mock websocket handlers)\n- apps/gallery/tests/helpers.ts (modify: typed mock event store)\n- apps/gallery/tests/reaction.spec.ts (modify: import order)\n- apps/gallery/tests/reply.spec.ts (modify: import order)\n\n## QA Evidence\n- Lint (docs): `pnpm lint:md`\n- CI: `pnpm check`\n- DevTools MCP: opened `https://localhost:4173/`; console clean aside from expected self-signed SSL warning; network requests all 200\n- Logs: `pnpm dev:logs` (api + gallery logs; no errors/warnings)\n\n## Close Notes\n- Issues encountered: Chrome console warns about self-signed SSL cert in dev; Claude oracle model unavailable.\n- Setup improvements: Consider trusting the local dev cert to eliminate SSL warnings.\n- Debug info that would have helped: n/a\n","status":"tombstone","priority":2,"issue_type":"task","assignee":"honk","created_at":"2026-01-04T00:00:07.510697-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","close_reason":"Implemented","labels":["design","nostr","realtime","telemetry","ux"],"dependencies":[{"issue_id":"lightning-3aij.1","depends_on_id":"lightning-3aij","type":"parent-child","created_at":"2026-01-04T00:00:07.511779-08:00","created_by":"honk"}],"deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"lightning-3aij.10","title":"API: log reply-cycle drops","description":"Add structured logging when reply-cycle filtering removes events during /api/nostr/event reply resolution.\n\nAcceptance criteria:\n- When reply cycles are detected, emit a warn-level log with cycle count and a capped sample of event IDs.\n- Logs use the existing API logger conventions/fields.\n- No log emitted when no cycles are detected.\n\nEdge cases:\n- Large cycle sets should log counts and a small sample only.\n- Duplicate/normalized IDs should not be logged repeatedly.\n\n## Files\n- apps/api/src/nostr/event-resolver.ts (modify: emit log on cycle drop)\n- apps/api/src/lib/logger.ts (modify: only if needed for helper/fields)\n\n## QA Evidence\n- Unit/API: pnpm --filter api test -- nostr/event-resolver.test.ts\n- Typecheck: pnpm --filter api typecheck\n- Lint: pnpm --filter api lint\n- CI: pnpm check","status":"open","priority":3,"issue_type":"task","assignee":"honk","created_at":"2026-01-04T04:27:40.203766-08:00","updated_at":"2026-01-04T04:27:40.203766-08:00","labels":["api","nostr","observability"],"dependencies":[{"issue_id":"lightning-3aij.10","depends_on_id":"lightning-3aij","type":"parent-child","created_at":"2026-01-04T04:27:40.205176-08:00","created_by":"honk"},{"issue_id":"lightning-3aij.10","depends_on_id":"lightning-ujr6","type":"discovered-from","created_at":"2026-01-04T04:27:40.208421-08:00","created_by":"honk"},{"issue_id":"lightning-3aij.10","depends_on_id":"lightning-3aij.11","type":"blocks","created_at":"2026-01-04T04:28:25.616759-08:00","created_by":"honk"},{"issue_id":"lightning-3aij.10","depends_on_id":"lightning-3aij.13","type":"blocks","created_at":"2026-01-04T04:35:42.403094-08:00","created_by":"honk"}]}
{"id":"lightning-3aij.11","title":"API: detect multi-hop reply cycles","description":"Extend reply cycle detection to cover multi-hop loops (e.g., A-\u003eB-\u003eC-\u003eA) and self-replies, with tests.\n\nAcceptance criteria:\n- Cycles of length \u003e=2 (including A-\u003eB-\u003eC-\u003eA) are excluded from replies.\n- Self-replies (A-\u003eA) are explicitly handled and tested.\n- Non-cyclic reply sets are unaffected.\n\nEdge cases:\n- Multiple reply tags with mixed root/reply markers.\n- Duplicate reply events across relays.\n- Replies arriving out of order.\n\n## Files\n- apps/api/src/nostr/event-resolver.ts (modify: cycle detection algorithm)\n- apps/api/src/nostr/threading.ts (modify: helper updates if needed)\n- apps/api/src/nostr/event-resolver.test.ts (modify: add multi-hop + self-reply tests)\n\n## QA Evidence\n- Unit/API: pnpm --filter api test -- nostr/event-resolver.test.ts (pass; runs full api suite)\n- Typecheck: pnpm --filter api typecheck (pass)\n- Lint: pnpm --filter api lint (pass)\n- CI: pnpm check (pass)\n\n## Close Notes\n- Issues encountered: vitest run executed full api suite when filtering to nostr/event-resolver.test.ts\n- Setup improvements: document vitest filtering behavior for api tests\n- Debug info that would have helped: expected test filter still triggers related suites\n","status":"tombstone","priority":3,"issue_type":"task","assignee":"honk","created_at":"2026-01-04T04:27:53.756011-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","close_reason":"Implemented","labels":["api","nostr"],"dependencies":[{"issue_id":"lightning-3aij.11","depends_on_id":"lightning-3aij","type":"parent-child","created_at":"2026-01-04T04:27:53.757397-08:00","created_by":"honk"},{"issue_id":"lightning-3aij.11","depends_on_id":"lightning-ujr6","type":"discovered-from","created_at":"2026-01-04T04:27:53.760049-08:00","created_by":"honk"}],"deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"lightning-3aij.12","title":"Docs: document reply-cycle handling","description":"Document the reply-cycle filtering policy and related observability notes.\n\nAcceptance criteria:\n- Docs describe how short cycles are filtered and how longer cycles are handled (if implemented).\n- Include an example of a filtered A\u003c-\u003eB reply cycle and note any logging/metrics emitted.\n- Call out any limitations or configuration knobs.\n\nEdge cases:\n- Clarify behavior for self-replies and malformed reply tags.\n\n## Files\n- docs/nostr-replies.md (modify: add reply-cycle policy + examples)\n\n## QA Evidence\n- Docs check: pnpm lint\n- CI: pnpm check","status":"open","priority":3,"issue_type":"task","assignee":"honk","created_at":"2026-01-04T04:28:04.40435-08:00","updated_at":"2026-01-04T04:28:04.40435-08:00","labels":["api","docs","nostr"],"dependencies":[{"issue_id":"lightning-3aij.12","depends_on_id":"lightning-3aij","type":"parent-child","created_at":"2026-01-04T04:28:04.405225-08:00","created_by":"honk"},{"issue_id":"lightning-3aij.12","depends_on_id":"lightning-ujr6","type":"discovered-from","created_at":"2026-01-04T04:28:04.40746-08:00","created_by":"honk"},{"issue_id":"lightning-3aij.12","depends_on_id":"lightning-3aij.10","type":"blocks","created_at":"2026-01-04T04:28:34.4899-08:00","created_by":"honk"}]}
{"id":"lightning-3aij.13","title":"API: cap reply cycle traversal depth","description":"Add a defensive hop/iteration cap to reply-cycle detection to prevent excessive work on pathological chains.\n\nAcceptance criteria:\n- Cycle detection stops after a configurable max-hop/iteration limit.\n- When the cap is hit, behavior is deterministic (e.g., stop traversal without marking non-cycles).\n- Unit tests cover the cap boundary.\n\nEdge cases:\n- Long acyclic chains should not be flagged as cycles.\n- Cap value of 0 or negative should be handled safely.\n\n## Files\n- apps/api/src/nostr/event-resolver.ts (modify: add hop limit constant/guard)\n- apps/api/src/nostr/event-resolver.test.ts (modify: add cap boundary test)\n\n## QA Evidence\n- Unit/API: pnpm --filter api test -- nostr/event-resolver.test.ts\n- Typecheck: pnpm --filter api typecheck\n- Lint: pnpm --filter api lint\n- CI: pnpm check","status":"in_progress","priority":4,"issue_type":"task","assignee":"honk","created_at":"2026-01-04T04:35:21.40046-08:00","updated_at":"2026-01-04T15:36:37.807422-08:00","labels":["api","nostr","perf","security"],"dependencies":[{"issue_id":"lightning-3aij.13","depends_on_id":"lightning-3aij","type":"parent-child","created_at":"2026-01-04T04:35:21.401802-08:00","created_by":"honk"},{"issue_id":"lightning-3aij.13","depends_on_id":"lightning-3aij.11","type":"discovered-from","created_at":"2026-01-04T04:35:21.404776-08:00","created_by":"honk"},{"issue_id":"lightning-3aij.13","depends_on_id":"lightning-3aij.11","type":"blocks","created_at":"2026-01-04T04:35:32.613719-08:00","created_by":"honk"}]}
{"id":"lightning-3aij.14","title":"Tooling: Codex MCP Transport closed root cause","description":"Investigate why Codex MCP tool calls still return Transport closed even when the MCP server script and client smoke tests succeed.\n\nAcceptance criteria:\n- codex mcp list_pages succeeds without Transport closed.\n- Root cause documented (stdio spawn, PATH/node, config reload, memory).\n- Any required config or wrapper changes are captured in docs.\n\nEdge cases:\n- MCP command executed from non-repo CWD.\n- Node not on PATH for Codex-managed MCP.\n- Large Chrome profiles or OOM conditions.\n\n## Files\n- mcp.config.json (modify: command/env/pathing as needed)\n- scripts/mcp-devtools-server.sh (modify: ensure codex-friendly execution)\n- docs/mcp-setup.md (modify: codex-specific guidance)\n\n## QA Evidence\n- MCP: `mcp__chrome-devtools__list_pages` (succeeds; returned open pages)\n- Logs: `tail -n 200 .logs/dev/mcp-devtools.log`\n- Debug: `curl -sf http://127.0.0.1:9222/json/version` (ok)\n- Manual: `npx -y chrome-devtools-mcp@0.12.1 --browserUrl=http://127.0.0.1:9222 --acceptInsecureCerts` (runs; terminated after 2s, no stderr)\n- CI: `pnpm check`\n\n## Close Notes\n- Issues encountered: `mcp__chrome-devtools__list_pages` initially returned Transport closed when the config used a relative binary path; resolved after switching to `npx` with a pinned version and re-adding the MCP server.\n- Setup improvements: Prefer pinned MCP versions and avoid relative paths in MCP configs so Codex can spawn from any working directory.\n- Debug info that would have helped: MCP client stderr/stdout on spawn to confirm command/cwd at runtime.","status":"tombstone","priority":3,"issue_type":"bug","assignee":"honk","created_at":"2026-01-04T04:55:57.097678-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","close_reason":"Implemented","labels":["devtools","qa","tooling"],"dependencies":[{"issue_id":"lightning-3aij.14","depends_on_id":"lightning-3aij","type":"parent-child","created_at":"2026-01-04T04:55:57.098974-08:00","created_by":"honk"},{"issue_id":"lightning-3aij.14","depends_on_id":"lightning-1t2o","type":"discovered-from","created_at":"2026-01-04T04:55:57.102424-08:00","created_by":"honk"},{"issue_id":"lightning-3aij.14","depends_on_id":"lightning-1t2o","type":"blocks","created_at":"2026-01-04T04:56:08.882573-08:00","created_by":"honk"}],"deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"bug"}
{"id":"lightning-3aij.2","title":"API: NIP-10 threading helper","description":"Implement a NIP-10 threading helper to normalize reply relationships and provide deterministic root/reply/mention sets for API reply fetching.\n\nAcceptance criteria:\n- New helper returns root/reply/mention IDs per NIP-10 markers and unmarked fallback rules.\n- Duplicate or invalid event IDs are ignored/deduped.\n- Unit tests cover markerless tags, mixed markers, and malformed tags.\n\nEdge cases:\n- Empty tag arrays.\n- Multiple root markers.\n- Self-referential tags or loops.\n\n## Files\n- apps/api/src/nostr/threading.ts (create: NIP-10 parsing helper)\n- apps/api/src/nostr/threading.test.ts (create: unit tests)\n- apps/api/src/nostr/nostr-utils.ts (modify: shared helpers if needed)\n\n## QA Evidence\n- Unit: `pnpm --filter api test -- nostr/threading.test.ts`\n- Typecheck: `pnpm --filter api typecheck`\n- CI: `pnpm check`\n- DevTools MCP: opened `https://localhost:4173/`; console clean aside from expected self-signed SSL warning; network requests all 200\n- Logs: `pnpm dev:logs` (api + gallery logs; no errors/warnings)\n\n## Close Notes\n- Issues encountered: DevTools console initially logged connection-refused while Vite booted; resolved after reload. Self-signed SSL warning persists in dev. Claude oracle model unavailable.\n- Setup improvements: Consider trusting the local dev cert to eliminate SSL warnings.\n- Debug info that would have helped: n/a\n","status":"tombstone","priority":2,"issue_type":"task","assignee":"honk","created_at":"2026-01-04T00:00:24.563109-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","close_reason":"Implemented","labels":["api","nostr","testing","threads"],"dependencies":[{"issue_id":"lightning-3aij.2","depends_on_id":"lightning-3aij","type":"parent-child","created_at":"2026-01-04T00:00:24.564864-08:00","created_by":"honk"},{"issue_id":"lightning-3aij.2","depends_on_id":"lightning-3aij.1","type":"blocks","created_at":"2026-01-04T00:02:34.892564-08:00","created_by":"honk"}],"deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"lightning-3aij.3","title":"API: /api/nostr/event replies + pagination","description":"Extend /api/nostr/event to return replies with pagination metadata, using the NIP-10 threading helper and validated query params.\n\nAcceptance criteria:\n- Response includes `replies` (sorted oldest-\u003enewest) and `replyPage` (nextCursor/hasMore) when requested.\n- Query params (replyLimit/replyCursor/timeoutMs) are validated and documented in OpenAPI.\n- Reply fetch respects max relay count + timeout config.\n- API tests cover reply pagination, empty replies, and invalid params.\n\nEdge cases:\n- Event not found but relays reachable.\n- Replies include invalid signatures.\n- Mixed relay availability/timeouts.\n\n## Files\n- apps/api/src/nostr/event-resolver.ts (modify: reply fetch + pagination support)\n- apps/api/src/routes/nostr-event.ts (modify: query params + response shape)\n- apps/api/src/env.ts (modify: add reply limit/timeout config)\n- apps/api/src/telemetry/metrics.ts (modify: add reply fetch metrics)\n- apps/api/openapi.json (modify: document reply fields + params)\n- apps/api/src/routes/nostr-event.test.ts (modify: add reply tests)\n\n## QA Evidence\n- Unit/API: `pnpm --filter api test -- nostr-event.test.ts`\n- Typecheck: `pnpm --filter api typecheck`\n- Lint: `pnpm --filter api lint`\n- CI: `pnpm check`\n\n## QA Evidence (Run)\n- Unit/API: `pnpm --filter api test -- nostr-event.test.ts` (pass)\n- Typecheck: `pnpm --filter api typecheck` (pass)\n- Lint: `pnpm --filter api lint` (pass)\n- CI: `pnpm check` (pass)\n- Logs: `pnpm dev:logs` (api + gallery) ran; telemetry poll warnings due to ECONNREFUSED (bitcoind unhealthy)\n- DevTools MCP: `chrome-devtools/list_pages` failed with Transport closed; attempted fallback\n- QA fallback: `pnpm qa:regtest-demo` failed (toast timeout + docker exec I/O error; bitcoind unhealthy; console errors for wss://onlynotes.lol and 500s)\n\n## Close Notes\n- Issues encountered: DevTools MCP Transport closed; qa-regtest-demo failed due to bitcoind exec I/O error (bitcoind unhealthy) and toast timeout; bitcoind restart failed (open /etc/resolv.conf I/O error).\n- Setup improvements: Restore regtest bitcoind healthcheck and docker exec reliability; add readiness checks/QA retries.\n- Debug info that would have helped: bitcoind healthcheck + docker diagnostics surfaced in QA output.\n","status":"tombstone","priority":2,"issue_type":"task","assignee":"honk","created_at":"2026-01-04T00:00:44.172691-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","close_reason":"Implemented","labels":["api","metrics","nostr","pagination","replies"],"dependencies":[{"issue_id":"lightning-3aij.3","depends_on_id":"lightning-3aij","type":"parent-child","created_at":"2026-01-04T00:00:44.176187-08:00","created_by":"honk"},{"issue_id":"lightning-3aij.3","depends_on_id":"lightning-3aij.2","type":"blocks","created_at":"2026-01-04T00:02:46.277104-08:00","created_by":"honk"}],"deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"lightning-3aij.4","title":"Security: reply guardrails + invalid-input tests","description":"Harden reply fetching with guardrails (limits, timeouts, cycle protection) and add security-focused tests for invalid inputs.\n\nAcceptance criteria:\n- replyLimit is clamped to a configured max and rejects non-positive values.\n- replyCursor/timeout params validate and return 400 with clear errors on invalid input.\n- Reply fetch ignores self-referential or looping references.\n- Security tests cover invalid relays, oversized limits, and timeout edge cases.\n\nEdge cases:\n- Excessive reply counts (1000+).\n- Malformed event IDs or tag data.\n- Relay list includes disallowed URLs.\n\n## Files\n- apps/api/src/routes/nostr-event.ts (modify: param validation + error responses)\n- apps/api/src/nostr/event-resolver.ts (modify: guardrails for loops/limits)\n- apps/api/src/env.ts (modify: ensure max reply limit config is enforced)\n- apps/api/src/routes/nostr-event.security.test.ts (create: security-focused tests)\n\n## QA Evidence\n- Unit/API: `pnpm --filter api test -- nostr-event.security.test.ts`\n- Typecheck: `pnpm --filter api typecheck`\n- Lint: `pnpm --filter api lint`\n- CI: `pnpm check`\n\n## QA Evidence (Run)\n- Unit/API: `pnpm --filter api test -- nostr-event.security.test.ts` (pass)\n- Typecheck: `pnpm --filter api typecheck` (pass)\n- Lint: `pnpm --filter api lint` (pass)\n- CI: `pnpm check` (pass)\n- Logs: `pnpm dev:logs` ran; telemetry initial tip fetch failed (bitcoind ECONNREFUSED) and switched to mock telemetry\n\n## Close Notes\n- Issues encountered: telemetry initial tip fetch failed (bitcoind ECONNREFUSED) during dev logs/tests.\n- Setup improvements: restore regtest bitcoind health/reliability (tracked in lightning-q2sm).\n- Debug info that would have helped: bitcoind healthcheck and docker status surfaced in logs.","status":"tombstone","priority":1,"issue_type":"task","assignee":"honk","created_at":"2026-01-04T00:01:04.143207-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","close_reason":"Implemented","labels":["api","nostr","security","validation"],"dependencies":[{"issue_id":"lightning-3aij.4","depends_on_id":"lightning-3aij","type":"parent-child","created_at":"2026-01-04T00:01:04.144768-08:00","created_by":"honk"},{"issue_id":"lightning-3aij.4","depends_on_id":"lightning-3aij.3","type":"blocks","created_at":"2026-01-04T00:02:56.363231-08:00","created_by":"honk"}],"deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"lightning-3aij.5","title":"UI: Nostr event replies + pagination","description":"Update /nostr/:id UI to consume API replies + pagination and align states with docs/nostr-event-ui.md.\n\nAcceptance criteria:\n- Replies render sorted oldest-\u003enewest with a clear count and \"Load more\" control when hasMore.\n- Loading/empty/error/partial states for replies are visible and accessible.\n- API replies are used when available; relay fallback still works when API fails.\n- Layout remains responsive and uses nostrstack design tokens/classes.\n\nEdge cases:\n- API returns event but no replies.\n- API returns replies but references are missing.\n- Very long content or tag lists.\n- Small viewports (\u003c=480px).\n\n## Files\n- apps/gallery/src/NostrEventView.tsx (modify: replies state + pagination UI)\n- apps/gallery/src/nostr/api.ts (modify: response types + reply paging)\n- apps/gallery/src/gallery.css (modify: reply section styles + states)\n- apps/gallery/src/nostr/ReferencePreview.tsx (modify: any preview edge cases if needed)\n- docs/screenshots/nostr-event-replies/nostr-event-replies.png (create)\n- docs/screenshots/nostr-event-replies/nostr-event-empty.png (create)\n\n## QA Evidence\n- Playwright: `pnpm --filter gallery exec playwright test tests/nostr-event-replies.spec.ts` (pass)\n- Screenshots: `docs/screenshots/nostr-event-replies/nostr-event-replies.png`, `docs/screenshots/nostr-event-replies/nostr-event-empty.png`\n- DevTools MCP: Transport closed; fallback `pnpm qa:regtest-demo` (pass)\n- Logs: `pnpm dev:logs` + tail `.logs/dev/*.log` (checked, no errors/warnings)\n- CI: `pnpm check` (pass)\n\n## Close Notes\n- Issues encountered: Playwright strict locator on \"Replies\"; ESLint import sort; MCP DevTools transport closed.\n- Setup improvements: None.\n- Debug info that would have helped: MCP transport error details.","status":"tombstone","priority":2,"issue_type":"task","assignee":"honk","created_at":"2026-01-04T00:01:24.465712-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","close_reason":"Implemented","labels":["gallery","nostr","realtime","ui","ux"],"dependencies":[{"issue_id":"lightning-3aij.5","depends_on_id":"lightning-3aij","type":"parent-child","created_at":"2026-01-04T00:01:24.466834-08:00","created_by":"honk"},{"issue_id":"lightning-3aij.5","depends_on_id":"lightning-3aij.4","type":"blocks","created_at":"2026-01-04T00:03:05.66053-08:00","created_by":"honk"}],"deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"lightning-3aij.6","title":"UI: Telemetry WS reconnect + status UX","description":"Improve TelemetryBar WebSocket resilience with exponential backoff + jitter, max retry cap, and explicit connection status UI with HTTP fallback.\n\nAcceptance criteria:\n- WS reconnect uses exponential backoff with jitter and a max delay cap.\n- UI shows connection state (connected/reconnecting/offline) and last update time.\n- When WS is unavailable, UI falls back to telemetry summary without spamming logs.\n- No console/network errors during reconnect flows.\n\nEdge cases:\n- Rapid connect/disconnect flapping.\n- Offline/online toggles mid-session.\n- Invalid WS URL or CORS blocking.\n\n## Files\n- apps/gallery/src/TelemetryBar.tsx (modify: backoff + status UI + fallback)\n- apps/gallery/src/gallery.css (modify: status chip + log styling)\n- apps/gallery/tests/telemetry-reconnect.spec.ts (create: reconnect/offline UI test)\n- docs/screenshots/telemetry-reconnect/telemetry-reconnect.png (create)\n- docs/screenshots/telemetry-reconnect/telemetry-offline.png (create)\n\n## QA Evidence\n- Playwright: `pnpm --filter gallery exec playwright test tests/telemetry-reconnect.spec.ts`\n- Screenshots: `docs/screenshots/telemetry-reconnect/telemetry-reconnect.png`, `docs/screenshots/telemetry-reconnect/telemetry-offline.png`\n- DevTools MCP: console/network checked, no errors/warnings\n- Logs: `pnpm dev:logs` + tail `.logs/dev/*.log`\n- CI: `pnpm check`\n\n## QA Evidence (Run)\n- Playwright: `pnpm --filter gallery exec playwright test tests/telemetry-reconnect.spec.ts` (pass)\n- Screenshots: `docs/screenshots/telemetry-reconnect/telemetry-reconnect.png`, `docs/screenshots/telemetry-reconnect/telemetry-offline.png`\n- DevTools MCP: reloaded https://localhost:4173/; console clean aside from expected self-signed SSL warning; network 200s\n- Logs: `pnpm dev:logs` (api + gallery) with no errors/warnings\n- CI: `pnpm check` (pass)\n\n## Close Notes\n- Issues encountered: mock-relay overrides WebSocket in dev (needed dev-only telemetry status hook); Claude oracle model unavailable; Playwright console errors from intentional 500s filtered.\n- Setup improvements: note that docs/screenshots/*.png is ignored without `git add -f`.\n- Debug info that would have helped: mock-relay RelayWebSocketProxy intercepts /ws/telemetry when VITE_NOSTRSTACK_RELAYS=mock.","status":"tombstone","priority":2,"issue_type":"task","assignee":"honk","created_at":"2026-01-04T00:01:43.632234-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","close_reason":"Implemented","labels":["gallery","realtime","telemetry","ui","ux"],"dependencies":[{"issue_id":"lightning-3aij.6","depends_on_id":"lightning-3aij","type":"parent-child","created_at":"2026-01-04T00:01:43.633718-08:00","created_by":"honk"},{"issue_id":"lightning-3aij.6","depends_on_id":"lightning-3aij.1","type":"blocks","created_at":"2026-01-04T00:03:16.583863-08:00","created_by":"honk"}],"deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"lightning-3aij.7","title":"Test: replies + telemetry reconnect E2E","description":"Add Playwright E2E + visual regression coverage for replies and telemetry reconnect flows, including screenshots and basic a11y checks.\n\nAcceptance criteria:\n- New Playwright specs cover: replies list, empty state, pagination, telemetry reconnect/offline status.\n- Screenshots captured in consistent paths and referenced in test outputs.\n- Tests include basic keyboard navigation assertions for new UI controls.\n\nEdge cases:\n- Replies API returns empty list.\n- Telemetry WS disconnects mid-session.\n\n## Files\n- apps/gallery/tests/nostr-event-replies.spec.ts (create)\n- apps/gallery/tests/telemetry-reconnect.spec.ts (create)\n- apps/gallery/tests/helpers.ts (modify: helpers for WS offline/online)\n- docs/screenshots/nostr-event-replies/nostr-event-replies.png (create/update)\n- docs/screenshots/nostr-event-replies/nostr-event-empty.png (create/update)\n- docs/screenshots/telemetry-reconnect/telemetry-reconnect.png (create/update)\n- docs/screenshots/telemetry-reconnect/telemetry-offline.png (create/update)\n\n## QA Evidence\n- Playwright: `pnpm --filter gallery exec playwright test tests/nostr-event-replies.spec.ts tests/telemetry-reconnect.spec.ts` (pass)\n- Screenshots: `docs/screenshots/nostr-event-replies/nostr-event-replies.png`, `docs/screenshots/nostr-event-replies/nostr-event-empty.png`, `docs/screenshots/telemetry-reconnect/telemetry-reconnect.png`, `docs/screenshots/telemetry-reconnect/telemetry-offline.png`\n- DevTools MCP: Transport closed; fallback `pnpm qa:regtest-demo` (pass)\n- Logs: tail `.logs/dev/api.log` + `.logs/dev/gallery.log` (checked, no errors/warnings)\n- CI: `pnpm check` (pass)\n\n## Close Notes\n- Issues encountered: offline test triggered wallet WS console error; filtered expected net::ERR_INTERNET_DISCONNECTED message.\n- Setup improvements: None.\n- Debug info that would have helped: None.","status":"tombstone","priority":2,"issue_type":"task","assignee":"honk","created_at":"2026-01-04T00:02:02.055707-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","close_reason":"Implemented","labels":["e2e","playwright","testing","ux"],"dependencies":[{"issue_id":"lightning-3aij.7","depends_on_id":"lightning-3aij","type":"parent-child","created_at":"2026-01-04T00:02:02.057069-08:00","created_by":"honk"},{"issue_id":"lightning-3aij.7","depends_on_id":"lightning-3aij.5","type":"blocks","created_at":"2026-01-04T00:03:25.336238-08:00","created_by":"honk"},{"issue_id":"lightning-3aij.7","depends_on_id":"lightning-3aij.6","type":"blocks","created_at":"2026-01-04T00:03:34.883444-08:00","created_by":"honk"}],"deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"lightning-3aij.8","title":"Docs: observability updates for replies + telemetry","description":"Document new reply + telemetry reconnect metrics and update observability guidance.\n\nAcceptance criteria:\n- docs/lightning-observability.md includes new counters/histograms for reply fetch + WS reconnect.\n- Runbook notes expected log messages for reply fetch failures and WS backoff events.\n\nEdge cases:\n- Metrics naming consistency with existing telemetry metrics.\n\n## Files\n- docs/lightning-observability.md (modify: add metrics + log guidance)\n\n## QA Evidence\n- Lint (docs): `pnpm lint:md`\n- CI: `pnpm check`\n\n## Close Notes\n- Issues encountered: none\n- Setup improvements: none\n- Debug info that would have helped: none","status":"tombstone","priority":3,"issue_type":"task","assignee":"honk","created_at":"2026-01-04T00:02:18.397937-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","close_reason":"Implemented","labels":["api","docs","observability","telemetry"],"dependencies":[{"issue_id":"lightning-3aij.8","depends_on_id":"lightning-3aij","type":"parent-child","created_at":"2026-01-04T00:02:18.399318-08:00","created_by":"honk"},{"issue_id":"lightning-3aij.8","depends_on_id":"lightning-3aij.3","type":"blocks","created_at":"2026-01-04T00:03:44.329434-08:00","created_by":"honk"},{"issue_id":"lightning-3aij.8","depends_on_id":"lightning-3aij.6","type":"blocks","created_at":"2026-01-04T00:03:54.821741-08:00","created_by":"honk"}],"deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"lightning-3aij.9","title":"API: NIP-33 threading support decision","description":"Decide how NIP-33 (\"a\" tag) references should participate in threading for /api/nostr/event replies, and implement or document the chosen behavior.\n\nDecision:\n- NIP-33 `a` tags are returned in `references.address` but are not used to compute `replyThreadId` yet; replies must include `e` tags for threading.\n\nAcceptance criteria:\n- Clear decision recorded (support \"a\" tags in threading or explicitly ignore them).\n- Helper behavior updated or documented accordingly.\n- Tests cover \"a\" tag inputs and verify deterministic results.\n\nEdge cases:\n- Mixed \"e\" + \"a\" tags.\n- Invalid \"a\" tag formats.\n- Multiple \"a\" tags with different coordinates.\n\n## Files\n- apps/api/src/nostr/threading.ts (modify: handle or explicitly ignore \"a\" tags)\n- apps/api/src/nostr/threading.test.ts (modify: add \"a\" tag cases)\n- docs/nostr-replies.md (modify: document threading behavior for \"a\" tags)\n\n## QA Evidence\n- Unit: pnpm --filter api test -- nostr/threading.test.ts\n- Typecheck: pnpm --filter api typecheck\n- CI: pnpm check\n\n## Close Notes\n- Issues encountered: vitest run executed full api suite when filtering to nostr/threading.test.ts\n- Setup improvements: document vitest filtering behavior for api tests\n- Debug info that would have helped: expected test filter still triggers related suites\n","status":"tombstone","priority":3,"issue_type":"task","assignee":"honk","created_at":"2026-01-04T00:41:25.665508-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","close_reason":"Implemented","labels":["api","docs","nostr","threads"],"dependencies":[{"issue_id":"lightning-3aij.9","depends_on_id":"lightning-3aij","type":"parent-child","created_at":"2026-01-04T00:41:25.667607-08:00","created_by":"honk"}],"deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"lightning-3avh","title":"Core API: LNURL-pay metadata + successAction","description":"Extend LNURL-pay metadata and invoice responses to include successAction/comment handling.\n\nImplementation Steps:\n- Update LNURL metadata endpoint to include successAction/commentAllowed.\n- Add successAction to invoice response when configured.\n\nAcceptance Criteria:\n- LNURL metadata advertises successAction where configured.\n- Invoice responses return successAction per LUD-09.\n\nEdge Cases:\n- Missing successAction falls back to current behavior.\n\n\n## Files\n- apps/api/src/well-known/lnurlp.ts (modify: include successAction/commentAllowed)\n- apps/api/src/routes/lnurlp-callback.ts (modify: emit successAction on invoice response)","status":"tombstone","priority":2,"issue_type":"task","created_at":"2025-12-19T18:37:58.676438-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","dependencies":[{"issue_id":"lightning-3avh","depends_on_id":"lightning-naer","type":"parent-child","created_at":"2025-12-19T18:37:58.678007-08:00","created_by":"honk","metadata":"{}"},{"issue_id":"lightning-3avh","depends_on_id":"lightning-oi27","type":"blocks","created_at":"2025-12-19T18:49:07.939698-08:00","created_by":"honk","metadata":"{}"}],"deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"lightning-3b4","title":"Regtest demo wallet funding helper","description":"Add helper to fund merchant LND and open outbound channel for LNbits regtest; document nostr mock/relay config.","status":"tombstone","priority":2,"issue_type":"task","created_at":"2025-12-01T13:04:45.206938-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"lightning-3c99","title":"Document qa:regtest-demo prerequisites and error messaging","description":"qa:regtest-demo fails with connection refused unless dev servers are running. Add clear docs and/or preflight checks to guide developers.\n\nAcceptance criteria:\n- qa-regtest-demo script prints a clear message when the gallery server is not running (including expected base URL and how to start dev servers).\n- Docs mention running `pnpm dev:logs` before `pnpm qa:regtest-demo`.\n\nEdge cases:\n- Custom base URL via GALLERY_URL env.\n- API server port conflicts.\n\n## Files\n- apps/gallery/scripts/qa-regtest-demo.ts (modify: add preflight check + error message)\n- docs/ (add or update QA/dev docs with prerequisites)\n\n## QA Evidence\n- QA (failure path): `pnpm qa:regtest-demo` (prints \"preflight: checking https://localhost:4173\" and instructs `pnpm dev:logs` / `GALLERY_URL` when dev servers are down).\n- Logs: `FORCE_KILL_PORTS=1 pnpm dev:logs` + tail `.logs/dev/api.log` / `.logs/dev/gallery.log`.\n- QA (success path): `pnpm qa:regtest-demo` (passes with dev servers running).\n- CI: `pnpm check`.\n\n## Close Notes\n- Issues encountered: lint failed due to unnecessary escape in preflight message (fixed); qa:regtest-demo warns about NODE_TLS_REJECT_UNAUTHORIZED=0.\n- Setup improvements: None.\n- Debug info that would have helped: N/A.\n","status":"tombstone","priority":3,"issue_type":"task","created_at":"2026-01-04T14:33:51.063148-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","close_reason":"Implemented","deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"lightning-3h9a","title":"Telemetry: remove ws/telemetry warning in qa-regtest-demo","description":"Investigate and fix the console warning emitted during qa-regtest-demo:\n\"WebSocket connection to 'wss://localhost:3001/ws/telemetry' failed: WebSocket is closed before the connection is established.\"\n\nAcceptance criteria:\n- qa-regtest-demo passes with FAIL_ON_WARN=1 *without* suppressing telemetry warnings in the QA script.\n- No console warnings/errors related to /ws/telemetry during the flow.\n- Telemetry WS connects reliably in HTTPS dev (Vite + Fastify TLS).\n\nEdge cases:\n- API running with HTTP vs HTTPS.\n- Telemetry WS reconnect while the page is active.\n- Page teardown should not emit WS warnings.\n\n## Files\n- apps/gallery/src/TelemetryBar.tsx (modify: WS URL resolution or connect/teardown behavior)\n- apps/api/src/routes/telemetry-ws.ts (modify: ensure WS accepts/keeps connections in dev)\n- scripts/dev-logs.sh (modify: API TLS/env if needed)\n- apps/gallery/scripts/qa-regtest-demo.ts (modify: remove warning suppression if fixed)\n\n## QA Evidence\n- `FAIL_ON_WARN=1 pnpm qa:regtest-demo` (pass)\n- DevTools MCP: Transport closed; fallback qa-regtest-demo used for console/network checks\n- Logs: tail `.logs/dev/api.log` + `.logs/dev/gallery.log` (checked, no errors/warnings)\n- CI: `pnpm check` (pass)\n\n## Close Notes\n- Issues encountered: telemetry WS warning triggered by closing sockets while connecting; removed warning suppression and closed only after open.\n- Setup improvements: None.\n- Debug info that would have helped: None.","status":"tombstone","priority":3,"issue_type":"bug","created_at":"2026-01-04T02:46:38.101573-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","close_reason":"Implemented","deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"bug"}
{"id":"lightning-3kg","title":"Pay-to-unlock must require real payment","description":"Pay-to-unlock card auto-unlocks without payment (mock verification). Remove mock mode, request real invoice, poll/stream for payment, and keep the content locked until paid. Include clear pending/paid/error states and pulse the waiting badge. Acceptance: real invoice generated, unlock only after successful payment verification, and error handled gracefully. Final step: verify end-to-end with Chrome DevTools MCP (capture network/logs) and attach a screenshot of the paid state.","status":"tombstone","priority":1,"issue_type":"task","created_at":"2025-12-02T16:19:04.764452-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","labels":["demo","lightning"],"deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"lightning-3v8","title":"Mainnet LNbits/LND readiness","description":"Prep and deploy LNbits against mainnet LND provider (Voltage mainnet), with secrets, infra, and runbook.","notes":"Prod LNbits ready: secrets loaded, container healthy, admin key stored, runbook + observability in place.","status":"tombstone","priority":1,"issue_type":"epic","created_at":"2025-11-29T16:09:18.891218-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"epic"}
{"id":"lightning-3v8.1","title":"Provision mainnet LND endpoint + cert/macaroon secrets","description":"Collect Voltage mainnet host:port, TLS cert, admin/invoice macaroons; store in satoshis-kv-west; note funding provider fees and network.","notes":"Loaded Voltage LND (mutinynet) endpoint/macaroon/tls into Key Vault (lnd-mainnet-*), wired prod container env via secretrefs.","status":"tombstone","priority":1,"issue_type":"task","created_at":"2025-11-29T16:09:50.806937-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","dependencies":[{"issue_id":"lightning-3v8.1","depends_on_id":"lightning-3v8","type":"parent-child","created_at":"2025-11-29T16:09:50.807667-08:00","created_by":"honk","metadata":"{}"}],"deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"lightning-3v8.2","title":"Deploy LNbits prod container app (west)","description":"Create prod Container App using mainnet secrets, dedicated Postgres DB, and Azure File share; set LNBITS_REV and expose ingress.","notes":"Prod LNbits container (lnbits-prod-west) now Healthy; using Postgres lnbitsprod + Voltage LND via secretrefs; first_install completed.","status":"tombstone","priority":1,"issue_type":"task","created_at":"2025-11-29T16:10:04.026301-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","dependencies":[{"issue_id":"lightning-3v8.2","depends_on_id":"lightning-3v8","type":"parent-child","created_at":"2025-11-29T16:10:04.027014-08:00","created_by":"honk","metadata":"{}"}],"deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"lightning-3v8.3","title":"Smoke test LNbits prod on mainnet","description":"Create wallet, generate invoice, pay tiny mainnet invoice, verify payment status via API; capture logs.","notes":"Prod LNbits healthy; created admin wallet and stored keys in KV (lnbits-prod-admin-key/lnbits-prod-invoice-key). Smoke: created mutinynet invoice via API (out=false, 1000 sats) succeeded.","status":"tombstone","priority":1,"issue_type":"task","created_at":"2025-11-29T16:10:16.278283-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","dependencies":[{"issue_id":"lightning-3v8.3","depends_on_id":"lightning-3v8","type":"parent-child","created_at":"2025-11-29T16:10:16.279112-08:00","created_by":"honk","metadata":"{}"}],"deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"lightning-3v8.4","title":"Prod lightning runbook","description":"Document prod endpoints, secrets, health checks, smoke scripts, and rollback/rotate steps.","notes":"Added prod lightning runbook docs/prod-lightning.md with cutover steps, health checks, admin creds locations.","status":"tombstone","priority":2,"issue_type":"task","created_at":"2025-11-29T16:10:31.557227-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","dependencies":[{"issue_id":"lightning-3v8.4","depends_on_id":"lightning-3v8","type":"parent-child","created_at":"2025-11-29T16:10:31.558005-08:00","created_by":"honk","metadata":"{}"}],"deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"lightning-3v8.5","title":"Observability: prod lightning","description":"Hook prod container/app to Log Analytics and alert on funding_error != null or health non-200; include dashboard tile.","notes":"Enabled diagnostics for prod ACA environment to Log Analytics workspace (ContainerAppConsoleLogs/SystemLogs + AllMetrics). Postgres already sending logs/metrics.","status":"tombstone","priority":2,"issue_type":"task","created_at":"2025-11-29T16:10:45.139018-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","dependencies":[{"issue_id":"lightning-3v8.5","depends_on_id":"lightning-3v8","type":"parent-child","created_at":"2025-11-29T16:10:45.139745-08:00","created_by":"honk","metadata":"{}"}],"deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"lightning-3vk2","title":"Security: LNURL-withdraw limits","description":"Enforce withdraw limits and idempotency.\n\nImplementation Steps:\n- Enforce min/max withdrawal bounds.\n- Prevent double-spend on same session.\n- Add structured logs for payouts.\n\nAcceptance Criteria:\n- Duplicate callbacks do not pay twice.\n- Amount outside bounds returns 4xx.\n\nEdge Cases:\n- Payout errors surface without closing session.\n\n\n## Files\n- apps/api/src/services/lnurl-withdraw.ts (modify: enforce bounds + idempotency)\n- apps/api/src/routes/lnurl-withdraw.ts (modify: guard responses)","status":"tombstone","priority":2,"issue_type":"task","created_at":"2025-12-19T18:38:01.303313-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","dependencies":[{"issue_id":"lightning-3vk2","depends_on_id":"lightning-1kbq","type":"parent-child","created_at":"2025-12-19T18:38:01.304649-08:00","created_by":"honk","metadata":"{}"},{"issue_id":"lightning-3vk2","depends_on_id":"lightning-9o0y","type":"blocks","created_at":"2025-12-19T18:49:09.881286-08:00","created_by":"honk","metadata":"{}"}],"deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"lightning-3x8u","title":"embed: replace alert() with inline status messages","description":"Remove alert() usage from embed widgets (tip/pay/comments) and surface errors inline using token-based status UI.","acceptance_criteria":"No alert() in embed widgets; errors are visible in DOM; embed tests pass; pnpm check passes.","status":"tombstone","priority":3,"issue_type":"task","created_at":"2025-12-14T01:59:35.683245-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"lightning-47cd","title":"qa: run regtest demo full clickthrough","description":"Run the regtest demo and verify all controls + payment flows via automated Playwright QA (and inspect logs).","acceptance_criteria":"`pnpm qa:regtest-demo` exits 0 while dev servers are running; no console errors or local request failures.","status":"tombstone","priority":2,"issue_type":"task","created_at":"2025-12-13T23:50:46.87838-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"lightning-47f","title":"Implement embed widgets (tip, comments, pay-to-action)","description":"Build production-ready @satoshis/embed: tip button, comments with Nostr login, generic pay-to-action; themeable; works via \u003cscript\u003e and npm; wire to API + SDK; add Playwright UI coverage.","status":"tombstone","priority":1,"issue_type":"task","created_at":"2025-11-28T09:54:59.957027-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","dependencies":[{"issue_id":"lightning-47f","depends_on_id":"lightning-2lx","type":"parent-child","created_at":"2025-11-29T07:25:07.28975-08:00","created_by":"honk","metadata":"{}"}],"deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"lightning-47f.1","title":"Build embed tip/comment widgets","description":"Implement @satoshis/embed widgets: tip button, comments (Nostr login), pay-to-action; themeable; works via script tag + npm; integrates with SDK; Playwright UI coverage.","status":"tombstone","priority":1,"issue_type":"task","created_at":"2025-11-28T10:05:58.269759-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","dependencies":[{"issue_id":"lightning-47f.1","depends_on_id":"lightning-47f","type":"parent-child","created_at":"2025-11-28T10:05:58.271063-08:00","created_by":"honk","metadata":"{}"}],"deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"lightning-4ao","title":"Pay-to-unlock should require real payment","description":"Current pay-to-unlock auto-unlocks (mock). Require real invoice verification; remove mock unlock path; handle status/errors. Verify via DevTools MCP with screenshot.","status":"tombstone","priority":1,"issue_type":"task","created_at":"2025-12-02T15:41:25.857195-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","labels":["demo","payments"],"deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"lightning-4h1n","title":"Improvements: Improvements: Epic: Bitcoin network switching hardening","description":"Follow-up improvements from Improvements: Epic: Bitcoin network switching hardening.\n\n## Objective\nDocument oracle CLI model availability to reduce fallback failures.\n\n## Success Criteria\n- [ ] Oracle docs list known model identifiers and how to refresh the list.\n\n## QA Evidence Requirements\n- Docs updated and reviewed for accuracy.\n\n## Risks/Assumptions\n- Model availability may vary by account/region.\n\n## Out of Scope\n- Further feature work unrelated to tooling documentation.\n","acceptance_criteria":"Oracle docs list known models and refresh steps.","status":"tombstone","priority":3,"issue_type":"epic","assignee":"honk","estimated_minutes":120,"created_at":"2026-01-02T04:04:19.510701-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","close_reason":"Implemented","labels":["devx","improvements"],"deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"epic"}
{"id":"lightning-4h1n.1","title":"Docs: oracle CLI model list","description":"Document available Oracle/Claude model identifiers and how to refresh the list.\n\n- Implement: add a short section listing known model IDs and a command to refresh (e.g., `claude models` if available).\n- Acceptance criteria:\n  - docs list known model identifiers.\n  - docs include a refresh command or pointer.\n\n## Files\n- ~/.codex/skills/oracle/README.md (create: model list and refresh command)\n- ~/.codex/skills/oracle/SKILL.md (modify: reference model list doc)\n\n## QA Evidence\n- Docs updated and reviewed for accuracy.\n- Oracle: `~/.codex/skills/oracle/scripts/oracle.sh -p \"Review docs update for oracle model list and SKILL.md reference.\"`\n\n## Close Notes\n- Issues encountered: Claude fallback still fails but script completes and notes the skip.\n- Setup improvements: added a refresh-cadence note to README to keep the list updated.\n- Debug info that would have helped: clearer model availability output from `claude models`.\n","acceptance_criteria":"Oracle docs list known model IDs and refresh command.","status":"tombstone","priority":3,"issue_type":"task","assignee":"honk","estimated_minutes":45,"created_at":"2026-01-02T04:04:46.491964-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","close_reason":"Implemented","labels":["docs","tooling"],"dependencies":[{"issue_id":"lightning-4h1n.1","depends_on_id":"lightning-4h1n","type":"parent-child","created_at":"2026-01-02T04:04:46.495301-08:00","created_by":"honk"}],"deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"lightning-4j4n","title":"Lightning demo: redesign page layout + paywall UX polish (real-time dashboard)","description":"User feedback: Lightning demo view looks bad; wants a bottom-up redesign with strong real-time feel and immediate feedback. Goals: improve visual hierarchy, spacing, and responsive layout; ensure pay-to-unlock + wallet sections feel instant/live; remove any remaining cramped/overlap states; keep everything visible (no collapsed advanced).","status":"tombstone","priority":1,"issue_type":"feature","created_at":"2025-12-14T15:45:07.648687-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"feature"}
{"id":"lightning-4kyy","title":"Docs: /nostr/:id usage + caching","description":"Update public and developer docs for the event landing page feature.\n\nAcceptance Criteria:\n- Document how to use /nostr/:id, supported identifier types, and example URLs.\n- Document API endpoint, response fields, and caching behavior (TTL, limits).\n- Include troubleshooting and relay configuration notes.\n- Include the standing note: while working, look for refactoring opportunities/bugs/improvements and create new bd tasks as they surface.\n\nEdge Cases:\n- API disabled / fallback behavior\n\n## Files\n- README.md (modify: add /nostr/:id usage)\n- docs/nostr-event-landing.md (modify: align with implementation details)","status":"tombstone","priority":2,"issue_type":"task","created_at":"2025-12-20T10:32:47.068787-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","dependencies":[{"issue_id":"lightning-4kyy","depends_on_id":"lightning-00in","type":"parent-child","created_at":"2025-12-20T10:32:47.071372-08:00","created_by":"honk","metadata":"{}"},{"issue_id":"lightning-4kyy","depends_on_id":"lightning-y1ve","type":"blocks","created_at":"2025-12-20T10:34:15.231834-08:00","created_by":"honk","metadata":"{}"},{"issue_id":"lightning-4kyy","depends_on_id":"lightning-qzcy","type":"blocks","created_at":"2025-12-20T10:34:16.008446-08:00","created_by":"honk","metadata":"{}"}],"deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"lightning-4l0w","title":"Branded QR codes: customizable, high-quality QR component + demo lab","description":"Design + implement a best-in-class QR code component for LN invoices and other payloads: branded/logo overlays, gradients, quiet zones, error correction, deterministic rendering, performance (no flicker), and extensive customization (colors, shapes, logo, frame, captions). Add a dedicated 'QR Lab' demo section to explore configurations and verify scannability.","status":"tombstone","priority":1,"issue_type":"epic","created_at":"2025-12-15T04:48:16.511257-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","labels":["design","embed","qr","ui"],"dependencies":[{"issue_id":"lightning-4l0w","depends_on_id":"lightning-khfc","type":"discovered-from","created_at":"2025-12-15T04:48:16.513896-08:00","created_by":"honk","metadata":"{}"}],"deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"epic"}
{"id":"lightning-4m8m","title":"Gallery: fix lint (mixed tabs/spaces, unused vars, import order)","description":"\n\u003e gallery@0.0.0 lint /Users/honk/code/nostrstack/apps/gallery\n\u003e eslint . --ext .ts,.tsx --max-warnings=0\n\n\n/Users/honk/code/nostrstack/apps/gallery/scripts/qa-regtest-demo.ts\n  156:11  warning  'themeGroup' is assigned a value but never used. Allowed unused vars must match /^_/u  @typescript-eslint/no-unused-vars\n\n/Users/honk/code/nostrstack/apps/gallery/src/App.tsx\n   847:1  error  Mixed spaces and tabs  no-mixed-spaces-and-tabs\n   848:1  error  Mixed spaces and tabs  no-mixed-spaces-and-tabs\n   849:1  error  Mixed spaces and tabs  no-mixed-spaces-and-tabs\n   850:1  error  Mixed spaces and tabs  no-mixed-spaces-and-tabs\n   851:1  error  Mixed spaces and tabs  no-mixed-spaces-and-tabs\n   852:1  error  Mixed spaces and tabs  no-mixed-spaces-and-tabs\n   853:1  error  Mixed spaces and tabs  no-mixed-spaces-and-tabs\n   854:1  error  Mixed spaces and tabs  no-mixed-spaces-and-tabs\n   855:1  error  Mixed spaces and tabs  no-mixed-spaces-and-tabs\n   871:1  error  Mixed spaces and tabs  no-mixed-spaces-and-tabs\n   872:1  error  Mixed spaces and tabs  no-mixed-spaces-and-tabs\n   873:1  error  Mixed spaces and tabs  no-mixed-spaces-and-tabs\n   874:1  error  Mixed spaces and tabs  no-mixed-spaces-and-tabs\n   875:1  error  Mixed spaces and tabs  no-mixed-spaces-and-tabs\n   876:1  error  Mixed spaces and tabs  no-mixed-spaces-and-tabs\n   877:1  error  Mixed spaces and tabs  no-mixed-spaces-and-tabs\n   878:1  error  Mixed spaces and tabs  no-mixed-spaces-and-tabs\n   879:1  error  Mixed spaces and tabs  no-mixed-spaces-and-tabs\n  1817:1  error  Mixed spaces and tabs  no-mixed-spaces-and-tabs\n  1818:1  error  Mixed spaces and tabs  no-mixed-spaces-and-tabs\n  1819:1  error  Mixed spaces and tabs  no-mixed-spaces-and-tabs\n  1820:1  error  Mixed spaces and tabs  no-mixed-spaces-and-tabs\n  1821:1  error  Mixed spaces and tabs  no-mixed-spaces-and-tabs\n  1822:1  error  Mixed spaces and tabs  no-mixed-spaces-and-tabs\n  1823:1  error  Mixed spaces and tabs  no-mixed-spaces-and-tabs\n  1824:1  error  Mixed spaces and tabs  no-mixed-spaces-and-tabs\n  1825:1  error  Mixed spaces and tabs  no-mixed-spaces-and-tabs\n  1826:1  error  Mixed spaces and tabs  no-mixed-spaces-and-tabs\n  1827:1  error  Mixed spaces and tabs  no-mixed-spaces-and-tabs\n  1828:1  error  Mixed spaces and tabs  no-mixed-spaces-and-tabs\n\n/Users/honk/code/nostrstack/apps/gallery/src/BrandedQr.tsx\n  1:1  warning  Run autofix to sort these imports!  simple-import-sort/imports\n\n/Users/honk/code/nostrstack/apps/gallery/src/InvoicePopover.tsx\n  1:1  warning  Run autofix to sort these imports!  simple-import-sort/imports\n\n/Users/honk/code/nostrstack/apps/gallery/src/Nip07Status.tsx\n  65:11  warning  'started' is assigned a value but never used. Allowed unused vars must match /^_/u  @typescript-eslint/no-unused-vars\n\n/Users/honk/code/nostrstack/apps/gallery/src/QrLabCard.tsx\n    1:1   warning  Run autofix to sort these imports!  simple-import-sort/imports\n  147:34  error    Unnecessary escape character: \\\"    no-useless-escape\n  147:42  error    Unnecessary escape character: \\\"    no-useless-escape\n  147:52  error    Unnecessary escape character: \\\"    no-useless-escape\n  147:65  error    Unnecessary escape character: \\\"    no-useless-escape\n  147:71  error    Unnecessary escape character: \\\"    no-useless-escape\n  147:77  error    Unnecessary escape character: \\\"    no-useless-escape\n  147:81  error    Unnecessary escape character: \\\"    no-useless-escape\n  147:90  error    Unnecessary escape character: \\\"    no-useless-escape\n\n/Users/honk/code/nostrstack/apps/gallery/src/comments/CommentsPanel.tsx\n  1:1  warning  Run autofix to sort these imports!  simple-import-sort/imports\n\n✖ 44 problems (38 errors, 6 warnings)\n  0 errors and 4 warnings potentially fixable with the `--fix` option.\n\n/Users/honk/code/nostrstack/apps/gallery:\n ERR_PNPM_RECURSIVE_RUN_FIRST_FAIL  gallery@0.0.0 lint: `eslint . --ext .ts,.tsx --max-warnings=0`\nExit status 1 currently fails due to mixed tabs/spaces in , unused vars in  and , import sort warnings, and no-useless-escape in  placeholder string. Clean up so gallery lint passes with --max-warnings=0.","status":"tombstone","priority":3,"issue_type":"chore","created_at":"2025-12-14T23:26:45.664785-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"chore"}
{"id":"lightning-4nw","title":"E2E: post comment to real relay","description":"Playwright test posts a nostr comment to a real relay and verifies via subscription; trim relays to single default.","status":"tombstone","priority":1,"issue_type":"task","created_at":"2025-12-01T14:23:28.340293-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"lightning-4ob0","title":"Gallery: remove forbidden 'host' header usage in fetch()","description":"apps/gallery/src/App.tsx and other UI code sets a 'host' header in browser fetch() calls. Browsers treat Host as a forbidden header name, so this is ignored and can cause confusion in multi-tenant flows. Replace with explicit domain parameters (where supported) or a custom header (e.g. x-forwarded-host) and document the expected VITE_API_BASE_URL semantics.","status":"tombstone","priority":2,"issue_type":"task","created_at":"2025-12-14T11:36:56.718597-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","labels":["frontend","tech-debt","tenancy"],"deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"lightning-4pal","title":"Skill: nostrstack-api","description":"Create the nostrstack-api skill for Fastify + Prisma API work.\n\nAcceptance criteria:\n- SKILL.md documents API workflow and guardrails.\n- References include architecture overview, API structure, Nostr endpoint pointers, and test commands.\n- Reminder included to look for refactors/bugs and open new issues.\n\n## Files\n- ~/.codex/skills/nostrstack-api/SKILL.md (create)\n- ~/.codex/skills/nostrstack-api/references/architecture.md (create)\n- ~/.codex/skills/nostrstack-api/references/api-structure.md (create)\n- ~/.codex/skills/nostrstack-api/references/nostr.md (create)\n- ~/.codex/skills/nostrstack-api/references/testing.md (create)","status":"tombstone","priority":2,"issue_type":"task","created_at":"2025-12-26T16:50:27.077145-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","dependencies":[{"issue_id":"lightning-4pal","depends_on_id":"lightning-eo3j","type":"parent-child","created_at":"2025-12-26T16:50:27.079955-08:00","created_by":"honk"},{"issue_id":"lightning-4pal","depends_on_id":"lightning-xmw5","type":"blocks","created_at":"2025-12-26T16:51:26.984083-08:00","created_by":"honk"}],"deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"lightning-4qmg","title":"Test/Deploy: NWC flows","description":"Add API/UI coverage for Nostr Wallet Connect flows.\n\nImplementation Steps:\n- Add unit tests for NWC URI parsing + request handling.\n- Add Playwright flow to connect NWC and pay a zap.\n- Update QA/regtest demo script to exercise NWC path when configured.\n\nAcceptance Criteria:\n- Tests cover NWC connect + invoice payment.\n- QA/regtest demo passes with NWC enabled.\n\nEdge Cases:\n- Invalid NWC URI shows error and does not connect.\n\n## Files\n- packages/blog-kit/src/nwc.test.ts (create: NWC unit tests)\n- apps/gallery/tests/nwc.spec.ts (create: UI flow test)\n- apps/gallery/scripts/qa-regtest-demo.ts (modify: NWC QA path)","status":"tombstone","priority":2,"issue_type":"task","created_at":"2025-12-19T18:47:27.756328-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","dependencies":[{"issue_id":"lightning-4qmg","depends_on_id":"lightning-9zj0","type":"parent-child","created_at":"2025-12-19T18:47:27.757751-08:00","created_by":"honk","metadata":"{}"},{"issue_id":"lightning-4qmg","depends_on_id":"lightning-n6v5","type":"blocks","created_at":"2025-12-19T18:49:11.552877-08:00","created_by":"honk","metadata":"{}"}],"deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"lightning-4tcr","title":"qa: regtest smoke handles https origin","description":"apps/api/scripts/regtest-demo-smoke.ts hardcodes http://localhost:3001; when dev runs with USE_HTTPS=true (PUBLIC_ORIGIN=https://localhost:3001), fetch fails with HTTPParserError (TLS bytes).","acceptance_criteria":"smoke:regtest-demo passes against default dev:logs (https) and can still run against http when USE_HTTPS=false","status":"tombstone","priority":2,"issue_type":"bug","created_at":"2025-12-13T21:47:12.620927-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"bug"}
{"id":"lightning-4u3i","title":"Stabilize regtest LNbits topup during qa:regtest-demo","description":"Regtest QA logs show 'LNbits topup failed [lncli] FAILED' during pnpm dev:logs + pnpm qa:regtest-demo. Investigate and either fix the LNbits topup flow or make failure handling explicit and non-alarming.\n\nAcceptance criteria:\n- Running \n\u003e nostrstack@0.0.0 dev:logs /Users/honk/code/nostrstack\n\u003e ./scripts/dev-logs.sh\n\n🪵 writing logs to /Users/honk/code/nostrstack/.logs/dev (api.log, gallery.log)\n💡 view live: tail -f /Users/honk/code/nostrstack/.logs/dev/api.log /Users/honk/code/nostrstack/.logs/dev/gallery.log\n👀 auto-following logs (set LOG_TAIL=0 to disable)\n🔐 using existing certs at /Users/honk/code/nostrstack/certs/dev-cert.pem / /Users/honk/code/nostrstack/certs/dev-key.pem\n\n==\u003e /Users/honk/code/nostrstack/.logs/dev/api.log \u003c==\n\n==\u003e /Users/honk/code/nostrstack/.logs/dev/gallery.log \u003c==\n ELIFECYCLE  Command failed with exit code 1. + \n\u003e nostrstack@0.0.0 qa:regtest-demo /Users/honk/code/nostrstack\n\u003e pnpm --filter api exec tsx ../gallery/scripts/qa-regtest-demo.ts\n\n✅ QA passed does not emit 'LNbits topup failed' warnings, or the warning is replaced with a clearly expected/info log when regtest fallback succeeds.\n- Regtest fund endpoint continues to function (funds available for zap payment in qa script).\n\nEdge cases:\n- LNbits not available or admin key missing.\n- Docker LNbits container not running.\n\n## Files\n- apps/api/src/services/regtest-fund.ts (modify: adjust topup error handling/logging)\n- apps/api/src/routes/regtest-pay.ts (modify: if needed for regtest pay flow)\n- apps/api/src/server.ts (modify: if config gating is required)\n\n## QA Evidence\n- Logs: \n\u003e nostrstack@0.0.0 dev:logs /Users/honk/code/nostrstack\n\u003e ./scripts/dev-logs.sh\n\n🪵 writing logs to /Users/honk/code/nostrstack/.logs/dev (api.log, gallery.log)\n💡 view live: tail -f /Users/honk/code/nostrstack/.logs/dev/api.log /Users/honk/code/nostrstack/.logs/dev/gallery.log\n👀 auto-following logs (set LOG_TAIL=0 to disable)\n🔐 using existing certs at /Users/honk/code/nostrstack/certs/dev-cert.pem / /Users/honk/code/nostrstack/certs/dev-key.pem\n\n==\u003e /Users/honk/code/nostrstack/.logs/dev/api.log \u003c==\n\n==\u003e /Users/honk/code/nostrstack/.logs/dev/gallery.log \u003c==\n ELIFECYCLE  Command failed with exit code 1. + tail  (no LNbits topup failed warning)\n- QA: \n\u003e nostrstack@0.0.0 qa:regtest-demo /Users/honk/code/nostrstack\n\u003e pnpm --filter api exec tsx ../gallery/scripts/qa-regtest-demo.ts\n\nundefined\n/Users/honk/code/nostrstack/apps/api:\n ERR_PNPM_RECURSIVE_EXEC_FIRST_FAIL  Command failed with exit code 1: tsx ../gallery/scripts/qa-regtest-demo.ts\n ELIFECYCLE  Command failed with exit code 1.\n- CI: \n\u003e nostrstack@0.0.0 check /Users/honk/code/nostrstack\n\u003e pnpm lint \u0026\u0026 pnpm test \u0026\u0026 pnpm typecheck\n\n\n\u003e nostrstack@0.0.0 lint /Users/honk/code/nostrstack\n\u003e pnpm -r lint\n\nScope: 8 of 9 workspace projects\napps/api lint$ eslint . --ext .ts --max-warnings=0\npackages/sdk lint$ eslint . --ext .ts --max-warnings=0\npackages/sdk lint: Done\napps/api lint: Done\npackages/embed lint$ eslint . --ext .ts --max-warnings=0\npackages/embed lint: Done\npackages/blog-kit lint$ eslint . --ext .ts,.tsx --max-warnings=0\npackages/blog-kit lint: Done\napps/gallery lint$ eslint . --ext .ts,.tsx --max-warnings=0\napps/gallery lint: Done\n\n\u003e nostrstack@0.0.0 test /Users/honk/code/nostrstack\n\u003e pnpm -r test\n\nScope: 8 of 9 workspace projects\napps/api test$ vitest run\npackages/sdk test$ vitest run\npackages/sdk test:  RUN  v2.1.9 /Users/honk/code/nostrstack/packages/sdk\napps/api test:  RUN  v2.1.9 /Users/honk/code/nostrstack/apps/api\npackages/sdk test:  ✓ src/index.test.ts (2 tests) 3ms\npackages/sdk test:  Test Files  1 passed (1)\npackages/sdk test:       Tests  2 passed (2)\npackages/sdk test:    Start at  14:30:48\npackages/sdk test:    Duration  1.10s (transform 107ms, setup 0ms, collect 66ms, tests 3ms, environment 0ms, prepare 264ms)\npackages/sdk test: Done\napps/api test:  ✓ src/nostr/threading.test.ts (11 tests) 4ms\napps/api test:  ✓ src/telemetry/esplora.test.ts (4 tests) 32ms\napps/api test:  ✓ src/nostr/event-resolver.test.ts (7 tests) 16ms\napps/api test:  ✓ src/routes/wallet-ws.test.ts (5 tests) 8ms\napps/api test:  ✓ src/routes/telemetry-summary.test.ts (4 tests) 675ms\napps/api test: Prisma schema loaded from prisma/schema.prisma\napps/api test: Datasource \"db\": SQLite database \"tmp-nip05.db\" at \"file:./tmp-nip05.db\"\napps/api test: Prisma schema loaded from prisma/schema.prisma\napps/api test: Prisma schema loaded from prisma/schema.prisma\napps/api test: Datasource \"db\": SQLite database \"tmp-lnurl-withdraw.db\" at \"file:./tmp-lnurl-withdraw.db\"\napps/api test: Datasource \"db\": SQLite database \"tmp-tips-ws.db\" at \"file:./tmp-tips-ws.db\"\napps/api test: Prisma schema loaded from prisma/schema.prisma\napps/api test: Datasource \"db\": SQLite database \"tmp-nostr-event-security.db\" at \"file:./tmp-nostr-event-security.db\"\napps/api test: The database is already in sync with the Prisma schema.\napps/api test: Prisma schema loaded from prisma/schema.prisma\napps/api test: Datasource \"db\": SQLite database \"tmp-nostr-event.db\" at \"file:./tmp-nostr-event.db\"\napps/api test: The database is already in sync with the Prisma schema.\napps/api test: The database is already in sync with the Prisma schema.\napps/api test: The database is already in sync with the Prisma schema.\napps/api test: The database is already in sync with the Prisma schema.\napps/api test:  ✓ src/nostr/relaylist.test.ts (6 tests) 38ms\napps/api test: Prisma schema loaded from prisma/schema.prisma\napps/api test: Datasource \"db\": SQLite database \"tmp-lnurl.db\" at \"file:./tmp-lnurl.db\"\napps/api test: The database is already in sync with the Prisma schema.\napps/api test: Prisma schema loaded from prisma/schema.prisma\napps/api test: Datasource \"db\": SQLite database \"tmp-regtest-pay.db\" at \"file:./tmp-regtest-pay.db\"\napps/api test: The database is already in sync with the Prisma schema.\napps/api test: Prisma schema loaded from prisma/schema.prisma\napps/api test: Datasource \"db\": SQLite database \"tmp-nostr.db\" at \"file:./tmp-nostr.db\"\napps/api test: The database is already in sync with the Prisma schema.\napps/api test: Prisma schema loaded from prisma/schema.prisma\napps/api test: Datasource \"db\": SQLite database \"tmp-lnurl-provider.db\" at \"file:./tmp-lnurl-provider.db\"\napps/api test: The database is already in sync with the Prisma schema.\napps/api test:  ✓ src/routes/nostr-event.security.test.ts (4 tests) 4101ms\napps/api test:  ✓ src/routes/nostr-event.test.ts (13 tests) 4151ms\napps/api test:  ✓ src/routes/nostr-identity.test.ts (7 tests) 2621ms\napps/api test:  ✓ src/routes/lnurl-withdraw.test.ts (3 tests) 2679ms\napps/api test:  ✓ src/routes/tips-ws.test.ts (2 tests) 4220ms\napps/api test:  ✓ src/routes/lnurlp-callback.test.ts (4 tests) 3441ms\napps/api test:  ✓ src/telemetry/url-guard.test.ts (9 tests) 27ms\napps/api test:  ✓ src/routes/telemetry-ws.test.ts (2 tests) 40ms\napps/api test:  ✓ src/telemetry/routes.test.ts (3 tests) 248ms\napps/api test:  ✓ src/routes/regtest-pay.test.ts (4 tests) 2654ms\napps/api test:    ✓ regtest pay route \u003e returns 404 when regtest pay is disabled 1528ms\napps/api test:    ✓ regtest pay route \u003e returns 400 when payload is missing 398ms\napps/api test:    ✓ regtest pay route \u003e returns 400 for invalid invoices when enabled 366ms\napps/api test:    ✓ regtest pay route \u003e falls back to LNbits when docker exec fails 362ms\napps/api test:  ✓ src/nostr/nostr.test.ts (2 tests) 3589ms\napps/api test:  ✓ src/nostr/nostr-utils.test.ts (7 tests) 5ms\napps/api test:  ✓ src/routes/lnurlp-provider.test.ts (3 tests) 3177ms\napps/api test: Prisma schema loaded from prisma/schema.prisma\napps/api test: Datasource \"db\": SQLite database \"tmp-nip05-security.db\" at \"file:./tmp-nip05-security.db\"\napps/api test: The database is already in sync with the Prisma schema.\napps/api test: Prisma schema loaded from prisma/schema.prisma\napps/api test: Datasource \"db\": SQLite database \"tmp-lnurl-auth.db\" at \"file:./tmp-lnurl-auth.db\"\napps/api test: The database is already in sync with the Prisma schema.\napps/api test: Prisma schema loaded from prisma/schema.prisma\napps/api test: Datasource \"db\": SQLite database \"tmp-embed-config.db\" at \"file:./tmp-embed-config.db\"\napps/api test:  ✓ src/services/bolt12.test.ts (1 test) 2ms\napps/api test: The database is already in sync with the Prisma schema.\napps/api test: Prisma schema loaded from prisma/schema.prisma\napps/api test: Datasource \"db\": SQLite database \"tmp-cors.db\" at \"file:./tmp-cors.db\"\napps/api test: The database is already in sync with the Prisma schema.\napps/api test: Prisma schema loaded from prisma/schema.prisma\napps/api test: Datasource \"db\": SQLite database \"tmp-test.db\" at \"file:./tmp-test.db\"\napps/api test: The database is already in sync with the Prisma schema.\napps/api test: Prisma schema loaded from prisma/schema.prisma\napps/api test: Datasource \"db\": SQLite database \"tmp-regtest-fund.db\" at \"file:./tmp-regtest-fund.db\"\napps/api test: The database is already in sync with the Prisma schema.\napps/api test:  ✓ src/routes/nostr-identity.security.test.ts (4 tests) 1765ms\napps/api test:  ✓ src/routes/lnurl-auth.test.ts (2 tests) 2998ms\napps/api test:  ✓ src/routes/embed-config.test.ts (3 tests) 3163ms\napps/api test:    ✓ /embed-config \u003e honors mock flag 350ms\napps/api test:  ✓ src/server.cors.test.ts (2 tests) 2684ms\napps/api test:  ✓ src/server.test.ts (2 tests) 2771ms\napps/api test:  ✓ src/routes/regtest-fund.test.ts (1 test) 1211ms\napps/api test:    ✓ regtest fund route \u003e returns 404 when regtest fund is disabled 1210ms\napps/api test:  Test Files  26 passed (26)\napps/api test:       Tests  115 passed (115)\napps/api test:    Start at  14:30:48\napps/api test:    Duration  9.93s (transform 1.55s, setup 0ms, collect 11.22s, tests 46.32s, environment 4ms, prepare 4.21s)\napps/api test: Done\npackages/embed test$ vitest run\npackages/embed test:  RUN  v2.1.9 /Users/honk/code/nostrstack/packages/embed\npackages/embed test:  ✓ src/index.test.ts (13 tests) 176ms\npackages/embed test:  Test Files  1 passed (1)\npackages/embed test:       Tests  13 passed (13)\npackages/embed test:    Start at  14:30:58\npackages/embed test:    Duration  2.23s (transform 215ms, setup 0ms, collect 353ms, tests 176ms, environment 886ms, prepare 75ms)\npackages/embed test: Done\npackages/blog-kit test$ vitest run\npackages/blog-kit test:  RUN  v2.1.9 /Users/honk/code/nostrstack/packages/blog-kit\npackages/blog-kit test:  ✓ src/lnurl.test.ts (6 tests) 9ms\npackages/blog-kit test:  ✓ src/nwc.test.ts (3 tests) 100ms\npackages/blog-kit test:  ✓ src/auth.test.tsx (10 tests) 64ms\npackages/blog-kit test:  ✓ src/post-editor.test.tsx (7 tests) 89ms\npackages/blog-kit test:  ✓ src/send-sats.test.tsx (3 tests) 294ms\npackages/blog-kit test:  ✓ src/index.test.tsx (12 tests) 158ms\npackages/blog-kit test:  Test Files  6 passed (6)\npackages/blog-kit test:       Tests  41 passed (41)\npackages/blog-kit test:    Start at  14:31:01\npackages/blog-kit test:    Duration  3.10s (transform 1.00s, setup 1.59s, collect 2.67s, tests 713ms, environment 5.29s, prepare 1.29s)\npackages/blog-kit test: Done\napps/gallery test$ vitest run\napps/gallery test:  RUN  v2.1.9 /Users/honk/code/nostrstack/apps/gallery\napps/gallery test:  ✓ src/utils/navigation.test.tsx (3 tests) 55ms\napps/gallery test:  ✓ src/nostr/eventRenderers.test.tsx (4 tests) 141ms\napps/gallery test:  ✓ src/TelemetryBar.test.tsx (6 tests) 150ms\napps/gallery test:  ✓ src/utils/identity.test.tsx (10 tests) 69ms\napps/gallery test:  ✓ src/App.test.tsx (1 test) 46ms\napps/gallery test:  Test Files  5 passed (5)\napps/gallery test:       Tests  24 passed (24)\napps/gallery test:    Start at  14:31:04\napps/gallery test:    Duration  3.79s (transform 1.69s, setup 0ms, collect 4.91s, tests 461ms, environment 4.63s, prepare 682ms)\napps/gallery test: Done\n\n\u003e nostrstack@0.0.0 typecheck /Users/honk/code/nostrstack\n\u003e pnpm -r typecheck\n\nScope: 8 of 9 workspace projects\napps/api typecheck$ tsc --noEmit\npackages/sdk typecheck$ tsc --noEmit\npackages/sdk typecheck: Done\napps/api typecheck: Done\npackages/embed typecheck$ tsc --noEmit\npackages/embed typecheck: Done\npackages/blog-kit typecheck$ tsc --noEmit\npackages/blog-kit typecheck: Done\napps/gallery typecheck$ tsc --noEmit\napps/gallery typecheck: Done","status":"tombstone","priority":2,"issue_type":"task","created_at":"2026-01-04T14:31:37.533946-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","close_reason":"Duplicate; superseded by lightning-sfie","deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"lightning-4wpl","title":"Design/Infra: BOLT12 offer provider + env config","description":"Define the BOLT12 provider adapter and environment config for offers/subscriptions.\n\nImplementation Steps:\n- Add BOLT12 feature flags + provider config in env parsing.\n- Create a provider interface for offer issuance/fetchinvoice.\n- Wire feature flag gating for BOLT12 routes.\n\nAcceptance Criteria:\n- BOLT12 config is parsed and validated in API env.\n- Provider interface exists and can be used by routes.\n\nEdge Cases:\n- Missing provider config results in clear error.\n\n## Files\n- apps/api/src/env.ts (modify: add BOLT12 env + feature flag)\n- apps/api/src/providers/index.ts (modify: register BOLT12 provider)\n- apps/api/src/services/bolt12.ts (create: provider interface + adapter)\n- apps/api/src/setup-routes.ts (modify: gate BOLT12 routes)\n- apps/gallery/.env.example (modify: add VITE_BOLT12 flag)","status":"tombstone","priority":2,"issue_type":"task","created_at":"2025-12-19T18:46:23.116029-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","dependencies":[{"issue_id":"lightning-4wpl","depends_on_id":"lightning-8i8k","type":"parent-child","created_at":"2025-12-19T18:46:23.118613-08:00","created_by":"honk","metadata":"{}"},{"issue_id":"lightning-4wpl","depends_on_id":"lightning-l4id","type":"blocks","created_at":"2025-12-19T18:49:14.476973-08:00","created_by":"honk","metadata":"{}"}],"deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"lightning-50g0","title":"api: suppress prisma update banner in tests","description":"Vitest runs print Prisma update banners; suppress in test env to keep output clean.","acceptance_criteria":"pnpm --filter api test output does not include Prisma update banners.","status":"tombstone","priority":4,"issue_type":"chore","created_at":"2025-12-13T23:27:59.214919-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"chore"}
{"id":"lightning-51pw","title":"Improve E2E Test Environment","description":"The current E2E test environment (Playwright) fails to login and access networks reliably. We should setup a robust mock environment or fix the network configuration. See Close Notes from social interactivity epic tasks.","status":"tombstone","priority":2,"issue_type":"task","created_at":"2026-01-03T22:20:31.706992-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","close_reason":"Implemented and stabilized E2E tests","deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"lightning-53a9","title":"Relays view: dedupe NIP-11 fetches under StrictMode","description":"Dev StrictMode runs effects twice, so RelaysView issues duplicate NIP-11 fetches per relay. Add a guard or memoized fetch to avoid double requests while keeping cleanup safe.","status":"tombstone","priority":2,"issue_type":"task","created_at":"2025-12-19T14:54:33.12056-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"lightning-55e","title":"NIP-07 signer check times out","description":"Nip07Status often shows timeout/no signer even when extension present. Increase timeout, add explicit permission prompt button, and auto-retry when tab refocuses.","status":"tombstone","priority":1,"issue_type":"bug","created_at":"2025-12-02T22:04:01.856219-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"bug"}
{"id":"lightning-58lt","title":"Standardize syntax highlighting in JSON View","description":"Implement a proper syntax highlighter for JSON views in Hacker Mode.\n\n## QA Evidence\n- `pnpm lint \\u0026\\u0026 pnpm typecheck` passed.\n- JSON keys, strings, numbers, booleans, and nulls are highlighted in FeedView source and other JsonView instances.\n- HTML escaping prevents XSS.\n\n## Close Notes\n- Issues encountered: None.\n- Setup improvements: None.","status":"tombstone","priority":3,"issue_type":"task","created_at":"2026-01-02T22:35:14.849241-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","close_reason":"Implemented","deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"lightning-58q0","title":"Docs: pin chrome-devtools-mcp references","description":"Update remaining MCP docs/scripts to use the pinned chrome-devtools-mcp version instead of @latest.\n\nAcceptance criteria:\n- All MCP docs/scripts reference chrome-devtools-mcp@0.12.1 (or a pinned version) instead of @latest.\n- Examples still match current mcp.config.json guidance.\n\nEdge cases:\n- Ensure command flags remain consistent (browserUrl vs browser-url).\n\n## Files\n- docs/devtools-mcp-research.md (modify: replace @latest references)\n- docs/mcp-scripts/comment-flow.md (modify: replace @latest references)\n- docs/mcp-scripts/invoice-flow.md (modify: replace @latest references)\n\n## QA Evidence\n- Docs lint: `pnpm lint`\n- CI: `pnpm check`\n\n## Close Notes\n- Issues encountered: none\n- Setup improvements: none\n- Debug info that would have helped: none","status":"tombstone","priority":3,"issue_type":"task","created_at":"2026-01-04T13:21:09.296519-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","close_reason":"Implemented","deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"lightning-5ap","title":"Local demo with real invoices","description":"Run demo app locally with LNbits (docker) so tip/pay widgets generate real invoices (dummy/fake funding ok). Document steps.","notes":"Local LNbits (dummy) running via colima; API+gallery wired and verified invoices. Admin key 28eeda0d2e8a416bbafa8d760ee280e9, gallery at http://localhost:4173.","status":"tombstone","priority":1,"issue_type":"task","created_at":"2025-12-01T11:09:31.345666-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"lightning-5dne","title":"Core API: BOLT12 offers endpoints","description":"Implement API endpoints to create BOLT12 offers and request invoices.\n\nImplementation Steps:\n- Add routes for offer creation and invoice fetch (or subscription pay).\n- Use provider adapter to call underlying CLN/gateway.\n- Extend OpenAPI + SDK helpers for new endpoints.\n\nAcceptance Criteria:\n- API can create offers and fetch invoices successfully.\n- OpenAPI + SDK expose the new endpoints.\n\nEdge Cases:\n- Provider errors return structured error responses.\n\n## Files\n- apps/api/src/routes/bolt12.ts (create: offer routes)\n- apps/api/src/services/bolt12.ts (modify: create offer/fetch invoice)\n- apps/api/src/routes/index.ts (modify: register bolt12 routes)\n- apps/api/openapi.json (modify: add bolt12 endpoints)\n- packages/sdk/src/index.ts (modify: add bolt12 client helpers)\n- packages/sdk/src/generated/openapi-types.ts (modify: update types)","status":"tombstone","priority":2,"issue_type":"task","created_at":"2025-12-19T18:47:26.299026-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","dependencies":[{"issue_id":"lightning-5dne","depends_on_id":"lightning-8i8k","type":"parent-child","created_at":"2025-12-19T18:47:26.300479-08:00","created_by":"honk","metadata":"{}"},{"issue_id":"lightning-5dne","depends_on_id":"lightning-4wpl","type":"blocks","created_at":"2025-12-19T18:49:11.900937-08:00","created_by":"honk","metadata":"{}"},{"issue_id":"lightning-5dne","depends_on_id":"lightning-99b2","type":"blocks","created_at":"2025-12-19T18:49:14.150655-08:00","created_by":"honk","metadata":"{}"}],"deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"lightning-5gy","title":"Remove mock mode from demo flows","description":"Eliminate mock/offline mode from gallery demo: no mock relays or mock payments by default; only regtest/mutinynet/mainnet with real Nostr relays.","status":"tombstone","priority":1,"issue_type":"task","created_at":"2025-12-02T14:52:53.038859-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","labels":["demo","lighting","nostr"],"deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"lightning-5ij","title":"Add funds (regtest) fails: Not Found","description":"Fix regtest faucet button/endpoint so add-funds succeeds; show status and error handling. Confirm via DevTools MCP and screenshot.","status":"tombstone","priority":1,"issue_type":"task","created_at":"2025-12-02T15:41:12.081779-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","labels":["bug","demo","regtest"],"deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"lightning-5iw1","title":"Fix relay card layout overflow","description":"Relay cards in Relays view have overlapping metadata rows/columns. Adjust grid/typography so labels and values wrap cleanly and stay aligned.","status":"tombstone","priority":2,"issue_type":"task","created_at":"2025-12-19T15:37:54.826192-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","close_reason":"Closed","deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"lightning-5j1o","title":"design: add brand theme presets + theming docs","description":"Make it easy to apply a color scheme (brand) across nostrstack widgets and the gallery demo. Add a small set of brand presets + a documented theming API (applyNostrstackTheme), and wire a preset picker into the gallery so we can visually verify skins.","acceptance_criteria":"- Expose simple theme preset API in @nostrstack/embed\\n- Document how to apply a custom palette\\n- Gallery can switch brand presets and persists choice\\n- No regressions; pnpm qa:regtest-demo passes","status":"tombstone","priority":2,"issue_type":"task","created_at":"2025-12-13T19:49:04.153857-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"lightning-5las","title":"A11y: Zap modal focus, keyboard, aria-live","description":"Add accessibility affordances to the zap modal (focus management, ESC handling, aria-live status updates).\n\nAcceptance Criteria:\n- Modal uses role=dialog and aria-modal, with focus trapped inside.\n- ESC closes the modal and returns focus to trigger.\n- Status updates use aria-live without spamming screen readers.\n\n## Files\n- packages/blog-kit/src/zap-button.tsx (modify: focus trap + aria-live + ESC handling)\n- apps/gallery/src/gallery.css (modify: focus-visible styles for zap actions)","status":"tombstone","priority":2,"issue_type":"task","created_at":"2025-12-19T16:19:28.533626-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","dependencies":[{"issue_id":"lightning-5las","depends_on_id":"lightning-k7bf","type":"parent-child","created_at":"2025-12-19T16:19:28.535477-08:00","created_by":"honk","metadata":"{}"},{"issue_id":"lightning-5las","depends_on_id":"lightning-zxak","type":"blocks","created_at":"2025-12-19T16:20:36.345976-08:00","created_by":"honk","metadata":"{}"}],"deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"lightning-5lg3","title":"Feat: Reply Composer \u0026 Modal","description":"Implement a reply flow adhering to NIP-10.\n\nDescription:\n- Refactor `PostEditor` (or create `ReplyEditor`) to accept a target event.\n- When replying, construct tags:\n  - `e` (root) = target's root or target itself if root.\n  - `e` (reply) = target event.\n  - `p` = target author + mentioned users.\n- Add a 'Reply' button to `PostItem` that opens a modal with the editor.\n\nAcceptance Criteria:\n- Clicking Reply opens a modal.\n- Publishing sends a Kind 1 event with correct `e` and `p` tags.\n- UI closes modal on success and shows a toast.\n\nEdge Cases:\n- Replying to a reply (thread handling).\n- Self-reply.\n\n## Files\n- packages/blog-kit/src/post-editor.tsx (modify: add reply support or extract logic)\n- packages/blog-kit/src/reply-modal.tsx (create: modal wrapper)\n- apps/gallery/src/FeedView.tsx (modify: wire up reply button)\n- apps/gallery/src/gallery.css (modify: modal styles)\n\n## QA Evidence\n- Playwright: Test reply flow, inspect event tags in mock relay.\n- Screenshots: `docs/screenshots/social/reply-modal.png`","status":"tombstone","priority":2,"issue_type":"task","created_at":"2026-01-03T00:47:43.968737-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","dependencies":[{"issue_id":"lightning-5lg3","depends_on_id":"lightning-1uzs","type":"parent-child","created_at":"2026-01-03T00:47:43.971168-08:00","created_by":"honk"},{"issue_id":"lightning-5lg3","depends_on_id":"lightning-wuom","type":"blocks","created_at":"2026-01-03T00:55:12.46592-08:00","created_by":"honk"}],"deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"lightning-5q00","title":"Chore: Clean USE_HTTPS warning in api tests","description":"Remove USE_HTTPS warning noise in API tests by aligning env defaults.\n\nImplementation notes:\n- Update test setup (server.test.ts or shared helper) to set USE_HTTPS=false, or set PUBLIC_ORIGIN=https when USE_HTTPS=true.\n- Ensure warning no longer appears in test output.\n\nAcceptance criteria:\n- pnpm --filter api test output has no \"USE_HTTPS=true but PUBLIC_ORIGIN is not https\" warnings.\n- Server tests still pass without altering production defaults.\n\nEdge cases:\n- Tests that rely on PUBLIC_ORIGIN for embed config.\n\n## Files\n- apps/api/src/server.test.ts (modify: set USE_HTTPS=false in test env)\n- apps/api/vitest.config.ts (modify: set USE_HTTPS default for test workers)\n\n## QA Evidence\n- Playwright: N/A (backend only)\n- Screenshots: N/A\n- DevTools MCP: N/A\n- Logs: tail -f .logs/dev/api.log .logs/dev/gallery.log (NO_COLOR warnings observed; follow-up lightning-dds0)\n- CI: pnpm --filter api test \u0026\u0026 pnpm lint\n\n## Close Notes\n- Issues encountered: tips-ws test flaked on first pnpm --filter api test run; rerun passed (follow-up lightning-jkdq).\n- Setup improvements: track NO_COLOR warnings in lightning-dds0.\n- Debug info that would have helped: oracle CLI summary for failed model.","acceptance_criteria":"API tests run without USE_HTTPS warning","status":"tombstone","priority":3,"issue_type":"chore","assignee":"unassigned","estimated_minutes":90,"created_at":"2026-01-01T01:59:52.990556-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","close_reason":"Implemented","labels":["area:api","area:qa","feature:personal-site-kit"],"dependencies":[{"issue_id":"lightning-5q00","depends_on_id":"lightning-39zu","type":"parent-child","created_at":"2026-01-01T01:59:52.992999-08:00","created_by":"honk"}],"deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"chore"}
{"id":"lightning-5rc","title":"Logs tab still empty (backend \u0026 frontend)","description":"Logs tab shows connecting/empty; backend stream and frontend capture need to show live lines. Add error surface, retry, and verify via Chrome DevTools MCP; include before/after screenshots.","status":"tombstone","priority":1,"issue_type":"task","created_at":"2025-12-02T15:40:42.026088-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","labels":["demo","logging"],"deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"lightning-5s4","title":"Persist log viewer selections across tabs","description":"Log viewer toggles (Frontend capture ON/OFF, filter text) reset when switching tabs. Persist user selections in state/localStorage so they survive tab changes and page reloads. Acceptance: capture toggle and filter text remain after navigating to Lightning/Nostr tabs and back; defaults remain sensible; no regressions in log streaming. Final step: verify via Chrome DevTools MCP by toggling settings, switching tabs, returning, and capturing screenshot confirming persistence.","status":"tombstone","priority":2,"issue_type":"feature","created_at":"2025-12-02T17:19:27.3995-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","labels":["demo","logging","ui"],"deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"feature"}
{"id":"lightning-61qz","title":"Epic: Lightning Feature Pack (5)","description":"Complete implementation of five Lightning features across auth, payouts, wallets, and offers.\n\n## Objective\nShip five production-ready Lightning features: LNURL-auth login, Lightning address profiles, LNURL-withdraw payouts, NWC wallet connect, and BOLT12 offers/subscriptions.\n\n## Success Criteria\n- [ ] LNURL-auth login works end-to-end with QR + callback verification.\n- [ ] Lightning address cards + LNURL successAction render correctly after payment.\n- [ ] LNURL-withdraw payouts produce valid withdraw QR and settle correctly.\n- [ ] NWC connections can pay invoices and surface wallet status.\n- [ ] BOLT12 offers can be created and subscribed to with recurring payments.\n\n## Assumptions\n- LNbits remains the default provider for LNURL-pay/withdraw in dev.\n- WebLN is used when available; NWC is an optional user-configured wallet.\n- BOLT12 offer issuing uses a Core Lightning-compatible endpoint or adapter.\n\n## Out of Scope\n- Accessibility updates.\n- Documentation updates.\n","status":"tombstone","priority":2,"issue_type":"epic","created_at":"2025-12-19T18:37:54.042932-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"epic"}
{"id":"lightning-624","title":"Private GitHub repo + CI green","description":"Ensure nostrstack is in a private GitHub repo (create if missing), scrub secrets, push code, and get all workflows/linters/tests green.","status":"tombstone","priority":1,"issue_type":"epic","created_at":"2025-12-01T12:30:05.238693-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"epic"}
{"id":"lightning-624.1","title":"Create private repo or verify privacy; set origin remote appropriately","description":"Check whether current origin is private; if not create new private repo and point remote. Ensure push uses token with least privilege.","status":"tombstone","priority":1,"issue_type":"task","created_at":"2025-12-01T12:30:21.835782-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","dependencies":[{"issue_id":"lightning-624.1","depends_on_id":"lightning-624","type":"parent-child","created_at":"2025-12-01T12:30:21.836552-08:00","created_by":"honk","metadata":"{}"}],"deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"lightning-624.2","title":"Scrub secrets before push (history scan)","description":"Run secret scans (git-secrets/trufflehog/rg) and remove/rotate any findings prior to push.","status":"tombstone","priority":1,"issue_type":"task","created_at":"2025-12-01T12:30:31.976664-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","dependencies":[{"issue_id":"lightning-624.2","depends_on_id":"lightning-624","type":"parent-child","created_at":"2025-12-01T12:30:31.977694-08:00","created_by":"honk","metadata":"{}"}],"deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"lightning-624.3","title":"Make CI green (lint/test/build workflows)","description":"Run/polish GitHub Actions (lint, test, build, docker). Fix failures and ensure badges/branch protections where applicable.","status":"tombstone","priority":1,"issue_type":"task","created_at":"2025-12-01T12:30:44.619384-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","dependencies":[{"issue_id":"lightning-624.3","depends_on_id":"lightning-624","type":"parent-child","created_at":"2025-12-01T12:30:44.620221-08:00","created_by":"honk","metadata":"{}"}],"deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"lightning-650","title":"Invoice modal layout + pulsing waiting badge","description":"Redesign invoice modal: clean spacing, bolt11 wrap, copy+QR, add pulsing badge for 'Waiting for payment', dismiss/timeout handling. Verify via Chrome DevTools MCP and attach screenshots.","status":"tombstone","priority":2,"issue_type":"task","created_at":"2025-12-02T15:40:57.764839-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","labels":["demo","payments","ui"],"deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"lightning-67c","title":"Dark mode polish for demo","description":"Dark theme has readability/contrast issues (cards, text, tabs). Define balanced palette, borders, badges, pill readability. Verify via DevTools MCP with dark-mode screenshots.","status":"tombstone","priority":2,"issue_type":"task","created_at":"2025-12-02T15:42:12.21179-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","labels":["demo","theme","ui"],"deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"lightning-6a29","title":"Improve empty wallet state copy","description":"Add encouraging copy and UI for new users when wallet balance is zero.\n\n## QA Evidence\n- `pnpm lint \\u0026\\u0026 pnpm typecheck` passed.\n- Encouraging messages visible in Sidebar and WalletView when balance is 0.\n- Improved ProfileView messaging for missing LN address.\n\n## Close Notes\n- Issues encountered: None.\n- Setup improvements: None.","status":"tombstone","priority":3,"issue_type":"task","created_at":"2026-01-02T22:35:03.643144-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","close_reason":"Implemented","deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"lightning-6a9","title":"Research Chrome DevTools MPC for workflow","description":"Investigate Chrome DevTools MPC features and evaluate usefulness for nostrstack dev/debugging (remote eval, replay, etc.).","status":"tombstone","priority":3,"issue_type":"task","created_at":"2025-12-01T13:55:44.931558-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"lightning-6av7","title":"Lightning tip widget presets + activity feed","description":"Design + implement a Tip UI component with 3 preset amounts + 1 custom amount, plus a realtime activity feed scoped to an itemId (show tip events, send/recv status, payer profile avatars when available). Should be embeddable like the existing widgets and demoed in the gallery.","acceptance_criteria":"- Tip widget shows 3 preset amounts + custom input\\n- Sending tip creates invoice + shows realtime payment state\\n- Tip activity feed updates live for a given itemId (count + avatars + recent)\\n- No console errors in regtest demo QA","status":"tombstone","priority":2,"issue_type":"feature","created_at":"2025-12-15T11:21:10.080888-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"feature"}
{"id":"lightning-6cr5","title":"Ops: Align LNbits cutover scripts + Voltage helper","description":"Align Lightning ops scripts/docs with the satoshis Key Vault/Resource Group names and document the Voltage helper script.\n\nImplementation notes:\n- Update lnbits-cutover-mainnet.sh comments/usage defaults to match satoshis-kv-west + satoshis-stg-west-rg (keep overrides intact).\n- Add scripts/voltage-setup.sh to repo for setting mainnet LND secrets in Key Vault.\n- Update docs/prod-lightning.md and docs/staging-lightning.md to reference satoshis-kv-west/satoshis-stg-west-rg where applicable.\n- Update docs/lightning-observability.md RG mention if it is still pointing at nostrstack-stg-west-rg.\n- Do not add or expose secrets.\n\nAcceptance criteria:\n- Script headers/usage match the current default KV/RG values.\n- Voltage setup helper script is tracked, executable, and uses satoshis-kv-west.\n- Lightning docs reference the correct KV/RG names and mention the helper where relevant.\n- No secrets are committed.\n\nEdge cases:\n- Keep --kv/--rg flags functional for non-default environments.\n- Avoid updating unrelated ops runbooks.\n\n## Files\n- scripts/lnbits-cutover-mainnet.sh (modify: update comments/usage defaults)\n- scripts/voltage-setup.sh (add: Voltage KV helper)\n- docs/prod-lightning.md (modify: KV/RG references + helper mention)\n- docs/staging-lightning.md (modify: KV/RG references)\n- docs/lightning-observability.md (modify: RG reference if outdated)\n\n## QA Evidence\n- CI: pnpm lint\n\n## Close Notes\n- Issues encountered: Oracle CLI failed (Gemini quota).\n- Setup improvements: Surface Oracle model availability/quota in workflow docs.\n- Debug info that would have helped: Clearer oracle CLI error handling guidance.\n","acceptance_criteria":"Scripts/docs aligned with satoshis KV/RG defaults and Voltage helper tracked.","status":"tombstone","priority":3,"issue_type":"task","assignee":"honk","estimated_minutes":60,"created_at":"2026-01-01T23:00:44.986371-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","close_reason":"Implemented","labels":["area:lightning","area:ops"],"deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"lightning-6f0","title":"Wallet balance 404 with valid admin key","description":"User reports LNbits admin key + URL http://localhost:15001 but /api/v1/wallet returns 404. Reproduce, log full URL/headers, and fall back to /api/v1/wallet?usr=\u003cid\u003e if needed. Add wallet ID input and validate admin/read key separately.","status":"tombstone","priority":1,"issue_type":"bug","created_at":"2025-12-03T01:27:57.134753-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"bug"}
{"id":"lightning-6fi4","title":"bd doctor warnings (migrate + sync-branch)","description":"bd doctor reports DB version mismatch (DB 0.27.2 vs CLI 0.29.0) and sync-branch config complains about being on sync branch 'main'. Run bd migrate and decide whether to migrate-sync (or adjust config) so bd sync works cleanly.","acceptance_criteria":"- bd doctor shows no DB version mismatch\\n- Sync-branch workflow no longer errors on main","status":"tombstone","priority":3,"issue_type":"chore","created_at":"2025-12-16T15:40:22.469629-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"chore"}
{"id":"lightning-6ixr","title":"Fix flaky gallery Playwright tests","description":"Investigate and fix failures in gallery E2E tests.\\n\\nFailures observed:\\n- nostr-event.spec.ts: Strict mode violation on getByText('Satoshi').\\n- nwc.spec.ts: Strict mode violation on getByRole('button', { name: 'CONNECT' }).\\n- social-flow.spec.ts: Zap modal visibility timeout.\\n- find-friend-tip.spec.ts: Scroll timeout.\\n\\n## Files\\n- apps/gallery/tests/nostr-event.spec.ts\\n- apps/gallery/tests/nwc.spec.ts\\n- apps/gallery/tests/social-flow.spec.ts\\n- apps/gallery/tests/find-friend-tip.spec.ts","status":"tombstone","priority":3,"issue_type":"task","created_at":"2026-01-01T19:46:09.127009-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","close_reason":"Fixed strict mode violations and timing issues in gallery Playwright tests.","deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"lightning-6k5r","title":"Handle relay connection errors without console noise","description":"Observed console errors when connecting to public relays (e.g., wss://relay.snort.social returns 503). Handle relay connection failures gracefully so console/network are clean in gallery UI.\\n\\nAcceptance criteria:\\n- Relay connection failures are surfaced via UI state/toast or logged as warnings without console error spam.\\n- Default relay set skips or retries transient failures without blocking feed.\\n- No console errors on initial load when a relay is temporarily unavailable.\\n\\n## Files\\n- apps/gallery/src/FeedView.tsx (modify: relay connection error handling)\\n- apps/gallery/src/nostr/api.ts (modify: relay connection lifecycle, if applicable)","status":"tombstone","priority":3,"issue_type":"task","created_at":"2025-12-20T13:38:48.709013-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"lightning-6nrl","title":"Skill: nostrstack-embed-ui","description":"Create the nostrstack-embed-ui skill for embed widgets, design tokens, and gallery UI.\n\nAcceptance criteria:\n- SKILL.md documents design system guardrails and UI verification expectations.\n- References include design system tokens and UI spec pointers.\n- Reminder included to look for refactors/bugs and open new issues.\n\n## Files\n- ~/.codex/skills/nostrstack-embed-ui/SKILL.md (create)\n- ~/.codex/skills/nostrstack-embed-ui/references/design-system.md (create)\n- ~/.codex/skills/nostrstack-embed-ui/references/ui-specs.md (create)","status":"tombstone","priority":2,"issue_type":"task","created_at":"2025-12-26T16:50:41.880894-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","dependencies":[{"issue_id":"lightning-6nrl","depends_on_id":"lightning-eo3j","type":"parent-child","created_at":"2025-12-26T16:50:41.882787-08:00","created_by":"honk"},{"issue_id":"lightning-6nrl","depends_on_id":"lightning-xmw5","type":"blocks","created_at":"2025-12-26T16:51:33.101753-08:00","created_by":"honk"}],"deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"lightning-6sj","title":"Payment verification: OpenNode invoice polling / LNURL withdraw support","status":"tombstone","priority":2,"issue_type":"task","created_at":"2025-11-28T12:14:27.733631-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","dependencies":[{"issue_id":"lightning-6sj","depends_on_id":"lightning-2lx","type":"parent-child","created_at":"2025-11-29T07:25:12.832873-08:00","created_by":"honk","metadata":"{}"}],"deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"lightning-6wv","title":"Ops: staging + log shipping","description":"Staging manifest + synthetic health probe; OTLP logs shipping","status":"tombstone","priority":2,"issue_type":"task","created_at":"2025-11-28T12:15:07.048724-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","dependencies":[{"issue_id":"lightning-6wv","depends_on_id":"lightning-2lx","type":"parent-child","created_at":"2025-11-29T07:25:18.370364-08:00","created_by":"honk","metadata":"{}"}],"deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"lightning-70lj","title":"Epic: UI/UX Reliability \u0026 Refresh","description":"Comprehensive UI/UX reliability improvement plan and refresh for the gallery.\n\n## Audit Findings\nFindings logged in [docs/ui-audit-findings.md](docs/ui-audit-findings.md).\n\n## Objective\nEnsure every button, component, and label is exercised and tested. Specifically fix the 'Fund wallet' button to update the Bitcoin node component in realtime. Catalog and resolve all UI/UX reliability issues.\n\n## Success Criteria\n- [x] 'Fund wallet' (regtest) triggers realtime updates in Bitcoin Node card (block height/balance)\n- [x] All interactive elements (buttons, inputs) have associated Playwright tests (lightning-0465)\n- [x] Loading states are consistent and visible for all async actions (lightning-9u7z)\n- [x] Error handling is robust and user-friendly (toasts/alerts) (lightning-3aag)\n- [x] UI visual audit completed and cataloged high-priority issues resolved (lightning-fkir, lightning-hvqy, lightning-muv2, lightning-plc8)","status":"tombstone","priority":2,"issue_type":"epic","created_at":"2026-01-02T14:51:58.703087-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","close_reason":"High priority tasks completed.","deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"epic"}
{"id":"lightning-71bc","title":"A11y: Telemetry status live announcements","description":"Add accessible status announcements for telemetry connection state updates.\n\nAcceptance criteria:\n- Telemetry status row uses role=status and aria-live=polite so state changes are announced.\n- Reconnecting/offline reason copy is screen-reader friendly.\n- Playwright spec asserts the live region attributes.\n\nEdge cases:\n- Rapid reconnect/offline transitions should not spam announcements.\n\n## Files\n- apps/gallery/src/TelemetryBar.tsx (modify: add aria-live/status attributes)\n- apps/gallery/tests/telemetry-reconnect.spec.ts (modify: assert aria-live attributes)\n\n## QA Evidence\n- Playwright: `pnpm --filter gallery exec playwright test tests/telemetry-reconnect.spec.ts` (pass)\n- DevTools MCP: Transport closed; fallback `pnpm qa:regtest-demo` (pass)\n- Logs: tail `.logs/dev/api.log` + `.logs/dev/gallery.log` (checked, no errors/warnings)\n- CI: `pnpm check` (pass)\n\n## Close Notes\n- Issues encountered: None.\n- Setup improvements: None.\n- Debug info that would have helped: None.","status":"tombstone","priority":3,"issue_type":"task","created_at":"2026-01-04T01:20:48.506014-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","close_reason":"Implemented","dependencies":[{"issue_id":"lightning-71bc","depends_on_id":"lightning-3aij","type":"parent-child","created_at":"2026-01-04T01:21:05.083196-08:00","created_by":"honk"}],"deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"lightning-74vk","title":"Feat: NIP-50 Content Search","description":"Add general content search to SearchView via NIP-50.\n\nDescription:\n- If the search input doesn't match an npub/nip05/hex pubkey, treat it as a general search query.\n- Use the `search` field in the Nostr filter (NIP-50).\n- Query Kind 1 (Notes) matching the query.\n- Render results as a list of `PostItem`s.\n\nAcceptance Criteria:\n- Users can search for keywords (e.g. 'bitcoin', 'nostr').\n- Results are displayed in a new 'Notes' results section.\n- Clear error if relays don't support NIP-50.\n\n## Files\n- apps/gallery/src/SearchView.tsx (modify: handle search filter + kind 1 results)\n- apps/gallery/src/nostr/api.ts (modify: search helper)\n\n## QA Evidence\n- Playwright: Test searching for common terms against supporting relays.\n- Screenshots: `docs/screenshots/social/search-content.png`\n\n## Close Notes\n- Issues encountered: Some relays do not support NIP-50; added clear error messaging for users.\n- Setup improvements: Identity resolution and content search now run in parallel for faster results.\n- Debug info that would have helped: None.","status":"tombstone","priority":2,"issue_type":"task","created_at":"2026-01-03T09:04:42.091426-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","close_reason":"Implemented","dependencies":[{"issue_id":"lightning-74vk","depends_on_id":"lightning-xliv","type":"parent-child","created_at":"2026-01-03T09:04:42.093332-08:00","created_by":"honk"}],"deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"lightning-76j","title":"Wallet card still asks for env despite config","description":"Make wallet balance detect env overrides correctly and let wallet ID be provided via env; prefill wallet ID and avoid misleading 'Set VITE_LNBITS_*' message when config is present.","notes":"Support VITE_LNBITS_WALLET_ID env + env.example updates; wallet ID now prefilled from env/localStorage; wallet card messaging explains required vars and UI flow.","status":"tombstone","priority":2,"issue_type":"bug","created_at":"2025-12-03T11:07:40.702884-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"bug"}
{"id":"lightning-77w","title":"Logs tab: backend SSE /logs/stream shows error","description":"Logs tab backend status shows 'error' and no log lines. Need working SSE connection to API /logs/stream with retry and user-facing error.","status":"tombstone","priority":1,"issue_type":"task","created_at":"2025-12-02T14:53:17.634017-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","labels":["demo","logging"],"deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"lightning-797g","title":"Feat: Pagination for Profile Activity","description":"Add 'Load More' support to the user activity list in ProfileView.\n\nDescription:\n- Implement `loadMore` logic similar to `FeedView`.\n- Use `until` filter to fetch older events from the current profile author.\n- Show 'LOAD MORE' button at the bottom of the activity list.\n\nAcceptance Criteria:\n- Users can see more than the initial 20 posts on a profile.\n- Chronological order is maintained.\n\n## Files\n- apps/gallery/src/ProfileView.tsx (modify: pagination logic + UI)\n\n## QA Evidence\n- Screenshots: `docs/screenshots/social/profile-pagination.png`\n- CI: `pnpm lint \u0026\u0026 pnpm typecheck`\n\n## Close Notes\n- Issues encountered: SimplePool methods expect single filter object, not array; fixed.\n- Setup improvements: Switched to SimplePool for better consistency and multi-relay reliability in ProfileView.\n- Debug info that would have helped: None.","status":"tombstone","priority":2,"issue_type":"task","created_at":"2026-01-03T09:04:27.678801-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","close_reason":"Implemented","dependencies":[{"issue_id":"lightning-797g","depends_on_id":"lightning-xliv","type":"parent-child","created_at":"2026-01-03T09:04:27.680835-08:00","created_by":"honk"}],"deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"lightning-79k","title":"Gallery health checks hit 404 in dev","description":"Health status cards fire GET /api/health and /api/health/lnbits, but the Vite proxy rewrites /api -\u003e http://localhost:3001 causing double /api and 404s in dev logs. Adjust health fetch paths to align with proxy and production deployment, and debounce errors to avoid log spam. Acceptance: health endpoints return 200 in dev, no repeating 404 noise in logs, and cards still work in prod. Final step: verify with Chrome DevTools MCP (watch network + log viewer) and attach screenshot of healthy status.","status":"tombstone","priority":2,"issue_type":"task","created_at":"2025-12-02T16:20:28.54987-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","labels":["demo","infra"],"deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"lightning-7bfj","title":"Fix copy button UI, wire up Settings, and troubleshoot Telemetry connection","status":"tombstone","priority":0,"issue_type":"bug","created_at":"2025-12-17T16:03:12.825056-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","labels":["backend","ui"],"deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"bug"}
{"id":"lightning-7d5z","title":"Infra: Config defaults for send-sats amounts","description":"Add config hooks for default amount and preset amounts, plus a feature flag for profile payments.\n\nAcceptance criteria:\n- New env vars documented in apps/gallery/.env.example and env.sample.\n- New config module parses defaults safely and exposes to UI.\n- Safe parsing (numbers, fallback values, empty presets).\n- No runtime errors if env vars missing.\n\nEdge cases to handle:\n- Invalid numeric strings or empty preset list.\n\nNote: Always be looking for refactoring opportunities, bug fixes, and improvements. Create new tasks as you encounter them.\n\n## Files\n- apps/gallery/.env.example (modify: add VITE_ENABLE_PROFILE_PAY, VITE_SEND_SATS_DEFAULT, VITE_SEND_SATS_PRESETS)\n- env.sample (modify: add same vars)\n- apps/gallery/src/config/payments.ts (create: parse env + defaults)","status":"tombstone","priority":2,"issue_type":"task","created_at":"2025-12-20T13:11:11.10644-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","dependencies":[{"issue_id":"lightning-7d5z","depends_on_id":"lightning-01t7","type":"parent-child","created_at":"2025-12-20T13:11:11.108434-08:00","created_by":"honk","metadata":"{}"},{"issue_id":"lightning-7d5z","depends_on_id":"lightning-98zj","type":"blocks","created_at":"2025-12-20T13:11:40.757951-08:00","created_by":"honk","metadata":"{}"}],"deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"lightning-7fhb","title":"Infra: skill packaging venv","description":"Create a Python venv with PyYAML so skill packaging/validation can run.\n\nAcceptance criteria:\n- A venv exists for skill-creator tooling.\n- PyYAML is installed in that venv.\n- package_skill.py runs using the venv's python.\n- Always look for refactors/bugs while doing this work; create new issues when found.\n\n## Files\n- ~/.codex/skills/.system/skill-creator/.venv/ (create: python venv with PyYAML)","status":"tombstone","priority":2,"issue_type":"task","created_at":"2025-12-26T16:50:07.785106-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","dependencies":[{"issue_id":"lightning-7fhb","depends_on_id":"lightning-eo3j","type":"parent-child","created_at":"2025-12-26T16:50:07.787997-08:00","created_by":"honk"},{"issue_id":"lightning-7fhb","depends_on_id":"lightning-xmw5","type":"blocks","created_at":"2025-12-26T16:51:41.953599-08:00","created_by":"honk"}],"deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"lightning-7gdg","title":"Core: Integrate SendSats into ProfileView + styling","description":"Wire the SendSats component into the profile view and add UI styling.\n\nAcceptance criteria:\n- ProfileView shows “Send sats” card when lud16/lud06 is present.\n- Default amount/presets come from config module.\n- Visual design matches existing lightning card / zap modal.\n- Missing lightning address shows a clear callout.\n- Mobile layout remains readable (no overflow).\n\nEdge cases to handle:\n- Long lightning addresses, missing profile data, slow relay responses.\n\nNote: Always be looking for refactoring opportunities, bug fixes, and improvements. Create new tasks as you encounter them.\n\n## Files\n- apps/gallery/src/ProfileView.tsx (modify: render SendSats + states)\n- apps/gallery/src/styles/lightning-card.css (modify: layout tweaks)\n- apps/gallery/src/gallery.css (modify: SendSats modal styles)","status":"tombstone","priority":2,"issue_type":"task","created_at":"2025-12-20T13:11:13.109583-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","dependencies":[{"issue_id":"lightning-7gdg","depends_on_id":"lightning-01t7","type":"parent-child","created_at":"2025-12-20T13:11:13.111336-08:00","created_by":"honk","metadata":"{}"},{"issue_id":"lightning-7gdg","depends_on_id":"lightning-vhct","type":"blocks","created_at":"2025-12-20T13:11:42.943061-08:00","created_by":"honk","metadata":"{}"},{"issue_id":"lightning-7gdg","depends_on_id":"lightning-y8wu","type":"blocks","created_at":"2025-12-20T13:11:43.349503-08:00","created_by":"honk","metadata":"{}"},{"issue_id":"lightning-7gdg","depends_on_id":"lightning-7d5z","type":"blocks","created_at":"2025-12-20T13:11:43.748867-08:00","created_by":"honk","metadata":"{}"}],"deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"lightning-7gs","title":"Security \u0026 rate-limit hardening: admin auth, per-tenant throttles, webhook replay tests","status":"tombstone","priority":2,"issue_type":"task","created_at":"2025-11-28T12:14:17.962188-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","dependencies":[{"issue_id":"lightning-7gs","depends_on_id":"lightning-2lx","type":"parent-child","created_at":"2025-11-29T07:25:23.916785-08:00","created_by":"honk","metadata":"{}"}],"deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"lightning-7k0e","title":"Test: validate and package skills","description":"Run skill validation and package .skill bundles.\n\nAcceptance criteria:\n- All skills validate via package_skill.py.\n- .skill artifacts exist in ~/.codex/skills/dist.\n- Reminder included to look for refactors/bugs and open new issues.\n\n## Files\n- ~/.codex/skills/dist/nostrstack-dev-workflow.skill (create)\n- ~/.codex/skills/dist/nostrstack-api.skill (create)\n- ~/.codex/skills/dist/nostrstack-nostr.skill (create)\n- ~/.codex/skills/dist/nostrstack-embed-ui.skill (create)\n- ~/.codex/skills/dist/nostrstack-lightning.skill (create)","status":"tombstone","priority":2,"issue_type":"task","created_at":"2025-12-26T16:51:00.88004-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","dependencies":[{"issue_id":"lightning-7k0e","depends_on_id":"lightning-eo3j","type":"parent-child","created_at":"2025-12-26T16:51:00.882087-08:00","created_by":"honk"},{"issue_id":"lightning-7k0e","depends_on_id":"lightning-ad8j","type":"blocks","created_at":"2025-12-26T16:52:03.259665-08:00","created_by":"honk"},{"issue_id":"lightning-7k0e","depends_on_id":"lightning-7fhb","type":"blocks","created_at":"2025-12-26T16:52:06.506674-08:00","created_by":"honk"}],"deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"lightning-7kgx","title":"Test: Zap modal + regtest pay E2E","description":"Expand gallery E2E coverage for the zap modal layout and regtest pay action.\n\nAcceptance Criteria:\n- Social flow test asserts zap modal opens without layout shift and renders QR/invoice box.\n- Regtest demo test pays a zap invoice using the regtest pay action and observes success state.\n- Screenshots updated if needed.\n\n## Files\n- apps/gallery/tests/social-flow.spec.ts (modify: assert zap modal layout/overlay)\n- apps/gallery/tests/demo-regtest.spec.ts (modify: pay zap via regtest action)\n- apps/gallery/scripts/qa-regtest-demo.ts (modify: demo script to exercise zap pay)\n- docs/screenshots/zap-modal.png (update: refreshed zap modal screenshot if changed)","status":"tombstone","priority":2,"issue_type":"task","created_at":"2025-12-19T16:19:46.693182-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","dependencies":[{"issue_id":"lightning-7kgx","depends_on_id":"lightning-k7bf","type":"parent-child","created_at":"2025-12-19T16:19:46.700157-08:00","created_by":"honk","metadata":"{}"},{"issue_id":"lightning-7kgx","depends_on_id":"lightning-5las","type":"blocks","created_at":"2025-12-19T16:20:51.315622-08:00","created_by":"honk","metadata":"{}"}],"deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"lightning-7lag","title":"Integration: Feed \u0026 Profile","description":"Wire up FeedView and ProfileView to use the dynamic relay list.\n\nDescription:\n- Replace `getDefaultRelays()` with `useRelays().relays` in `FeedView`.\n- Replace `DEFAULT_RELAYS` in `ProfileView` with `useRelays().relays`.\n- Ensure views handle `isLoading` state from context (show 'Connecting...' if relay list is pending).\n- Remove hardcoded relay constants where replaced.\n\nAcceptance Criteria:\n- Feed loads from user relays (verify in Network tab).\n- Profile fetches events from user relays.\n- No regression in default behavior (bootstraps if no user relays).\n\n## Files\n- apps/gallery/src/FeedView.tsx (modify: use context)\n- apps/gallery/src/ProfileView.tsx (modify: use context)\n\n## QA Evidence\n- Playwright: Test feed loading with a custom relay added.\n- DevTools: Network tab shows connections to custom relays.\n- CI: `pnpm lint \u0026\u0026 pnpm typecheck`","status":"tombstone","priority":2,"issue_type":"task","created_at":"2026-01-03T14:24:24.154867-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","close_reason":"Implemented","dependencies":[{"issue_id":"lightning-7lag","depends_on_id":"lightning-jeeg","type":"parent-child","created_at":"2026-01-03T14:24:24.157462-08:00","created_by":"honk"},{"issue_id":"lightning-7lag","depends_on_id":"lightning-vydw","type":"blocks","created_at":"2026-01-03T14:24:58.931713-08:00","created_by":"honk"}],"deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"lightning-7p1","title":"Relay card: live send/recv + compact list","description":"Refactor relay display into reusable component: compact pill/card with metadata (name/software), live recv counts and send statuses (sending/ok/error), animation, and wire it to comment relay + logged-in send flow so publishing updates the card inline.","status":"tombstone","priority":1,"issue_type":"task","created_at":"2025-12-02T12:18:40.124578-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"lightning-7qzp","title":"Epic: Social Interactivity (Replies, Media, Reactions)","description":"Make the gallery feed interactive and visually rich.\n\n## Objective\nTransform the read-only feed into an interactive social stream where users can reply, like, and view rich media.\n\n## Success Criteria\n- [x] Images and videos render inline in the feed.\n- [x] Users can 'Like' (Kind 7) a post.\n- [x] Users can 'Reply' (Kind 1) to a post, adhering to NIP-10.\n- [x] Post detail view ('/nostr/:id') fetches and displays replies.\n\n## QA Evidence Requirements\n- Playwright coverage for new flows (replying, liking).\n- Screenshots of media rendering and reply threads.\n- DevTools MCP checks (console/network clean).\n- FE/BE logs reviewed (no errors/warnings).\n- CI green proof.\n\n## Risks/Assumptions\n- Media loading might impact performance (lazy load required).\n- Reply threads can be deep; linear list is acceptable for v1.\n\n## Actual QA Evidence\n- Media Embedding: Verified with Unit Tests and Visual Regression (lightning-fulf).\n- Reactions: Implementation verified, Visual Regression passed (lightning-z3tv).\n- Replies: Implementation verified (NIP-10 compliant), Visual Regression passed (lightning-8oa3).\n- Detail View: Visual Regression passed for replies section.\n\n## Close Notes\n- All features implemented.\n- E2E environment needs improvement for robust functional testing (login/network).\n- Created follow-up task: lightning-51pw.","status":"tombstone","priority":2,"issue_type":"epic","created_at":"2026-01-03T18:13:44.788306-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","close_reason":"Completed","deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"epic"}
{"id":"lightning-7rrs","title":"devtools mcp: restore chrome-devtools transport + document fallback","description":"Codex chrome-devtools MCP tools currently return 'Transport closed'. Investigate why the MCP server isn't available, and update docs/workflow with a reliable fallback (e.g., Playwright QA) when MCP is unavailable.","acceptance_criteria":"- chrome-devtools MCP tool calls succeed (list_pages) OR documented fallback is added and used\\n- AGENTS/workflow mentions fallback path","status":"tombstone","priority":1,"issue_type":"task","created_at":"2025-12-13T15:36:29.477989-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"lightning-7rw","title":"Fix regtest faucet button (Add funds 404)","description":"Add funds (regtest) button returns 404/Not Found (see screenshot). Wire gallery button to the correct regtest funding endpoint via dev proxy, surface success/error states inline, and log to backend. Acceptance: button triggers funding, toast/status shows success, backend wallet balance increments, and error handling is clear. Final step: validate via Chrome DevTools MCP (click button, observe network/logs) and attach a screenshot of the working flow.","status":"tombstone","priority":1,"issue_type":"task","created_at":"2025-12-02T16:18:50.030071-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","labels":["demo","lightning"],"deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"lightning-7udg","title":"UI: Search entry points + SearchView","description":"Add search entry points and a dedicated SearchView for finding friends.\n\n- Add a \"Find friend\" entry in the sidebar and a card/CTA in the feed.\n- Build SearchView with input, results list, empty/error states, and keyboard support.\n- Route /search (or modal) and deep-link to /p/\u003cnpub\u003e on selection.\n- Use new identity resolver hook.\n\nAcceptance Criteria\n- User can navigate to search, resolve input, and open profile without errors.\n- UI works on mobile and desktop, supports Enter-to-search, and shows clear feedback.\n- No console errors; network requests are limited and debounced.\n\nEdge Cases\n- Invalid identifier, no match, resolver timeout.\n\nNote: Always be looking for refactoring opportunities, bug fixes, and improvements. Create new tasks as you encounter them.\n\n## Files\n- apps/gallery/src/App.tsx (modify: route to SearchView)\n- apps/gallery/src/Sidebar.tsx (modify: add search entry)\n- apps/gallery/src/FeedView.tsx (modify: add find-friend CTA)\n- apps/gallery/src/SearchView.tsx (create: search UI)\n- apps/gallery/src/ui/FindFriendCard.tsx (create: CTA component)\n- apps/gallery/src/styles/find-friend.css (create: CTA styles)\n- apps/gallery/src/styles/search-view.css (create: search styles)","status":"tombstone","priority":2,"issue_type":"task","created_at":"2025-12-25T23:07:32.274967-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","dependencies":[{"issue_id":"lightning-7udg","depends_on_id":"lightning-yzz6","type":"parent-child","created_at":"2025-12-25T23:07:32.277095-08:00","created_by":"honk","metadata":"{}"},{"issue_id":"lightning-7udg","depends_on_id":"lightning-cyfb","type":"blocks","created_at":"2025-12-25T23:07:37.412004-08:00","created_by":"honk","metadata":"{}"},{"issue_id":"lightning-7udg","depends_on_id":"lightning-qkwi","type":"blocks","created_at":"2025-12-25T23:07:37.758038-08:00","created_by":"honk","metadata":"{}"}],"deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"lightning-7wf","title":"Live wallet balance stream (/ws/wallet)","description":"Stream LNbits balance: add /ws/wallet endpoint that pushes balance/name/id changes; frontend subscribes and updates wallet card in real time with fallback to manual refresh.","status":"tombstone","priority":1,"issue_type":"feature","created_at":"2025-12-03T14:43:51.982585-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","labels":["backend","frontend","websockets"],"deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"feature"}
{"id":"lightning-7xv7","title":"Design: User journey for send-sats + zaps","description":"Define the end-to-end user journey for “send 500 sats to a friend while zapping posts,” including steps, system states, and error handling.\n\nAcceptance criteria:\n- Document covers: login, feed, zap 2 posts, navigate to profile, send 500 sats, and return/back.\n- Includes state transitions (loading, invoice ready, payment sent, paid, error).\n- Lists edge cases (missing lightning address, invalid LNURL metadata, min/max amounts, user not logged in, no posts).\n- Calls out assumptions and open questions.\n\nEdge cases to handle:\n- Profile has no lud16/lud06.\n- LNURL metadata missing callback or sendable limits.\n- commentAllowed = 0.\n\nNote: Always be looking for refactoring opportunities, bug fixes, and improvements. Create new tasks as you encounter them.\n\n## Files\n- docs/flows/send-sats-journey.md (create: user journey + state diagram)","status":"tombstone","priority":2,"issue_type":"task","created_at":"2025-12-20T13:11:10.33894-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","dependencies":[{"issue_id":"lightning-7xv7","depends_on_id":"lightning-01t7","type":"parent-child","created_at":"2025-12-20T13:11:10.341137-08:00","created_by":"honk","metadata":"{}"}],"deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"lightning-7yl","title":"dev https start fails if certs absent","description":"make dev with USE_HTTPS=true failed before certs existed (server throws cert/key missing). Ensure dev-logs.sh creates certs before api dev start or guard make dev to generate once.","status":"tombstone","priority":2,"issue_type":"task","created_at":"2025-12-03T18:13:08.360669-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"lightning-85j","title":"Regtest demo end-to-end smoke","description":"Add a CLI/CI-friendly smoke that hits /api/pay, pays via regtest payer node, and confirms status=PAID for demo tenant.","status":"tombstone","priority":1,"issue_type":"task","created_at":"2025-12-01T12:54:50.135654-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"lightning-85uj","title":"Zap: regtest pay flow + LNURL params","description":"Fix Zap invoice creation and regtest payments so demo zaps work end-to-end.\\n\\nAcceptance Criteria:\\n- LNURL invoice callback accepts NIP-57 params (nostr + lnurl) without 400s.\\n- Zap UI can resolve a lightning address for demo/regtest and shows PAY_REGTEST when enabled.\\n- Regtest pay endpoint succeeds and Zap UI transitions to paid state.\\n- Manual verification via Chrome DevTools MCP (no console/network errors during flow).\\n\\n## Files\\n- packages/blog-kit/src/zap-button.tsx (modify: send correct lnurl param; fallback demo lightning address support)\\n- apps/api/src/routes/lnurlp-callback.ts (modify: accept lnurl query param)\\n- apps/gallery/src/FeedView.tsx (modify: pass demo lightning address when configured)\\n- apps/gallery/src/App.tsx (modify: wire demo lightning address config)","status":"tombstone","priority":1,"issue_type":"task","created_at":"2025-12-20T08:47:42.679036-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"lightning-87n","title":"Investigate telemetry block poll backend errors","description":"Backend logs show repeated  entries (see screenshot). Investigate regtest telemetry polling path/env, ensure docker compose path is correct in dev/prod, and surface actionable error instead of noisy spam. Acceptance: telemetry job runs without repeated errors; if failing, logs emit a single actionable message and UI shows degraded state. Final step: verify via Chrome DevTools MCP log viewer screenshot showing clean stream (no repeated poll failures).","status":"tombstone","priority":1,"issue_type":"bug","created_at":"2025-12-02T17:18:52.525402-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","labels":["demo","infra","logging"],"deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"bug"}
{"id":"lightning-89bj","title":"Core: Cache read-through + TTL cleanup","description":"Add read-through caching for resolved events and reference previews, backed by Prisma.\n\nAcceptance Criteria:\n- Cache hit returns cached event payload without relay fetch.\n- Cache miss fetches from relays and persists to cache with TTL metadata.\n- Implement a simple TTL cleanup strategy (lazy eviction on read or scheduled prune).\n- Include the standing note: while working, look for refactoring opportunities/bugs/improvements and create new bd tasks as they surface.\n\nEdge Cases:\n- Cache entries with invalid signatures\n- Partial cache (event cached, profile missing)\n- Stale entries beyond TTL\n\n## Files\n- apps/api/src/nostr/event-cache.ts (create: cache helpers)\n- apps/api/src/nostr/event-resolver.ts (modify: integrate cache)\n- apps/api/src/services/cache-prune.ts (create: TTL cleanup helper)","status":"tombstone","priority":2,"issue_type":"task","created_at":"2025-12-20T10:31:44.475764-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","dependencies":[{"issue_id":"lightning-89bj","depends_on_id":"lightning-00in","type":"parent-child","created_at":"2025-12-20T10:31:44.478547-08:00","created_by":"honk","metadata":"{}"},{"issue_id":"lightning-89bj","depends_on_id":"lightning-s4ws","type":"blocks","created_at":"2025-12-20T10:34:09.648133-08:00","created_by":"honk","metadata":"{}"},{"issue_id":"lightning-89bj","depends_on_id":"lightning-qdn9","type":"blocks","created_at":"2025-12-20T10:34:10.054263-08:00","created_by":"honk","metadata":"{}"}],"deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"lightning-8er","title":"Simplify demo startup across regtest/mutinynet/mainnet","description":"Unify env presets, scripts, and docs so the demo can run in three clear modes: 1) regtest (real nostr), 2) mutinynet, 3) mainnet. Each mode should support all actions (tip, paywall, comments) with minimal setup.","notes":"Demo modes streamlined: regtest one-liner, mutinynet preset + smoke, mainnet gated preset. Docs and scripts added; npm scripts demo:regtest/demo:mutinynet/demo:mainnet.","status":"tombstone","priority":1,"issue_type":"epic","created_at":"2025-12-01T23:07:14.647324-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"epic"}
{"id":"lightning-8er.1","title":"Regtest one-command bringup + health checks","description":"Provide a single script/env preset to start regtest (bitcoind, lnd pair, LNbits, postgres, API, gallery) and verify tip/pay/comments end-to-end. Add clear outputs: admin key, API/Gallery URLs, relay info.","acceptance_criteria":"./scripts/demo-regtest.sh brings everything up and prints URLs/keys; tip/pay/comments work against regtest without manual edits.","notes":"Added scripts/demo-regtest.sh (one command starts regtest stack, Postgres, API, gallery with real payments + relays); added npm script demo:regtest and README quickstart; smoke: pnpm smoke:regtest-demo (passed).","status":"tombstone","priority":1,"issue_type":"task","created_at":"2025-12-01T23:07:27.044428-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","dependencies":[{"issue_id":"lightning-8er.1","depends_on_id":"lightning-8er","type":"parent-child","created_at":"2025-12-01T23:07:27.045424-08:00","created_by":"honk","metadata":"{}"}],"deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"lightning-8er.2","title":"Mutinynet demo preset","description":"Add presets/scripts/env for mutinynet (Voltage LND + LNbits), wiring API + gallery to staging endpoints. Include smoke script to verify tip/pay/comments.","acceptance_criteria":"Single command switches to mutinynet config and smoke passes for tip/pay/comments.","notes":"Mutinynet script now requires LN_BITS_URL/LN_BITS_API_KEY; added pnpm demo:mutinynet, mutinynet smoke script (no settlement) and docs update.","status":"tombstone","priority":1,"issue_type":"task","created_at":"2025-12-01T23:07:37.358326-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","dependencies":[{"issue_id":"lightning-8er.2","depends_on_id":"lightning-8er","type":"parent-child","created_at":"2025-12-01T23:07:37.359263-08:00","created_by":"honk","metadata":"{}"}],"deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"lightning-8er.3","title":"Mainnet demo preset (readiness gates)","description":"Document and gate a mainnet mode (lnbits+prod relays) with safety switches and health checks; make it opt-in with clear envs.","acceptance_criteria":"Mainnet preset exists but gated behind explicit flag; health/docs outline requirements and warnings.","notes":"Added safety-gated demo-mainnet script + npm script demo:mainnet; docs/demo-modes.md documents gating and env requirements. Mainnet remains opt-in with MAINNET_DEMO_OK=true and needs real LNbits URL/key + relays.","status":"tombstone","priority":1,"issue_type":"task","created_at":"2025-12-01T23:07:49.742621-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","dependencies":[{"issue_id":"lightning-8er.3","depends_on_id":"lightning-8er","type":"parent-child","created_at":"2025-12-01T23:07:49.743325-08:00","created_by":"honk","metadata":"{}"}],"deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"lightning-8h4w","title":"Security: LNURL-pay successAction validation","description":"Validate successAction payloads and sanitize metadata.\n\nImplementation Steps:\n- Enforce max lengths for successAction fields.\n- Validate successAction URL scheme.\n- Reject invalid metadata before issuing invoice.\n\nAcceptance Criteria:\n- Invalid payloads return 4xx with clear error.\n- Logs capture validation failures.\n\nEdge Cases:\n- Truncated successAction does not break clients.\n\n\n## Files\n- apps/api/src/well-known/lnurlp.ts (modify: validate successAction)\n- apps/api/src/routes/lnurlp-callback.ts (modify: validate metadata)","status":"tombstone","priority":2,"issue_type":"task","created_at":"2025-12-19T18:37:59.407428-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","dependencies":[{"issue_id":"lightning-8h4w","depends_on_id":"lightning-naer","type":"parent-child","created_at":"2025-12-19T18:37:59.409106-08:00","created_by":"honk","metadata":"{}"},{"issue_id":"lightning-8h4w","depends_on_id":"lightning-zriy","type":"blocks","created_at":"2025-12-19T18:49:08.573482-08:00","created_by":"honk","metadata":"{}"}],"deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"lightning-8h9","title":"Observability: OTEL + richer metrics","description":"Add OpenTelemetry tracing (OTLP exporter), expand Prom metrics (per-tenant LNURL success/fail, webhook failures, DB durations), expose request IDs.","status":"tombstone","priority":2,"issue_type":"task","created_at":"2025-11-28T09:56:03.2318-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","dependencies":[{"issue_id":"lightning-8h9","depends_on_id":"lightning-2lx","type":"parent-child","created_at":"2025-11-29T07:25:29.526225-08:00","created_by":"honk","metadata":"{}"}],"deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"lightning-8i8k","title":"Epic: BOLT12 offers + subscriptions","description":"Complete bolt12 offers + subscriptions feature.\n\n## Objective\nDeliver the end-to-end capability with backend, frontend, security, and tests.\n\n## Success Criteria\n- [ ] Feature can be used end-to-end in the gallery.\n- [ ] API endpoints are guarded and validated.\n- [ ] Tests cover primary flows and guard rails.\n\n## Out of Scope\n- Accessibility updates.\n- Documentation updates.\n","status":"tombstone","priority":2,"issue_type":"epic","created_at":"2025-12-19T18:37:56.210607-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","dependencies":[{"issue_id":"lightning-8i8k","depends_on_id":"lightning-61qz","type":"parent-child","created_at":"2025-12-19T18:37:56.212371-08:00","created_by":"honk","metadata":"{}"}],"deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"epic"}
{"id":"lightning-8k8y","title":"design system: unify form controls (inputs/selects) in gallery","description":"Gallery currently mixes native inputs/selects with bespoke tokenized components; unify form control styling so the demo looks crisp and theming-friendly (like markdowntown).\n\nScope:\n- Add a `nostrstack-select` class aligned with `nostrstack-input`/`nostrstack-textarea`\n- Apply these classes consistently across gallery controls (amount, relays, telemetry endpoint, wallet override inputs, etc.)\n- Ensure focus rings + disabled states match design tokens\n- Keep prefers-reduced-motion behavior intact","acceptance_criteria":"- All form controls in gallery use design-system classes\\n- No console/network errors in demo QA (pnpm qa:regtest-demo)\\n- Lint/typecheck/tests pass","status":"tombstone","priority":3,"issue_type":"task","created_at":"2025-12-13T21:17:09.715499-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"lightning-8lne","title":"Fix: Realtime Bitcoin Node updates on Regtest Fund","description":"Ensure the Bitcoin Node component updates immediately when 'Add funds' is clicked. Currently it relies on telemetry WS which might be slow or disconnected.\n\nImplementation Plan:\n1.  Verify Telemetry WS subscription in .\n2.  Update  handleRegtestFund to invalidate/refetch  or manually trigger a status refresh upon success.\n3.  Ensure the API  endpoint waits for block mining before returning, or returns the new block height so frontend can update optimistic state.\n\nAcceptance Criteria:\n- Clicking 'Add funds' updates the block height in Bitcoin Node card within \\u003c2 seconds.\n- Toast confirms funding AND mining.\n\n## Files\n- apps/gallery/src/Sidebar.tsx (modify: trigger status refresh)\n- apps/gallery/src/TelemetryBar.tsx (modify: ensure WS reconnection/handling)\n- apps/api/src/services/regtest-fund.ts (modify: ensure response includes new block info if needed)\n\n## QA Evidence\n- Playwright test:  (enhanced to check block height)\n- Screen recording of fund flow","status":"tombstone","priority":2,"issue_type":"task","created_at":"2026-01-02T14:52:43.924625-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","close_reason":"Implemented realtime Bitcoin Node updates for regtest fund. Added manual-block-update event and forced refresh of Bitcoin status. Verified API returns block height.","dependencies":[{"issue_id":"lightning-8lne","depends_on_id":"lightning-70lj","type":"parent-child","created_at":"2026-01-02T14:52:43.928188-08:00","created_by":"honk"}],"deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"lightning-8mng","title":"Gallery: clarify relay preset buttons (mock vs real)","description":"The 'Use real defaults' relays button currently sets relays from VITE_NOSTRSTACK_RELAYS which may be 'mock' in QA. Add explicit presets: 'Use mock', 'Use public relays', and rename to avoid confusion.","acceptance_criteria":"- Relays card exposes mock + public relay presets\\n- Button labels match behavior\\n- QA still passes","status":"tombstone","priority":4,"issue_type":"chore","created_at":"2025-12-15T11:22:50.643068-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"chore"}
{"id":"lightning-8oa3","title":"Feat: Reply Composer \u0026 Modal","description":"Implement a reply flow adhering to NIP-10.\n\nDescription:\n- Refactor `PostEditor` (or create `ReplyEditor`) to accept a target event.\n- When replying, construct tags:\n  - `e` (root) = target's root or target itself if root.\n  - `e` (reply) = target event.\n  - `p` = target author + mentioned users.\n- Add a 'Reply' button to `PostItem` that opens a modal with the editor.\n\nAcceptance Criteria:\n- Clicking Reply opens a modal.\n- Publishing sends a Kind 1 event with correct `e` and `p` tags.\n- UI closes modal on success and shows a toast.\n\nEdge Cases:\n- Replying to a reply (thread handling).\n- Self-reply.\n\n## Files\n- packages/blog-kit/src/post-editor.tsx (modify: add reply support or extract logic)\n- packages/blog-kit/src/reply-modal.tsx (create: modal wrapper)\n- apps/gallery/src/FeedView.tsx (modify: wire up reply button)\n- apps/gallery/src/gallery.css (modify: modal styles)\n\n## QA Evidence\n- Playwright: Test reply flow, inspect event tags in mock relay.\n- Screenshots: `docs/screenshots/social/reply-modal.png`\n\n## Actual QA Evidence\n- Playwright: Visual check passed (`apps/gallery/tests/reply.spec.ts`).\n- Screenshots: `docs/screenshots/social/reply-modal.png`\n- CI: Passed.\n\n## Close Notes\n- Implementation pre-existing.\n- Added visual regression test for reply modal.\n- Functional E2E test skipped due to login issues in test env.","status":"tombstone","priority":2,"issue_type":"task","created_at":"2026-01-03T22:02:11.191245-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","close_reason":"Implemented","dependencies":[{"issue_id":"lightning-8oa3","depends_on_id":"lightning-7qzp","type":"parent-child","created_at":"2026-01-03T22:02:11.19384-08:00","created_by":"honk"}],"deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"lightning-8pg","title":"Paywall/tip flows stuck: waiting state + pay status 404 spam + invoice button inert","description":"Environment: make dev (HTTPS), regtest dev stack; visited https://localhost:4173 on 2025-12-04.\\nObserved: Lightning tab loads with Pay to unlock already showing 'Waiting for payment' and 'Locked' even before requesting anything. API logs show continuous GET /api/lnurlp/pay/status/bb45997d66d1cc0ff1230e08f138534bafe1d4ae3d7119c5ee2a70f0ff7c17a1 returning 404 every ~5s (see .logs/dev/api.log). Pay WS status stays idle. The 'Request real invoice (5 sats)' button in Tip section does nothing (no modal, no API call).\\nImpact: demo spams backend logs with 404s, paywall never unlocks, tip/demo invoice cannot be requested, manual Recheck","status":"tombstone","priority":1,"issue_type":"bug","created_at":"2025-12-03T20:57:44.686004-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"bug"}
{"id":"lightning-8swr","title":"Test: Regtest pay guard + invalid invoice","description":"Add API tests covering regtest pay guarding and invalid invoice handling.\n\nAcceptance Criteria:\n- Test verifies 403/404 when regtest pay is disabled.\n- Test verifies 400 for malformed invoices.\n- Test does not require docker compose when guard blocks execution.\n\n## Files\n- apps/api/src/routes/regtest-pay.ts (modify: allow test injection/guard path)\n- apps/api/src/routes/regtest-pay.test.ts (create: guard + validation tests)","status":"tombstone","priority":2,"issue_type":"task","created_at":"2025-12-19T16:19:35.627253-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","dependencies":[{"issue_id":"lightning-8swr","depends_on_id":"lightning-k7bf","type":"parent-child","created_at":"2025-12-19T16:19:35.629976-08:00","created_by":"honk","metadata":"{}"},{"issue_id":"lightning-8swr","depends_on_id":"lightning-nkxv","type":"blocks","created_at":"2025-12-19T16:20:41.56774-08:00","created_by":"honk","metadata":"{}"}],"deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"lightning-8vvo","title":"Docs: Regtest zap usage + config","description":"Document how to enable and use regtest zap payments in the gallery.\n\nAcceptance Criteria:\n- README and local demo docs mention regtest pay flag + API base requirement.\n- Clear steps to pay zap invoices on regtest (UI + endpoint) included.\n\n## Files\n- apps/gallery/README.md (modify: regtest zap usage + env flag)\n- docs/local-demo.md (modify: regtest zap steps)\n- docs/testing.md (modify: regtest zap test notes)","status":"tombstone","priority":2,"issue_type":"task","created_at":"2025-12-19T16:19:56.906002-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","dependencies":[{"issue_id":"lightning-8vvo","depends_on_id":"lightning-k7bf","type":"parent-child","created_at":"2025-12-19T16:19:56.913344-08:00","created_by":"honk","metadata":"{}"},{"issue_id":"lightning-8vvo","depends_on_id":"lightning-5las","type":"blocks","created_at":"2025-12-19T16:20:56.795953-08:00","created_by":"honk","metadata":"{}"},{"issue_id":"lightning-8vvo","depends_on_id":"lightning-nkxv","type":"blocks","created_at":"2025-12-19T16:21:04.628992-08:00","created_by":"honk","metadata":"{}"}],"deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"lightning-8wfy","title":"Test: Identifier resolver unit tests","description":"Add unit tests for the identifier resolver utility.\n\n- Cover npub/nprofile/hex parsing.\n- Mock NIP-05 proxy responses and error cases.\n- Validate error typing and debounced hook behavior.\n\nAcceptance Criteria\n- Tests cover valid and invalid input paths.\n- No flakey async tests; deterministic timing.\n\nEdge Cases\n- Mixed-case inputs, whitespace, timeouts.\n\nNote: Always be looking for refactoring opportunities, bug fixes, and improvements. Create new tasks as you encounter them.\n\n## Files\n- apps/gallery/src/utils/identity.test.ts (create: resolver tests)","status":"tombstone","priority":2,"issue_type":"task","created_at":"2025-12-25T23:07:33.92217-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","dependencies":[{"issue_id":"lightning-8wfy","depends_on_id":"lightning-yzz6","type":"parent-child","created_at":"2025-12-25T23:07:33.924181-08:00","created_by":"honk","metadata":"{}"},{"issue_id":"lightning-8wfy","depends_on_id":"lightning-qkwi","type":"blocks","created_at":"2025-12-25T23:07:39.486128-08:00","created_by":"honk","metadata":"{}"}],"deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"lightning-8whz","title":"UI: Profile tip panel polish","description":"Polish the profile tip panel and quick actions.\n\n- Elevate the SendSats card on profiles (clear \"Tip 500\" CTA, quick preset row).\n- Add verified display for nip05 and lightning address availability.\n- Improve empty-state messaging when no posts or lightning address.\n\nAcceptance Criteria\n- Profile shows a clear \"Tip\" section with fast actions.\n- If no lightning address, the UI explains why tipping is unavailable.\n- Layout remains responsive on mobile.\n\nEdge Cases\n- Profile metadata missing, no posts, long nip05 names.\n\nNote: Always be looking for refactoring opportunities, bug fixes, and improvements. Create new tasks as you encounter them.\n\n## Files\n- apps/gallery/src/ProfileView.tsx (modify: tip panel + verified display)\n- apps/gallery/src/styles/profile-tip.css (create: tip panel styles)\n- apps/gallery/src/styles/lightning-card.css (modify: align with tip panel)","status":"tombstone","priority":2,"issue_type":"task","created_at":"2025-12-25T23:07:32.690765-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","dependencies":[{"issue_id":"lightning-8whz","depends_on_id":"lightning-yzz6","type":"parent-child","created_at":"2025-12-25T23:07:32.692753-08:00","created_by":"honk","metadata":"{}"},{"issue_id":"lightning-8whz","depends_on_id":"lightning-cyfb","type":"blocks","created_at":"2025-12-25T23:07:38.103096-08:00","created_by":"honk","metadata":"{}"}],"deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"lightning-8x5","title":"Simplify key format toggle (npub/hex switch)","description":"Key format controls are noisy. Replace with a single switch to toggle npub vs hex, keep copy button(s), and ensure truncation/monospace styling. Acceptance: switch toggles formats instantly, keyboard accessible, no layout shift, and styles consistent in light/dark. Final step: validate with Chrome DevTools MCP and attach screenshot demonstrating both states.","status":"tombstone","priority":2,"issue_type":"task","created_at":"2025-12-02T16:20:14.805815-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","labels":["demo","nostr"],"deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"lightning-8z4e","title":"Lightning demo: Paywall/invoice UX overhaul + layout robustness","description":"User feedback: pay-to-unlock and invoice UI still looks bad; layout overlap regressions keep happening; need a great, real-time, polished paywall/invoice experience and automated checks for layout issues at common widths.","design":"## Architecture\n\n[Describe the overall architecture and approach]\n\n## Components\n\n- Component 1: [description]\n- Component 2: [description]\n\n## Dependencies\n\n[List external dependencies or constraints]\n","acceptance_criteria":"- [ ] All child issues are completed\n- [ ] Integration tests pass\n- [ ] Documentation is updated\n- [ ] Code review completed\n","status":"tombstone","priority":1,"issue_type":"epic","created_at":"2025-12-14T16:14:24.719658-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","labels":["epic"],"deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"epic"}
{"id":"lightning-8z4e.1","title":"Lightning: Pay-to-unlock layout overlap regression (still broken)","description":"User reports pay-to-unlock still overlaps/clips into adjacent cards at some widths (see screenshot codex-clipboard-fr2Qk1.png). Ensure paywall never overlaps and add regression checks.","design":"## Root Cause Analysis\n\n[Describe the underlying cause once identified]\n\n## Proposed Fix\n\n[Outline the solution approach]\n\n## Impact Assessment\n\n- Affected features: [list]\n- Breaking changes: [yes/no and details]\n- Migration needed: [yes/no and details]\n","acceptance_criteria":"- [ ] Bug no longer reproduces with original steps\n- [ ] Regression tests added\n- [ ] Related edge cases tested\n- [ ] Documentation updated if behavior changed\n","status":"tombstone","priority":1,"issue_type":"bug","created_at":"2025-12-14T16:14:41.567673-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","labels":["bug"],"dependencies":[{"issue_id":"lightning-8z4e.1","depends_on_id":"lightning-8z4e","type":"parent-child","created_at":"2025-12-14T16:14:41.569258-08:00","created_by":"honk","metadata":"{}"}],"deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"bug"}
{"id":"lightning-8z4e.2","title":"Lightning: Invoice modal redesign (QR + timer + copy)","description":"Invoice/QR modal still looks bad; redesign from scratch with strong hierarchy (QR, status, expiry, actions), tighter spacing, and fast feedback. Use design inspiration from modern LN wallets.","design":"## Technical Design\n\n[Detailed technical approach]\n\n## API Changes\n\n[New commands, flags, or APIs]\n\n## Data Model Changes\n\n[Database schema changes if any]\n\n## Implementation Notes\n\n- Note 1\n- Note 2\n\n## Testing Strategy\n\n- Unit tests: [scope]\n- Integration tests: [scope]\n- Manual testing: [steps]\n","acceptance_criteria":"- [ ] Feature implements all described use cases\n- [ ] All tests pass\n- [ ] Documentation updated (README, commands)\n- [ ] Examples added if applicable\n- [ ] No performance regressions\n","status":"tombstone","priority":2,"issue_type":"feature","created_at":"2025-12-14T16:14:57.340066-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","labels":["feature"],"dependencies":[{"issue_id":"lightning-8z4e.2","depends_on_id":"lightning-8z4e","type":"parent-child","created_at":"2025-12-14T16:14:57.341653-08:00","created_by":"honk","metadata":"{}"}],"deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"feature"}
{"id":"lightning-8z4e.3","title":"Lightning: Tighten bulky UI (env pills + sections)","description":"Several areas feel bulky/waste space (env pill bar, large cards). Tighten typography/spacing and improve density while keeping readability.","design":"## Technical Design\n\n[Detailed technical approach]\n\n## API Changes\n\n[New commands, flags, or APIs]\n\n## Data Model Changes\n\n[Database schema changes if any]\n\n## Implementation Notes\n\n- Note 1\n- Note 2\n\n## Testing Strategy\n\n- Unit tests: [scope]\n- Integration tests: [scope]\n- Manual testing: [steps]\n","acceptance_criteria":"- [ ] Feature implements all described use cases\n- [ ] All tests pass\n- [ ] Documentation updated (README, commands)\n- [ ] Examples added if applicable\n- [ ] No performance regressions\n","status":"tombstone","priority":2,"issue_type":"feature","created_at":"2025-12-14T16:15:13.338245-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","labels":["feature"],"dependencies":[{"issue_id":"lightning-8z4e.3","depends_on_id":"lightning-8z4e","type":"parent-child","created_at":"2025-12-14T16:15:13.339131-08:00","created_by":"honk","metadata":"{}"}],"deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"feature"}
{"id":"lightning-8z4e.4","title":"Lightning: make regtest-lndbits stack self-healing (LND sync + active channel)","description":"Observed: after docker container restarts/kill (exit 137), bitcoind+LNbits can restart with lower height than LND wallets; LND gets stuck with 'Block height out of range' and channels become inactive. Demo payments + pnpm qa:regtest-demo fail until manual steps: load miner wallet, mine blocks to catch up, reconnect peers so channels become active.\\n\\nImprove scripts/regtest-lndbits.sh to:\\n- ensure miner wallet is loaded (loadwallet)\\n- optionally mine blocks until both LND nodes report synced_to_chain=true\\n- reconnect payer-\u003emerchant peer and ensure at least one active channel (or detect inactive and reopen)\\n- surface actionable diagnostics on failure.\\n\\nAcceptance: running ./scripts/regtest-lndbits.sh up yields a working pay flow without manual intervention, and qa:regtest-demo passes.","status":"tombstone","priority":2,"issue_type":"task","created_at":"2025-12-14T17:25:31.604808-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","labels":["dev","regtest"],"dependencies":[{"issue_id":"lightning-8z4e.4","depends_on_id":"lightning-8z4e","type":"parent-child","created_at":"2025-12-14T17:25:31.60591-08:00","created_by":"honk","metadata":"{}"}],"deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"lightning-8z4e.5","title":"Lightning: Pay-to-unlock invoice row overflow in \"Waiting for payment\" state","description":"Regression: Pay-to-unlock card still overflows into the sidebar when invoice is shown (Waiting for payment) — see codex-clipboard-KpQ8sf.png. Fix layout so invoice/actions never exceed card width at common breakpoints; add QA regression coverage.","status":"tombstone","priority":1,"issue_type":"bug","created_at":"2025-12-14T20:22:30.356258-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","dependencies":[{"issue_id":"lightning-8z4e.5","depends_on_id":"lightning-8z4e","type":"parent-child","created_at":"2025-12-14T20:22:30.357287-08:00","created_by":"honk","metadata":"{}"}],"deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"bug"}
{"id":"lightning-919","title":"NpubBar widthBasedKeep ReferenceError on init","description":"Console shows Uncaught ReferenceError: Cannot access 'widthBasedKeep' before initialization at NpubBar.tsx:27 in gallery dev (see codex-clipboard-716v8a.png). Error triggers during render of NostrProfileCard/App. Need to ensure widthBasedKeep is defined before use, likely move function above useMemo or avoid temporal dead zone.","status":"tombstone","priority":1,"issue_type":"bug","created_at":"2025-12-03T08:54:39.377219-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"bug"}
{"id":"lightning-92wd","title":"Tests/Docs: telemetry hysteresis dwell","description":"Add unit tests for TelemetryBar hysteresis dwell logic and document the statusDwellMs timing override.\n\nAcceptance criteria:\n- Unit tests cover dwell for reconnecting/offline and immediate connected transitions (using fake timers).\n- statusDwellMs default (400ms), override mechanism, and disable option (0) documented.\n- Tests validate no state updates after unmount during dwell.\n\nEdge cases:\n- Rapid flapping within dwell window.\n- statusDwellMs set to 0 or negative values.\n\n## Files\n- apps/gallery/src/TelemetryBar.tsx (modify: expose/test dwell config if needed)\n- apps/gallery/src/TelemetryBar.test.tsx (create: fake-timer tests)\n- docs/telemetry-ws.md (modify: document statusDwellMs)\n\n## QA Evidence\n- Unit: `pnpm --filter gallery test -- TelemetryBar.test.tsx`\n- Lint: `pnpm --filter gallery lint`\n- CI: `pnpm check`\n- Logs: `tail -n 50 .logs/dev/api.log .logs/dev/gallery.log` (no errors/warnings)\n\n## Close Notes\n- Issues encountered: Vitest mock hoisting and lint unused import; resolved with vi.hoisted and cleanup.\n- Setup improvements: None.\n- Debug info that would have helped: None.\n","status":"tombstone","priority":3,"issue_type":"task","assignee":"honk","estimated_minutes":90,"created_at":"2026-01-04T04:07:55.910897-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","close_reason":"Implemented","labels":["docs","telemetry","tests","ui"],"dependencies":[{"issue_id":"lightning-92wd","depends_on_id":"lightning-3aij","type":"parent-child","created_at":"2026-01-04T04:07:55.914364-08:00","created_by":"honk"}],"deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"lightning-94j","title":"Wallet WebSocket warns on load: 'closed before connection is established'","description":"On dev HTTPS (https://localhost:4173) console always shows: WebSocket connection to 'wss://localhost:4173/ws/wallet' failed: WebSocket is closed before the connection is established. Happens on every reload even though wallet data renders and server logs show connections. Likely double-connect/cleanup closing CONNECTING socket. Need to stabilize lifecycle so no warning in console and only one wallet WS connect.","status":"tombstone","priority":2,"issue_type":"bug","created_at":"2025-12-03T20:57:58.603766-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"bug"}
{"id":"lightning-955y","title":"Smoother Navigation Transitions","description":"Add subtle CSS transitions between views to make navigation feel less abrupt.\n\n## QA Evidence\n- `pnpm lint \\u0026\\u0026 pnpm typecheck` passed.\n- Navigation between Feed, Search, Profile, etc. features a subtle fade-in and slide-up.\n- prefers-reduced-motion respected.\n\n## Close Notes\n- Issues encountered: None.\n- Setup improvements: None.","status":"tombstone","priority":3,"issue_type":"task","created_at":"2026-01-02T22:46:34.468118-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","close_reason":"Implemented","deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"lightning-95u","title":"Provide regtest test wallet UX","description":"Add simple instructions/UI to create LNbits wallet and funding (via regtest-fund) so users can send/receive manually in demo.","status":"tombstone","priority":2,"issue_type":"task","created_at":"2025-12-01T13:08:38.514847-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"lightning-96v7","title":"Design/Infra: LNURL-auth session model","description":"Define the data model and initial API contract for LNURL-auth sessions.\n\nImplementation Steps:\n- Add lnurl_auth_sessions table for k1, linking key, status, and TTL.\n- Add schema constraints + indexes for k1 lookup.\n\nAcceptance Criteria:\n- Prisma schema includes LNURL-auth session entity.\n- Migration applies cleanly.\n\nEdge Cases:\n- Duplicate k1s are rejected.\n\n\n## Files\n- apps/api/prisma/schema.prisma (modify: add LnurlAuthSession model)\n- apps/api/prisma/migrations/* (create: migration for auth sessions)","status":"tombstone","priority":2,"issue_type":"task","created_at":"2025-12-19T18:37:56.565624-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","dependencies":[{"issue_id":"lightning-96v7","depends_on_id":"lightning-j0ns","type":"parent-child","created_at":"2025-12-19T18:37:56.568459-08:00","created_by":"honk","metadata":"{}"}],"deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"lightning-98zj","title":"Design: Profile payment UI + navigation spec","description":"Create UI/UX spec for profile payment card and author navigation, including copy, layouts, mobile, focus/keyboard, and states.\n\nAcceptance criteria:\n- Wireframe-level spec for profile pay card (amount input, presets, Send 500 CTA, status).\n- Spec for author name click -\u003e profile route and back navigation.\n- Accessibility: focus order, ESC close, aria labels, error messaging.\n- Visual tokens: reuse zap modal styles, define new CSS classes.\n\nEdge cases to handle:\n- Small screens and long lightning addresses.\n- Invalid pubkey or missing profile metadata.\n\nNote: Always be looking for refactoring opportunities, bug fixes, and improvements. Create new tasks as you encounter them.\n\n## Files\n- docs/design/profile-pay-ui.md (create: UI/UX spec + copy)","status":"tombstone","priority":2,"issue_type":"task","created_at":"2025-12-20T13:11:10.720271-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","dependencies":[{"issue_id":"lightning-98zj","depends_on_id":"lightning-01t7","type":"parent-child","created_at":"2025-12-20T13:11:10.721773-08:00","created_by":"honk","metadata":"{}"},{"issue_id":"lightning-98zj","depends_on_id":"lightning-7xv7","type":"blocks","created_at":"2025-12-20T13:11:40.389352-08:00","created_by":"honk","metadata":"{}"}],"deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"lightning-99b2","title":"Core API: LNURL-withdraw endpoints","description":"Implement LNURL-withdraw request + callback endpoints.\n\nImplementation Steps:\n- Create endpoint to mint withdraw QR data.\n- Implement callback to accept invoice and pay out.\n- Add status endpoint for UI polling.\n\nAcceptance Criteria:\n- Withdraw QR returns valid LNURLw payload.\n- Callback pays invoice via provider and marks session paid.\n\nEdge Cases:\n- Invalid invoices return structured error.\n\n\n## Files\n- apps/api/src/routes/lnurl-withdraw.ts (create: withdraw routes)\n- apps/api/src/services/lnurl-withdraw.ts (create: payout logic)\n- apps/api/src/routes/index.ts (modify: register withdraw routes)","status":"tombstone","priority":2,"issue_type":"task","created_at":"2025-12-19T18:38:00.559248-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","dependencies":[{"issue_id":"lightning-99b2","depends_on_id":"lightning-1kbq","type":"parent-child","created_at":"2025-12-19T18:38:00.560686-08:00","created_by":"honk","metadata":"{}"},{"issue_id":"lightning-99b2","depends_on_id":"lightning-lyl1","type":"blocks","created_at":"2025-12-19T18:49:09.265921-08:00","created_by":"honk","metadata":"{}"},{"issue_id":"lightning-99b2","depends_on_id":"lightning-tolk","type":"blocks","created_at":"2025-12-19T18:49:13.840176-08:00","created_by":"honk","metadata":"{}"}],"deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"lightning-9a1t","title":"docs: design system overview (tokens + motion + theming)","description":"Add a design system overview doc similar to markdowntown: tokens, motion presets, and theming strategies for embed/blog-kit/gallery.","acceptance_criteria":"New docs file explains --nostrstack-* tokens, theme presets, and motion guidance; references relevant helpers; no code changes required.","status":"tombstone","priority":3,"issue_type":"task","created_at":"2025-12-14T01:49:01.306463-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"lightning-9avs","title":"Design: Zap invoice layout + tokens","description":"Define the visual layout, spacing, and tokenized styles for the zap invoice component based on the provided screenshot and Lightning tip UI patterns.\n\nAcceptance Criteria:\n- Introduce/adjust `zap-*` CSS classes for the QR panel, invoice panel, action bar, and status line.\n- Layout supports two-column desktop and single-column mobile without overflow.\n- Tokens/vars align with existing gallery design system (colors, borders, typography).\n\nEdge Cases:\n- Very long invoices wrap or scroll without expanding layout.\n- Small viewports keep QR readable (\u003e= 200px) without pushing actions off-screen.\n\n## Files\n- apps/gallery/src/gallery.css (modify: add/update zap component layout styles)","status":"tombstone","priority":2,"issue_type":"task","created_at":"2025-12-19T17:39:05.699459-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","dependencies":[{"issue_id":"lightning-9avs","depends_on_id":"lightning-m8y7","type":"parent-child","created_at":"2025-12-19T17:39:17.667809-08:00","created_by":"honk","metadata":"{}"}],"deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"lightning-9d1","title":"Gallery spams old payment status 404 on startup","description":"On dev boot the gallery keeps polling /api/lnurlp/pay/status/\u003cold hash\u003e returning 404, cluttering logs. Need to clear cached paymentRef/qrInvoice on load and stop polling when status is 404 or no ref.","status":"tombstone","priority":2,"issue_type":"task","created_at":"2025-12-03T18:50:06.753809-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"lightning-9gyz","title":"QR: branded, customizable, validated QR system + QR Lab demo","description":"Create an amazing, highly customizable QR rendering system suitable for Lightning (BOLT11) invoices and other payloads. Requirements: branded styles (colors/gradients/dots/corners/logo), safe presets, strict reliability with built-in decode verification + fallback, framework-friendly config API for consumers, and a gallery 'QR Lab' demo/playground to explore and validate configurations. Integrate into existing invoice UI (gallery + embed).","status":"tombstone","priority":1,"issue_type":"epic","created_at":"2025-12-14T21:49:08.392981-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"epic"}
{"id":"lightning-9gyz.1","title":"Research QR tooling: styling, validation, reliability","description":"Deep web search: evaluate best JS/TS QR generators/renderers for branded QR (SVG/canvas), image/logo embedding, gradients/shapes, maintenance, license, SSR constraints, and known scanner reliability pitfalls. Recommend stack + fallback strategy.","status":"tombstone","priority":1,"issue_type":"task","created_at":"2025-12-14T21:49:28.481386-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","dependencies":[{"issue_id":"lightning-9gyz.1","depends_on_id":"lightning-9gyz","type":"parent-child","created_at":"2025-12-14T21:49:28.482397-08:00","created_by":"honk","metadata":"{}"}],"deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"lightning-9gyz.2","title":"QR core: branded styles + strict decode verification + fallback","description":"Implement a shared QR component/module with a serializable config type (theme, size, margin/quiet zone, ECC, logo, gradients, shapes). Must support strict runtime verification (decode the rendered QR to ensure it scans) and automatic fallback to a safe QR if verification fails.","status":"tombstone","priority":1,"issue_type":"feature","created_at":"2025-12-14T21:49:44.057137-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","dependencies":[{"issue_id":"lightning-9gyz.2","depends_on_id":"lightning-9gyz","type":"parent-child","created_at":"2025-12-14T21:49:44.058413-08:00","created_by":"honk","metadata":"{}"}],"deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"feature"}
{"id":"lightning-9gyz.3","title":"Gallery: QR Lab playground demo","description":"Add a dedicated demo section/page in the gallery to experiment with QR configs: style controls, presets, live preview, decode self-check (pass/fail), and exportable JSON config.","status":"tombstone","priority":2,"issue_type":"feature","created_at":"2025-12-14T21:49:59.092734-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","dependencies":[{"issue_id":"lightning-9gyz.3","depends_on_id":"lightning-9gyz","type":"parent-child","created_at":"2025-12-14T21:49:59.094038-08:00","created_by":"honk","metadata":"{}"}],"deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"feature"}
{"id":"lightning-9gyz.4","title":"Gallery: migrate invoice QR to new branded QR component","description":"Replace current invoice QR generation (qrcode -\u003e PNG dataURL) in gallery invoice UI (InvoicePopover / PayToUnlock / etc.) with the new QR component, using safe presets by default + optional fancy presets.","status":"tombstone","priority":1,"issue_type":"task","created_at":"2025-12-14T21:50:14.58179-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","dependencies":[{"issue_id":"lightning-9gyz.4","depends_on_id":"lightning-9gyz","type":"parent-child","created_at":"2025-12-14T21:50:14.582851-08:00","created_by":"honk","metadata":"{}"}],"deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"lightning-9gyz.5","title":"Embed: migrate invoice QR to new branded QR component","description":"Update packages/embed invoice popover QR rendering to use the new shared QR module (or expose a stable QR API) while keeping bundle/runtime constraints for consumers.","status":"tombstone","priority":2,"issue_type":"task","created_at":"2025-12-14T21:50:29.751011-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","dependencies":[{"issue_id":"lightning-9gyz.5","depends_on_id":"lightning-9gyz","type":"parent-child","created_at":"2025-12-14T21:50:29.752044-08:00","created_by":"honk","metadata":"{}"}],"deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"lightning-9gyz.6","title":"QA: add QR decode verification checks","description":"Extend automated QA/regtests to cover QR rendering changes (and QR Lab) and fail on broken decode, console errors, or local request failures.","status":"tombstone","priority":2,"issue_type":"chore","created_at":"2025-12-14T21:50:43.89432-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","dependencies":[{"issue_id":"lightning-9gyz.6","depends_on_id":"lightning-9gyz","type":"parent-child","created_at":"2025-12-14T21:50:43.895216-08:00","created_by":"honk","metadata":"{}"}],"deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"chore"}
{"id":"lightning-9jl","title":"Comments widget missing input/post UI in demo","description":"On Nostr tab, comments section shows only info text and relay pills; no textarea or Post button renders, so comments cannot be posted.","status":"tombstone","priority":1,"issue_type":"task","created_at":"2025-12-02T14:53:04.721565-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","labels":["bug","demo","nostr"],"deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"lightning-9m9","title":"Dev TLS: one secure origin for UI + WS","description":"Enforce single secure origin in dev: gallery HTTPS (4173) with proxy for /api and /ws/* to API (HTTP), auto-cert via basicSsl; add startup check that fails if page is HTTPS but ws:// is used or proxy missing. Document how to run API behind reverse proxy in prod.","status":"tombstone","priority":1,"issue_type":"chore","created_at":"2025-12-03T15:32:05.864611-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","labels":["devex","security","websockets"],"deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"chore"}
{"id":"lightning-9ml3","title":"Improvements: Social Connectivity","description":"Follow-up tasks and refinements for the Social Connectivity epic.\n\n## Objective\nRefine social features based on implementation findings.\n\n## Tasks\n- [ ] Refactor remaining ProfileView parts to use a shared pool.\n- [ ] Optimize relay selection for NIP-50 search.\n- [ ] Group mentions in NotificationsView if they belong to the same thread.\n","status":"tombstone","priority":3,"issue_type":"epic","created_at":"2026-01-03T13:34:19.215567-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","close_reason":"Implemented all improvement tasks","deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"epic"}
{"id":"lightning-9mr","title":"Test payer can pay invoices from UI","description":"Add well-tested 'Test payer' flow: allow paying any BOLT11 from the prefunded lnd-payer node, surface in UI, show status, and log to /ws/pay; ensure live updates via logs/DevTools.","status":"tombstone","priority":1,"issue_type":"feature","created_at":"2025-12-03T14:25:13.623732-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","labels":["backend","frontend","regtest"],"deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"feature"}
{"id":"lightning-9o0y","title":"Core UI: Withdraw QR flow","description":"Add UI for users to withdraw wallet balance via LNURL-withdraw.\n\nImplementation Steps:\n- Add withdraw entry point in wallet section.\n- Render QR for LNURL-withdraw and poll status.\n- Show success/error toasts on completion.\n\nAcceptance Criteria:\n- Withdraw flow is accessible from the wallet UI.\n- QR + status updates are visible.\n\nEdge Cases:\n- Insufficient balance disables withdraw button.\n\n\n## Files\n- apps/gallery/src/Sidebar.tsx (modify: add withdraw entry point)\n- apps/gallery/src/WalletView.tsx (create: withdraw modal/flow)\n- apps/gallery/src/styles/withdraw.css (create: withdraw styles)","status":"tombstone","priority":2,"issue_type":"task","created_at":"2025-12-19T18:38:00.934832-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","dependencies":[{"issue_id":"lightning-9o0y","depends_on_id":"lightning-1kbq","type":"parent-child","created_at":"2025-12-19T18:38:00.936163-08:00","created_by":"honk","metadata":"{}"},{"issue_id":"lightning-9o0y","depends_on_id":"lightning-99b2","type":"blocks","created_at":"2025-12-19T18:49:09.575148-08:00","created_by":"honk","metadata":"{}"}],"deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"lightning-9u7z","title":"Standardize loading states","description":"Ensure consistent loading states (spinners, skeletons) are visible for all async actions in the gallery.\n\n## QA Evidence\n- `pnpm lint \\u0026\\u0026 pnpm typecheck` passed.\n- Standardized spinner visible in Profile, Feed, Search, Relays, Wallet, Login views.\n- ARIA roles (role=\"status\") added for accessibility.\n- prefers-reduced-motion media query added.\n\n## Close Notes\n- Issues encountered: None.\n- Setup improvements: None.","status":"tombstone","priority":2,"issue_type":"task","created_at":"2026-01-02T22:12:43.298007-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","close_reason":"Implemented","deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"lightning-9vl","title":"MCP browser verification for regtest demo","description":"Use chrome-devtools-mcp to drive/verify demo (LN + Nostr) end-to-end.","notes":"All MCP tasks documented (launcher, setup, invoice flow, comment flow, evidence).","status":"tombstone","priority":1,"issue_type":"epic","created_at":"2025-12-01T17:31:12.664852-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"epic"}
{"id":"lightning-9vl.1","title":"Prep Chrome remote-debug launcher","description":"Add script to start Chrome with remote-debugging-port=9222 and isolated profile for MCP.","status":"tombstone","priority":1,"issue_type":"task","created_at":"2025-12-01T17:31:33.856552-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","dependencies":[{"issue_id":"lightning-9vl.1","depends_on_id":"lightning-9vl","type":"parent-child","created_at":"2025-12-01T17:31:33.857275-08:00","created_by":"honk","metadata":"{}"}],"deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"lightning-9vl.2","title":"Document MCP setup + config","description":"Add doc for installing chrome-devtools-mcp, client config, and wiring to localhost demo.","status":"tombstone","priority":1,"issue_type":"task","created_at":"2025-12-01T17:31:55.560816-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","dependencies":[{"issue_id":"lightning-9vl.2","depends_on_id":"lightning-9vl","type":"parent-child","created_at":"2025-12-01T17:31:55.561833-08:00","created_by":"honk","metadata":"{}"}],"deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"lightning-9vl.3","title":"MCP script: verify LN invoice flow","description":"Write MCP instructions/script to hit demo tip, capture invoice, pay via regtest payer, and assert status via DevTools network/console.","notes":"Scripted MCP invoice flow: capture provider_ref, pay via regtest payer, assert /api/lnurlp/pay/status returns PAID, documented in docs/mcp-scripts/invoice-flow.md","status":"tombstone","priority":1,"issue_type":"task","created_at":"2025-12-01T17:32:15.763369-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","dependencies":[{"issue_id":"lightning-9vl.3","depends_on_id":"lightning-9vl","type":"parent-child","created_at":"2025-12-01T17:32:15.764281-08:00","created_by":"honk","metadata":"{}"}],"deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"lightning-9vl.4","title":"MCP script: real relay comment post","description":"Use MCP to set relays to real, post comment with NIP-07 signer, and confirm via relay subscription.","notes":"Expanded MCP real-relay comment script with explicit verification steps and timing in docs/mcp-scripts/comment-flow.md","status":"tombstone","priority":1,"issue_type":"task","created_at":"2025-12-01T17:32:39.10798-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","dependencies":[{"issue_id":"lightning-9vl.4","depends_on_id":"lightning-9vl","type":"parent-child","created_at":"2025-12-01T17:32:39.108783-08:00","created_by":"honk","metadata":"{}"}],"deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"lightning-9vl.5","title":"MCP evidence capture","description":"Standardize screenshots/trace export from MCP sessions for demo verification.","status":"tombstone","priority":2,"issue_type":"task","created_at":"2025-12-01T17:32:58.003155-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","dependencies":[{"issue_id":"lightning-9vl.5","depends_on_id":"lightning-9vl","type":"parent-child","created_at":"2025-12-01T17:32:58.004144-08:00","created_by":"honk","metadata":"{}"}],"deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"lightning-9zj0","title":"Epic: NWC wallet connect","description":"Complete nwc wallet connect feature.\n\n## Objective\nDeliver the end-to-end capability with backend, frontend, security, and tests.\n\n## Success Criteria\n- [ ] Feature can be used end-to-end in the gallery.\n- [ ] API endpoints are guarded and validated.\n- [ ] Tests cover primary flows and guard rails.\n\n## Out of Scope\n- Accessibility updates.\n- Documentation updates.\n","status":"tombstone","priority":2,"issue_type":"epic","created_at":"2025-12-19T18:37:55.865844-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","dependencies":[{"issue_id":"lightning-9zj0","depends_on_id":"lightning-61qz","type":"parent-child","created_at":"2025-12-19T18:37:55.867245-08:00","created_by":"honk","metadata":"{}"}],"deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"epic"}
{"id":"lightning-a3v9","title":"Test: Relay allowlist/denylist filters","description":"Add unit coverage for relay allowlist/denylist filtering.\n\nImplementation notes:\n- Extend apps/api/src/nostr/relaylist.test.ts (or add relay-utils.test.ts) to cover allowlist/denylist precedence, wildcard host matches, and allowlist empty defaults.\n- Include ws://localhost allowance and denylist override cases.\n\nAcceptance criteria:\n- Denylist overrides allowlist (including wildcard allowlist).\n- Wildcard patterns (*.example.com) match subdomains and exact host matches work.\n- Empty allowlist allows relays unless denylisted.\n\nEdge cases:\n- Invalid patterns ignored without throwing.\n- IPv6 localhost relay URLs.\n\n## Files\n- apps/api/src/nostr/relaylist.test.ts (modify: allowlist/denylist coverage)\n- apps/api/src/nostr/relay-utils.ts (modify: normalize IPv6 localhost hostnames)\n\n## QA Evidence\n- Playwright: N/A (backend only)\n- Screenshots: N/A\n- DevTools MCP: N/A\n- Logs: tail -n 200 .logs/dev/api.log .logs/dev/gallery.log (api log shows wallet-ws fetch failed + telemetry block poll warnings; follow-ups tracked)\n- CI: pnpm --filter api test (USE_HTTPS warning persists; tracked in lightning-5q00) \u0026\u0026 pnpm lint\n\n## Close Notes (fill in at closure)\n- Issues encountered: oracle.sh failed (Claude model) so no critique output; USE_HTTPS warning persists (tracked in lightning-5q00); api.log shows wallet-ws fetch failed warnings (tracked in lightning-etjs) and telemetry poll 503 (tracked in lightning-wglx).\n- Setup improvements: none.\n- Debug info that would have helped: oracle CLI failure details.","acceptance_criteria":"Relay allowlist/denylist filters covered by tests","status":"tombstone","priority":2,"issue_type":"task","assignee":"unassigned","estimated_minutes":120,"created_at":"2026-01-01T01:59:30.698297-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","close_reason":"Implemented","labels":["area:api","area:qa","feature:personal-site-kit"],"dependencies":[{"issue_id":"lightning-a3v9","depends_on_id":"lightning-39zu","type":"parent-child","created_at":"2026-01-01T01:59:30.700892-08:00","created_by":"honk"},{"issue_id":"lightning-a3v9","depends_on_id":"lightning-p8rb","type":"blocks","created_at":"2026-01-01T01:59:30.703266-08:00","created_by":"honk"}],"deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"lightning-a4a","title":"Generate SDK from API (OpenAPI alignment)","description":"Produce full @satoshis/sdk client aligned with API (LNURLp, payments, NIP-05, admin bootstrap). Generate from OpenAPI or typed client; include host/tenant handling; publish build + examples.","status":"tombstone","priority":1,"issue_type":"task","created_at":"2025-11-28T09:55:20.217362-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","dependencies":[{"issue_id":"lightning-a4a","depends_on_id":"lightning-2lx","type":"parent-child","created_at":"2025-11-29T07:25:34.988289-08:00","created_by":"honk","metadata":"{}"}],"deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"lightning-a4a.1","title":"Build typed SDK client wrapper","description":"Implement @satoshis/sdk client using generated openapi-types: methods for LNURLp metadata/invoice, webhook simulation, NIP-05 lookup, admin tenant/user bootstrap. Handle host header for tenancy, accept baseURL + apiKey. Add examples and tests.","status":"tombstone","priority":1,"issue_type":"task","created_at":"2025-11-28T10:05:43.222778-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","dependencies":[{"issue_id":"lightning-a4a.1","depends_on_id":"lightning-a4a","type":"parent-child","created_at":"2025-11-28T10:05:43.223929-08:00","created_by":"honk","metadata":"{}"}],"deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"lightning-aaas","title":"Bug: Fix blog-kit Fast Refresh export incompatibility","description":"Gallery dev logs report a Vite Fast Refresh incompatibility for NwcClient export in blog-kit dist build. Investigate and fix so HMR does not invalidate.\n\nObserved log (2025-12-27):\n- vite hmr invalidate /packages/blog-kit/dist/index.js Could not Fast Refresh (\"NwcClient\" export is incompatible)\n\nAcceptance criteria:\n- Fast Refresh no longer invalidates due to NwcClient export.\n- HMR updates impacted gallery views cleanly without console errors.\n\n## Files\n- packages/blog-kit/src/index.ts (inspect/modify export patterns)\n- packages/blog-kit/src/* (inspect/modify component exports if needed)\n- packages/blog-kit/dist/index.js (regenerated build output)","status":"tombstone","priority":3,"issue_type":"bug","created_at":"2025-12-26T16:52:53.804394-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"bug"}
{"id":"lightning-abcz","title":"Test: NIP-05 proxy API","description":"Add API tests for the NIP-05 resolver proxy.\n\n- Validate 200 responses for known mappings.\n- Verify cache hits and negative caching behavior.\n- Ensure timeouts and error codes are correct.\n\nAcceptance Criteria\n- Tests cover happy path + error responses.\n- Cache behavior is observable (mocked clock or spy).\n\nEdge Cases\n- Missing names map, malformed JSON, unreachable host.\n\nNote: Always be looking for refactoring opportunities, bug fixes, and improvements. Create new tasks as you encounter them.\n\n## Files\n- apps/api/src/routes/nostr-identity.test.ts (create: route tests)","status":"tombstone","priority":2,"issue_type":"task","created_at":"2025-12-25T23:07:34.330044-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","dependencies":[{"issue_id":"lightning-abcz","depends_on_id":"lightning-yzz6","type":"parent-child","created_at":"2025-12-25T23:07:34.331813-08:00","created_by":"honk","metadata":"{}"}],"deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"lightning-ad8j","title":"Security: skills secret hygiene review","description":"Review skill references for secret leakage and add explicit warnings where needed.\n\nAcceptance criteria:\n- Confirm no secrets or key values copied into skill reference files.\n- Add/verify warnings about Key Vault and env secrets in Lightning skill references.\n- Record findings in a short review note.\n- Reminder included to look for refactors/bugs and open new issues.\n\n## Files\n- ~/.codex/skills/nostrstack-skills-security-review.md (create: review notes)\n- ~/.codex/skills/nostrstack-lightning/SKILL.md (modify: explicit secret hygiene note if missing)","status":"tombstone","priority":1,"issue_type":"task","created_at":"2025-12-26T16:50:54.348593-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","dependencies":[{"issue_id":"lightning-ad8j","depends_on_id":"lightning-eo3j","type":"parent-child","created_at":"2025-12-26T16:50:54.351926-08:00","created_by":"honk"},{"issue_id":"lightning-ad8j","depends_on_id":"lightning-01tk","type":"blocks","created_at":"2025-12-26T16:51:45.462822-08:00","created_by":"honk"},{"issue_id":"lightning-ad8j","depends_on_id":"lightning-4pal","type":"blocks","created_at":"2025-12-26T16:51:48.896799-08:00","created_by":"honk"},{"issue_id":"lightning-ad8j","depends_on_id":"lightning-2r5d","type":"blocks","created_at":"2025-12-26T16:51:52.004492-08:00","created_by":"honk"},{"issue_id":"lightning-ad8j","depends_on_id":"lightning-6nrl","type":"blocks","created_at":"2025-12-26T16:51:55.37999-08:00","created_by":"honk"},{"issue_id":"lightning-ad8j","depends_on_id":"lightning-r892","type":"blocks","created_at":"2025-12-26T16:51:59.84197-08:00","created_by":"honk"}],"deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"lightning-ae5j","title":"repo: make pnpm check pass","description":"Run full repo lint/test/typecheck and fix failures.","acceptance_criteria":"\n\u003e nostrstack@0.0.0 check /Users/honk/code/nostrstack\n\u003e pnpm lint \u0026\u0026 pnpm test \u0026\u0026 pnpm typecheck\n\n\n\u003e nostrstack@0.0.0 lint /Users/honk/code/nostrstack\n\u003e pnpm -r lint\n\nScope: 8 of 9 workspace projects\napps/api lint$ eslint . --ext .ts --max-warnings=0\npackages/sdk lint$ eslint . --ext .ts --max-warnings=0\npackages/sdk lint: sh: eslint: command not found\n/Users/honk/code/nostrstack/packages/sdk:\n ERR_PNPM_RECURSIVE_RUN_FIRST_FAIL  @nostrstack/sdk@0.1.0 lint: `eslint . --ext .ts --max-warnings=0`\nspawn ENOENT\n ELIFECYCLE  Command failed with exit code 1.\n ELIFECYCLE  Command failed with exit code 1. exits 0.","status":"tombstone","priority":2,"issue_type":"chore","created_at":"2025-12-14T00:11:40.294114-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"chore"}
{"id":"lightning-af0y","title":"tooling: make pnpm install non-interactive on node_modules purge","description":"pnpm v10 may abort node_modules purge without a TTY unless CI=true; consider repo config to avoid interactive prompt in automated contexts.","acceptance_criteria":"pnpm install does not abort for lack of TTY when it needs to recreate node_modules (or docs/CI ensures CI=true).","status":"tombstone","priority":4,"issue_type":"chore","created_at":"2025-12-13T23:40:57.805061-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"chore"}
{"id":"lightning-al83","title":"Infinite scroll for FeedView","description":"Implement Load More or infinite scroll in FeedView to see more than 50 items.\n\n## QA Evidence\n- `pnpm lint \\u0026\\u0026 pnpm typecheck` passed.\n- 'Load More' button visible at bottom of FeedView.\n- Clicking 'Load More' fetches older events from relays.\n\n## Close Notes\n- Issues encountered: None.\n- Setup improvements: None.","status":"tombstone","priority":3,"issue_type":"task","created_at":"2026-01-02T22:35:09.264372-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","close_reason":"Implemented","deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"lightning-anp","title":"Regtest faucet: LNbits topup fails and balance stays stale","description":"Running Add funds (regtest) returns 200 but LNbits topup step fails: API log shows 'LNbits topup failed [lncli] FAILED'; wallet balance stays unchanged. Investigate regtest-fund lncli call inside lnd-payer (docker) and ensure faucet either succeeds or surfaces error to UI.","status":"tombstone","priority":1,"issue_type":"bug","created_at":"2025-12-03T14:21:44.416189-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","labels":["backend","lnbits","regtest"],"deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"bug"}
{"id":"lightning-aofu","title":"Verify Nsec login and posting via Chrome DevTools MCP","status":"tombstone","priority":0,"issue_type":"task","created_at":"2025-12-17T12:50:33.900872-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","labels":["qa"],"deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"lightning-asd2","title":"Infra/Core: NIP-05 proxy + caching","description":"Implement a NIP-05 resolver proxy with caching and validation.\n\n- Add a Fastify route (e.g., /api/nostr/identity) that accepts nip05 or name+domain.\n- Fetch /.well-known/nostr.json?name=... and normalize to { pubkey, relays?, nip05, name, domain }.\n- Enforce HTTPS-only, block redirects, set timeouts, and cap response sizes.\n- Cache successful and negative lookups with TTL (in-memory).\n- Add env/config for timeouts + TTL, document defaults.\n\nAcceptance Criteria\n- Valid nip05 resolves to pubkey and returns normalized JSON.\n- Invalid/unsafe inputs return 4xx with clear errors.\n- Repeat requests hit cache (observable via logs/metrics).\n\nEdge Cases\n- Missing names map, invalid JSON, host unreachable, non-HTTPS, redirects.\n\nNote: Always be looking for refactoring opportunities, bug fixes, and improvements. Create new tasks as you encounter them.\n\n## Files\n- apps/api/src/routes/nostr-identity.ts (create: NIP-05 proxy)\n- apps/api/src/setup-routes.ts (modify: register route)\n- apps/api/src/services/nip05-cache.ts (create: in-memory cache)\n- apps/api/src/env.ts (modify: add TTL/timeout config)\n- env.sample (modify: document config)","status":"tombstone","priority":2,"issue_type":"task","created_at":"2025-12-25T23:04:54.183538-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","dependencies":[{"issue_id":"lightning-asd2","depends_on_id":"lightning-yzz6","type":"parent-child","created_at":"2025-12-25T23:04:54.185743-08:00","created_by":"honk","metadata":"{}"}],"deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"lightning-asge","title":"Restore CI + unblock deployment","description":"Re-add CI workflow (lint/test/build + gallery e2e) that was deleted; fix attw/types lint failures on GitHub Actions; ensure workflows run on PRs/pushes and are green so Azure deploy can be triggered with confidence.","acceptance_criteria":"- CI workflow exists under .github/workflows and runs on PR + main push\\n- CI passes on GitHub Actions (including pnpm lint:attw or adjusted replacement)\\n- No self-muting (workflow deletion) or auto-commit loops","status":"tombstone","priority":1,"issue_type":"task","created_at":"2025-12-16T15:14:45.427782-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"lightning-axoc","title":"Feat: Grouped Notifications (Likes/Zaps)","description":"Refactor NotificationsView to group similar interactions.\n\nDescription:\n- Create a `NotificationItem` component.\n- Group multiple Kind 7 (Reactions) or Kind 9735 (Zaps) for the same target event.\n- Show a summary like 'Alice and 2 others liked your post' or 'Bob zapped you 500 sats'.\n- Only show full `PostItem` for direct mentions (Kind 1).\n\nAcceptance Criteria:\n- Notifications are less repetitive.\n- Clicking a grouped notification navigates to the target post (`/nostr/:id`).\n\n## Files\n- apps/gallery/src/NotificationsView.tsx (refactor: grouping logic)\n- apps/gallery/src/ui/NotificationItem.tsx (create: grouped view)\n- apps/gallery/src/gallery.css (modify: notification styles)\n\n## QA Evidence\n- Playwright: Test notification grouping with mock events.\n- Screenshots: `docs/screenshots/social/notifications-grouped.png`\n\n## Close Notes\n- Issues encountered: ProfileLink missing onClick prop for propagation control; fixed.\n- Setup improvements: None.\n- Debug info that would have helped: None.","status":"tombstone","priority":2,"issue_type":"task","created_at":"2026-01-03T09:04:16.794107-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","close_reason":"Implemented","dependencies":[{"issue_id":"lightning-axoc","depends_on_id":"lightning-xliv","type":"parent-child","created_at":"2026-01-03T09:04:16.797348-08:00","created_by":"honk"}],"deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"lightning-ayh","title":"Regtest telemetry + wallet data stuck (blocks #0, balance stale)","description":"Gallery shows block #0 and wallet balance stays stale after Add funds. Fix telemetry WS + API to use real bitcoind RPC (no synthetic), ensure blocks stream and card updates, and make wallet balance refresh after faucet top-ups.","status":"tombstone","priority":1,"issue_type":"bug","created_at":"2025-12-03T14:02:31.116347-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","labels":["backend","frontend","regtest"],"deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"bug"}
{"id":"lightning-az4h","title":"blog-kit: add README (usage + theming)","description":"Document @nostrstack/blog-kit install + usage and how theming works with --nostrstack-* tokens (brandPreset/themeMode/nostrstackTheme).","acceptance_criteria":"packages/blog-kit/README.md exists and covers basic usage + theming; pnpm --filter @nostrstack/blog-kit lint/test/typecheck pass.","status":"tombstone","priority":3,"issue_type":"task","created_at":"2025-12-14T01:44:23.877685-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"lightning-b2d","title":"UI polish: logos, relay badge, invoice popover, Nostr user card","description":"Add visual assets (Nostr/Bitcoin/Lightning SVG), relay status badge with live indicator, invoice scan popover, and Nostr user profile card components; integrate into demo widgets.","status":"tombstone","priority":1,"issue_type":"epic","created_at":"2025-12-01T15:03:05.035976-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"epic"}
{"id":"lightning-b2d.1","title":"Add Nostr/Bitcoin/Lightning SVG assets","description":"Add SVG logos for Nostr, Bitcoin, Lightning to shared assets and expose for UI components.","status":"tombstone","priority":1,"issue_type":"task","created_at":"2025-12-01T15:03:22.104768-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","dependencies":[{"issue_id":"lightning-b2d.1","depends_on_id":"lightning-b2d","type":"parent-child","created_at":"2025-12-01T15:03:22.105531-08:00","created_by":"honk","metadata":"{}"}],"deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"lightning-b2d.2","title":"Relay status pill with live indicator","description":"Create relay badge/pill component showing URL and live/connecting/disconnected state; hook to comment widget onRelayInfo.","status":"tombstone","priority":1,"issue_type":"task","created_at":"2025-12-01T15:03:38.489848-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","dependencies":[{"issue_id":"lightning-b2d.2","depends_on_id":"lightning-b2d","type":"parent-child","created_at":"2025-12-01T15:03:38.490579-08:00","created_by":"honk","metadata":"{}"}],"deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"lightning-b2d.3","title":"Invoice scan popover","description":"Add popover/modal to display/scannable Lightning invoice (qr + copy/share) in demo components.","status":"tombstone","priority":2,"issue_type":"task","created_at":"2025-12-01T15:03:56.026913-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","dependencies":[{"issue_id":"lightning-b2d.3","depends_on_id":"lightning-b2d","type":"parent-child","created_at":"2025-12-01T15:03:56.027801-08:00","created_by":"honk","metadata":"{}"}],"deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"lightning-b2d.4","title":"Nostr user card","description":"Add compact user card component showing Nostr profile (name, nip05, picture) and integrate with comments.","status":"tombstone","priority":2,"issue_type":"task","created_at":"2025-12-01T15:04:12.711962-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","dependencies":[{"issue_id":"lightning-b2d.4","depends_on_id":"lightning-b2d","type":"parent-child","created_at":"2025-12-01T15:04:12.712728-08:00","created_by":"honk","metadata":"{}"}],"deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"lightning-b2d.5","title":"Export UI design tokens","description":"Provide shared design tokens (colors, spacing, radius, shadows) for embed/consumer styling.","status":"tombstone","priority":1,"issue_type":"task","created_at":"2025-12-01T15:17:38.355242-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","dependencies":[{"issue_id":"lightning-b2d.5","depends_on_id":"lightning-b2d","type":"parent-child","created_at":"2025-12-01T15:17:38.35609-08:00","created_by":"honk","metadata":"{}"}],"deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"lightning-b4ls","title":"Improvements: UI/UX Reliability \u0026 Refresh","description":"Address remaining UI/UX improvements from the initial audit.\n\n## Improvements Completed\n- [x] **Empty Wallet State:** More encouraging copy/UI when balance is zero (lightning-6a29).\n- [x] **Telemetry Bar Log Limit:** Configurable or persisted log buffer (lightning-gwy3).\n- [x] **JSON View styling:** Proper syntax highlighter for Hacker Mode (lightning-58lt).\n- [x] **Navigation feedback:** Smoother transitions (lightning-955y).\n- [x] **FeedView:** Infinite scroll / Load More support (lightning-al83).\n- [x] **PostEditor:** Validation on text length and media URL handling (lightning-psxl).","status":"tombstone","priority":3,"issue_type":"epic","created_at":"2026-01-02T22:34:39.938365-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","close_reason":"All improvements completed.","deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"epic"}
{"id":"lightning-b7su","title":"Verify production build and deployment readiness","status":"tombstone","priority":1,"issue_type":"task","created_at":"2025-12-17T09:46:31.077165-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","labels":["task"],"deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"lightning-b7t","title":"Copy buttons lack success feedback","description":"Copy buttons (URL, admin key, relays, invoices) give no visual success/failure feedback; add toast or inline confirmation.","status":"tombstone","priority":3,"issue_type":"task","created_at":"2025-12-02T14:54:37.886862-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","labels":["demo","ui"],"deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"lightning-b9s","title":"Log viewer should scroll, not grow unbounded","description":"Log panels grow to full page height when streaming backend logs; needs max height with internal scroll and sticky header/controls so timestamps stay visible. Ensure layout works in both light/dark themes and on mobile widths. Acceptance: backend and frontend log panes capped to a sensible max-height (e.g., 45vh) with smooth scroll, controls remain visible, and no overflow of surrounding layout. Final step: verify via Chrome DevTools MCP by streaming logs and capturing screenshot showing scrollbars.","status":"tombstone","priority":2,"issue_type":"task","created_at":"2025-12-02T18:28:33.170921-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","labels":["demo","logs","ui"],"deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"lightning-bi0t","title":"Security: LNURL-auth challenge guardrails","description":"Harden LNURL-auth session handling.\n\nImplementation Steps:\n- Enforce TTL and one-time k1 usage.\n- Reject replayed or expired challenges.\n- Add structured logs for auth attempts.\n\nAcceptance Criteria:\n- Expired or reused k1s are rejected.\n- Logs include request ids and outcomes.\n\nEdge Cases:\n- Multiple callbacks for same k1 are idempotent.\n\n\n## Files\n- apps/api/src/services/lnurl-auth.ts (modify: TTL + one-time enforcement)\n- apps/api/src/routes/lnurl-auth.ts (modify: guard responses + logs)","status":"tombstone","priority":2,"issue_type":"task","created_at":"2025-12-19T18:37:57.638733-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","dependencies":[{"issue_id":"lightning-bi0t","depends_on_id":"lightning-j0ns","type":"parent-child","created_at":"2025-12-19T18:37:57.640639-08:00","created_by":"honk","metadata":"{}"},{"issue_id":"lightning-bi0t","depends_on_id":"lightning-2uaf","type":"blocks","created_at":"2025-12-19T18:49:07.30113-08:00","created_by":"honk","metadata":"{}"}],"deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"lightning-bi29","title":"Nostr share widget + share activity feed (blog-kit)","description":"Add a reusable Share widget for items (e.g. blog posts) that can publish a Nostr share (kind 1 with r/t tags) via NIP-07 and display a realtime activity feed for a given itemId/url (share count, unique sharers, avatars, recent events).","acceptance_criteria":"- Share UI component can be embedded on a blog post and shows share count + avatar stack + recent sharers\\n- Clicking Share posts to configured relays via NIP-07 and the feed updates in realtime\\n- No console errors on the demo page","status":"tombstone","priority":2,"issue_type":"feature","created_at":"2025-12-15T10:07:51.315779-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"feature"}
{"id":"lightning-bn8","title":"Improve NPUB/NSEC key toggle UI","description":"Redesign KeyToggle: handle overflow gracefully, add copy icon, toggle npub/nsec vs hex pub/priv, padded card styling.","acceptance_criteria":"Key toggle renders with padding, copy icon, no overflow; toggles npub/nsec and hex; exported component.","status":"tombstone","priority":1,"issue_type":"task","created_at":"2025-12-02T11:16:44.814371-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"lightning-c05f","title":"Demo UX overhaul: Nostr + diagnostics","description":"User feedback: demo UI still looks bad; Nostr tab lacks profile detail/picture; relay list is bulky/wasted space; live activity items need drilldown; payloads should use shared JSON viewer; NIP-07 signer flow must be robust and not spam console.","design":"## Architecture\n\n[Describe the overall architecture and approach]\n\n## Components\n\n- Component 1: [description]\n- Component 2: [description]\n\n## Dependencies\n\n[List external dependencies or constraints]\n","acceptance_criteria":"- [ ] All child issues are completed\n- [ ] Integration tests pass\n- [ ] Documentation is updated\n- [ ] Code review completed\n","status":"tombstone","priority":1,"issue_type":"epic","created_at":"2025-12-14T16:12:44.357106-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","labels":["epic"],"deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"epic"}
{"id":"lightning-c05f.1","title":"Nostr: NIP-07 signer flow broken with Alby (enable undefined)","description":"In gallery Nostr tab, NIP-07 signer check fails with TypeError 'Cannot read properties of undefined (reading \"enable\")' from Alby extension (chrome-extension://iokeahh...). Fix detection/permission request so it works with Alby/nos2x and does not spam console.","design":"## Root Cause Analysis\n\n[Describe the underlying cause once identified]\n\n## Proposed Fix\n\n[Outline the solution approach]\n\n## Impact Assessment\n\n- Affected features: [list]\n- Breaking changes: [yes/no and details]\n- Migration needed: [yes/no and details]\n","acceptance_criteria":"- [ ] Bug no longer reproduces with original steps\n- [ ] Regression tests added\n- [ ] Related edge cases tested\n- [ ] Documentation updated if behavior changed\n","status":"tombstone","priority":1,"issue_type":"bug","created_at":"2025-12-14T16:13:03.646235-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","labels":["bug"],"dependencies":[{"issue_id":"lightning-c05f.1","depends_on_id":"lightning-c05f","type":"parent-child","created_at":"2025-12-14T16:13:03.647304-08:00","created_by":"honk","metadata":"{}"}],"deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"bug"}
{"id":"lightning-c05f.2","title":"Nostr: Relay cards redesign (compact + avatars + richer info)","description":"Relay list cards are bulky and waste space; add relay avatars/icons, tighten layout, and show more useful info in a compact card (NIP list, latency, send/recv counts, software/version, etc). Add inspiration from modern relay dashboards.","design":"## Technical Design\n\n[Detailed technical approach]\n\n## API Changes\n\n[New commands, flags, or APIs]\n\n## Data Model Changes\n\n[Database schema changes if any]\n\n## Implementation Notes\n\n- Note 1\n- Note 2\n\n## Testing Strategy\n\n- Unit tests: [scope]\n- Integration tests: [scope]\n- Manual testing: [steps]\n","acceptance_criteria":"- [ ] Feature implements all described use cases\n- [ ] All tests pass\n- [ ] Documentation updated (README, commands)\n- [ ] Examples added if applicable\n- [ ] No performance regressions\n","status":"tombstone","priority":2,"issue_type":"feature","created_at":"2025-12-14T16:13:20.416776-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","labels":["feature"],"dependencies":[{"issue_id":"lightning-c05f.2","depends_on_id":"lightning-c05f","type":"parent-child","created_at":"2025-12-14T16:13:20.418583-08:00","created_by":"honk","metadata":"{}"}],"deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"feature"}
{"id":"lightning-c05f.3","title":"Nostr: Live activity drilldown (click to view message/payload)","description":"Live activity feed items should be clickable to inspect the underlying message/event (JSON) and metadata. Add UI affordance (drawer/modal) and reuse JSON viewer.","design":"## Technical Design\n\n[Detailed technical approach]\n\n## API Changes\n\n[New commands, flags, or APIs]\n\n## Data Model Changes\n\n[Database schema changes if any]\n\n## Implementation Notes\n\n- Note 1\n- Note 2\n\n## Testing Strategy\n\n- Unit tests: [scope]\n- Integration tests: [scope]\n- Manual testing: [steps]\n","acceptance_criteria":"- [ ] Feature implements all described use cases\n- [ ] All tests pass\n- [ ] Documentation updated (README, commands)\n- [ ] Examples added if applicable\n- [ ] No performance regressions\n","status":"tombstone","priority":2,"issue_type":"feature","created_at":"2025-12-14T16:13:36.376213-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","labels":["feature"],"dependencies":[{"issue_id":"lightning-c05f.3","depends_on_id":"lightning-c05f","type":"parent-child","created_at":"2025-12-14T16:13:36.377082-08:00","created_by":"honk","metadata":"{}"}],"deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"feature"}
{"id":"lightning-c05f.4","title":"Demo: Shared JSON viewer component + integrate for requests/responses","description":"Add a shared JSON display component (pretty-print, collapsible, copy) and use it anywhere we show a payload or last response/request. WalletBalance should always show last response and format JSON nicely. Extend to other areas like pay/invoice responses, relay events, telemetry, etc.","design":"## Technical Design\n\n[Detailed technical approach]\n\n## API Changes\n\n[New commands, flags, or APIs]\n\n## Data Model Changes\n\n[Database schema changes if any]\n\n## Implementation Notes\n\n- Note 1\n- Note 2\n\n## Testing Strategy\n\n- Unit tests: [scope]\n- Integration tests: [scope]\n- Manual testing: [steps]\n","acceptance_criteria":"- [ ] Feature implements all described use cases\n- [ ] All tests pass\n- [ ] Documentation updated (README, commands)\n- [ ] Examples added if applicable\n- [ ] No performance regressions\n","status":"tombstone","priority":2,"issue_type":"feature","created_at":"2025-12-14T16:13:51.944465-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","labels":["feature"],"dependencies":[{"issue_id":"lightning-c05f.4","depends_on_id":"lightning-c05f","type":"parent-child","created_at":"2025-12-14T16:13:51.945587-08:00","created_by":"honk","metadata":"{}"}],"deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"feature"}
{"id":"lightning-c05f.5","title":"Nostr: Show full profile details (avatar, metadata, NIP-05, etc)","description":"Nostr profile section should always show the user's profile picture and all available profile metadata (name/display_name, about, nip05, website, lud16/lud06, banner, created_at, etc). Tighten layout.","design":"## Technical Design\n\n[Detailed technical approach]\n\n## API Changes\n\n[New commands, flags, or APIs]\n\n## Data Model Changes\n\n[Database schema changes if any]\n\n## Implementation Notes\n\n- Note 1\n- Note 2\n\n## Testing Strategy\n\n- Unit tests: [scope]\n- Integration tests: [scope]\n- Manual testing: [steps]\n","acceptance_criteria":"- [ ] Feature implements all described use cases\n- [ ] All tests pass\n- [ ] Documentation updated (README, commands)\n- [ ] Examples added if applicable\n- [ ] No performance regressions\n","status":"tombstone","priority":2,"issue_type":"feature","created_at":"2025-12-14T16:14:09.126962-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","labels":["feature"],"dependencies":[{"issue_id":"lightning-c05f.5","depends_on_id":"lightning-c05f","type":"parent-child","created_at":"2025-12-14T16:14:09.127987-08:00","created_by":"honk","metadata":"{}"}],"deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"feature"}
{"id":"lightning-c05f.6","title":"Gallery: fix a11y console issue (form field missing id/name)","description":"Chrome DevTools reports issue: 'A form field element should have an id or name attribute'. Track down offending input(s) and add id/name + label/aria-label as appropriate.","status":"tombstone","priority":3,"issue_type":"task","created_at":"2025-12-14T16:31:52.60854-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","labels":["a11y","ui"],"dependencies":[{"issue_id":"lightning-c05f.6","depends_on_id":"lightning-c05f","type":"parent-child","created_at":"2025-12-14T16:31:52.609661-08:00","created_by":"honk","metadata":"{}"}],"deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"lightning-c05f.7","title":"Nostr: eliminate \"WebSocket is already in CLOSING or CLOSED state\" console error","description":"Chrome DevTools MCP shows repeated console errors on reload/HMR: WebSocket is already in CLOSING or CLOSED state. QA regtest demo passes (likely clean profile), so this may be extension-related or only repros on reload. Investigate source and eliminate (or make QA catch it).","status":"tombstone","priority":2,"issue_type":"bug","created_at":"2025-12-14T19:50:33.43216-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","dependencies":[{"issue_id":"lightning-c05f.7","depends_on_id":"lightning-c05f","type":"parent-child","created_at":"2025-12-14T19:50:33.433309-08:00","created_by":"honk","metadata":"{}"}],"deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"bug"}
{"id":"lightning-c3fb","title":"Infra/Core: NIP-05 proxy + caching (temp)","description":"temp","status":"tombstone","priority":2,"issue_type":"task","created_at":"2025-12-25T23:05:34.466206-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","dependencies":[{"issue_id":"lightning-c3fb","depends_on_id":"lightning-yzz6","type":"parent-child","created_at":"2025-12-25T23:05:34.468335-08:00","created_by":"honk","metadata":"{}"}],"deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"lightning-ccm","title":"Demo: configurable widgets page","description":"Demo page that exercises tip/paywall/comments widgets with theme toggles and config","status":"tombstone","priority":3,"issue_type":"task","created_at":"2025-11-28T12:14:56.898434-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","dependencies":[{"issue_id":"lightning-ccm","depends_on_id":"lightning-2lx","type":"parent-child","created_at":"2025-11-29T07:25:40.380612-08:00","created_by":"honk","metadata":"{}"}],"deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"lightning-cd6j","title":"API: Telemetry summary endpoint + SDK + metrics","description":"Add HTTP endpoint that returns latest blockchain telemetry for widgets and SSR, plus SDK support.\n\nImplementation notes:\n- Create GET /api/telemetry/summary returning latest block and mempool info with cache TTL.\n- Share telemetry fetch logic with ws/telemetry where possible.\n- Add metrics counters for telemetry summary requests/errors.\n- Update OpenAPI and SDK client method.\n\nAcceptance criteria:\n- Endpoint returns 200 with schema aligned to telemetry WS fields.\n- Fallback to mock data when RPC unavailable in dev.\n- SDK exposes typed method for summary fetch.\n\nEdge cases:\n- RPC timeout, non-numeric block height, missing mempool data.\n\n## Files\n- apps/api/src/routes/telemetry-summary.ts (create)\n- apps/api/src/routes/index.ts (modify: register route)\n- apps/api/src/telemetry/metrics.ts (modify: add counter)\n- apps/api/src/telemetry/bitcoind.ts (create: shared RPC helper)\n- apps/api/src/routes/telemetry-ws.ts (modify: use shared RPC helper)\n- apps/api/openapi.json (modify: add endpoint)\n- packages/sdk/src/index.ts (modify: add method)\n- packages/sdk/src/generated/openapi-types.ts (modify: schema update)\n\n## QA Evidence\n- Playwright: N/A (backend only)\n- Screenshots: N/A\n- DevTools MCP: N/A\n- Logs: tail -f .logs/dev/api.log .logs/dev/gallery.log (no errors/warnings observed)\n- CI: pnpm --filter api test \u0026\u0026 pnpm --filter @nostrstack/sdk build \u0026\u0026 pnpm lint\n\n## Close Notes\n- Issues encountered: oracle.sh failed (Claude model) so no critique output; USE_HTTPS warning in api tests (tracked in lightning-5q00).\n- Setup improvements: None.\n- Debug info that would have helped: oracle CLI failure detail output.\n","acceptance_criteria":"HTTP telemetry summary + SDK method available","status":"tombstone","priority":2,"issue_type":"feature","assignee":"unassigned","estimated_minutes":240,"created_at":"2025-12-31T18:34:53.865585-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","close_reason":"Implemented","labels":["area:api","feature:personal-site-kit"],"dependencies":[{"issue_id":"lightning-cd6j","depends_on_id":"lightning-39zu","type":"parent-child","created_at":"2025-12-31T18:34:53.867553-08:00","created_by":"honk"},{"issue_id":"lightning-cd6j","depends_on_id":"lightning-gfaq","type":"blocks","created_at":"2025-12-31T18:39:15.381968-08:00","created_by":"honk"},{"issue_id":"lightning-cd6j","depends_on_id":"lightning-p8rb","type":"blocks","created_at":"2025-12-31T18:39:24.830944-08:00","created_by":"honk"}],"deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"feature"}
{"id":"lightning-cfl","title":"Block mixed-content WS in gallery","description":"Add runtime guard in gallery: if page is https and a ws:// URL is derived, show blocking banner and refuse to connect; log error. Include console check for mixed content and guidance to run \n\u003e gallery@0.0.0 dev /Users/honk/code/nostrstack/apps/gallery\n\u003e vite \"--https\"\n\n/Users/honk/code/nostrstack/apps/gallery:\n ERR_PNPM_RECURSIVE_RUN_FIRST_FAIL  gallery@0.0.0 dev: `vite \"--https\"`\nExit status 1.","status":"tombstone","priority":2,"issue_type":"chore","created_at":"2025-12-03T15:32:44.965614-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","labels":["frontend","ux"],"deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"chore"}
{"id":"lightning-cgbg","title":"blog-kit: align provider theme with embed tokens","description":"Unify blog-kit theming with @nostrstack/embed so all components share the same CSS vars and can be themed via one token set.","acceptance_criteria":"Blog-kit provider sets `--nostrstack-*` vars (via embed helpers) and existing theme props remain backwards compatible; `pnpm --filter @nostrstack/blog-kit test` passes.","status":"tombstone","priority":2,"issue_type":"feature","created_at":"2025-12-14T00:24:22.063249-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"feature"}
{"id":"lightning-cier","title":"Enable regtest mining for wallet funding","status":"tombstone","priority":2,"issue_type":"task","created_at":"2025-12-19T15:43:32.021732-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","close_reason":"Closed","deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"lightning-cjzi","title":"Test: E2E find-friend tip flow","description":"Create a Playwright E2E flow for find-friend + tip.\n\n- Login (nsec) -\u003e Search friend -\u003e Open profile -\u003e Zap two posts -\u003e Send 500 sats.\n- Assert modal states and success copy.\n- Fail on console errors.\n\nAcceptance Criteria\n- Test is stable and passes locally.\n- Uses mocks for relays/LNURL to avoid flakiness.\n\nEdge Cases\n- No posts available; skip with clear reason.\n\nNote: Always be looking for refactoring opportunities, bug fixes, and improvements. Create new tasks as you encounter them.\n\n## Files\n- apps/gallery/tests/find-friend-tip.spec.ts (create: E2E flow)\n- apps/gallery/tests/helpers/lnurl-mocks.ts (modify: reuse mocks if needed)","status":"tombstone","priority":2,"issue_type":"task","created_at":"2025-12-25T23:07:35.14077-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","dependencies":[{"issue_id":"lightning-cjzi","depends_on_id":"lightning-yzz6","type":"parent-child","created_at":"2025-12-25T23:07:35.142583-08:00","created_by":"honk","metadata":"{}"},{"issue_id":"lightning-cjzi","depends_on_id":"lightning-7udg","type":"blocks","created_at":"2025-12-25T23:07:40.633909-08:00","created_by":"honk","metadata":"{}"},{"issue_id":"lightning-cjzi","depends_on_id":"lightning-8whz","type":"blocks","created_at":"2025-12-25T23:08:51.219476-08:00","created_by":"honk","metadata":"{}"},{"issue_id":"lightning-cjzi","depends_on_id":"lightning-k6um","type":"blocks","created_at":"2025-12-25T23:08:51.567175-08:00","created_by":"honk","metadata":"{}"}],"deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"lightning-ck1k","title":"Core: Zap invoice component refresh","description":"Implement the refreshed zap invoice component UI, matching the provided screenshot and Lightning tip visual language.\n\nAcceptance Criteria:\n- Zap modal uses the new layout demonstrating QR panel, invoice panel, and action buttons.\n- Layout stays compact and does not stretch the feed; modal stays readable at common widths.\n- Status line updates for resolving/invoice/paid/error states.\n\nEdge Cases:\n- Very long invoices are scrollable without breaking layout.\n- QR still visible when invoice panel contains error text.\n\n## Files\n- packages/blog-kit/src/zap-button.tsx (modify: modal markup + UI state rendering)\n- apps/gallery/src/gallery.css (modify: apply design classes to new markup)","status":"tombstone","priority":2,"issue_type":"task","created_at":"2025-12-19T17:39:40.758253-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","dependencies":[{"issue_id":"lightning-ck1k","depends_on_id":"lightning-m8y7","type":"parent-child","created_at":"2025-12-19T17:39:40.760847-08:00","created_by":"honk","metadata":"{}"},{"issue_id":"lightning-ck1k","depends_on_id":"lightning-9avs","type":"blocks","created_at":"2025-12-19T17:41:11.911652-08:00","created_by":"honk","metadata":"{}"},{"issue_id":"lightning-ck1k","depends_on_id":"lightning-u2x4","type":"blocks","created_at":"2025-12-19T17:41:12.301353-08:00","created_by":"honk","metadata":"{}"}],"deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"lightning-cnp","title":"Fix Chrome DevTools MCP connectivity","description":"Chrome DevTools MCP tool calls (list_pages/new_page) fail with 'Transport closed' / 'Cannot read properties of undefined (reading \\'on\\')' even with Chrome running on --remote-debugging-port=9222 and mcp.config.json set to use chrome-devtools-mcp. Need to make MCP server stay alive and reachable so automated devtools testing works.","status":"tombstone","priority":1,"issue_type":"task","created_at":"2025-12-02T14:26:48.679156-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","labels":["mcp","tooling"],"deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"lightning-cr6","title":"Telemetry WS drops: show status + retry","description":"WS ws://localhost:4173/api/ws/telemetry closes before connect. Add UI status pill, exponential retry with jitter, proxy-safe URL builder, and user-facing error.","status":"tombstone","priority":1,"issue_type":"bug","created_at":"2025-12-02T23:23:55.691975-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"bug"}
{"id":"lightning-cs7v","title":"gallery: motion polish (tab enter + advanced chevrons)","description":"Add tasteful motion: animate tab content on switch, and add chevron + hover affordance for Advanced \u003cdetails\u003e panels. Respect prefers-reduced-motion.","acceptance_criteria":"- Tab switches feel alive but not flashy\\n- Advanced panels show chevron + hover affordance\\n- No regressions; pnpm qa:regtest-demo passes","status":"tombstone","priority":3,"issue_type":"task","created_at":"2025-12-13T20:03:12.17574-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"lightning-cunj","title":"gallery: InvoicePopover React warns about background/backgroundSize mix","description":"Observed via Playwright (2025-12-13): React warns 'Updating background backgroundSize ... don't mix shorthand and non-shorthand properties'. Repro: open invoice popover (Lightning tab → Unlock or Send sats) and check console.","status":"tombstone","priority":3,"issue_type":"bug","created_at":"2025-12-13T09:24:10.656757-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"bug"}
{"id":"lightning-cwl","title":"Nostr zaps + multi-name NIP-05","description":"Implement zap publishing (NIP-57) via NostrClient; configurable relays; add NIP-05 multi-name support per tenant; tests for nostr.json and zap publish stub.","status":"tombstone","priority":2,"issue_type":"task","created_at":"2025-11-28T09:55:35.355805-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","dependencies":[{"issue_id":"lightning-cwl","depends_on_id":"lightning-2lx","type":"parent-child","created_at":"2025-11-29T07:25:45.846123-08:00","created_by":"honk","metadata":"{}"}],"deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"lightning-cwoq","title":"gallery: align @vitejs/plugin-basic-ssl with Vite version","description":"pnpm install shows unmet peer vite for @vitejs/plugin-basic-ssl; align versions (upgrade Vite or downgrade plugin).","acceptance_criteria":"pnpm install has no peer dependency warning for @vitejs/plugin-basic-ssl.","status":"tombstone","priority":3,"issue_type":"chore","created_at":"2025-12-13T23:24:48.03306-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"chore"}
{"id":"lightning-cyfb","title":"Design: Find Friend + Tip journey \u0026 copy","description":"Define the end-to-end first-time user journey and UX copy for the Find Friend + Tip flow.\n\n- Map the steps from login -\u003e search -\u003e profile -\u003e zap posts -\u003e send 500 sats -\u003e confirmation.\n- Include UI copy for empty states, errors, and success messages.\n- Call out decision points and fallback paths.\n\nAcceptance Criteria\n- A flow doc exists with step-by-step states and copy guidelines.\n- Error/empty/success copy is explicit and consistent.\n- Edge cases are documented.\n\nEdge Cases\n- Invalid identifier, unreachable NIP-05 host, missing lightning address.\n- Payment failure, invoice timeout, user not logged in.\n\nNote: Always be looking for refactoring opportunities, bug fixes, and improvements. Create new tasks as you encounter them.\n\n## Files\n- docs/flows/find-friend-tip.md (create: journey + states)\n- docs/ux/find-friend-tip-copy.md (create: copy table)","status":"tombstone","priority":2,"issue_type":"task","created_at":"2025-12-25T23:02:16.341778-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","dependencies":[{"issue_id":"lightning-cyfb","depends_on_id":"lightning-yzz6","type":"parent-child","created_at":"2025-12-25T23:02:16.343738-08:00","created_by":"honk","metadata":"{}"}],"deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"lightning-d0js","title":"Fix nostrstack staging Bicep deploy (workload profiles + log analytics)","description":"Update deploy/azure/main.bicep to include workloadProfiles and valid appLogsConfiguration.destination; re-run staging deployment so Bicep succeeds against existing staging env.","acceptance_criteria":"Bicep deployment succeeds on nostrstack-stg-rg; container app remains healthy; no workload profile validation errors.","status":"tombstone","priority":1,"issue_type":"task","assignee":"honk","created_at":"2026-01-02T15:24:30.557338-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","close_reason":"Updated Bicep workload profiles/log analytics and reran staging deployment successfully.","labels":["azure","deploy","infra"],"deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"lightning-d1ac","title":"scripts: silence url.parse DeprecationWarning in qa/smoke","description":"pnpm qa:regtest-demo and pnpm smoke:regtest-demo emit Node [DEP0169] url.parse DeprecationWarning before running. Identify source (likely tsx or dependency) and upgrade/suppress.","acceptance_criteria":"qa:regtest-demo and smoke:regtest-demo run without [DEP0169] warning.","status":"tombstone","priority":4,"issue_type":"chore","created_at":"2025-12-13T21:48:08.786612-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"chore"}
{"id":"lightning-d6a","title":"Default dev/e2e to Postgres + docs","description":"Make Postgres the default for dev/e2e (env, scripts), keep SQLite option for fast unit; update docs and ensure Prisma generate uses PG schema for prod builds.","status":"tombstone","priority":2,"issue_type":"task","created_at":"2025-11-28T09:56:34.774621-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","dependencies":[{"issue_id":"lightning-d6a","depends_on_id":"lightning-2lx","type":"parent-child","created_at":"2025-11-29T07:25:51.234318-08:00","created_by":"honk","metadata":"{}"}],"deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"lightning-da03","title":"Beads: initialize sync branch (beads-sync)","description":"bd doctor reports sync-branch configured but local beads-sync branch not created yet. Decide/init sync branch (bd sync init or manual branch) so sync-branch workflow is active.","status":"tombstone","priority":2,"issue_type":"task","created_at":"2025-12-19T14:20:12.809742-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"lightning-daf","title":"Local regtest LNbits demo flow","description":"Bring up LNbits locally (dummy/regtest), run API+gallery against it, verify tip/pay widgets issue invoices. Provide scripted steps.","notes":"Local LNbits demo flow documented (docs/local-demo.md), helper script added, demo running with real invoices via dummy backend.","status":"tombstone","priority":1,"issue_type":"task","created_at":"2025-12-01T11:19:42.221424-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"lightning-dbc","title":"Voltage mutinynet LND via LNbits (staging)","description":"Wire LNbits Container App to Voltage mutinynet LND over gRPC, ensure staging uses it, document and test.","notes":"LNbits staging on mutinynet is live: connected to Voltage LND, docs added, smoke tests pass.","status":"tombstone","priority":1,"issue_type":"epic","created_at":"2025-11-29T11:31:27.399473-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"epic"}
{"id":"lightning-dbc.1","title":"Fix LNbits Container App to use Voltage mutinynet LND gRPC","description":"Build/push image with cert+macaroon decoding, set env (LND_GRPC_*), update container app to connect to mutinynet node and verify wallet init","notes":"LNbits Container App now connects to Voltage mutinynet LND via gRPC; env parsing fixed; db adapter parity; deployed image sha256:ec73879354f8155e90a3b820b7a76997fba4410286ad8290dbb29bc93000e9ad on rev --0000058.","status":"tombstone","priority":1,"issue_type":"task","created_at":"2025-11-29T11:31:38.231864-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","dependencies":[{"issue_id":"lightning-dbc.1","depends_on_id":"lightning-dbc","type":"parent-child","created_at":"2025-11-29T11:31:38.232729-08:00","created_by":"honk","metadata":"{}"}],"deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"lightning-dbc.2","title":"Smoke test LNbits staging via API (mutinynet)","description":"Create invoice through API with LIGHTNING_PROVIDER=lnbits, pay via Voltage test node or regen test payment, confirm webhook + DB status","notes":"Smoke test succeeded: first_install completed; superuser admin created; default wallet adminkey a663...; invoice creation OK on mutinynet via LndWallet.","status":"tombstone","priority":1,"issue_type":"task","created_at":"2025-11-29T11:31:48.594249-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","dependencies":[{"issue_id":"lightning-dbc.2","depends_on_id":"lightning-dbc","type":"parent-child","created_at":"2025-11-29T11:31:48.59512-08:00","created_by":"honk","metadata":"{}"}],"deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"lightning-dbc.3","title":"Document staging lightning setup (Voltage mutinynet + LNbits)","description":"Update AGENTS.md with LNbits staging URL, wallet id, admin/invoice keys, mutinynet node info, how to rotate secrets and switch funding","notes":"Documented staging lightning setup in docs/staging-lightning.md and linked from AGENTS.md.","status":"tombstone","priority":2,"issue_type":"task","created_at":"2025-11-29T11:32:00.680789-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","dependencies":[{"issue_id":"lightning-dbc.3","depends_on_id":"lightning-dbc","type":"parent-child","created_at":"2025-11-29T11:32:00.681553-08:00","created_by":"honk","metadata":"{}"}],"deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"lightning-dds0","title":"Chore: Suppress NO_COLOR warnings in dev logs","description":"Investigate the NO_COLOR warnings emitted when running dev logs and suppress them.\n\nImplementation notes:\n- Determine why NODE prints 'NO_COLOR env is ignored due to FORCE_COLOR env being set'.\n- Adjust dev log startup (or env exports) to avoid the warning while preserving colored output.\n\nAcceptance criteria:\n- Running pnpm dev:logs does not emit NO_COLOR/FORCE_COLOR warnings.\n- Logs still retain color output in dev terminals.\n\nEdge cases:\n- Users with NO_COLOR set in shell.\n- LOG_TAIL=0 usage.\n\n## Files\n- scripts/dev-logs.sh (modify: adjust env to avoid NO_COLOR warnings)\n\n## QA Evidence\n- Playwright: N/A\n- Screenshots: N/A\n- DevTools MCP: N/A\n- Logs: pnpm dev:logs (no NO_COLOR warnings)\n- CI: pnpm lint\n\n## Close Notes (fill in at closure)\n- Issues encountered:\n- Setup improvements:\n- Debug info that would have helped:","status":"tombstone","priority":4,"issue_type":"chore","assignee":"unassigned","estimated_minutes":60,"created_at":"2026-01-01T04:37:49.017302-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","close_reason":"Unset NO_COLOR in dev-logs.sh to suppress Node warnings while maintaining color output.","labels":["area:devx","area:qa"],"deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"chore"}
{"id":"lightning-dimt","title":"Test: API telemetry + tips WS + CORS","description":"Add API coverage for telemetry summary, tips WS filtering, and CORS allowlist behavior.\n\nImplementation notes:\n- Add unit tests for /api/telemetry/summary schema and error handling.\n- Add ws/tips tests for itemId filtering and invalid params.\n- Add CORS allowlist test (origin allowed vs rejected).\n\nAcceptance criteria:\n- Tests pass locally and in CI.\n- Failure modes covered (missing itemId, RPC error, disallowed origin).\n\nEdge cases:\n- Mock telemetry when RPC unavailable.\n\n## Files\n- apps/api/src/routes/telemetry-summary.test.ts (create)\n- apps/api/src/routes/tips-ws.test.ts (create)\n- apps/api/src/server.cors.test.ts (create)\n\n## QA Evidence\n- Playwright: N/A (API tests)\n- Screenshots: N/A\n- DevTools MCP: N/A\n- Logs: tail -n 200 .logs/dev/api.log .logs/dev/gallery.log (api log shows wallet-ws fetch failed + telemetry block poll warnings; follow-ups tracked)\n- CI: pnpm --filter api test (USE_HTTPS warning persists; tracked in lightning-5q00) \u0026\u0026 pnpm lint\n\n## Close Notes (fill in at closure)\n- Issues encountered: oracle.sh failed (Claude model) so no critique output; USE_HTTPS warning persists (tracked in lightning-5q00); api.log shows wallet-ws fetch failed warnings (follow-up created) and telemetry poll 503 (tracked in lightning-wglx).\n- Setup improvements: none.\n- Debug info that would have helped: oracle CLI failure details.","acceptance_criteria":"API tests cover telemetry, ws/tips, and CORS rules","status":"tombstone","priority":2,"issue_type":"task","assignee":"unassigned","estimated_minutes":180,"created_at":"2025-12-31T18:37:45.142437-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","close_reason":"Implemented","labels":["area:api","area:qa","feature:personal-site-kit"],"dependencies":[{"issue_id":"lightning-dimt","depends_on_id":"lightning-39zu","type":"parent-child","created_at":"2025-12-31T18:37:45.144559-08:00","created_by":"honk"},{"issue_id":"lightning-dimt","depends_on_id":"lightning-cd6j","type":"blocks","created_at":"2025-12-31T18:42:15.190925-08:00","created_by":"honk"},{"issue_id":"lightning-dimt","depends_on_id":"lightning-l04e","type":"blocks","created_at":"2025-12-31T18:42:26.669395-08:00","created_by":"honk"},{"issue_id":"lightning-dimt","depends_on_id":"lightning-p8rb","type":"blocks","created_at":"2025-12-31T18:42:38.646885-08:00","created_by":"honk"}],"deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"lightning-dl4v","title":"Premium TipWidget redesign with compact variant","description":"Complete visual redesign of TipWidget with:\n- Premium pill-shaped amount selectors with gradient states\n- Animated countdown ring for invoice expiry\n- Enhanced confetti/lightning success celebration\n- Glassmorphism invoice panel\n- Real-time pulsing status indicators\n- Compact variant (~half size for embedding)\n- Micro-interactions throughout\n\nAcceptance criteria:\n- Full and compact variants available via size prop\n- Success celebration feels delightful and rewarding\n- Real-time status clearly visible with animations\n- Accessible (keyboard, screen reader)\n- No console errors, passes typecheck","status":"tombstone","priority":2,"issue_type":"feature","created_at":"2025-12-15T13:09:48.735499-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"feature"}
{"id":"lightning-dub","title":"Demo comments should default to mock relays when no signer","description":"Current demo shows 'No relays reachable' unless relays + NIP07 provided. Add config toggle or default VITE_NOSTRSTACK_RELAYS=mock so comments work out of the box in local demo.","status":"tombstone","priority":2,"issue_type":"task","created_at":"2025-12-01T13:08:25.468433-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"lightning-dv6","title":"Combine profile \u0026 logged-in cards into one detailed view","description":"Current Nostr tab duplicates info between 'Profile \u0026 signer' and 'Logged-in Nostr user'. Merge into a single detailed profile view that includes signer status, active pubkey, message send form, relay statuses, and profile details without losing functionality. Focus on cleaner layout, consistent spacing, and responsive design. Acceptance: all previous controls remain, no regressions, and layout feels cohesive. Final step: exercise every interaction via Chrome DevTools MCP and attach screenshot(s) of the merged view.","status":"tombstone","priority":2,"issue_type":"task","created_at":"2025-12-02T16:19:44.771556-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","labels":["demo","nostr"],"deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"lightning-dxru","title":"Chore: investigate deprecated pnpm subdependencies","description":"Investigate deprecated subdependency warnings emitted by pnpm install and decide remediation.\n\n- Implement: document deprecated transitive deps and their upstream sources; resolve lint warnings surfaced by workspace lint.\n- Acceptance criteria:\n  - `pnpm install` warnings are documented with rationale.\n  - Core dev workflows remain green after dependency changes.\n- Edge cases:\n  - Some deprecations may be transitive and require upstream upgrades.\n  - Ensure lockfile-only changes are intentional and reproducible.\n\n## Files\n- docs/dependencies.md (create: document deprecated transitive deps)\n- apps/api/src/routes/lnurlp-callback.ts (modify: remove unused catch binding)\n- apps/api/src/telemetry/routes.ts (modify: remove unused catch binding)\n- apps/api/tests/utils/wait-for-health.ts (modify: remove unused catch binding)\n- packages/blog-kit/src/auth.tsx (modify: remove unused catch bindings)\n\n## QA Evidence\n- Install: `pnpm install`\n- CI: `pnpm -r lint`\n\n## Close Notes\n- Issues encountered: pnpm -r lint failed on unused catch bindings in api/blog-kit; oracle script failed after retrying Claude model.\n- Setup improvements: stabilize oracle CLI model selection.\n- Debug info that would have helped: which upstream packages own deprecated transitive deps (eslint/fastify/node-fetch/jsdom/shellcheck).\n","acceptance_criteria":"pnpm install warnings documented; pnpm -r lint passes.","status":"tombstone","priority":4,"issue_type":"chore","assignee":"honk","estimated_minutes":120,"created_at":"2026-01-02T03:23:35.811024-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","close_reason":"Implemented","labels":["deps","devx"],"deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"chore"}
{"id":"lightning-dy0o","title":"Test: Event renderer unit tests","description":"Add unit tests for rendering and reference parsing on the event landing page.\n\nAcceptance Criteria:\n- Tests cover nostr: mention parsing and link rendering.\n- Tests cover reference preview rendering with missing data.\n- Tests cover longform/event kind rendering variations.\n- Include the standing note: while working, look for refactoring opportunities/bugs/improvements and create new bd tasks as they surface.\n\nEdge Cases:\n- Empty content\n- Malformed nostr: URIs\n\n## Files\n- apps/gallery/src/nostr/eventRenderers.test.tsx (create: renderer tests)","status":"tombstone","priority":2,"issue_type":"task","created_at":"2025-12-20T10:32:32.606737-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","dependencies":[{"issue_id":"lightning-dy0o","depends_on_id":"lightning-00in","type":"parent-child","created_at":"2025-12-20T10:32:32.608701-08:00","created_by":"honk","metadata":"{}"},{"issue_id":"lightning-dy0o","depends_on_id":"lightning-2y3t","type":"blocks","created_at":"2025-12-20T10:34:14.370422-08:00","created_by":"honk","metadata":"{}"}],"deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"lightning-dznz","title":"Bug: Regtest pay fallback to LNbits when docker exec fails","description":"Regtest pay route currently shells out to docker exec; on some hosts this fails with runc I/O errors. Add a fallback to pay via LNbits API when LN_BITS_URL + LN_BITS_API_KEY are set, and return a clear error if both methods fail.\\n\\nAcceptance criteria:\\n- /api/regtest/pay succeeds using LNbits when docker exec fails (or when configured to prefer LNbits).\\n- Response preserves existing shape (ok true/false, error).\\n- Logs warn when fallback is used.\\n- Unit test or integration coverage for fallback path.\\n\\nEdge cases:\\n- LNbits payment returns error or non-200.\\n- LNbits responds with missing fields.\\n\\nNote: Always be looking for refactoring opportunities, bug fixes, and improvements. Create new tasks as you encounter them.\\n\\n## Files\\n- apps/api/src/routes/regtest-pay.ts (modify: add LNbits fallback)\\n- apps/api/src/routes/regtest-pay.test.ts (modify: add fallback test)\\n- apps/api/src/env.ts (modify: document required envs if needed)","status":"tombstone","priority":2,"issue_type":"task","created_at":"2025-12-25T22:38:22.999088-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"lightning-dzvy","title":"Security: Regtest guardrails + LNURL validation","description":"Harden regtest endpoints and LNURL-pay validation to reduce accidental misuse while keeping regtest workflows intact.\n\nAcceptance Criteria:\n- Regtest pay/fund endpoints refuse requests when flags are disabled and return explicit error codes.\n- LNURL-pay client validates `minSendable`/`maxSendable` before requesting invoices.\n- Sensitive actions log structured events for troubleshooting.\n\nEdge Cases:\n- Metadata missing or malformed should produce a user-visible error without crashing.\n- Regtest endpoints called without body/invalid payload return 4xx.\n\n## Files\n- apps/api/src/routes/regtest-pay.ts (modify: guard responses + structured logs)\n- apps/api/src/routes/regtest-fund.ts (modify: guard responses + structured logs)\n- packages/blog-kit/src/zap-button.tsx (modify: LNURL-pay validation before invoice request)","status":"tombstone","priority":2,"issue_type":"task","created_at":"2025-12-19T17:40:14.170652-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","dependencies":[{"issue_id":"lightning-dzvy","depends_on_id":"lightning-m8y7","type":"parent-child","created_at":"2025-12-19T17:40:14.173855-08:00","created_by":"honk","metadata":"{}"},{"issue_id":"lightning-dzvy","depends_on_id":"lightning-gfyr","type":"blocks","created_at":"2025-12-19T17:41:13.705934-08:00","created_by":"honk","metadata":"{}"},{"issue_id":"lightning-dzvy","depends_on_id":"lightning-g23l","type":"blocks","created_at":"2025-12-19T17:41:14.055993-08:00","created_by":"honk","metadata":"{}"}],"deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"lightning-e00","title":"Frontend logs not captured in log viewer","description":"Logs tab shows backend stream but frontend logs pane is empty even after toggling capture ON (see screenshot). Ensure console wrapping works after tab switches and under dark/light themes, and add clear indicator when capture is disabled. Acceptance: toggling capture immediately shows new console entries, survives tab navigation, and a test log appears in the pane. Final step: validate with Chrome DevTools MCP by toggling capture, emitting a console log, and capturing a screenshot of the populated frontend logs.","status":"tombstone","priority":2,"issue_type":"bug","created_at":"2025-12-02T17:19:07.578122-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","labels":["demo","logging","ui"],"deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"bug"}
{"id":"lightning-e0z","title":"Wallet override UX unclear","description":"User unsure what inputs to provide to avoid 404. Add inline hint with example Node URL, wallet ID, and admin key fields; allow entering wallet ID to check /api/v1/wallet with query if needed; include copy/paste helper.","status":"tombstone","priority":1,"issue_type":"bug","created_at":"2025-12-03T01:29:00.487356-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"bug"}
{"id":"lightning-e3d","title":"Comments: thread discovery/aggregation","description":"Add per-post/thread ID and relay query to load existing Nostr comments so users see prior discussion; show count and list on load.","status":"tombstone","priority":2,"issue_type":"task","created_at":"2025-12-01T14:50:34.973896-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"lightning-e3jg","title":"Integration: Search \u0026 Notifications","description":"Wire up SearchView and NotificationsView to use the dynamic relay list.\n\nDescription:\n- Update `SearchView` to use `useRelays().relays` for NIP-50 search.\n- Update `NotificationsView` to use `useRelays().relays` for listening to mentions/zaps.\n- Update `nostr/api.ts` helpers (`searchNotes`) if needed to accept relays array.\n- Remove hardcoded relay lists in `NotificationsView`.\n\nAcceptance Criteria:\n- Search uses user relays.\n- Notifications arrive from user relays.\n- No regression in default behavior.\n\n## Files\n- apps/gallery/src/SearchView.tsx (modify: use context)\n- apps/gallery/src/NotificationsView.tsx (modify: use context)\n- apps/gallery/src/nostr/api.ts (modify: update helpers)\n\n## QA Evidence\n- DevTools: Verify subscription requests go to custom relays.\n- CI: `pnpm lint \u0026\u0026 pnpm typecheck`\n\n## Close Notes\n- Issues encountered: NotificationsView still needs update (task description lists it, but I only did SearchView). Will update NotificationsView next in the same task scope.","status":"tombstone","priority":2,"issue_type":"task","created_at":"2026-01-03T14:24:40.231534-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","close_reason":"Implemented","dependencies":[{"issue_id":"lightning-e3jg","depends_on_id":"lightning-jeeg","type":"parent-child","created_at":"2026-01-03T14:24:40.234798-08:00","created_by":"honk"},{"issue_id":"lightning-e3jg","depends_on_id":"lightning-vydw","type":"blocks","created_at":"2026-01-03T14:25:04.536175-08:00","created_by":"honk"}],"deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"lightning-eag","title":"Show build commit + timestamp in demo","description":"Surface current git commit hash and build time on demo page so users can see what’s deployed.","status":"tombstone","priority":2,"issue_type":"task","created_at":"2025-12-01T14:23:46.694182-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"lightning-ed1f","title":"Zap modal layout: compact + clean","description":"Fix Zap modal layout regressions (grid overflow, stacked panels) and restore a compact, clean invoice layout inspired by the original demo.\\n\\nAcceptance Criteria:\\n- Zap modal renders cleanly at desktop + tablet widths (no overlapping/stretched columns).\\n- QR/invoice panel stays aligned; actions wrap without breaking layout.\\n- Verified via Chrome DevTools MCP (console/network clean).\\n\\n## Files\\n- apps/gallery/src/gallery.css (modify: zap modal/grid styles)\\n- packages/blog-kit/src/zap-button.tsx (modify: markup only if needed for layout)","status":"tombstone","priority":2,"issue_type":"task","created_at":"2025-12-20T08:47:50.729819-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"lightning-ee2","title":"Profile card uses logged-in nostr user (name, picture, relay list)","description":"Profile card should pull from window.nostr getPublicKey + fetched metadata; show name/picture, compact one-line key chip (npub/hex toggle + copy), connected relays via RelayCard, and full profile info panel.","status":"tombstone","priority":1,"issue_type":"task","created_at":"2025-12-02T12:45:33.373188-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"lightning-eer5","title":"design: gallery design system v1","description":"Implement a cohesive, brandable design system (tokens + components + motion) similar to ~/code/markdowntown. Focus on GREAT UX, crisp technical visual language, and easy theme portability.","acceptance_criteria":"Gallery looks cohesive; theme is portable (CSS export); motion feels alive; regtest QA covers core flows; DevTools console/network clean.","status":"tombstone","priority":2,"issue_type":"epic","created_at":"2025-12-13T22:08:18.632984-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"epic"}
{"id":"lightning-eer5.1","title":"gallery: export theme CSS (copy/paste)","description":"Add a theme export affordance in the gallery so users can copy a CSS snippet (or vars JSON) for the current brand/theme.","acceptance_criteria":"UI offers Copy CSS / Copy vars; uses @nostrstack/embed themeToCss/themeToCssVars; toast feedback; no console/network errors.","status":"tombstone","priority":2,"issue_type":"task","created_at":"2025-12-13T22:08:36.607484-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","dependencies":[{"issue_id":"lightning-eer5.1","depends_on_id":"lightning-eer5","type":"parent-child","created_at":"2025-12-13T22:08:36.608373-08:00","created_by":"honk","metadata":"{}"}],"deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"lightning-eer5.2","title":"gallery: microinteractions + motion polish","description":"Add tasteful hover/press/enter transitions, improve perceived responsiveness, and respect prefers-reduced-motion.","acceptance_criteria":"Buttons/inputs/cards feel alive; reduced-motion disables non-essential animation; DevTools console/network clean.","status":"tombstone","priority":3,"issue_type":"task","created_at":"2025-12-13T22:08:48.13006-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","dependencies":[{"issue_id":"lightning-eer5.2","depends_on_id":"lightning-eer5","type":"parent-child","created_at":"2025-12-13T22:08:48.131082-08:00","created_by":"honk","metadata":"{}"}],"deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"lightning-eer5.3","title":"gallery: invoice dialog UX polish","description":"Polish invoice popover/dialog UX: clearer hierarchy, better status states, nicer QR framing, and copy affordances.","acceptance_criteria":"Invoice dialog looks premium and readable; status transitions are clear; no console/network errors.","status":"tombstone","priority":3,"issue_type":"task","created_at":"2025-12-13T22:08:59.550641-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","dependencies":[{"issue_id":"lightning-eer5.3","depends_on_id":"lightning-eer5","type":"parent-child","created_at":"2025-12-13T22:08:59.552386-08:00","created_by":"honk","metadata":"{}"}],"deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"lightning-eer5.4","title":"gallery: logs UX improvements","description":"Improve Logs tab: clearer empty/loading states, pause/autoscroll control, better filtering, and level emphasis.","acceptance_criteria":"Logs tab feels usable under load; filters and pause work; no console/network errors.","status":"tombstone","priority":3,"issue_type":"task","created_at":"2025-12-13T22:09:11.137293-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","dependencies":[{"issue_id":"lightning-eer5.4","depends_on_id":"lightning-eer5","type":"parent-child","created_at":"2025-12-13T22:09:11.138449-08:00","created_by":"honk","metadata":"{}"}],"deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"lightning-eer5.5","title":"qa: regtest demo clicks every control","description":"Expand apps/gallery/scripts/qa-regtest-demo.ts to exercise every interactive control (tabs/subtabs/buttons/toggles/copy actions) and ensure zero console errors and no unexpected local 4xx/5xx.","acceptance_criteria":"qa:regtest-demo covers all controls and passes reliably.","status":"tombstone","priority":2,"issue_type":"task","created_at":"2025-12-13T22:09:24.065847-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","dependencies":[{"issue_id":"lightning-eer5.5","depends_on_id":"lightning-eer5","type":"parent-child","created_at":"2025-12-13T22:09:24.066802-08:00","created_by":"honk","metadata":"{}"}],"deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"lightning-ekj","title":"UX sweep: demo lightning/nostr/logs","description":"Do full UX pass with Chrome DevTools MCP across lightning, nostr, logs tabs; note errors, log issues, verify servers via make dev.","status":"tombstone","priority":1,"issue_type":"task","created_at":"2025-12-03T20:45:09.934635-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"lightning-eo3j","title":"Epic: Codex skills for nostrstack","description":"Complete implementation of a curated Codex skill set for the nostrstack repo.\n\n## Objective\nCreate and package a set of Codex skills in ~/.codex/skills that capture nostrstack-specific workflows, references, and guardrails.\n\n## Success Criteria\n- [ ] At least 5 nostrstack-specific skills exist in ~/.codex/skills with accurate triggers and references.\n- [ ] All skills validate and package to ~/.codex/skills/dist/*.skill.\n- [ ] Skills include security guidance to avoid leaking secrets.\n\n## Assumptions\n- Skills are stored under ~/.codex/skills and packaged into ~/.codex/skills/dist.\n- Skills reference existing repo docs rather than duplicating large docs.\n- No production code changes are required.\n\n## Out of Scope\n- Implementing new nostrstack features.\n- Refactoring app code unrelated to skills.","status":"tombstone","priority":2,"issue_type":"epic","created_at":"2025-12-26T16:49:52.85237-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"epic"}
{"id":"lightning-eom1","title":"Injector: Upgrade for Personal Site Kit","description":"Update the static site injector CLI to support new Personal Site Kit features.\\n\\nImplementation notes:\\n- Update packages/injector/bin/nostrstack-inject.js to support --with-blockchain, --with-profile, --layout flags.\\n- Render data-nostrstack-comment-tip attribute for the main section to use the new composed widget.\\n- Pass layout prop (full/compact) to the widget.\\n\\nAcceptance criteria:\\n- Injector supports new flags matching documentation.\\n- Output HTML uses new widget data attributes.\\n\\nEdge cases:\\n- Backward compatibility for existing flags (--share, --profile).\\n\\n## Files\\n- packages/injector/bin/nostrstack-inject.js (modify)\\n\\n## QA Evidence\\n- Manual test: Run injector on a dummy file and check output.\\n- CI: pnpm lint","status":"tombstone","priority":2,"issue_type":"task","created_at":"2026-01-01T18:51:05.20499-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","close_reason":"Upgraded injector CLI to support new Personal Site Kit flags and widgets.","deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"lightning-erki","title":"tooling: remove url.parse DeprecationWarning in pnpm scripts","description":"pnpm install emits Node DEP0169 url.parse deprecation warning; find the caller and update/replace to silence.","acceptance_criteria":"pnpm install runs without DEP0169 url.parse deprecation warning.","status":"tombstone","priority":4,"issue_type":"chore","created_at":"2025-12-13T23:33:00.543638-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"chore"}
{"id":"lightning-etjs","title":"Chore: Reduce wallet-ws fetch warning noise","description":"Investigate wallet-ws fetch failed warnings in dev logs and reduce noise for expected disconnects.\n\nImplementation notes:\n- Review apps/api/src/routes/wallet-ws.ts polling loop and error handling.\n- Rate-limit or downgrade expected disconnect warnings.\n- Add tests to cover error paths and logging behavior.\n\nAcceptance criteria:\n- Expected upstream disconnects no longer emit repeated WARN logs.\n- Actionable failures still surface with context.\n- Tests cover warning suppression/rate limiting.\n\nEdge cases:\n- Wallet provider down or intermittent.\n- Rapid connect/disconnect cycles.\n\n## Files\n- apps/api/src/routes/wallet-ws.ts (modify: error handling/logging)\n- apps/api/src/routes/wallet.ts (modify: only if helper needed)\n- apps/api/src/routes/wallet-ws.test.ts (create: coverage for warn behavior)\n\n## QA Evidence\n- Playwright: N/A (backend only)\n- Screenshots: N/A\n- DevTools MCP: N/A\n- Logs: tail -n 200 .logs/dev/api.log .logs/dev/gallery.log (no recurring wallet-ws warnings)\n- CI: pnpm --filter api test \u0026\u0026 pnpm lint\n\n## Close Notes (fill in at closure)\n- Issues encountered:\n- Setup improvements:\n- Debug info that would have helped:","status":"tombstone","priority":3,"issue_type":"chore","assignee":"unassigned","created_at":"2026-01-01T03:02:45.38716-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","close_reason":"Rate-limited wallet fetch warnings and added unit tests.","labels":["area:api","area:qa"],"deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"chore"}
{"id":"lightning-evqr","title":"Normalize API base + Vite proxy (avoid /api/api footgun)","description":"Current dev proxy + embed base resolution makes it easy to accidentally construct /api/api/* URLs. Make API base resolution + proxy behavior unambiguous (documented, tested), so embed consumers can set apiBaseUrl cleanly without depending on Vite rewrite quirks.","status":"tombstone","priority":2,"issue_type":"task","created_at":"2025-12-15T04:47:11.301603-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","labels":["api","dx","embed"],"dependencies":[{"issue_id":"lightning-evqr","depends_on_id":"lightning-khfc","type":"discovered-from","created_at":"2025-12-15T04:47:11.303734-08:00","created_by":"honk","metadata":"{}"}],"deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"lightning-ew94","title":"Bug: Prevent relay close errors on view switch","description":"Reduce noisy WebSocket errors when switching views by cleaning up relay connections safely.\\n\\nImplementation Steps:\\n- Review relay cleanup in feed/profile views.\\n- Ensure subscriptions are closed without sending on closed sockets.\\n\\nAcceptance Criteria:\\n- Switching between Feed and Profile does not log WebSocket close errors.\\n\\n## Files\\n- apps/gallery/src/FeedView.tsx (modify: relay cleanup)\\n- apps/gallery/src/ProfileView.tsx (modify: relay cleanup)","status":"tombstone","priority":2,"issue_type":"task","created_at":"2025-12-19T20:21:45.169902-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"lightning-f37j","title":"QR: Branded QR component overhaul + demo lab","description":"Deep-research and implement an amazing, customizable branded QR component (logo/shape/color/gradient/quiet-zone/error-correction), suitable for embed + gallery. Add a dedicated demo section to try presets and config combinations, with realtime verification without flicker, and clear UX for copy/open/pay flows.","status":"tombstone","priority":1,"issue_type":"epic","created_at":"2025-12-15T02:49:05.009068-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","labels":["embed","qr","ui"],"deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"epic"}
{"id":"lightning-f6vr","title":"Design: Identifier resolution \u0026 trust model","description":"Document identifier resolution and trust model for npub/nprofile/nip05/lightning address inputs.\n\n- Define parsing order, validation rules, and error mapping.\n- Specify NIP-05 lookup rules, timeouts, and cache behavior.\n- Define how results are surfaced in the UI (confidence/verified display).\n\nAcceptance Criteria\n- Spec doc includes algorithm, cache policy, and failure taxonomy.\n- Security notes include HTTPS-only, no-redirect, and size limits.\n\nEdge Cases\n- Invalid bech32, unsupported prefix, mismatched pubkey, malformed nostr.json.\n\nNote: Always be looking for refactoring opportunities, bug fixes, and improvements. Create new tasks as you encounter them.\n\n## Files\n- docs/architecture/identity-resolution.md (create: resolution + trust model)","status":"tombstone","priority":2,"issue_type":"task","created_at":"2025-12-25T23:04:03.121358-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","dependencies":[{"issue_id":"lightning-f6vr","depends_on_id":"lightning-yzz6","type":"parent-child","created_at":"2025-12-25T23:04:03.123584-08:00","created_by":"honk","metadata":"{}"}],"deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"lightning-fcsh","title":"Docs: Find friend + tip flow","description":"Update docs for the new find-friend + tip flow and config.\n\n- Document search inputs (npub/nprofile/nip05) and expected behavior.\n- Document NIP-05 proxy config, timeouts, and caching TTL.\n- Add troubleshooting tips for LNURL/zap errors.\n\nAcceptance Criteria\n- README/docs mention the new flow and config keys.\n- env.sample contains new variables and defaults.\n\nEdge Cases\n- Mention limitations (no global search, login required to sign zaps).\n\nNote: Always be looking for refactoring opportunities, bug fixes, and improvements. Create new tasks as you encounter them.\n\n## Files\n- README.md (modify: flow + config)\n- docs/find-friend-tip.md (create: user guide)\n- env.sample (modify: new vars)","status":"tombstone","priority":2,"issue_type":"task","created_at":"2025-12-25T23:07:35.975737-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","dependencies":[{"issue_id":"lightning-fcsh","depends_on_id":"lightning-yzz6","type":"parent-child","created_at":"2025-12-25T23:07:35.977416-08:00","created_by":"honk","metadata":"{}"},{"issue_id":"lightning-fcsh","depends_on_id":"lightning-7udg","type":"blocks","created_at":"2025-12-25T23:08:52.628264-08:00","created_by":"honk","metadata":"{}"},{"issue_id":"lightning-fcsh","depends_on_id":"lightning-k6um","type":"blocks","created_at":"2025-12-25T23:08:52.96344-08:00","created_by":"honk","metadata":"{}"}],"deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"lightning-fgkx","title":"Security: NIP-05 proxy hardening tests","description":"Add security-focused tests for the NIP-05 proxy.\n\n- Assert redirects are rejected.\n- Assert non-HTTPS is rejected (except localhost if explicitly allowed).\n- Assert responses over size limit are rejected.\n\nAcceptance Criteria\n- Tests confirm SSRF/redirect defenses.\n- Error responses do not leak internal URLs.\n\nEdge Cases\n- 301/302 chains, IPv6 hostnames, oversized bodies.\n\nNote: Always be looking for refactoring opportunities, bug fixes, and improvements. Create new tasks as you encounter them.\n\n## Files\n- apps/api/src/routes/nostr-identity.security.test.ts (create: security tests)","status":"tombstone","priority":2,"issue_type":"task","created_at":"2025-12-25T23:07:34.7302-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","dependencies":[{"issue_id":"lightning-fgkx","depends_on_id":"lightning-yzz6","type":"parent-child","created_at":"2025-12-25T23:07:34.734504-08:00","created_by":"honk","metadata":"{}"}],"deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"lightning-fkir","title":"Audit: Comprehensive UI/UX Audit \u0026 Issue Catalog","description":"Conduct a comprehensive audit of the Gallery UI. Exercise every button, input, and label. Catalog any broken states, missing feedback, or layout issues.\n\n## Scope\n- Sidebar actions (Nav, Wallet, Network)\n- Feed interactions (Zaps, Comments, Post)\n- Settings controls\n- Profile interactions\n- Telemetry \u0026 Status cards\n\n## Output\n- Create a list of specific UI bugs/improvements as new bd tasks (or add to this epic).\n- Update the Epic description or comments with findings.\n\n## Files\n- apps/gallery/src/ (read-only audit)\n- docs/ui-audit-findings.md (create: log findings here)\n\n## QA Evidence\n- Document created: docs/ui-audit-findings.md","status":"tombstone","priority":2,"issue_type":"task","created_at":"2026-01-02T14:52:11.050503-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","close_reason":"Audited Gallery UI and created 3 high-priority follow-up tasks (lightning-hvqy, lightning-muv2, lightning-plc8). Cataloged findings in docs/ui-audit-findings.md.","dependencies":[{"issue_id":"lightning-fkir","depends_on_id":"lightning-70lj","type":"parent-child","created_at":"2026-01-02T14:52:11.053249-08:00","created_by":"honk"}],"deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"lightning-four","title":"QA: reply fallback + cursor edge cases","description":"Add QA coverage for reply fallback and pagination edge cases in /nostr/:id.\n\nAcceptance criteria:\n- Playwright test covers API 500/timeout and verifies relay fallback messaging or error handling is shown.\n- Playwright test covers invalid cursor response (400 invalid_reply_cursor) and shows partial error banner without losing loaded replies.\n- Reply list remains deduped and ordered oldest-\u003enewest after fallback or retry.\n\nEdge cases:\n- API returns empty replies but hasMore=true.\n- Load-more click during in-flight request.\n\n## Files\n- apps/gallery/tests/nostr-event-replies.spec.ts (modify: add fallback/invalid cursor cases)\n- apps/gallery/src/NostrEventView.tsx (modify: tweak UX if needed)\n- apps/gallery/src/utils/mock-relay-init.ts (modify: ensure pool uses mock WebSocket)\n- apps/gallery/playwright.config.ts (modify: force mock relays in Playwright)\n- docs/screenshots/nostr-event-replies/nostr-event-replies.png (create)\n- docs/screenshots/nostr-event-replies/nostr-event-empty.png (create)\n- docs/screenshots/nostr-event-replies/nostr-event-replies-fallback.png (create)\n- docs/screenshots/nostr-event-replies/nostr-event-replies-cursor-error.png (create)\n\n## QA Evidence\n- Playwright: pnpm --filter gallery exec playwright test tests/nostr-event-replies.spec.ts\n- DevTools MCP: tool call failed with Transport closed; used fallback QA instead.\n- QA fallback: pnpm qa:regtest-demo\n- Logs: pnpm dev:logs + tail .logs/dev/*.log\n- CI: pnpm check\n\n## Close Notes\n- Issues encountered: MCP tool call failed with Transport closed; qa:regtest-demo required running dev:logs; LNbits topup failed log line observed during regtest QA.\n- Setup improvements: consider documenting qa:regtest-demo requirement to run dev:logs; stabilize LNbits topup during regtest.\n- Debug info that would have helped: explicit note that mock relays require SimplePool from nostr-tools/pool or useWebSocketImplementation for test env.","status":"tombstone","priority":3,"issue_type":"task","created_at":"2026-01-04T03:17:06.537025-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","close_reason":"Implemented","deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"lightning-ftr","title":"Collapse to browser NIP-07 signer (drop built-in)","description":"Assume window.nostr is present; remove built-in test signer UI/logic from gallery. Single signer source, consistently used by profile/logged-in cards.","status":"tombstone","priority":1,"issue_type":"task","created_at":"2025-12-02T12:45:16.966155-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"lightning-fulf","title":"Feat: Rich Media Embedding (images/video)","description":"Enhance the event renderer to detect and embed images and videos from URLs in post content.\n\nDescription:\n- Update `renderContentWithLinks` to identify image extensions (jpg, jpeg, png, gif, webp) and video extensions (mp4, mov, webm).\n- Render them as `\u003cimg /\u003e` or `\u003cvideo controls /\u003e` tags with max-width/responsive styles.\n- Ensure 'lazy' loading for images.\n- Handle mixed text and media content.\n\nAcceptance Criteria:\n- Posts with image URLs display the image inline.\n- Posts with video URLs display a playable video player.\n- Mixed text/links/media renders correctly.\n\nEdge Cases:\n- Broken images (alt text fallback).\n- Multiple media links in one post.\n\n## Files\n- apps/gallery/src/nostr/eventRenderers.tsx (modify: media detection and rendering)\n- apps/gallery/src/gallery.css (modify: media container styles)\n- apps/gallery/tests/media-render.spec.ts (create: visual test)\n\n## QA Evidence\n- Playwright: `pnpm --filter gallery e2e tests/media-render.spec.ts`\n- Screenshots: `docs/screenshots/social/media-embed.png`\n- CI: `pnpm lint \u0026\u0026 pnpm typecheck`\n\n## Actual QA Evidence\n- Playwright: Passed (verified CSS styles and visual regression screenshot).\n- Unit Tests: Passed (`apps/gallery/src/nostr/eventRenderers.test.tsx` created).\n- Screenshots: `docs/screenshots/social/media-embed.png`\n- CI: Passed.\n\n## Close Notes\n- Issues encountered: Linting error on import sort (fixed).\n- Setup improvements: None.","status":"tombstone","priority":2,"issue_type":"task","created_at":"2026-01-03T18:14:38.283298-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","close_reason":"Implemented","dependencies":[{"issue_id":"lightning-fulf","depends_on_id":"lightning-7qzp","type":"parent-child","created_at":"2026-01-03T18:14:38.285783-08:00","created_by":"honk"}],"deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"lightning-fwvn","title":"Chore: Ignore generated docs screenshots","description":"Prevent test runs from creating untracked docs screenshot artifacts.\\n\\nImplementation Steps:\\n- Add a gitignore in docs/screenshots to ignore *.png outputs.\\n- Ensure existing tracked screenshots remain unaffected.\\n\\nAcceptance Criteria:\\n- New screenshot artifacts do not appear in git status after test runs.\\n\\nEdge Cases:\\n- If screenshots are intentionally tracked, document how to override.","status":"tombstone","priority":3,"issue_type":"task","created_at":"2025-12-20T00:36:29.223496-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"lightning-g1hn","title":"Security: Harden LNURL validation + successAction sanitization","description":"Add security-focused validation around LNURL pay metadata and success actions.\n\nAcceptance criteria:\n- Validate callback URL scheme (https; allow http only for localhost/dev).\n- Validate min/max sendable and metadata shape; reject invalid responses with clear errors.\n- Sanitize successAction URL to allow only http/https and block javascript: and data: schemes.\n- Enforce commentAllowed length where applicable (including empty/zero).\n- Errors surfaced to user without leaking sensitive data.\n\nEdge cases to handle:\n- successAction with bad URL, minSendable \u003e maxSendable, commentAllowed=0, localhost callbacks.\n\nNote: Always be looking for refactoring opportunities, bug fixes, and improvements. Create new tasks as you encounter them.\n\n## Files\n- packages/blog-kit/src/lnurl.ts (modify: validation + sanitization)\n- packages/blog-kit/src/zap-button.tsx (modify: use sanitized successAction)","status":"tombstone","priority":2,"issue_type":"task","created_at":"2025-12-20T13:11:12.306878-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","dependencies":[{"issue_id":"lightning-g1hn","depends_on_id":"lightning-01t7","type":"parent-child","created_at":"2025-12-20T13:11:12.308932-08:00","created_by":"honk","metadata":"{}"},{"issue_id":"lightning-g1hn","depends_on_id":"lightning-p3z2","type":"blocks","created_at":"2025-12-20T13:11:41.88539-08:00","created_by":"honk","metadata":"{}"}],"deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"lightning-g23l","title":"Bugfix: Restore regtest Add funds action","description":"Fix the Add funds (regtest) button so it reliably calls the regtest fund endpoint and shows success/error feedback.\n\nAcceptance Criteria:\n- Add funds button uses resolved API base and successfully triggers `/api/regtest/fund`.\n- Clear success/error feedback is shown for fund attempts.\n- Button is hidden or disabled when regtest fund is not enabled.\n\nEdge Cases:\n- Local HTTPS + HTTP API should still work via resolver.\n- API returns non-200 should surface the response message.\n\n## Files\n- apps/gallery/src/Sidebar.tsx (modify: regtest fund action + gating)\n- apps/api/src/routes/regtest-fund.ts (modify: ensure guard returns explicit error when disabled)\n- apps/api/src/env.ts (modify: confirm regtest fund flag in env validation)","status":"tombstone","priority":2,"issue_type":"bug","created_at":"2025-12-19T17:40:03.203016-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","dependencies":[{"issue_id":"lightning-g23l","depends_on_id":"lightning-m8y7","type":"parent-child","created_at":"2025-12-19T17:40:03.20558-08:00","created_by":"honk","metadata":"{}"},{"issue_id":"lightning-g23l","depends_on_id":"lightning-u2x4","type":"blocks","created_at":"2025-12-19T17:41:13.357944-08:00","created_by":"honk","metadata":"{}"}],"deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"bug"}
{"id":"lightning-g362","title":"Enhance qa-regtest-demo preflight controls","description":"Expand qa-regtest-demo preflight to handle slow startups and optional checks for non-local environments.\n\nAcceptance criteria:\n- Preflight supports a small retry window (e.g., 3 attempts with short delays) and configurable timeout.\n- Optional flag/env (e.g., SKIP_PREFLIGHT=1) bypasses preflight for advanced setups.\n- Documentation notes GALLERY_URL override behavior and preflight controls.\n\nEdge cases:\n- Remote hosts that require auth/VPN.\n- Sub-path deployments that may return 404 on /.\n\n## Files\n- apps/gallery/scripts/qa-regtest-demo.ts (modify: retries/skip flag/configurable timeout)\n- docs/testing.md (update: preflight controls + GALLERY_URL guidance)\n\n## QA Evidence\n- QA: `pnpm qa:regtest-demo` with SKIP_PREFLIGHT=1 (runs without preflight)\n- QA: `pnpm qa:regtest-demo` with preflight timeout override (verify retries)\n- CI: `pnpm check`\n","status":"open","priority":4,"issue_type":"task","created_at":"2026-01-04T14:59:42.421464-08:00","updated_at":"2026-01-04T14:59:42.421464-08:00"}
{"id":"lightning-g6eb","title":"Gallery: expand Lightning layout (no collapsed sections)","description":"Lightning tab should use space better and show all controls inline. Remove/expand collapsed \u003cdetails\u003e sections (LNbits wallet override, theme export, telemetry/status panels) and re-layout cards so Pay-to-unlock and wallet panels align cleanly on desktop.","acceptance_criteria":"Nothing is collapsed by default on Lightning tab; Pay-to-unlock layout is clean (no awkward empty blocks), page fills space; no console errors/failed local requests; pnpm qa:regtest-demo passes.","status":"tombstone","priority":2,"issue_type":"feature","created_at":"2025-12-14T13:34:15.318268-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","labels":["design","gallery","lightning","ui"],"deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"feature"}
{"id":"lightning-gd9z","title":"NIP-57: encode lnurl tag when metadata lacks encoded value","description":"ZapButton currently falls back to resolved lightning address for the lnurl tag when the provider metadata doesn't include encoded. Update to bech32-encode the lnurl URL/address so zap receipts are spec-compliant.","status":"tombstone","priority":2,"issue_type":"task","created_at":"2025-12-19T15:32:05.820182-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","close_reason":"Closed","deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"lightning-gfaq","title":"Design: Personal Site Kit architecture + config + privacy","description":"Define the Personal Site Kit architecture and configuration schema, including distribution strategy and privacy/CSP/CORS requirements.\n\nImplementation notes:\n- Map existing packages (apps/api, apps/gallery, packages/embed, packages/blog-kit, packages/injector, packages/sdk) and data flows (HTTP/WS, Nostr relays, LNURL).\n- Define a config schema for personal sites (tip, comments, share, profile, blockchain stats) with defaults and overrides.\n- Document styling isolation strategy (nostrstack theme wrapper + CSS variable guidance) and collision mitigation.\n- Document privacy stance (telemetry is blockchain-only) and CSP/CORS requirements for embeds.\n\nAcceptance criteria:\n- Architecture doc includes component map, data flow, and dependency notes.\n- Config schema documented with required/optional fields and examples.\n- Privacy + CSP/CORS guidance is explicit and reviewable.\n\nEdge cases:\n- Host CSP blocks websocket or script tag.\n- Multiple widgets on the same page with conflicting config.\n\n## Files\n- docs/architecture/personal-site-kit.md (create)\n- docs/architecture.md (modify: add link + summary)\n\n## QA Evidence\n- Playwright: N/A (docs only)\n- Screenshots: N/A\n- DevTools MCP: N/A\n- Logs: N/A\n- CI: pnpm lint:md (pass)\n\n## Close Notes\n- Issues encountered: markdownlint errors in README and specs; fixed while running pnpm lint:md.\n- Setup improvements: none.\n- Debug info that would have helped: none.\n","acceptance_criteria":"Architecture + config + privacy/CSP/CORS documented","status":"tombstone","priority":1,"issue_type":"task","assignee":"unassigned","estimated_minutes":180,"created_at":"2025-12-31T18:33:55.430026-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","close_reason":"Implemented","labels":["area:design","feature:personal-site-kit"],"dependencies":[{"issue_id":"lightning-gfaq","depends_on_id":"lightning-39zu","type":"parent-child","created_at":"2025-12-31T18:33:55.433296-08:00","created_by":"honk"}],"deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"lightning-gfbg","title":"Integrate Speckit and build embeddable Nostr comments + Lightning tipping widget","status":"tombstone","priority":2,"issue_type":"feature","created_at":"2025-12-28T15:59:13.65013-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"feature"}
{"id":"lightning-gfyr","title":"Core: Regtest zap pay wiring","description":"Ensure zap invoices can be paid via regtest by wiring the regtest pay action and success state into the component.\n\nAcceptance Criteria:\n- Regtest pay button appears only when enabled and API base resolves.\n- Clicking regtest pay hits `/api/regtest/pay` and moves UI to paid state on success.\n- Errors from regtest pay show inline without breaking layout.\n\nEdge Cases:\n- API base set to `mock` or empty should disable regtest pay gracefully.\n- Failed regtest pay should not clear the invoice or close the modal.\n\n## Files\n- packages/blog-kit/src/zap-button.tsx (modify: regtest pay action + state handling)\n- apps/api/src/routes/regtest-pay.ts (modify: tighten response payload / error codes if needed)\n- apps/api/src/env.ts (modify: confirm regtest flags are available in env validation)","status":"tombstone","priority":2,"issue_type":"task","created_at":"2025-12-19T17:39:52.790251-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","dependencies":[{"issue_id":"lightning-gfyr","depends_on_id":"lightning-m8y7","type":"parent-child","created_at":"2025-12-19T17:39:52.792551-08:00","created_by":"honk","metadata":"{}"},{"issue_id":"lightning-gfyr","depends_on_id":"lightning-ck1k","type":"blocks","created_at":"2025-12-19T17:41:12.647541-08:00","created_by":"honk","metadata":"{}"},{"issue_id":"lightning-gfyr","depends_on_id":"lightning-u2x4","type":"blocks","created_at":"2025-12-19T17:41:13.01342-08:00","created_by":"honk","metadata":"{}"}],"deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"lightning-gkfr","title":"Optimize relay selection for NIP-50 search","description":"Add known search relays (e.g. relay.nostr.band) to the search query in SearchView to ensure better results for NIP-50 content search.","status":"tombstone","priority":3,"issue_type":"task","created_at":"2026-01-03T15:12:41.084736-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","close_reason":"Implemented","dependencies":[{"issue_id":"lightning-gkfr","depends_on_id":"lightning-9ml3","type":"parent-child","created_at":"2026-01-03T15:12:41.086423-08:00","created_by":"honk"}],"deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"lightning-gqeq","title":"Bitcoin network switching + UI status","description":"Support smooth switching between regtest, mutinynet, and mainnet; add developer-friendly network presets and richer UI network status.","status":"tombstone","priority":2,"issue_type":"epic","assignee":"honk","created_at":"2026-01-01T23:14:30.298187-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","close_reason":"child tasks completed","labels":["bitcoin","devx","network","ui"],"deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"epic"}
{"id":"lightning-gqeq.1","title":"Plan: network switching + UI state","description":"Produce a concrete plan for regtest/mutinynet/mainnet switching, dev-friendly presets, and UI network/state surfacing.","acceptance_criteria":"Plan documented in docs/architecture/bitcoin-network-switching.md with steps, config changes, UI updates, and test/QA notes.","status":"tombstone","priority":2,"issue_type":"task","assignee":"honk","created_at":"2026-01-01T23:14:47.545958-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","close_reason":"plan documented","labels":["bitcoin","docs","network","planning"],"dependencies":[{"issue_id":"lightning-gqeq.1","depends_on_id":"lightning-gqeq","type":"parent-child","created_at":"2026-01-01T23:14:47.547474-08:00","created_by":"honk"}],"deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"lightning-gqeq.2","title":"Network profiles + developer switch","description":"Add network presets (regtest/mutinynet/mainnet), centralize BITCOIN_NETWORK/VITE_NETWORK config, and provide a developer-friendly switch command. Align regtest enable flags with network selection and document usage.","acceptance_criteria":"Single command or env profile switch documented; BITCOIN_NETWORK validates inputs; demo scripts updated to use profiles without duplicating env logic.","status":"tombstone","priority":2,"issue_type":"task","assignee":"honk","created_at":"2026-01-01T23:15:08.049172-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","close_reason":"network profiles and dev switch added","labels":["bitcoin","config","devx","network"],"dependencies":[{"issue_id":"lightning-gqeq.2","depends_on_id":"lightning-gqeq","type":"parent-child","created_at":"2026-01-01T23:15:08.050861-08:00","created_by":"honk"}],"deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"lightning-gqeq.3","title":"API network status + telemetry provider","description":"Expose a consolidated network status endpoint and allow telemetry to use bitcoind RPC or a fallback provider (e.g., mempool or mock) based on BITCOIN_NETWORK and config.","acceptance_criteria":"API returns network, tip height, mempool stats, and lightning provider health; telemetry events include network/state; tests updated or added.","status":"tombstone","priority":2,"issue_type":"task","assignee":"honk","created_at":"2026-01-01T23:15:24.448866-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","close_reason":"bitcoin status endpoint added","labels":["api","bitcoin","network","telemetry"],"dependencies":[{"issue_id":"lightning-gqeq.3","depends_on_id":"lightning-gqeq","type":"parent-child","created_at":"2026-01-01T23:15:24.450338-08:00","created_by":"honk"}],"deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"lightning-gqeq.4","title":"Gallery UI: network + node state","description":"Extend TelemetryBar/BitcoinNodeCard/Sidebar to show network, sync/state, mempool/peers, and lightning provider health; warn prominently on mainnet.","acceptance_criteria":"UI surfaces network label, tip stats, and provider health without console errors; mainnet warning appears when active.","status":"tombstone","priority":2,"issue_type":"task","assignee":"honk","created_at":"2026-01-01T23:15:41.039591-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","close_reason":"network state UI updated","labels":["bitcoin","gallery","network","ui"],"dependencies":[{"issue_id":"lightning-gqeq.4","depends_on_id":"lightning-gqeq","type":"parent-child","created_at":"2026-01-01T23:15:41.04053-08:00","created_by":"honk"}],"deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"lightning-gsdn","title":"Design: Reference resolution rules + UI behavior","description":"Define how the event landing page resolves and presents references to other events/profiles.\n\nAcceptance Criteria:\n- Document NIP-10 style e-tag markers (root/reply/mention) and how they map to UI sections.\n- Document NIP-27 mention parsing (nostr: URIs) and how to link to referenced events/profiles.\n- Define handling for addressable events (a-tags/naddr) and quote references (q-tags).\n- Specify ordering and max counts for references/previews.\n- Include the standing note: while working, look for refactoring opportunities/bugs/improvements and create new bd tasks as they surface.\n\nEdge Cases:\n- Conflicting or missing markers\n- Large reference sets (cap and summarize)\n- Mixed bech32 + hex references\n\n## Files\n- docs/nostr-event-references.md (create: reference resolution spec)","status":"tombstone","priority":2,"issue_type":"task","created_at":"2025-12-20T10:30:55.597571-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","dependencies":[{"issue_id":"lightning-gsdn","depends_on_id":"lightning-00in","type":"parent-child","created_at":"2025-12-20T10:30:55.601745-08:00","created_by":"honk","metadata":"{}"},{"issue_id":"lightning-gsdn","depends_on_id":"lightning-qzcy","type":"blocks","created_at":"2025-12-20T10:34:06.867452-08:00","created_by":"honk","metadata":"{}"}],"deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"lightning-gwy3","title":"Configurable Telemetry Bar Log Limit","description":"Make the telemetry bar log limit configurable or persisted longer.\n\n## QA Evidence\n- `pnpm lint \\u0026\\u0026 pnpm typecheck` passed.\n- Log limit selector visible in TelemetryBar.\n- Selection persists across page reloads (localStorage).\n\n## Close Notes\n- Issues encountered: Accidantally removed mergeNodeState during refactor, restored it.\n- Setup improvements: None.","status":"tombstone","priority":3,"issue_type":"task","created_at":"2026-01-02T22:41:34.396673-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","close_reason":"Implemented","deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"lightning-gyio","title":"Embed: Share button widget + autoMount","description":"Add an embed share button widget for static sites with Nostr and fallback sharing.\n\nImplementation notes:\n- Add mountShareButton and autoMount data attribute (data-nostrstack-share).\n- Use NIP-07 signer if available to publish a kind 1 event to relays.\n- Fallback to navigator.share or clipboard copy.\n- Add basic error messaging and loading state.\n\nAcceptance criteria:\n- Share button publishes when NIP-07 signer and relays are available.\n- Fallback sharing works when NIP-07 is missing.\n- Button uses nostrstack token styling and is accessible.\n\nEdge cases:\n- No relays configured, clipboard denied, navigator.share unavailable.\n\n## Files\n- packages/embed/src/share.ts (create)\n- packages/embed/src/index.ts (modify: export + autoMount)\n- packages/embed/src/styles.ts (modify: share button styles)\n- packages/embed/src/index.test.ts (modify: add coverage)\n\n## QA Evidence\n- Playwright: pnpm --filter gallery exec playwright test tests/personal-site-kit.spec.ts (fails: No tests found; spec missing, tracked in lightning-j5lt and requires gallery view from lightning-wrhv)\n- Screenshots: pending (requires gallery view + Playwright spec; tracked in lightning-wrhv + lightning-j5lt)\n- DevTools MCP: pending (gallery view not yet available; tracked in lightning-wrhv)\n- Logs: tail -n 200 .logs/dev/api.log .logs/dev/gallery.log (wallet-ws fetch failed + telemetry block poll 503 warnings; follow-ups lightning-etjs + lightning-wglx)\n- CI: pnpm --filter embed test \u0026\u0026 pnpm lint\n\n## Close Notes\n- Issues encountered: Playwright spec missing (No tests found); DevTools MCP blocked by missing gallery view; oracle.sh failed (Claude model); logs showed wallet-ws fetch failed + telemetry 503 warnings (tracked in lightning-etjs + lightning-wglx).\n- Setup improvements: Add personal-site-kit gallery view + Playwright spec to capture DevTools/screenshot evidence.\n- Debug info that would have helped: Oracle CLI model availability details.","acceptance_criteria":"Embed share button publishes to Nostr or falls back","status":"tombstone","priority":2,"issue_type":"feature","assignee":"unassigned","estimated_minutes":180,"created_at":"2025-12-31T18:36:00.442681-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","close_reason":"Implemented","labels":["area:frontend","feature:personal-site-kit"],"dependencies":[{"issue_id":"lightning-gyio","depends_on_id":"lightning-39zu","type":"parent-child","created_at":"2025-12-31T18:36:00.446278-08:00","created_by":"honk"},{"issue_id":"lightning-gyio","depends_on_id":"lightning-od24","type":"blocks","created_at":"2025-12-31T18:40:38.78975-08:00","created_by":"honk"}],"deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"feature"}
{"id":"lightning-h0cb","title":"Deployment: Regtest zap flags rollout + defaults","description":"Add explicit rollout guidance so regtest pay stays disabled in prod and enabled only in local/regtest environments.\n\nAcceptance Criteria:\n- Deployment docs call out regtest pay flags and defaults (off in prod).\n- Staging/prod runbooks mention verifying flags are unset.\n- No changes to runtime behavior beyond documentation/config defaults.\n\n## Files\n- DEPLOY.md (modify: regtest zap flags + defaults)\n- docs/staging-lightning.md (modify: note regtest pay flags are dev-only)\n- docs/demo-modes.md (modify: regtest mode includes enable flags)","status":"tombstone","priority":2,"issue_type":"task","created_at":"2025-12-19T16:24:23.516173-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","dependencies":[{"issue_id":"lightning-h0cb","depends_on_id":"lightning-k7bf","type":"parent-child","created_at":"2025-12-19T16:24:23.520194-08:00","created_by":"honk","metadata":"{}"},{"issue_id":"lightning-h0cb","depends_on_id":"lightning-nkxv","type":"blocks","created_at":"2025-12-19T16:24:30.54517-08:00","created_by":"honk","metadata":"{}"}],"deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"lightning-h4h8","title":"Deployment: Search + NIP-05 telemetry","description":"Add observability for search resolution and NIP-05 proxy health.\n\n- Emit client telemetry events for search start/success/failure.\n- Expose simple metrics counters/timers for NIP-05 proxy hits, errors, cache hits.\n- Surface new events in the telemetry sidebar.\n\nAcceptance Criteria\n- Search events appear in TelemetryBar without console errors.\n- NIP-05 proxy metrics are logged/registered and increment correctly.\n\nEdge Cases\n- Telemetry disabled or API base missing; ensure graceful no-op.\n\nNote: Always be looking for refactoring opportunities, bug fixes, and improvements. Create new tasks as you encounter them.\n\n## Files\n- apps/gallery/src/SearchView.tsx (modify: emit search telemetry)\n- apps/gallery/src/TelemetryBar.tsx (modify: display search events)\n- packages/blog-kit/src/telemetry.ts (modify: new event types)\n- apps/api/src/routes/nostr-identity.ts (modify: emit metrics)\n- apps/api/src/telemetry/metrics.ts (modify: add counters)","status":"tombstone","priority":2,"issue_type":"task","created_at":"2025-12-25T23:07:33.510515-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","dependencies":[{"issue_id":"lightning-h4h8","depends_on_id":"lightning-yzz6","type":"parent-child","created_at":"2025-12-25T23:07:33.51206-08:00","created_by":"honk","metadata":"{}"},{"issue_id":"lightning-h4h8","depends_on_id":"lightning-7udg","type":"blocks","created_at":"2025-12-25T23:07:39.134024-08:00","created_by":"honk","metadata":"{}"}],"deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"lightning-h4t2","title":"design system v2: tokens, motion, theming","description":"Bring Markdowntown-style strategy here: CSS variable token stack (primitives→semantic roles), motion tokens, and theme application API so embed + demo can match any host site. Add crisp UI primitives + tasteful micro-interactions.","status":"tombstone","priority":1,"issue_type":"epic","created_at":"2025-12-13T15:00:10.307156-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"epic"}
{"id":"lightning-h4vc","title":"Gallery: redesign Lightning demo view","description":"The Lightning tab in the nostrstack demo gallery still reads like a debug page. Redesign layout, typography, spacing, and interaction so it feels like a polished product demo. Keep everything very realtime: invoice creation feels instant, payment confirmation updates immediately, and state changes are obvious.","acceptance_criteria":"Lightning tab feels polished (modern cards, clear hierarchy) and payment-related UI reacts instantly; no console errors and no failed local requests; pnpm qa:regtest-demo passes.","status":"tombstone","priority":2,"issue_type":"feature","created_at":"2025-12-14T12:41:23.050286-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","labels":["design","gallery","lightning","ui"],"deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"feature"}
{"id":"lightning-h59g","title":"Design/Infra: NWC config + storage","description":"Define configuration and persistence for NWC connection details.\n\nImplementation Steps:\n- Add config surface for NWC URI + relay list.\n- Store connection locally with opt-in persistence.\n\nAcceptance Criteria:\n- NWC config available in provider context.\n- Defaults disable NWC unless configured.\n\nEdge Cases:\n- Invalid URI fails validation.\n\n\n## Files\n- packages/blog-kit/src/context.tsx (modify: add NWC config fields)\n- apps/gallery/src/SettingsView.tsx (modify: config persistence hooks)","status":"tombstone","priority":2,"issue_type":"task","created_at":"2025-12-19T18:38:02.022653-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","dependencies":[{"issue_id":"lightning-h59g","depends_on_id":"lightning-9zj0","type":"parent-child","created_at":"2025-12-19T18:38:02.024236-08:00","created_by":"honk","metadata":"{}"}],"deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"lightning-h5g4","title":"Implement event renderer registry","description":"Create a renderer map for common kinds (0 profile, 1 note, 6 repost/quote, 7 reaction, 9734/9735 zaps, 30023 longform, 1063 files, etc.) so /nostr/:id can display rich previews + referenced events.","status":"tombstone","priority":2,"issue_type":"task","created_at":"2025-12-19T15:02:57.481535-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"lightning-hbd","title":"Redesign invoice modal with animated status","description":"Invoice modal layout cramped and status badge static. Redesign with better spacing (side-by-side QR/actions on wide screens), larger status pill that animates: blue pulsing while pending, transitions to green check on success, red X on timeout/error. Include inspiration from modern Lightning invoice UIs (search references) and ensure copy/open actions remain clear. Acceptance: responsive layout, animated status transitions, and fun, polished look. Final step: verify via Chrome DevTools MCP with screenshots in pending and paid states.","status":"tombstone","priority":2,"issue_type":"feature","created_at":"2025-12-02T17:52:53.583738-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","labels":["demo","lightning","ui"],"deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"feature"}
{"id":"lightning-hbwi","title":"Core: Wire API base + regtest config into ZapButton","description":"Use a configurable API base + regtest enable flag to drive zap invoice payment and status behavior.\n\nAcceptance Criteria:\n- ZapButton can derive API base from props or context and falls back safely.\n- Regtest pay action is only shown when enabled (env flag/prop).\n- Errors surface in UI state without breaking layout.\n\n## Files\n- packages/blog-kit/src/zap-button.tsx (modify: accept apiBase/enableRegtestPay; wire into flow)\n- packages/blog-kit/src/context.tsx (modify: extend config with apiBase/enableRegtestPay, if used)\n- apps/gallery/src/FeedView.tsx (modify: pass apiBase + enableRegtestPay from env)\n- apps/gallery/src/App.tsx (modify: provide config if wrapping provider is chosen)\n- apps/gallery/.env.example (modify: add VITE_ENABLE_REGTEST_PAY)","status":"tombstone","priority":2,"issue_type":"task","created_at":"2025-12-19T16:19:12.411741-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","dependencies":[{"issue_id":"lightning-hbwi","depends_on_id":"lightning-k7bf","type":"parent-child","created_at":"2025-12-19T16:19:12.414341-08:00","created_by":"honk","metadata":"{}"},{"issue_id":"lightning-hbwi","depends_on_id":"lightning-nkxv","type":"blocks","created_at":"2025-12-19T16:20:16.397032-08:00","created_by":"honk","metadata":"{}"},{"issue_id":"lightning-hbwi","depends_on_id":"lightning-q1js","type":"blocks","created_at":"2025-12-19T16:20:21.204555-08:00","created_by":"honk","metadata":"{}"}],"deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"lightning-hh7n","title":"DevTools MCP: avoid localhost cert error","description":"When launching Chrome via scripts/mcp-chrome.sh, navigating to https://localhost:* hits ERR_CERT_AUTHORITY_INVALID for the self-signed dev cert. Add a safe opt-in flag (e.g. MCP_CHROME_IGNORE_CERT_ERRORS=1) to pass --ignore-certificate-errors so MCP checks don't start with failed requests.","acceptance_criteria":"- Following AGENTS UI-check flow can open https://localhost:4173 without cert interstitial","status":"tombstone","priority":3,"issue_type":"chore","created_at":"2025-12-16T15:40:36.499493-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"chore"}
{"id":"lightning-hi42","title":"Test/Deploy: LNURL-auth flow","description":"Add tests and rollout guard for LNURL-auth.\n\nImplementation Steps:\n- Add API tests for request/callback/status.\n- Add UI test for LNURL-auth modal render.\n- Wire feature flag gating to disable in prod by default.\n\nAcceptance Criteria:\n- Tests cover happy path and invalid signature.\n- Feature is disabled unless explicitly enabled.\n\nEdge Cases:\n- Missing env flag disables UI affordance.\n\n\n## Files\n- apps/api/src/routes/lnurl-auth.test.ts (create: API tests)\n- apps/gallery/tests/login-lnurl.spec.ts (create: UI test)\n- apps/gallery/src/LoginView.tsx (modify: feature flag gating)","status":"tombstone","priority":2,"issue_type":"task","created_at":"2025-12-19T18:37:57.990158-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","dependencies":[{"issue_id":"lightning-hi42","depends_on_id":"lightning-j0ns","type":"parent-child","created_at":"2025-12-19T18:37:57.991809-08:00","created_by":"honk","metadata":"{}"},{"issue_id":"lightning-hi42","depends_on_id":"lightning-bi0t","type":"blocks","created_at":"2025-12-19T18:49:07.624835-08:00","created_by":"honk","metadata":"{}"}],"deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"lightning-hir","title":"Fix NpubBar UI: show key, move toggle inside, better copy icon","description":"NpubBar currently shows blank key and toggle sits outside the input; copy icon too small. Redesign: ensure key renders (npub/hex), place format toggle inside the bar near copy button, use clearer copy icon size ~18px, maintain responsive truncation.","status":"tombstone","priority":1,"issue_type":"bug","created_at":"2025-12-03T09:26:15.162968-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"bug"}
{"id":"lightning-hkj5","title":"Pay-to-unlock status doesn't update without reload","description":"On the Pay to unlock screen (invoice + 'I've paid' confirm), the UI stays stale after payment confirmation and only reflects unlocked status after manually reloading the page.","acceptance_criteria":"After payment confirmation, the page updates to Unlocked (badge + content) without a full reload; no console errors; network requests succeed.","status":"tombstone","priority":2,"issue_type":"bug","created_at":"2025-12-14T11:02:57.079766-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","labels":["bug","payments","realtime"],"deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"bug"}
{"id":"lightning-hkj7","title":"Chore: Lint cleanup for zap flow files","description":"Resolve lint warnings encountered during zap UI work (import order, explicit any) so repo lint passes cleanly.\\n\\nAcceptance Criteria:\\n- Lint passes with no warnings in touched zap-related files.\\n- Import ordering follows simple-import-sort.\\n- Remove explicit any types in gallery notifications.\\n\\n## Files\\n- apps/api/src/routes/lnurlp-callback.ts (modify: sort imports)\\n- packages/blog-kit/src/zap-button.tsx (modify: sort imports)\\n- apps/gallery/src/App.tsx (modify: sort imports)\\n- apps/gallery/src/NostrEventView.tsx (modify: sort imports)\\n- apps/gallery/src/Sidebar.tsx (modify: sort imports)\\n- apps/gallery/src/NotificationsView.tsx (modify: replace any with Event type)","status":"tombstone","priority":2,"issue_type":"task","created_at":"2025-12-19T17:51:54.952689-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","dependencies":[{"issue_id":"lightning-hkj7","depends_on_id":"lightning-m8y7","type":"parent-child","created_at":"2025-12-19T17:51:54.956151-08:00","created_by":"honk","metadata":"{}"}],"deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"lightning-hmk5","title":"gallery: RelayCard pills use Badge","description":"Replace RelayCard's custom inline Pill component (NIP/security chips) with the shared ui/Badge primitive and remove the local Pill implementation.","acceptance_criteria":"RelayCard renders NIP/security chips with Badge; gallery lint/test/typecheck pass; qa:regtest-demo passes.","status":"tombstone","priority":4,"issue_type":"task","created_at":"2025-12-14T01:53:17.878563-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"lightning-hpk1","title":"Test: API resolver unit tests","description":"Add unit coverage for the Nostr event resolver helpers.\n\nAcceptance Criteria:\n- Tests cover ID decoding, relay selection, and reference extraction.\n- Tests cover profile parsing and missing data behavior.\n- Include fixtures for hex + bech32 identifiers.\n- Include the standing note: while working, look for refactoring opportunities/bugs/improvements and create new bd tasks as they surface.\n\nEdge Cases:\n- Invalid IDs\n- Empty relays list\n- Invalid profile JSON\n\n## Files\n- apps/api/src/nostr/event-resolver.test.ts (create: resolver unit tests)\n- apps/api/src/nostr/nostr-utils.test.ts (create: decode helper tests)","status":"tombstone","priority":2,"issue_type":"task","created_at":"2025-12-20T10:32:18.889033-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","dependencies":[{"issue_id":"lightning-hpk1","depends_on_id":"lightning-00in","type":"parent-child","created_at":"2025-12-20T10:32:18.891355-08:00","created_by":"honk","metadata":"{}"},{"issue_id":"lightning-hpk1","depends_on_id":"lightning-kgar","type":"blocks","created_at":"2025-12-20T10:34:13.577728-08:00","created_by":"honk","metadata":"{}"}],"deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"lightning-hpu","title":"Mainnet cutover for lightning","description":"Switch LNbits prod from mutinynet to mainnet LND; update API/keys, smoke test, observability.","notes":"Awaiting mainnet LND endpoint/cert/macaroon + admin key to execute cutover; prod smoke script added (test:lnbits-prod).","status":"blocked","priority":1,"issue_type":"epic","created_at":"2025-11-30T02:10:08.795817-08:00","updated_at":"2025-12-01T03:08:30.357833-08:00"}
{"id":"lightning-hpu.1","title":"Swap LNbits prod to mainnet LND","description":"Update KV with mainnet LND endpoint/macaroon/tls, set LND_NETWORK=mainnet, redeploy with new REV, verify /status/health","notes":"Prepared helper script scripts/lnbits-cutover-mainnet.sh to flip ACA env to mainnet once secrets are filled. Still blocked on mainnet LND creds.","status":"blocked","priority":1,"issue_type":"task","created_at":"2025-11-30T02:10:24.056557-08:00","updated_at":"2025-11-30T02:14:58.327068-08:00","dependencies":[{"issue_id":"lightning-hpu.1","depends_on_id":"lightning-hpu","type":"parent-child","created_at":"2025-11-30T02:10:24.057487-08:00","created_by":"honk","metadata":"{}"}]}
{"id":"lightning-hpu.2","title":"Mainnet invoice/pay smoke","description":"After cutover, create+pay mainnet invoice via API (admin key), verify status settles.","notes":"Regtest playwright e2e passing locally. Mutinynet staging LNbits reset; new admin key 79572e... in KV, invoice smoke 100 sats success. Prod mutinynet invoice smoke also success.","status":"blocked","priority":1,"issue_type":"task","created_at":"2025-11-30T02:10:45.782184-08:00","updated_at":"2025-11-30T12:05:22.453939-08:00","dependencies":[{"issue_id":"lightning-hpu.2","depends_on_id":"lightning-hpu","type":"parent-child","created_at":"2025-11-30T02:10:45.783189-08:00","created_by":"honk","metadata":"{}"}]}
{"id":"lightning-hpu.3","title":"Point API + gallery to prod LNbits","description":"Set API env (satoshis-api-*) to prod LNbits URL/key via Key Vault; ensure gallery/demo use prod LNbits in mainnet mode.","notes":"No prod API container exists yet; need target service before wiring prod LNbits URL/key.","status":"blocked","priority":2,"issue_type":"task","created_at":"2025-11-30T02:11:09.326676-08:00","updated_at":"2025-11-30T02:12:23.403284-08:00","dependencies":[{"issue_id":"lightning-hpu.3","depends_on_id":"lightning-hpu","type":"parent-child","created_at":"2025-11-30T02:11:09.327792-08:00","created_by":"honk","metadata":"{}"}]}
{"id":"lightning-hpu.4","title":"Lightning prod dashboards/alerts","description":"Add LA workbooks/alerts for LNbits prod (health latency, error logs, LND status), wire to email/webhook.","notes":"Added docs/lightning-observability.md with KQL queries and alert suggestions; diagnostics already enabled to workspace.","status":"tombstone","priority":2,"issue_type":"task","created_at":"2025-11-30T02:11:24.827572-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","dependencies":[{"issue_id":"lightning-hpu.4","depends_on_id":"lightning-hpu","type":"parent-child","created_at":"2025-11-30T02:11:24.829086-08:00","created_by":"honk","metadata":"{}"}],"deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"lightning-hpu.5","title":"Make LNbits prod deploy network-safe for mainnet cutover","description":"Bicep currently hardcodes LND_NETWORK=mainnet (image tag too), so a redeploy could flip prod from signet to mainnet before secrets are ready. Add network/tag parameters with safe defaults, plus a cutover/preflight helper so we can intentionally toggle to mainnet once creds are in KV and verify after update.","status":"tombstone","priority":1,"issue_type":"task","created_at":"2025-12-01T19:50:39.769924-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","dependencies":[{"issue_id":"lightning-hpu.5","depends_on_id":"lightning-hpu","type":"parent-child","created_at":"2025-12-01T19:50:39.77104-08:00","created_by":"honk","metadata":"{}"}],"deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"lightning-hvqy","title":"Fix: Gallery post content rendering (markdown + links)","description":"Gallery feed currently renders raw text. Improve this by adding markdown support, linkification, and better newline handling.\n\nAcceptance Criteria:\n- Markdown (bold, italic) works in posts.\n- URLs are clickable.\n- Newlines are preserved.\n\nFiles:\n- apps/gallery/src/FeedView.tsx (modify PostItem)\n\n## QA Evidence\n- `pnpm --filter gallery e2e tests/markdown.spec.ts` passed.\n\n## Close Notes\n- Issues encountered: Task appeared to be already implemented and committed in main.\n- Setup improvements: None.","status":"tombstone","priority":2,"issue_type":"task","created_at":"2026-01-02T15:43:09.559908-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","close_reason":"Implemented","deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"lightning-hyj","title":"Demo wallet panel shows balance after Add funds","description":"Expose a visible wallet balance in the gallery demo. Accept: (1) Wallet panel fetches current LNbits balance using configured URL/key, auto-refresh after Add funds; (2) handles loading/error states; (3) shows sat balance and last updated; (4) Add funds helper reflects success; (5) works when env vars missing (shows guidance).","status":"tombstone","priority":1,"issue_type":"feature","created_at":"2025-12-02T21:26:09.30791-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"feature"}
{"id":"lightning-hyup","title":"gallery: finish token migration (remove remaining hex)","description":"Replace remaining hardcoded hex colors in the gallery UI with nostrstack v2 tokens/vars, leaning on existing .nostrstack-* primitives for consistent UX (buttons, pills, cards). Targets: NpubBar, KeyToggle, Nip07Status, NostrProfileCard, WalletBalance, WalletPanel, MockComments.","acceptance_criteria":"- No raw hex colors remain under apps/gallery/src\\n- qa:regtest-demo passes\\n- No console errors","status":"tombstone","priority":2,"issue_type":"task","created_at":"2025-12-13T16:31:34.829657-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"lightning-i1uj","title":"Test: API /nostr/event integration","description":"Add integration tests for the public event API route.\n\nAcceptance Criteria:\n- Tests verify 200 for valid event ids and 404/400 for invalid inputs.\n- Tests cover cache hit/miss behavior with mocked resolver/cache.\n- Ensure error payloads are stable and documented.\n- Include the standing note: while working, look for refactoring opportunities/bugs/improvements and create new bd tasks as they surface.\n\nEdge Cases:\n- Unsupported prefixes\n- Relay override blocked by validation\n\n## Files\n- apps/api/src/routes/nostr-event.test.ts (create: route tests)","status":"tombstone","priority":2,"issue_type":"task","created_at":"2025-12-20T10:32:25.850376-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","dependencies":[{"issue_id":"lightning-i1uj","depends_on_id":"lightning-00in","type":"parent-child","created_at":"2025-12-20T10:32:25.852709-08:00","created_by":"honk","metadata":"{}"},{"issue_id":"lightning-i1uj","depends_on_id":"lightning-2y3t","type":"blocks","created_at":"2025-12-20T10:34:13.948354-08:00","created_by":"honk","metadata":"{}"}],"deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"lightning-i31","title":"NpubBar toggle confusing and always hex; truncation unnecessary","description":"NpubBar UI shows hex even when npub selected, toggle state unclear, copy icon tiny, and key truncates when space available. Redesign: clear toggle (two-state pill), render chosen format correctly, adaptive truncation only when needed, larger copy icon.","status":"tombstone","priority":1,"issue_type":"bug","created_at":"2025-12-03T09:43:59.615456-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"bug"}
{"id":"lightning-i3o8","title":"verification: full pnpm check + regtest smoke","description":"Run full workspace checks and smoke test the regtest demo flows to ensure everything is still green.","acceptance_criteria":"pnpm check passes; pnpm smoke:regtest-demo passes; qa:regtest-demo passes.","status":"tombstone","priority":3,"issue_type":"task","created_at":"2025-12-14T01:40:54.865748-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"lightning-i7dq","title":"Maintenance: follow up remaining bd warnings","description":"Investigate and resolve remaining bd doctor warnings after maintenance.\n\nAcceptance criteria:\n- Decide on CLI upgrade path (upgrade or document deferral).\n- Review child→parent dependency warnings; remove or explicitly accept with rationale.\n- Reconcile duplicates warning vs `bd duplicates` output and fix any true duplicates.\n- Address stale closed issues/molecules warnings or document policy to keep them.\n\nEdge cases:\n- Avoid destructive changes to historical issues without team sign-off.\n\n## Files\n- .beads/issues.jsonl (modify: dependency or issue cleanup)\n\n## QA Evidence\n- `npx bd --no-daemon doctor --json`\n- `npx bd --no-daemon duplicates --json`\n- `npx bd --no-daemon sync --json`\n","status":"closed","priority":3,"issue_type":"task","created_at":"2026-01-04T13:50:53.601367-08:00","updated_at":"2026-01-04T15:36:13.494447-08:00","closed_at":"2026-01-04T15:36:13.494447-08:00","close_reason":"Implemented"}
{"id":"lightning-ib4","title":"Live log viewer for demo site","description":"Epic to add live log visibility to the nostrstack demo: backend stream via API and gallery UI tab showing backend + frontend logs in real time.","acceptance_criteria":"Epic complete when backend log stream endpoint exists and gallery demo logs view shows backend and frontend logs with filters/status.","status":"tombstone","priority":1,"issue_type":"epic","created_at":"2025-12-02T14:05:47.145654-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","labels":["demo","logging"],"deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"epic"}
{"id":"lightning-ib4.1","title":"Backend log streaming endpoint for demo","description":"Implement a log-stream API for the demo backend.\\n\\nImplementation sketch:\\n- Add lightweight log fan-out service in the API (SSE preferred; fallback WebSocket) that tails the running process logs (stdout) and pushes lines as newline-delimited JSON {ts, level, msg, source}.\\n- If stdout tailing isn\"t feasible, add a small in-memory buffer where the server writes logs and the stream reads them.\\n- Support optional level filter and source filter via query params.\\n- Rate-limit to protect server (e.g., drop/skip on \u003e200 msgs/sec).\\n- Add health endpoint/metric for stream subscribers.\\n- Wire into docker-compose/regtest and mock to ensure available locally.\\n- Tests: unit for formatter; integration happy-path stream yields messages; resilience when no logs incoming.","acceptance_criteria":"SSE or WebSocket endpoint streams backend logs in near real time (max 1s latency).\\nSupports log level filter (info/warn/error) via query or message.\\nUses existing demo auth model or read-only public token documented; safe against log injection (JSON framing, escaping).\\nWorks in mock/dev stack and regtest deploys.\\nDocument how to enable/pipe backend logs into the stream (stdout or file tail).\\nBasic load test: can stream continuously for 5 minutes without disconnects.","status":"tombstone","priority":1,"issue_type":"task","created_at":"2025-12-02T14:05:57.657932-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","labels":["backend","demo","logging"],"dependencies":[{"issue_id":"lightning-ib4.1","depends_on_id":"lightning-ib4","type":"parent-child","created_at":"2025-12-02T14:05:57.659277-08:00","created_by":"honk","metadata":"{}"}],"deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"lightning-ib4.2","title":"Demo UI log viewer with backend + frontend streams","description":"Implementation sketch:\\n- Add \"Logs\" tab or right-side drawer in gallery demo with two columns: Backend stream and Frontend console.\\n- Backend: connect to new SSE/WS endpoint; show status chip; allow level filter and search; auto-trim buffer (e.g., 500 lines).\\n- Frontend: wrap console.* to broadcast events to in-page viewer; include timestamp, level, message, stack (if available). Keep capture opt-in toggle to avoid noisy sessions.\\n- Shared UI components for log lines (monospace, color by level).\\n- Provide config for endpoint URL (env + UI input) and buffer size.\\n- Add tests: component render, stream mock, console capture mock, responsive layout.\\n- Docs: short README section on using the logs tab in mock/regtest.","acceptance_criteria":"New UI tab/pane shows backend log stream in real time with autoscroll, pause, clear, level filter.\\nSecond panel shows frontend console logs captured via window console override, sent to viewer (local-only, no backend dependency).\\nWhen backend stream unavailable, UI surfaces reconnect + status.\\nSupports dark/light themes and works on mobile widths.\\nNo logs persisted after page refresh unless user opts in; front-end log capture respects same.\\nTests: unit for log viewer components; e2e happy path in mock mode renders messages for both streams.","status":"tombstone","priority":1,"issue_type":"task","created_at":"2025-12-02T14:06:25.090889-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","labels":["demo","frontend","logging"],"dependencies":[{"issue_id":"lightning-ib4.2","depends_on_id":"lightning-ib4","type":"parent-child","created_at":"2025-12-02T14:06:25.091776-08:00","created_by":"honk","metadata":"{}"}],"deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"lightning-ibc","title":"Compact key chip (1-line npub/hex toggle + copy)","description":"Design single-line key chip component (npub\u003c-\u003ehex toggle, copy, middle truncation) and replace existing key displays in profile/logged-in cards.","status":"tombstone","priority":1,"issue_type":"task","created_at":"2025-12-02T12:46:03.244563-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"lightning-ict","title":"LNbits wallet 404: balance endpoint returns 404","description":"Console shows repeated 404 for GET http://localhost:15001/api/v1/wallet (see codex-clipboard-uPlL1s.png, WalletBalance.tsx:35). Need clearer inline guidance, auto-detect LNbits base URL, validate admin/read key, and support wallet ID fallback if /wallet without ?usr fails.","status":"tombstone","priority":1,"issue_type":"bug","created_at":"2025-12-03T08:51:30.989373-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"bug"}
{"id":"lightning-ih4v","title":"Chore: dev-logs respect DEV_SERVER_PORT","description":"Update dev-logs script to honor DEV_SERVER_PORT when launching the gallery dev server, so alternate port runs are deterministic.\n\nAcceptance Criteria\n- dev-logs uses DEV_SERVER_PORT when invoking gallery dev (instead of hard-coded 4173).\n- Running with DEV_SERVER_PORT=XXXX starts Vite on that port without auto-bumping.\n\nNote: Always be looking for refactoring opportunities, bug fixes, and improvements. Create new tasks as you encounter them.\n\n## Files\n- scripts/dev-logs.sh (modify: use DEV_SERVER_PORT variable in gallery dev command)","status":"tombstone","priority":3,"issue_type":"task","created_at":"2025-12-26T00:00:42.76572-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"lightning-ikdx","title":"Test/Deploy: BOLT12 offer flows","description":"Add API + UI coverage for BOLT12 offers and subscriptions.\n\nImplementation Steps:\n- Add API tests for offer creation + invoice fetch.\n- Add Playwright UI test for offers view.\n- Update regtest demo smoke script to include BOLT12 flag path.\n\nAcceptance Criteria:\n- Tests cover offer create + invoice retrieval.\n- QA passes with BOLT12 enabled/disabled.\n\nEdge Cases:\n- Provider unavailable returns graceful error.\n\n## Files\n- apps/api/tests/bolt12.spec.ts (create: API tests)\n- apps/gallery/tests/bolt12.spec.ts (create: UI test)\n- apps/api/scripts/regtest-demo-smoke.ts (modify: BOLT12 smoke path)\n- apps/gallery/scripts/qa-regtest-demo.ts (modify: BOLT12 QA path)","status":"tombstone","priority":2,"issue_type":"task","created_at":"2025-12-19T18:47:27.393203-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","dependencies":[{"issue_id":"lightning-ikdx","depends_on_id":"lightning-8i8k","type":"parent-child","created_at":"2025-12-19T18:47:27.394442-08:00","created_by":"honk","metadata":"{}"},{"issue_id":"lightning-ikdx","depends_on_id":"lightning-tikt","type":"blocks","created_at":"2025-12-19T18:49:12.86692-08:00","created_by":"honk","metadata":"{}"},{"issue_id":"lightning-ikdx","depends_on_id":"lightning-4qmg","type":"blocks","created_at":"2025-12-19T18:49:15.453668-08:00","created_by":"honk","metadata":"{}"}],"deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"lightning-ipct","title":"gallery: UX polish (page shell + focused tabs + advanced collapse)","description":"Implement a design pass on the gallery demo: (1) make Lightning/Nostr/Logs tabs render focused content (no unrelated stacks), (2) introduce a sticky page shell header with a compact environment/status bar, (3) move noisy debug/config controls into collapsible Advanced sections (LNbits overrides, telemetry WS override, status/build).","acceptance_criteria":"- Each tab shows only its relevant content\\n- No regressions in regtest demo flows\\n- qa:regtest-demo passes","status":"tombstone","priority":2,"issue_type":"task","created_at":"2025-12-13T18:50:41.515789-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"lightning-ipdo","title":"ZapButton: set pending-invoice state before invoice request","description":"Zap modal never transitions to the pending-invoice state; add explicit state updates so users see invoice request status.\n\nAcceptance Criteria:\n- pending-invoice state is set before LNURL callback invoice fetch.\n- Status text changes from resolving to requesting invoice.\n- No regression in zap flow.\n\n## Files\n- packages/blog-kit/src/zap-button.tsx (modify: set pending-invoice state)\n- apps/gallery/tests/social-flow.spec.ts (modify: assert pending-invoice state if feasible)","status":"tombstone","priority":2,"issue_type":"task","created_at":"2025-12-19T16:38:28.942242-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"lightning-iumi","title":"Spike: nostrdb sidecar evaluation + ADR","description":"Re-evaluate nostrdb as a potential cache/index via sidecar service and capture the decision.\n\nAcceptance Criteria:\n- Update evaluation doc with latest nostrdb capabilities, risks, and integration paths.\n- Produce an ADR stating whether to adopt nostrdb now, later, or not at all.\n- Identify interface boundary if a sidecar is recommended.\n- Include the standing note: while working, look for refactoring opportunities/bugs/improvements and create new bd tasks as they surface.\n\nEdge Cases:\n- Unstable API surface or missing relay-like query support\n\n## Files\n- docs/nostrdb-evaluation.md (modify: refresh evaluation)\n- docs/adr/000x-nostrdb-sidecar.md (create: decision record)","status":"tombstone","priority":3,"issue_type":"task","created_at":"2025-12-20T10:33:02.682712-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","dependencies":[{"issue_id":"lightning-iumi","depends_on_id":"lightning-00in","type":"parent-child","created_at":"2025-12-20T10:33:02.685259-08:00","created_by":"honk","metadata":"{}"},{"issue_id":"lightning-iumi","depends_on_id":"lightning-qzcy","type":"blocks","created_at":"2025-12-20T10:34:22.474595-08:00","created_by":"honk","metadata":"{}"}],"deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"lightning-ivyt","title":"Deploy Gallery to Azure Container Apps","status":"tombstone","priority":0,"issue_type":"task","created_at":"2025-12-17T11:56:25.489471-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","labels":["ops"],"deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"lightning-j0ns","title":"Epic: LNURL-auth login","description":"Complete lnurl-auth login feature.\n\n## Objective\nDeliver the end-to-end capability with backend, frontend, security, and tests.\n\n## Success Criteria\n- [ ] Feature can be used end-to-end in the gallery.\n- [ ] API endpoints are guarded and validated.\n- [ ] Tests cover primary flows and guard rails.\n\n## Out of Scope\n- Accessibility updates.\n- Documentation updates.\n","status":"tombstone","priority":2,"issue_type":"epic","created_at":"2025-12-19T18:37:54.793053-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","dependencies":[{"issue_id":"lightning-j0ns","depends_on_id":"lightning-61qz","type":"parent-child","created_at":"2025-12-19T18:37:54.794507-08:00","created_by":"honk","metadata":"{}"}],"deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"epic"}
{"id":"lightning-j22","title":"Fix telemetry WebSocket URL in dev preview","description":"TelemetryCard uses wss://localhost:4173/ws/telemetry which fails; adjust resolveTelemetryWs to fall back to api host/3001 in dev and handle http vs https.","notes":"resolveTelemetryWs now treats dev preview (port 4173) as API port 3001 fallback, avoiding wss://localhost:4173 failures; linted.","status":"tombstone","priority":2,"issue_type":"bug","created_at":"2025-12-03T11:04:45.910065-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","labels":["frontend"],"deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"bug"}
{"id":"lightning-j5lt","title":"Test: Personal Site Kit UI (Playwright + screenshots)","description":"Add Playwright coverage for the Personal Site Kit demo view and capture screenshots.\n\nImplementation notes:\n- Create a Playwright spec that exercises blockchain stats, profile widget, share button, tip feed realtime, and comment pagination.\n- Capture screenshots for each widget in docs/screenshots/personal-site-kit/.\n- Run DevTools MCP checks (console/network clean) during QA pass.\n\nAcceptance criteria:\n- Playwright spec passes in chromium.\n- Screenshots saved to documented paths.\n- DevTools + logs show no errors or warnings.\n\nEdge cases:\n- Widgets in mock mode when API unavailable.\n\n## Files\n- apps/gallery/tests/personal-site-kit.spec.ts (create)\n- docs/screenshots/personal-site-kit/blockchain-stats.png (create)\n- docs/screenshots/personal-site-kit/nostr-profile.png (create)\n- docs/screenshots/personal-site-kit/share-button.png (create)\n- docs/screenshots/personal-site-kit/tip-feed-realtime.png (create)\n- docs/screenshots/personal-site-kit/comments-pagination.png (create)\n- docs/screenshots/personal-site-kit/support-section.png (create)\n- docs/screenshots/personal-site-kit/personal-site-kit-view.png (create)\n\n## QA Evidence\n- Playwright: pnpm --filter gallery exec playwright test tests/personal-site-kit.spec.ts\n- Screenshots: docs/screenshots/personal-site-kit/*.png\n- DevTools MCP: console/network checked, no errors or warnings\n- Logs: tail -f .logs/dev/api.log .logs/dev/gallery.log (no errors)\n- CI: pnpm --filter gallery test \u0026\u0026 pnpm lint\n\n## Close Notes (fill in at closure)\n- Issues encountered:\n- Setup improvements:\n- Debug info that would have helped:","acceptance_criteria":"Playwright spec covers new widgets with screenshots","status":"tombstone","priority":2,"issue_type":"task","assignee":"unassigned","estimated_minutes":240,"created_at":"2025-12-31T18:38:02.969638-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","close_reason":"Expanded Playwright spec to cover all widgets and captured individual screenshots.","labels":["area:frontend","area:qa","feature:personal-site-kit"],"dependencies":[{"issue_id":"lightning-j5lt","depends_on_id":"lightning-39zu","type":"parent-child","created_at":"2025-12-31T18:38:02.97216-08:00","created_by":"honk"},{"issue_id":"lightning-j5lt","depends_on_id":"lightning-wrhv","type":"blocks","created_at":"2025-12-31T18:42:51.841814-08:00","created_by":"honk"}],"deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"lightning-j6f4","title":"Design system v2: UX polish + theming adoption","description":"Bring crisp, token-driven UI + motion across gallery + blog-kit; ensure easy theming via --nostrstack-* vars.","acceptance_criteria":"At least 5 UX/design improvements shipped; QA (pnpm qa:regtest-demo) passes; docs explain theming + adoption.","status":"tombstone","priority":2,"issue_type":"epic","created_at":"2025-12-14T00:42:16.075468-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"epic"}
{"id":"lightning-j6f4.1","title":"gallery: introduce UI primitives (Card/Badge/Input)","description":"Create small component primitives in apps/gallery for consistent spacing, borders, focus rings, and subtle motion; refactor a couple of panels to use them.","acceptance_criteria":"Gallery uses shared primitives in at least 2 panels; no visual regressions; qa:regtest-demo passes.","status":"tombstone","priority":2,"issue_type":"task","created_at":"2025-12-14T00:42:40.994462-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","dependencies":[{"issue_id":"lightning-j6f4.1","depends_on_id":"lightning-j6f4","type":"parent-child","created_at":"2025-12-14T00:42:40.995338-08:00","created_by":"honk","metadata":"{}"}],"deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"lightning-j6f4.2","title":"gallery: tabs UX (a11y + motion)","description":"Upgrade tab switcher to use proper aria roles, keyboard navigation, and smoother transitions; ensure reduced-motion behavior.","acceptance_criteria":"Tabs are keyboard navigable; no console errors; qa:regtest-demo passes.","status":"tombstone","priority":2,"issue_type":"task","created_at":"2025-12-14T00:42:53.660626-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","dependencies":[{"issue_id":"lightning-j6f4.2","depends_on_id":"lightning-j6f4","type":"parent-child","created_at":"2025-12-14T00:42:53.661356-08:00","created_by":"honk","metadata":"{}"}],"deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"lightning-j6f4.3","title":"gallery: invoice dialog polish","description":"Improve invoice modal layout (QR + status), add crisp spacing, and micro-interactions (copy/open wallet).","acceptance_criteria":"Invoice dialog feels polished; no console errors; qa:regtest-demo passes.","status":"tombstone","priority":2,"issue_type":"task","created_at":"2025-12-14T00:43:05.313752-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","dependencies":[{"issue_id":"lightning-j6f4.3","depends_on_id":"lightning-j6f4","type":"parent-child","created_at":"2025-12-14T00:43:05.31471-08:00","created_by":"honk","metadata":"{}"}],"deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"lightning-j6f4.4","title":"blog-kit: ShareButton v2 (tokens + motion)","description":"Replace inline styling with nostrstack token-based classes, add subtle state animations, and ensure it works without extra CSS imports.","acceptance_criteria":"ShareButton matches embed styling; reduced motion respected; blog-kit tests pass.","status":"tombstone","priority":2,"issue_type":"task","created_at":"2025-12-14T00:43:16.862635-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","dependencies":[{"issue_id":"lightning-j6f4.4","depends_on_id":"lightning-j6f4","type":"parent-child","created_at":"2025-12-14T00:43:16.863563-08:00","created_by":"honk","metadata":"{}"}],"deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"lightning-j6f4.5","title":"blog-kit: theming ergonomics (brand presets)","description":"Expose brand preset + theme mode options and document how to theme via CSS vars for easy adoption across host sites.","acceptance_criteria":"Brand preset usable via provider props; docs added; blog-kit typecheck/tests pass.","status":"tombstone","priority":2,"issue_type":"task","created_at":"2025-12-14T00:43:28.823646-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","dependencies":[{"issue_id":"lightning-j6f4.5","depends_on_id":"lightning-j6f4","type":"parent-child","created_at":"2025-12-14T00:43:28.824881-08:00","created_by":"honk","metadata":"{}"}],"deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"lightning-j6f4.6","title":"gallery: migrate inline chips/callouts to primitives","description":"Replace repeated inline badge/callout styles across gallery components (NostrProfileCard, Nip07Status, TelemetryCard, RelayCard) with ui/Badge + ui/Callout for consistency.","acceptance_criteria":"At least 3 components use primitives; qa:regtest-demo passes.","status":"tombstone","priority":3,"issue_type":"task","created_at":"2025-12-14T00:52:38.585988-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","dependencies":[{"issue_id":"lightning-j6f4.6","depends_on_id":"lightning-j6f4","type":"parent-child","created_at":"2025-12-14T00:52:38.587011-08:00","created_by":"honk","metadata":"{}"}],"deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"lightning-j6t","title":"Profile details panel","description":"Add section showing full nostr metadata (about, website, banner, display_name, lud06/lnurl, nip05, etc.) for logged-in user.","status":"tombstone","priority":2,"issue_type":"task","created_at":"2025-12-02T12:46:20.178111-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"lightning-j7i","title":"Gallery typecheck fails on nostr window typings","description":"tsc --noEmit fails due to missing window.nostr.getRelays typing, EventTemplate vs NostrEvent, and nip19 expects Uint8Array. Add ambient types or narrow casts so gallery typecheck passes.","status":"tombstone","priority":2,"issue_type":"chore","created_at":"2025-12-02T21:11:58.068657-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"chore"}
{"id":"lightning-j7i2","title":"Support mixed-case nsec/npub input in login","status":"tombstone","priority":0,"issue_type":"bug","created_at":"2025-12-17T12:30:33.669721-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","labels":["ui","ux"],"deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"bug"}
{"id":"lightning-jeeg","title":"Epic: User Relay Management (NIP-65)","description":"Implement NIP-65 Relay List Metadata support to allow users to bring their own relays.\n\n## Objective\nReplace hardcoded relay lists with a user-managed dynamic list (Kind 10002).\n\n## Success Criteria\n- [ ] Users can add/remove relays in RelaysView.\n- [ ] Changes are saved to Nostr (Kind 10002) and persisted.\n- [ ] Feed, Profile, Search, and Notifications use the user's preferred relays.\n- [ ] App bootstraps using default relays if no user list is found.\n\n## QA Evidence Requirements\n- Playwright tests for adding/removing relays.\n- Screenshots of the new RelaysView editor.\n- DevTools verification of Kind 10002 fetch/publish.\n- Green CI.\n\n## Risks/Assumptions\n- Bootstrap paradox: We assume default relays are sufficient to find the user's Kind 10002.\n- Privacy: Publishing relay list is public data (standard Nostr behavior).\n- We assume 'latest wins' for conflict resolution on relay lists.\n\n## Out of Scope\n- Advanced NIP-65 'read'/'write' marker granular control (UI can just be simple add/remove for now, defaulting to r/w).\n- Relay sets/groups.","status":"tombstone","priority":2,"issue_type":"epic","created_at":"2026-01-03T14:23:37.602466-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","close_reason":"Implemented all tasks","deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"epic"}
{"id":"lightning-jfr","title":"Telemetry WS fails against localhost:3001","description":"Make TelemetryCard choose ws:// for local dev, auto-fallback from wss, and surface clear guidance when /ws/telemetry backend not running. Ensure dev script starts API and telemetry endpoint.","notes":"resolveTelemetryWs now prefers ws:// for localhost unless VITE_TELEMETRY_FORCE_SECURE=true; TelemetryCard error panel instructs to run pnpm dev:logs and check API logs; env samples updated.","status":"tombstone","priority":1,"issue_type":"bug","created_at":"2025-12-03T11:15:28.269713-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"bug"}
{"id":"lightning-jhkc","title":"Infra/Core: NIP-05 proxy + caching","description":"dummy","status":"tombstone","priority":2,"issue_type":"task","created_at":"2025-12-25T23:05:21.295109-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","dependencies":[{"issue_id":"lightning-jhkc","depends_on_id":"lightning-yzz6","type":"parent-child","created_at":"2025-12-25T23:05:21.297365-08:00","created_by":"honk","metadata":"{}"}],"deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"lightning-jia","title":"Seed demo tenant/user in dev.db for LNURLp","description":"dev.db lacks demo tenant/user, so /.well-known/lnurlp/{user} 404s. Add seed (domain localhost:3001 or demo.nostrstack.lol) with lightningAddress for default username.","status":"tombstone","priority":1,"issue_type":"task","created_at":"2025-12-01T14:04:32.31847-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"lightning-jkdq","title":"Test: Stabilize tips-ws flake","description":"Stabilize the /ws/tips test that intermittently fails during pnpm --filter api test.\n\nContext:\n- Observed failure: tips-ws.test.ts 'filters tip events by itemId and tenant' received 0 events and hook timeout.\n\nAcceptance criteria:\n- pnpm --filter api test passes consistently without tips-ws flake.\n- tips-ws test no longer times out on beforeAll/afterAll.\n\nEdge cases:\n- Slow websocket connection establishment.\n- Event delivery latency.\n\n## Files\n- apps/api/src/routes/tips-ws.test.ts (modify: improve timing/retry logic)\n- apps/api/src/routes/tips-ws.ts (modify: only if needed for stability)\n\n## QA Evidence\n- Playwright: N/A\n- Screenshots: N/A\n- DevTools MCP: N/A\n- Logs: pnpm --filter api test (pass; tips-ws stable)\n- CI: pnpm --filter api test \u0026\u0026 pnpm lint\n\n## Close Notes\n- Issues encountered: oracle.sh failed (Claude model fallback error; no critique captured).\n- Setup improvements: NO_COLOR warnings during pnpm dev:logs (tracked in lightning-dds0).\n- Debug info that would have helped: oracle model availability/output for critique.\n","status":"tombstone","priority":3,"issue_type":"task","assignee":"honk","estimated_minutes":90,"created_at":"2026-01-01T04:43:53.503241-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","close_reason":"Implemented","labels":["area:api","area:qa"],"deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"lightning-jnz5","title":"Zap initiation fails despite lightning address showing","description":"Zap UI shows 'Author does not have a Lightning Address/LNURL' even when profile shows a lightning address. Investigate zap initiation data path and LNURL resolution; fix so zap requests use the displayed lightning address.","status":"tombstone","priority":2,"issue_type":"bug","created_at":"2025-12-19T14:12:54.447576-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"bug"}
{"id":"lightning-jou","title":"Fix unit tests to honor Postgres DATABASE_URL","status":"tombstone","priority":1,"issue_type":"bug","created_at":"2025-11-28T09:24:48.593443-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","dependencies":[{"issue_id":"lightning-jou","depends_on_id":"lightning-2lx","type":"parent-child","created_at":"2025-11-29T07:25:56.697174-08:00","created_by":"honk","metadata":"{}"}],"deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"bug"}
{"id":"lightning-jqn","title":"Architecture \u0026 DX hardening","description":"Improve architecture clarity, repo hygiene, testing, security, and DX for nostrstack.","notes":"Architecture \u0026 DX hardening items completed (docs, seeds, lint, health, CI, regtest, MCP, UI exports).","status":"tombstone","priority":1,"issue_type":"epic","created_at":"2025-12-01T15:40:38.335656-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"epic"}
{"id":"lightning-jqn.1","title":"Write high-level architecture doc","description":"Add docs/architecture.md covering components (API, LNbits, gallery/embed, data flow, tenancy, relays), local/staging/prod topology, and key dependencies.","status":"tombstone","priority":1,"issue_type":"task","created_at":"2025-12-01T15:41:00.427427-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","dependencies":[{"issue_id":"lightning-jqn.1","depends_on_id":"lightning-jqn","type":"parent-child","created_at":"2025-12-01T15:41:00.428564-08:00","created_by":"honk","metadata":"{}"}],"deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"lightning-jqn.10","title":"Security \u0026 secrets hygiene sweep","description":"Audit repo for secrets exposure, add pre-push secret scan script, and document keyvault/lnbits keys handling.","status":"tombstone","priority":1,"issue_type":"task","created_at":"2025-12-01T15:43:58.164922-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","dependencies":[{"issue_id":"lightning-jqn.10","depends_on_id":"lightning-jqn","type":"parent-child","created_at":"2025-12-01T15:43:58.16572-08:00","created_by":"honk","metadata":"{}"}],"deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"lightning-jqn.2","title":"Clean lint warnings \u0026 enforce","description":"Fix existing lint warnings across packages and enable lint to fail on warnings in CI.","status":"tombstone","priority":2,"issue_type":"task","created_at":"2025-12-01T15:41:14.532038-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","dependencies":[{"issue_id":"lightning-jqn.2","depends_on_id":"lightning-jqn","type":"parent-child","created_at":"2025-12-01T15:41:14.532953-08:00","created_by":"honk","metadata":"{}"}],"deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"lightning-jqn.3","title":"Consolidate env defaults \u0026 samples","description":"Provide env.sample files and consistent defaults (API/gallery) including relays, LNbits keys, build metadata.","status":"tombstone","priority":2,"issue_type":"task","created_at":"2025-12-01T15:41:33.932342-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","dependencies":[{"issue_id":"lightning-jqn.3","depends_on_id":"lightning-jqn","type":"parent-child","created_at":"2025-12-01T15:41:33.933304-08:00","created_by":"honk","metadata":"{}"}],"deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"lightning-jqn.4","title":"Automate dev db seed in startup","description":"Hook dev server start to run prisma seed-dev for demo tenant so LNURL works without manual step.","status":"tombstone","priority":2,"issue_type":"task","created_at":"2025-12-01T15:41:54.565572-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","dependencies":[{"issue_id":"lightning-jqn.4","depends_on_id":"lightning-jqn","type":"parent-child","created_at":"2025-12-01T15:41:54.56652-08:00","created_by":"honk","metadata":"{}"}],"deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"lightning-jqn.5","title":"Make regtest stack startup idempotent","description":"Ensure ./scripts/regtest-lndbits.sh and fund scripts handle running/paused containers cleanly and print status.","notes":"Regtest bootstrap now skips re-mining and re-funding when not needed, adds richer status output, and documents MCP scripts adjustments.","status":"tombstone","priority":2,"issue_type":"task","created_at":"2025-12-01T15:42:15.538226-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","dependencies":[{"issue_id":"lightning-jqn.5","depends_on_id":"lightning-jqn","type":"parent-child","created_at":"2025-12-01T15:42:15.54001-08:00","created_by":"honk","metadata":"{}"}],"deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"lightning-jqn.6","title":"Ship reusable UI kit exports","description":"Document and export embed UI components (relay badge, invoice popover, user card, tokens) with examples for external consumers.","notes":"Documented UI kit exports (relay badge, invoice popover, user card, tokens) in packages/embed/README.md for external consumers.","status":"tombstone","priority":1,"issue_type":"task","created_at":"2025-12-01T15:42:39.661127-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","dependencies":[{"issue_id":"lightning-jqn.6","depends_on_id":"lightning-jqn","type":"parent-child","created_at":"2025-12-01T15:42:39.662137-08:00","created_by":"honk","metadata":"{}"}],"deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"lightning-jqn.7","title":"Centralize asset hosting for logos","description":"Host SVG assets via CDN/unpkg or package exports and reference consistently in docs/demo.","notes":"Assets already shipped inside @nostrstack/embed package; documented CDN/unpkg use and ensured SVGs live under packages/embed/assets for consumer import.","status":"tombstone","priority":3,"issue_type":"task","created_at":"2025-12-01T15:43:00.87804-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","dependencies":[{"issue_id":"lightning-jqn.7","depends_on_id":"lightning-jqn","type":"parent-child","created_at":"2025-12-01T15:43:00.87912-08:00","created_by":"honk","metadata":"{}"}],"deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"lightning-jqn.8","title":"Telemetry gaps: API health + LNbits","description":"Add health pings/logging for API dev and LNbits containers; surface in demo footer.","notes":"Added /health/lnbits endpoint and surfaced API/LNbits status badges in demo footer.","status":"tombstone","priority":2,"issue_type":"task","created_at":"2025-12-01T15:43:17.465224-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","dependencies":[{"issue_id":"lightning-jqn.8","depends_on_id":"lightning-jqn","type":"parent-child","created_at":"2025-12-01T15:43:17.466139-08:00","created_by":"honk","metadata":"{}"}],"deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"lightning-jqn.9","title":"CI coverage for real-relay comment","description":"Add opt-in CI job to run real relay Playwright when RELAY + signer creds provided; document how to enable.","notes":"Added opt-in GitHub Actions job real-relay-comment gated by REAL_RELAY + NIP07_PROFILE_B64; docs/ci-real-relay.md explains setup and profile requirements; Playwright config supports custom user data dir.","status":"tombstone","priority":2,"issue_type":"task","created_at":"2025-12-01T15:43:36.68273-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","dependencies":[{"issue_id":"lightning-jqn.9","depends_on_id":"lightning-jqn","type":"parent-child","created_at":"2025-12-01T15:43:36.683787-08:00","created_by":"honk","metadata":"{}"}],"deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"lightning-jtso","title":"Improve workflow names and add descriptions","status":"tombstone","priority":2,"issue_type":"task","created_at":"2025-12-15T20:29:13.130546-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"lightning-jvdx","title":"Evaluate nostrdb integration for event viewer","description":"Assess damus-io/nostrdb capabilities, fit with nostrstack (Node/TS stack), and whether it helps render arbitrary Nostr events (profiles, notes, reposts, zap receipts). Produce recommendation + integration paths.","status":"tombstone","priority":2,"issue_type":"task","created_at":"2025-12-19T15:00:25.139542-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"lightning-k4j","title":"Relay list item layout refresh","description":"Relay list chips feel cramped (see screenshot with green dot/recv counts). Redesign using modern list patterns: clear hierarchy (name, URL, software), align status badges (recv/send), better spacing and mobile stacking. Research at least two reference patterns from web log/monitoring UIs and note takeaways in the PR. Acceptance: layout adapts to small screens, statuses readable at a glance, and conforms to chosen design principles. Final step: validate visually via Chrome DevTools MCP and attach before/after screenshot.","status":"tombstone","priority":2,"issue_type":"task","created_at":"2025-12-02T16:19:17.737363-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","labels":["demo","nostr"],"deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"lightning-k6um","title":"Core/UI: Payment modal improvements","description":"Unify and upgrade zap/send-sats payment modals for clarity and trust.\n\n- Extract a shared PaymentModal UI (header, status, invoice panel, success action).\n- Add explicit status copy (invoice ready, awaiting payment, payment sent).\n- Show NIP-57 disclaimer that receipts are not proof of payment.\n- Honor prefers-reduced-motion in animations.\n\nAcceptance Criteria\n- Zap and SendSats share consistent modal UI and copy.\n- Success state is clearly distinguishable from pending state.\n- Keyboard focus trap and Escape close still work.\n\nEdge Cases\n- Missing invoice, lnurl errors, WebLN/NWC failures.\n\nNote: Always be looking for refactoring opportunities, bug fixes, and improvements. Create new tasks as you encounter them.\n\n## Files\n- packages/blog-kit/src/send-sats.tsx (modify: use shared modal)\n- packages/blog-kit/src/zap-button.tsx (modify: use shared modal)\n- packages/blog-kit/src/ui/PaymentModal.tsx (create: shared modal)\n- packages/blog-kit/src/styles/payments.css (create: modal styles)\n- apps/gallery/src/main.tsx (modify: import payments styles)","status":"tombstone","priority":2,"issue_type":"task","created_at":"2025-12-25T23:07:33.102096-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","dependencies":[{"issue_id":"lightning-k6um","depends_on_id":"lightning-yzz6","type":"parent-child","created_at":"2025-12-25T23:07:33.104573-08:00","created_by":"honk","metadata":"{}"},{"issue_id":"lightning-k6um","depends_on_id":"lightning-cyfb","type":"blocks","created_at":"2025-12-25T23:07:38.438007-08:00","created_by":"honk","metadata":"{}"}],"deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"lightning-k7bf","title":"Epic: Regtest Zaps + Zap UI Refresh","description":"Complete implementation of regtest-funded zaps and a stabilized, tip-inspired zap UI.\n\n## Objective\nEnable users to pay zap invoices with the local regtest wallet while restoring a polished, stable zap modal inspired by the Lightning Tip demo UI.\n\n## Success Criteria\n- [ ] Zap flow requests LNURL-pay invoices successfully and displays QR/invoice cleanly without layout shift.\n- [ ] Regtest users can pay zap invoices via the local regtest wallet endpoint and see success feedback.\n- [ ] Zap modal is accessible (keyboard, focus, aria-live) and responsive.\n- [ ] Regtest pay endpoints are gated/guarded for non-prod safety and are logged/observable.\n- [ ] Tests and docs cover the new regtest zap flow.\n\n## Assumptions\n- Local regtest stack (bitcoind + lnd-merchant/lnd-payer + LNbits) is available via existing docker compose.\n- Gallery is the primary UI surface; we can align zap styling with embed tip/popover styles.\n- Regtest pay endpoint remains available in dev only (feature-flagged).\n\n## Out of Scope\n- Mainnet auto-pay or custodial wallet integrations beyond regtest.\n- Redesign of non-zap feed UI.\n- Server-side zap request signature verification beyond existing behavior.","status":"tombstone","priority":2,"issue_type":"epic","created_at":"2025-12-19T16:18:09.193355-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"epic"}
{"id":"lightning-kgar","title":"Telemetry: metrics for event fetch + cache","description":"Add telemetry for event resolution, cache hits, and relay fetch latency.\n\nAcceptance Criteria:\n- Emit counters for cache hits/misses and resolver failures.\n- Track relay fetch latency with labels for success/failure.\n- Expose metrics through existing /metrics endpoint.\n- Include the standing note: while working, look for refactoring opportunities/bugs/improvements and create new bd tasks as they surface.\n\nEdge Cases:\n- Resolver returns partial data (count as partial success)\n\n## Files\n- apps/api/src/telemetry/metrics.ts (modify: add counters/histograms)\n- apps/api/src/nostr/event-resolver.ts (modify: emit metrics)","status":"tombstone","priority":2,"issue_type":"task","created_at":"2025-12-20T10:32:55.080992-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","dependencies":[{"issue_id":"lightning-kgar","depends_on_id":"lightning-00in","type":"parent-child","created_at":"2025-12-20T10:32:55.083055-08:00","created_by":"honk","metadata":"{}"},{"issue_id":"lightning-kgar","depends_on_id":"lightning-2y3t","type":"blocks","created_at":"2025-12-20T10:34:13.213822-08:00","created_by":"honk","metadata":"{}"}],"deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"lightning-khfc","title":"Tip button presets + custom + item-scoped tip feed","description":"Build a high-quality tip UI with 3 preset amounts + custom amount input, itemId-scoped tracking, and a live activity feed. Use /api/pay with metadata {itemId,...}, persist metadata, broadcast WS events with itemId, and add GET endpoint to hydrate feed. Integrate into gallery regtest demo and add QA coverage.","status":"tombstone","priority":1,"issue_type":"feature","created_at":"2025-12-15T03:24:04.556604-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","labels":["api","embed","realtime","tip","ui"],"deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"feature"}
{"id":"lightning-knc1","title":"Fix zaps in gallery","description":"Debug zap flow in gallery and ensure zaps succeed end-to-end (LNURL metadata -\u003e invoice -\u003e WebLN/QR).","status":"tombstone","priority":2,"issue_type":"task","created_at":"2025-12-19T15:19:19.680732-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","close_reason":"Closed","deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"lightning-knz","title":"Replace regtest faucet shell with TypeScript","description":"Document and complete move from scripts/regtest-faucet.sh to API route/services (regtest-fund). Remove shell script, ensure docs and gallery faucet button use new endpoint, add tests.","status":"tombstone","priority":2,"issue_type":"task","created_at":"2025-12-02T11:31:44.660328-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"lightning-ktk","title":"Publish SDK/embed to npm","description":"Prepare npm publish for sdk/embed: versioning, changelog, docs snippets","status":"tombstone","priority":3,"issue_type":"task","created_at":"2025-11-28T12:15:16.532933-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","dependencies":[{"issue_id":"lightning-ktk","depends_on_id":"lightning-2lx","type":"parent-child","created_at":"2025-11-29T07:26:02.301437-08:00","created_by":"honk","metadata":"{}"}],"deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"lightning-kwkw","title":"mcp: chrome-devtools tools fail (Transport closed)","description":"Codex CLI MCP chrome-devtools server is configured (mcp.config.json) but tool calls like mcp__chrome-devtools__list_pages fail with: 'tools/call failed: Transport closed'.\\n\\nRepro:\\n1) Run ./scripts/mcp-chrome.sh (opens Chrome with --remote-debugging-port=9222).\\n2) Verify 127.0.0.1:9222 is listening (lsof -nP -iTCP:9222 -sTCP:LISTEN).\\n3) In Codex, call mcp__chrome-devtools__list_pages (or any chrome-devtools/* tool) -\u003e Transport closed.\\n\\nNotes:\\n- npx -y chrome-devtools-mcp@latest --browserUrl=http://127.0.0.1:9222 prints its banner to stderr and exits when stdin is closed; it stays running if stdin is kept open (e.g. tail -f /dev/null | npx ...).\\n- Might need to pin chrome-devtools-mcp version, adjust invocation so Codex keeps stdin open, or switch to wsEndpoint.","acceptance_criteria":"- mcp__chrome-devtools__list_pages works reliably\\n- Can open https://localhost:4173 and verify console/network are clean via MCP","status":"tombstone","priority":3,"issue_type":"bug","created_at":"2025-12-13T20:51:20.331629-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"bug"}
{"id":"lightning-kzpo","title":"Lightning demo layout: relayout page + pay-to-unlock card responsiveness","description":"Fix remaining layout break/overlap issues in Lightning demo (Pay to unlock + Wallets columns), remove collapsed advanced sections by default, and redesign layout to use space efficiently across common viewports.","status":"tombstone","priority":2,"issue_type":"feature","created_at":"2025-12-15T02:49:24.859463-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","labels":["layout","lightning","ui"],"deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"feature"}
{"id":"lightning-l04e","title":"API: Tips realtime WebSocket channel (itemId filter)","description":"Add a websocket endpoint that streams tip events filtered by itemId for real time tip feeds.\n\nImplementation notes:\n- New WS route /ws/tips with required itemId query.\n- Filter pay events to action=tip and itemId match; include amount, createdAt, metadata.\n- Add basic rate limiting or connection caps and close with error on invalid params.\n- Add metrics for connections and errors.\n\nAcceptance criteria:\n- Clients subscribing with itemId receive only matching tip events.\n- Invalid or missing itemId closes with a clear error.\n- No cross-tenant leakage (use host or tenant resolution).\n\nEdge cases:\n- Multiple concurrent connections.\n- Tip events without itemId.\n\n## Files\n- apps/api/src/routes/tips-ws.ts (create)\n- apps/api/src/services/pay-events.ts (modify: add listener support + tenant/payment ids)\n- apps/api/src/routes/index.ts (modify: register ws route)\n- apps/api/src/telemetry/metrics.ts (modify: counters)\n- apps/api/src/routes/pay.ts (modify: add tenant/payment ids to events)\n- apps/api/src/routes/pay-webhook.ts (modify: add tenant/payment ids to events)\n- apps/api/src/routes/lnurlp-callback.ts (modify: add tenant/payment ids to events)\n- apps/api/src/services/payment-reconciler.ts (modify: add tenant/payment ids to events)\n- apps/api/src/routes/regtest-pay.ts (modify: add tenant/payment ids to events)\n\n## QA Evidence\n- Playwright: N/A (backend only)\n- Screenshots: N/A\n- DevTools MCP: N/A\n- Logs: tail -f .logs/dev/api.log .logs/dev/gallery.log (no errors/warnings observed)\n- CI: pnpm --filter api test \u0026\u0026 pnpm lint\n\n## Close Notes\n- Issues encountered: oracle.sh failed (Claude model) so no critique output; USE_HTTPS warning in api tests persists (tracked in lightning-5q00).\n- Setup improvements: None.\n- Debug info that would have helped: oracle CLI failure detail output.\n","acceptance_criteria":"ws/tips streams tip events filtered by itemId","status":"tombstone","priority":2,"issue_type":"feature","assignee":"unassigned","estimated_minutes":240,"created_at":"2025-12-31T18:35:09.703805-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","close_reason":"Implemented","labels":["area:api","feature:personal-site-kit"],"dependencies":[{"issue_id":"lightning-l04e","depends_on_id":"lightning-39zu","type":"parent-child","created_at":"2025-12-31T18:35:09.706136-08:00","created_by":"honk"},{"issue_id":"lightning-l04e","depends_on_id":"lightning-gfaq","type":"blocks","created_at":"2025-12-31T18:39:34.785037-08:00","created_by":"honk"},{"issue_id":"lightning-l04e","depends_on_id":"lightning-p8rb","type":"blocks","created_at":"2025-12-31T18:39:44.478148-08:00","created_by":"honk"}],"deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"feature"}
{"id":"lightning-l4id","title":"Infra: Lightning feature flags \u0026 env wiring","description":"Add feature flags and environment wiring for all five Lightning features.\n\nImplementation Steps:\n- Add API env flags for LNURL-auth, LNURL-withdraw, NWC, BOLT12 offers.\n- Add gallery env flags for feature toggles.\n- Thread defaults into config where needed.\n\nAcceptance Criteria:\n- New env flags exist with safe defaults.\n- Features can be toggled on/off per environment.\n\nEdge Cases:\n- Missing env values default to disabled.\n\n## Files\n- apps/api/src/env.ts (modify: add feature flags)\n- apps/gallery/.env.example (modify: add VITE feature flags)\n","status":"tombstone","priority":2,"issue_type":"task","created_at":"2025-12-19T18:37:54.445294-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","dependencies":[{"issue_id":"lightning-l4id","depends_on_id":"lightning-61qz","type":"parent-child","created_at":"2025-12-19T18:37:54.446783-08:00","created_by":"honk","metadata":"{}"}],"deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"lightning-l5yj","title":"Add PR workflow (labeler, size check, etc.)","status":"tombstone","priority":2,"issue_type":"task","created_at":"2025-12-15T20:29:18.341788-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"lightning-l8z9","title":"RelayCard redesign: high-density, real-time, alive","description":"Redesign the gallery RelayCard from scratch for maximum information density and strong realtime/alive microinteractions. Incorporate per-relay event pulse for recv/send, compact metrics (latency, recv/min, send status, errors), richer NIP-11 metadata (limits/tags/contact), and an in-card or popover event inspector to view last payload. Use web research inspirations (Pusher debug console, Socket.IO Admin UI, Grafana stat/sparkline patterns, Nostr Design relay reference).","status":"tombstone","priority":1,"issue_type":"feature","created_at":"2025-12-14T23:50:58.467443-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"feature"}
{"id":"lightning-ljx","title":"Invoice modal ring/progress clarity follow-up","description":"Make the invoice status card unambiguously animated: faster ring, clear remaining countdown, better progress fill, tighter layout.","status":"tombstone","priority":1,"issue_type":"bug","created_at":"2025-12-02T21:41:52.053939-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"bug"}
{"id":"lightning-lki","title":"Profile card uses improved key toggle","description":"Update NostrProfileCard to use the redesigned NPUB/NSEC toggle with better layout, copy, and overflow handling.","acceptance_criteria":"Profile card embeds new key toggle cleanly; copy works; no overflow.","status":"tombstone","priority":1,"issue_type":"task","created_at":"2025-12-02T11:17:04.620041-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"lightning-ln12","title":"Epic: Bitcoin network switching hardening","description":"Complete the remaining work to make regtest, mutinynet, and mainnet switching production-ready across API telemetry, UI, and docs.\n\n## Objective\nHarden network switching with an external telemetry provider for non-regtest networks, clear UI status, validated config, and end-to-end QA evidence.\n\n## Success Criteria\n- [ ] External telemetry provider supports mutinynet/mainnet when bitcoind RPC is unavailable.\n- [ ] /api/bitcoin/status includes sync/health fields and is documented in OpenAPI.\n- [ ] Gallery surfaces network/source/health with mainnet warning and screenshots.\n- [ ] Playwright coverage + DevTools MCP checks + FE/BE logs + CI green.\n\n## QA Evidence Requirements\n- Playwright coverage for network status UI flows\n- Screenshots stored at docs/screenshots/bitcoin-network-status/...\n- DevTools MCP console/network clean\n- FE/BE logs reviewed (no errors/warnings)\n- CI green proof (command recorded)\n\n## Risks/Assumptions\n- External explorer APIs may rate-limit or go down; caching/backoff required.\n- Mainnet is gated by MAINNET_DEMO_OK to prevent accidental real payments.\n- Telemetry fields map to Bitcoin Core RPC and Esplora endpoints for consistency.\n- Sources: Bitcoin Core RPC getblockchaininfo/getmempoolinfo docs; Blockstream Esplora REST endpoints for tip height/hash and mempool stats.\n\n## Out of Scope\n- Running a managed public explorer instance.\n- LNbits wallet provisioning changes.\n","status":"tombstone","priority":2,"issue_type":"epic","assignee":"honk","created_at":"2026-01-01T23:58:28.86564-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","close_reason":"Implemented","labels":["api","bitcoin","docs","network","qa","security","telemetry","ui"],"deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"epic"}
{"id":"lightning-ln12.1","title":"Design: telemetry provider contract","description":"Document the telemetry provider contract and status schema so API/UI can align.\n\n- Implement: author a spec describing provider interface (bitcoind vs esplora/mempool), required fields, caching/backoff, and error states.\n- Acceptance criteria:\n  - Spec covers mapping for height/hash/mempool and sync indicators.\n  - Defines fallback behavior and telemetryError semantics for /api/bitcoin/status.\n  - Lists rate limits and timeout guidance.\n- Edge cases:\n  - Explorer API returns partial data or stale tips.\n  - Bitcoind RPC unavailable or returns non-numeric heights.\n- Risks/assumptions:\n  - Esplora-compatible endpoints are available for mutinynet/mainnet.\n\n## Files\n- docs/architecture/bitcoin-telemetry-provider.md (create: provider contract + mapping table)\n- docs/architecture/bitcoin-network-switching.md (modify: link to provider spec)\n\n## QA Evidence\n- Docs lint: `pnpm lint:md` (pass)\n- CI: `pnpm lint:md`\n\n## Close Notes\n- Issues encountered: Oracle review failed (Claude model error) after retries.\n- Setup improvements: Investigate oracle script model fallback for Claude.\n- Debug info that would have helped: Oracle failure output/logs.\n","acceptance_criteria":"Spec defines provider contract, field mapping, and error handling; reviewed by team.","status":"tombstone","priority":2,"issue_type":"task","assignee":"honk","estimated_minutes":120,"created_at":"2026-01-01T23:58:46.065979-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","close_reason":"Implemented","labels":["api","bitcoin","design","planning","telemetry"],"dependencies":[{"issue_id":"lightning-ln12.1","depends_on_id":"lightning-ln12","type":"parent-child","created_at":"2026-01-01T23:58:46.069838-08:00","created_by":"honk"}],"deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"lightning-ln12.10","title":"Test: UI network status + screenshots","description":"Add Playwright coverage and screenshots for network status UI.\n\n- Implement: new Playwright spec to validate network badge/source/mainnet warning; capture screenshots. Update existing gallery Playwright selectors for payment modal classes and theme control assertions. Add mock relay WebSocket shim for VITE_NOSTRSTACK_RELAYS=mock to avoid console errors in dev/QA. Update qa-regtest-demo selectors.\n- Acceptance criteria:\n  - Spec passes on regtest/mutinynet/mainnet configs.\n  - Screenshots stored under docs/screenshots/bitcoin-network-status/.\n  - DevTools MCP + logs clean for the flow.\n- Edge cases:\n  - Status endpoint errors should show callout but not crash.\n- Risks/assumptions:\n  - Test signer or personal-site-kit route can render without login.\n\n## Files\n- apps/gallery/tests/bitcoin-network-status.spec.ts (create: network status Playwright coverage + screenshots)\n- apps/gallery/tests/helpers.ts (modify: theme toggle helper uses buttons / select fallback)\n- apps/gallery/tests/demo-flows.spec.ts (modify: theme assertion + payment modal selectors)\n- apps/gallery/tests/social-flow.spec.ts (modify: payment modal selectors)\n- apps/gallery/tests/nwc.spec.ts (modify: login for settings + payment modal selector)\n- apps/gallery/tests/withdraw.spec.ts (modify: login helper)\n- apps/gallery/tests/payment-journey.spec.ts (modify: payment modal selectors)\n- apps/gallery/tests/demo-regtest.spec.ts (modify: payment modal selectors)\n- apps/gallery/scripts/qa-regtest-demo.ts (modify: payment modal selectors)\n- apps/gallery/src/utils/mock-relay.ts (create: mock relay WebSocket shim)\n- apps/gallery/src/utils/mock-relay-init.ts (create: install shim when relays=mock)\n- apps/gallery/src/main.tsx (modify: import mock-relay-init early)\n- docs/screenshots/bitcoin-network-status/regtest-status.png (create/update)\n- docs/screenshots/bitcoin-network-status/mutinynet-status.png (create)\n- docs/screenshots/bitcoin-network-status/mainnet-warning.png (create)\n\n## QA Evidence\n- Playwright: `pnpm --filter gallery e2e tests/bitcoin-network-status.spec.ts`\n- Playwright (CI): `pnpm --filter gallery e2e`\n- Screenshots: docs/screenshots/bitcoin-network-status/{regtest-status,mutinynet-status,mainnet-warning}.png\n- DevTools MCP: console + network checked on /personal-site-kit (no errors; SSL self-signed warning only)\n- Logs: `.logs/dev/api.log` + `.logs/dev/gallery.log` reviewed (no errors)\n- CI: `pnpm --filter gallery e2e` (passes; NO_COLOR warning present)\n\n## Close Notes\n- Issues encountered: Full e2e initially failed due to theme toggle assertion, zap modal selector drift, missing login for settings/withdraw, and mock relay console errors; updated tests + added mock relay shim. Oracle script failed (sonnet retry then exit 1).\n- Setup improvements: Run `VITE_ENABLE_PROFILE_PAY=true VITE_NOSTRSTACK_RELAYS=mock pnpm dev:logs` for consistent Playwright runs; personal-site-kit tests write screenshots under `apps/gallery/docs` (cleanup needed).\n- Debug info that would have helped: More detailed oracle CLI error output.\n","acceptance_criteria":"Playwright covers network status UI and screenshots captured.","status":"tombstone","priority":2,"issue_type":"task","assignee":"honk","estimated_minutes":180,"created_at":"2026-01-02T00:01:14.641065-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","close_reason":"Implemented","labels":["playwright","telemetry","testing","ui"],"dependencies":[{"issue_id":"lightning-ln12.10","depends_on_id":"lightning-ln12","type":"parent-child","created_at":"2026-01-02T00:01:14.64353-08:00","created_by":"honk"},{"issue_id":"lightning-ln12.10","depends_on_id":"lightning-ln12.8","type":"blocks","created_at":"2026-01-02T00:03:01.698849-08:00","created_by":"honk"}],"deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"lightning-ln12.11","title":"Docs: network switching updates","description":"Update user/developer docs for network switching and telemetry provider usage.\n\n- Implement: document TELEMETRY_PROVIDER/TELEMETRY_ESPLORA_URL, network switch presets, UI network/source behavior, and QA steps (Playwright + DevTools MCP).\n- Acceptance criteria:\n  - Docs list TELEMETRY_PROVIDER/TELEMETRY_ESPLORA_URL and safety gates.\n  - Testing docs include Playwright + DevTools MCP steps.\n  - Architecture docs reference status endpoint.\n- Edge cases:\n  - Clarify behavior when provider unavailable.\n- Risks/assumptions:\n  - Documentation stays aligned with OpenAPI changes.\n\n## Files\n- docs/local-demo.md (modify: network switch + telemetry provider)\n- docs/demo-modes.md (modify: network badge/source behavior)\n- docs/testing.md (modify: QA steps + Playwright)\n- docs/architecture.md (modify: mention /api/bitcoin/status)\n- README.md (modify: dev switch quickstart)\n\n## QA Evidence\n- Docs lint: `pnpm lint:md`\n- CI: `pnpm lint:md`\n\n## Close Notes\n- Issues encountered: markdownlint required blank lines around the new README heading/list; oracle script failed (sonnet retry then exit 1).\n- Setup improvements: None.\n- Debug info that would have helped: Oracle CLI error output.\n","acceptance_criteria":"Docs updated for network switching, telemetry provider, and QA steps.","status":"tombstone","priority":2,"issue_type":"task","assignee":"honk","estimated_minutes":120,"created_at":"2026-01-02T00:01:30.550447-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","close_reason":"Implemented","labels":["bitcoin","docs","telemetry"],"dependencies":[{"issue_id":"lightning-ln12.11","depends_on_id":"lightning-ln12","type":"parent-child","created_at":"2026-01-02T00:01:30.552373-08:00","created_by":"honk"},{"issue_id":"lightning-ln12.11","depends_on_id":"lightning-ln12.3","type":"blocks","created_at":"2026-01-02T00:03:13.751242-08:00","created_by":"honk"},{"issue_id":"lightning-ln12.11","depends_on_id":"lightning-ln12.4","type":"blocks","created_at":"2026-01-02T00:03:32.764322-08:00","created_by":"honk"},{"issue_id":"lightning-ln12.11","depends_on_id":"lightning-ln12.8","type":"blocks","created_at":"2026-01-02T00:03:42.682681-08:00","created_by":"honk"}],"deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"lightning-ln12.2","title":"Design: network status UX","description":"Define UX for network status, warnings, and screenshots.\n\n- Implement: write UX spec for sidebar/network card (states, copy, error handling) + screenshot plan.\n- Acceptance criteria:\n  - Spec covers regtest/mutinynet/mainnet states and mainnet warning behavior.\n  - Defines error/empty state messaging and refresh behavior.\n  - Screenshot list and naming convention established.\n- Edge cases:\n  - API status unavailable; show degraded state without blocking UI.\n  - Conflicting configured network vs telemetry-reported chain.\n- Risks/assumptions:\n  - UI should remain usable without login (personal-site-kit route).\n\n## Files\n- docs/ux/bitcoin-network-status.md (create: UX spec + copy)\n- docs/screenshots/bitcoin-network-status/README.md (create: screenshot plan)\n\n## QA Evidence\n- Docs lint: `pnpm lint:md`\n- Logs: `pnpm dev:logs` (Babel deopt warning in gallery logs tracked in lightning-x6xw)\n- DevTools MCP: n/a (no UI changes)\n- CI: `pnpm lint:md`\n\n## Close Notes\n- Issues encountered: Babel deopt warning in gallery logs (tracked in lightning-x6xw). Oracle review failed (Claude model error) after retry.\n- Setup improvements: none.\n- Debug info that would have helped: oracle failure output/logs.\n","acceptance_criteria":"UX spec defines states, copy, and screenshot plan; reviewed by team.","status":"tombstone","priority":2,"issue_type":"task","assignee":"honk","estimated_minutes":120,"created_at":"2026-01-01T23:59:01.888832-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","close_reason":"Implemented","labels":["bitcoin","design","planning","telemetry","ui"],"dependencies":[{"issue_id":"lightning-ln12.2","depends_on_id":"lightning-ln12","type":"parent-child","created_at":"2026-01-01T23:59:01.890912-08:00","created_by":"honk"}],"deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"lightning-ln12.3","title":"Infra: network profiles + deploy env wiring","description":"Wire network profiles and deployment env for telemetry providers.\n\n- Implement: add telemetry provider envs to profiles/scripts and align deploy docs.\n- Acceptance criteria:\n  - Mutinynet/mainnet profiles use external telemetry provider settings.\n  - Demo scripts export TELEMETRY_PROVIDER + TELEMETRY_ESPLORA_URL when needed.\n  - Deployment docs list required envs and safety gates.\n- Edge cases:\n  - Missing TELEMETRY_ESPLORA_URL should fail fast in non-regtest modes.\n- Risks/assumptions:\n  - Staging/prod env management supports new variables.\n\n## Files\n- .env.network.mutinynet (modify: set TELEMETRY_PROVIDER + TELEMETRY_ESPLORA_URL)\n- .env.network.mainnet (modify: set TELEMETRY_PROVIDER + TELEMETRY_ESPLORA_URL)\n- env.sample (modify: add TELEMETRY_ESPLORA_URL docs)\n- scripts/demo-mutinynet.sh (modify: export telemetry envs)\n- scripts/demo-mainnet.sh (modify: export telemetry envs)\n- DEPLOY.md (modify: add network/telemetry env guidance)\n\n## QA Evidence\n- Docs lint: `pnpm lint:md`\n- Logs: `pnpm dev:logs` (Babel deopt warning in gallery logs tracked in lightning-x6xw)\n- DevTools MCP: n/a (no UI changes)\n- CI: `pnpm lint:md`\n\n## Close Notes\n- Issues encountered: Babel deopt warning in gallery logs (tracked in lightning-x6xw). Oracle review failed (Claude model error) after retry.\n- Setup improvements: none.\n- Debug info that would have helped: oracle failure output/logs.\n","acceptance_criteria":"Profiles + deploy docs updated for telemetry provider and network switching.","status":"tombstone","priority":2,"issue_type":"task","assignee":"honk","estimated_minutes":180,"created_at":"2026-01-01T23:59:17.69042-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","close_reason":"Implemented","labels":["bitcoin","config","infra","network"],"dependencies":[{"issue_id":"lightning-ln12.3","depends_on_id":"lightning-ln12","type":"parent-child","created_at":"2026-01-01T23:59:17.692315-08:00","created_by":"honk"}],"deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"lightning-ln12.4","title":"API: external telemetry provider (Esplora)","description":"Implement Esplora-compatible telemetry provider and normalize results into TelemetrySummary.\n\n- Implement: add provider module to fetch tip height/hash, block data, and mempool stats from Esplora/mempool endpoints.\n- Acceptance criteria:\n  - Provider returns TelemetrySummary with height/hash/time/mempool fields.\n  - /api/bitcoin/status and telemetry summary/ws can use provider via TELEMETRY_PROVIDER.\n  - Responses include source metadata and cached results to avoid rate limits.\n- Edge cases:\n  - Tip hash changes between calls; retry once before failing.\n  - Provider returns empty or non-JSON responses.\n- Risks/assumptions:\n  - Esplora endpoints are stable and compatible with chosen source.\n\n## Files\n- apps/api/src/telemetry/esplora.ts (create: Esplora provider)\n- apps/api/src/telemetry/providers.ts (create: provider selector)\n- apps/api/src/telemetry/bitcoind.ts (modify: shared types)\n- apps/api/src/routes/telemetry-summary.ts (modify: provider wiring)\n- apps/api/src/routes/telemetry-ws.ts (modify: provider wiring)\n- apps/api/src/telemetry/routes.ts (modify: status endpoint wiring)\n- apps/api/src/env.ts (modify: TELEMETRY_PROVIDER enum + TELEMETRY_ESPLORA_URL)\n- apps/api/openapi.json (modify: document /api/bitcoin/status schema)\n\n## QA Evidence\n- Unit tests: `pnpm --filter api test` (pass)\n- Logs: `pnpm dev:logs` (port 3001 conflict resolved; warnings tracked in lightning-vzov/lightning-x6xw)\n- CI: `pnpm --filter api test`\n\n## Close Notes\n- Issues encountered: pnpm dev:logs initially failed with port 3001 in use; resolved by killing PID 17621 and rerunning. Oracle review failed (Claude model error) after retries.\n- Setup improvements: follow-up tasks created for Prisma update banner (lightning-vzov) and Babel deoptimisation warning (lightning-x6xw).\n- Debug info that would have helped: oracle failure output/logs.\n","acceptance_criteria":"API uses Esplora provider for mutinynet/mainnet with normalized TelemetrySummary fields and caching.","status":"tombstone","priority":2,"issue_type":"task","assignee":"honk","estimated_minutes":240,"created_at":"2026-01-01T23:59:36.042737-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","close_reason":"Implemented","labels":["api","bitcoin","feature","telemetry"],"dependencies":[{"issue_id":"lightning-ln12.4","depends_on_id":"lightning-ln12","type":"parent-child","created_at":"2026-01-01T23:59:36.043884-08:00","created_by":"honk"},{"issue_id":"lightning-ln12.4","depends_on_id":"lightning-ln12.1","type":"blocks","created_at":"2026-01-02T00:01:47.288014-08:00","created_by":"honk"}],"deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"lightning-ln12.5","title":"Security: telemetry URL validation + SSRF guard","description":"Add validation and SSRF protections for telemetry provider URLs.\n\n- Implement: validate TELEMETRY_ESPLORA_URL/bitcoind RPC URLs (https-only in prod, no localhost/private IPs unless dev, allowlist hostnames if provided).\n- Acceptance criteria:\n  - Invalid or unsafe URLs fail fast at startup.\n  - Tests cover prod vs dev behavior.\n  - Error messages are actionable without leaking secrets.\n- Edge cases:\n  - IPv6 literals and localhost aliases.\n  - Mixed protocol (http in prod).\n- Risks/assumptions:\n  - Staging needs explicit allowlist entries for private endpoints.\n\n## Files\n- apps/api/src/telemetry/url-guard.ts (create: URL validation helpers)\n- apps/api/src/env.ts (modify: validation rules)\n- apps/api/src/telemetry/providers.ts (modify: enforce guard)\n- apps/api/src/telemetry/url-guard.test.ts (create: validation tests)\n\n## QA Evidence\n- Unit tests: `pnpm --filter api test` (pass)\n- Logs: `pnpm dev:logs` (port 3001 conflict resolved; warnings tracked in lightning-vzov/lightning-x6xw)\n- CI: `pnpm --filter api test`\n\n## Close Notes\n- Issues encountered: pnpm dev:logs initially failed with port 3001 in use; resolved by killing PID 50095 and rerunning. Oracle review failed (Claude model error) after retries.\n- Setup improvements: follow-up tasks for Prisma update banner (lightning-vzov) and Babel deoptimisation warning (lightning-x6xw).\n- Debug info that would have helped: oracle failure output/logs.\n","acceptance_criteria":"Telemetry provider URLs validated; SSRF protections and prod safeguards enforced.","status":"tombstone","priority":1,"issue_type":"task","assignee":"honk","estimated_minutes":180,"created_at":"2026-01-01T23:59:52.217502-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","close_reason":"Implemented","labels":["api","network","security","telemetry"],"dependencies":[{"issue_id":"lightning-ln12.5","depends_on_id":"lightning-ln12","type":"parent-child","created_at":"2026-01-01T23:59:52.21979-08:00","created_by":"honk"},{"issue_id":"lightning-ln12.5","depends_on_id":"lightning-ln12.4","type":"blocks","created_at":"2026-01-02T00:01:57.825304-08:00","created_by":"honk"}],"deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"lightning-ln12.6","title":"Monitoring: telemetry metrics + status latency","description":"Add metrics for bitcoin status/telemetry provider usage and latency.\n\n- Implement: counters/histograms for provider, status failures, and response time; document in observability docs.\n- Acceptance criteria:\n  - Metrics emitted for provider source and error types.\n  - /metrics output includes new series.\n  - Observability docs updated with names and meaning.\n- Edge cases:\n  - Avoid high-cardinality labels.\n- Risks/assumptions:\n  - Metrics registry is available in API runtime.\n\n## Files\n- apps/api/src/telemetry/metrics.ts (modify: new counters/histograms)\n- apps/api/src/telemetry/routes.ts (modify: record metrics)\n- docs/lightning-observability.md (modify: metric docs)\n\n## QA Evidence\n- Unit tests: `pnpm --filter api test`\n- Logs: `pnpm dev:logs` (Babel deopt warning in gallery logs tracked in lightning-x6xw; API restart hit EADDRINUSE 3001, recovered on rerun)\n- DevTools MCP: n/a (no UI changes)\n- CI: `pnpm --filter api test`\n\n## Close Notes\n- Issues encountered: pnpm dev:logs restart hit EADDRINUSE on 3001; recovered on rerun. Babel deopt warning seen (tracked in lightning-x6xw). Oracle review failed (Claude model error) after retry.\n- Setup improvements: none.\n- Debug info that would have helped: oracle failure output/logs.\n","acceptance_criteria":"Metrics cover provider usage, success/failure, and latency; docs updated.","status":"tombstone","priority":2,"issue_type":"task","assignee":"honk","estimated_minutes":120,"created_at":"2026-01-02T00:00:08.401005-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","close_reason":"Implemented","labels":["api","monitoring","telemetry"],"dependencies":[{"issue_id":"lightning-ln12.6","depends_on_id":"lightning-ln12","type":"parent-child","created_at":"2026-01-02T00:00:08.403824-08:00","created_by":"honk"},{"issue_id":"lightning-ln12.6","depends_on_id":"lightning-ln12.5","type":"blocks","created_at":"2026-01-02T00:02:09.850826-08:00","created_by":"honk"}],"deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"lightning-ln12.7","title":"SDK: bitcoin status hook","description":"Expose bitcoin status data in SDK/blog-kit for reuse across apps.\n\n- Implement: add types + hook to fetch /api/bitcoin/status with caching and error handling.\n- Acceptance criteria:\n  - Hook returns loading/error/status states.\n  - Types are exported for API/SDK consumers.\n  - Gallery can adopt hook (optional in UI task).\n- Edge cases:\n  - API base not configured or returns 502.\n- Risks/assumptions:\n  - Hook should avoid refetch storms in React StrictMode.\n\n## Files\n- packages/blog-kit/src/hooks/useBitcoinStatus.ts (create: hook)\n- packages/blog-kit/src/index.ts (modify: export hook + types)\n- packages/sdk/src/types.ts (modify: add BitcoinStatus types)\n- packages/sdk/src/client.ts (modify: add status fetch helper)\n\n## QA Evidence\n- Unit tests: `pnpm --filter blog-kit test`\n- Logs: `pnpm dev:logs` (Babel deopt warning in gallery logs tracked in lightning-x6xw; API restart hit EADDRINUSE 3001 after telemetry-summary lint fix)\n- DevTools MCP: n/a (no UI changes)\n- CI: `pnpm lint \u0026\u0026 pnpm typecheck`\n\n## Close Notes\n- Issues encountered: ESLint required export sort in packages/blog-kit/src/index.ts and import sort in apps/api/src/routes/telemetry-summary.ts. Babel deopt warning in gallery logs (tracked in lightning-x6xw). Dev logs restart hit EADDRINUSE on 3001. Oracle review failed (Claude model error) after retry.\n- Setup improvements: none.\n- Debug info that would have helped: oracle failure output/logs.\n","acceptance_criteria":"Blog-kit exposes useBitcoinStatus hook and SDK types for /api/bitcoin/status.","status":"tombstone","priority":2,"issue_type":"task","assignee":"honk","estimated_minutes":180,"created_at":"2026-01-02T00:00:24.066925-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","close_reason":"Implemented","labels":["api","blog-kit","sdk","telemetry"],"dependencies":[{"issue_id":"lightning-ln12.7","depends_on_id":"lightning-ln12","type":"parent-child","created_at":"2026-01-02T00:00:24.068765-08:00","created_by":"honk"},{"issue_id":"lightning-ln12.7","depends_on_id":"lightning-ln12.4","type":"blocks","created_at":"2026-01-02T00:02:21.390562-08:00","created_by":"honk"}],"deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"lightning-ln12.8","title":"UI: network status card + dev selector","description":"Enhance gallery network UI using /api/bitcoin/status.\n\n- Implement: update sidebar/telemetry card to show configured network, telemetry source, sync state, and lightning health; add dev-only network selector in Settings (no production impact).\n- Acceptance criteria:\n  - Network badge + source + health shown on personal-site-kit view.\n  - Mainnet warning appears when configured network is mainnet.\n  - Errors degrade gracefully (callout without crashes).\n- Edge cases:\n  - Status endpoint 502 or times out.\n  - Telemetry reports different chain than configured network.\n- Risks/assumptions:\n  - UI remains accessible without login (personal-site-kit route).\n\n## Files\n- apps/gallery/src/TelemetryBar.tsx (modify: status fetch + error state)\n- apps/gallery/src/ui/BitcoinNodeCard.tsx (modify: fields + badges)\n- apps/gallery/src/Sidebar.tsx (modify: network summary)\n- apps/gallery/src/SettingsView.tsx (modify: dev selector)\n- apps/gallery/src/gallery.css (modify: new styles)\n\n## QA Evidence\n- Playwright: `pnpm --filter gallery e2e tests/personal-site-kit.spec.ts`\n- Screenshots: `docs/screenshots/bitcoin-network-status/regtest-status.png`\n- DevTools MCP: console/network checked, no errors; only local SSL warning from Chrome.\n- Logs: `pnpm dev:logs` (api/gallery) checked, no errors/warnings.\n- CI: `pnpm --filter gallery lint` (TS 5.6 parser warning) \u0026\u0026 `pnpm --filter gallery typecheck`\n\n## Close Notes\n- Issues encountered: Vite import error for `useBitcoinStatus` until `pnpm --filter @nostrstack/blog-kit build`; eslint warned about unsupported TS 5.6; Playwright emitted NO_COLOR warning; Chrome local SSL warning; Oracle review failed (Claude model error).\n- Setup improvements: Add blog-kit build/watch to dev workflow or source alias to avoid stale dist exports; align @typescript-eslint parser with TS 5.6.\n- Debug info that would have helped: None.\n","acceptance_criteria":"Gallery surfaces network/source/health, mainnet warning, and optional dev selector.","status":"tombstone","priority":2,"issue_type":"task","assignee":"honk","estimated_minutes":240,"created_at":"2026-01-02T00:00:40.57932-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","close_reason":"Implemented","labels":["bitcoin","gallery","telemetry","ui"],"dependencies":[{"issue_id":"lightning-ln12.8","depends_on_id":"lightning-ln12","type":"parent-child","created_at":"2026-01-02T00:00:40.581405-08:00","created_by":"honk"},{"issue_id":"lightning-ln12.8","depends_on_id":"lightning-ln12.2","type":"blocks","created_at":"2026-01-02T00:02:31.412748-08:00","created_by":"honk"},{"issue_id":"lightning-ln12.8","depends_on_id":"lightning-ln12.7","type":"blocks","created_at":"2026-01-02T00:02:41.20091-08:00","created_by":"honk"}],"deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"lightning-ln12.9","title":"Test: API telemetry providers","description":"Add unit tests for telemetry providers, status payloads, and URL validation.\n\n- Implement: tests for Esplora provider responses, provider selection via env, and URL guard behavior.\n- Acceptance criteria:\n  - Tests cover happy path + failure path (timeouts, invalid JSON).\n  - URL guard tests include prod vs dev behavior.\n  - CI passes.\n- Edge cases:\n  - Provider returns partial data (missing mempool).\n- Risks/assumptions:\n  - Mock fetch helpers are reusable across tests.\n\n## Files\n- apps/api/src/telemetry/esplora.test.ts (create: provider tests)\n- apps/api/src/telemetry/routes.test.ts (modify: /api/bitcoin/status cases)\n- apps/api/src/telemetry/url-guard.test.ts (modify: add prod/dev cases)\n- apps/api/src/routes/telemetry-summary.test.ts (modify: provider selection)\n\n## QA Evidence\n- Unit tests: `pnpm --filter api test`\n- CI: `pnpm --filter api test`\n\n## Close Notes\n- Issues encountered: prom-client metric registry collisions after module resets; Oracle review failed (Claude model error).\n- Setup improvements: Add a shared test helper to reset prom-client registry when tests re-import route modules.\n- Debug info that would have helped: None.\n","acceptance_criteria":"Tests cover provider selection, error handling, and security validation.","status":"tombstone","priority":2,"issue_type":"task","assignee":"honk","estimated_minutes":180,"created_at":"2026-01-02T00:00:56.626914-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","close_reason":"Implemented","labels":["api","telemetry","testing"],"dependencies":[{"issue_id":"lightning-ln12.9","depends_on_id":"lightning-ln12","type":"parent-child","created_at":"2026-01-02T00:00:56.629069-08:00","created_by":"honk"},{"issue_id":"lightning-ln12.9","depends_on_id":"lightning-ln12.6","type":"blocks","created_at":"2026-01-02T00:02:50.960479-08:00","created_by":"honk"}],"deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"lightning-lnbits","title":"Host LNbits backend (staging)","description":"Deploy managed LNbits in west coast, persistent storage, external ingress, capture admin invoice/key, wire into API env (LN_BITS_URL/LN_BITS_API_KEY).","status":"tombstone","priority":1,"issue_type":"epic","created_at":"2025-11-29T07:48:12.732597-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"epic"}
{"id":"lightning-lnbits.1","title":"Deploy LNbits Container App with persistent storage","description":"Create storage account + file share; deploy container app 'lnbits-stg' in satoshis-stg-west-rg using lnbits/lnbits image, external ingress port 5000, mount /data to Azure File.","status":"tombstone","priority":1,"issue_type":"task","created_at":"2025-11-29T07:48:24.184903-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","dependencies":[{"issue_id":"lightning-lnbits.1","depends_on_id":"lightning-lnbits","type":"parent-child","created_at":"2025-11-29T07:48:45.936524-08:00","created_by":"honk","metadata":"{}"}],"deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"lightning-lnbits.2","title":"Capture admin key and URL; store in Key Vault","description":"Retrieve initial LNbits admin/invoice keys from logs; store in satoshis-kv-west (lnbits-url, lnbits-admin-key, lnbits-api-key) and update API env to use LNbits.","status":"tombstone","priority":1,"issue_type":"task","created_at":"2025-11-29T07:48:35.828288-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","dependencies":[{"issue_id":"lightning-lnbits.2","depends_on_id":"lightning-lnbits","type":"parent-child","created_at":"2025-11-29T07:49:05.826816-08:00","created_by":"honk","metadata":"{}"}],"deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"lightning-lnv","title":"Regtest demo readiness checklist","description":"Plan remaining steps to use demo app against regtest locally (scripts, env defaults, UX validation).","status":"tombstone","priority":2,"issue_type":"task","created_at":"2025-12-01T12:30:55.184253-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"lightning-lrz","title":"Remove legacy satoshis embed compatibility","description":"Drop data-satoshis* attribute support and clean code/docs; assess further simplifications now that backward compatibility is not required.","status":"tombstone","priority":1,"issue_type":"task","created_at":"2025-12-01T10:56:58.85513-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"lightning-lyl1","title":"Design/Infra: LNURL-withdraw sessions","description":"Add data model for LNURL-withdraw sessions.\n\nImplementation Steps:\n- Add withdraw session table with k1, amount bounds, status.\n- Index by k1 for callback lookup.\n\nAcceptance Criteria:\n- Schema includes withdraw sessions.\n- Migration applies cleanly.\n\nEdge Cases:\n- Expired sessions are ignored.\n\n\n## Files\n- apps/api/prisma/schema.prisma (modify: add LnurlWithdrawSession model)\n- apps/api/prisma/migrations/* (create: migration for withdraw sessions)","status":"tombstone","priority":2,"issue_type":"task","created_at":"2025-12-19T18:38:00.195122-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","dependencies":[{"issue_id":"lightning-lyl1","depends_on_id":"lightning-1kbq","type":"parent-child","created_at":"2025-12-19T18:38:00.196748-08:00","created_by":"honk","metadata":"{}"},{"issue_id":"lightning-lyl1","depends_on_id":"lightning-oi27","type":"blocks","created_at":"2025-12-19T18:49:13.51481-08:00","created_by":"honk","metadata":"{}"}],"deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"lightning-m8y7","title":"Epic: Regtest Zap Component + Fund Fix","description":"Complete implementation of a refreshed zap invoice component with regtest payment support and a working regtest fund action.\n\n## Objective\nShip a polished zap invoice component (matching the desired demo aesthetic) that can be paid on regtest, and restore the Add funds (regtest) button so it reliably tops up the local wallet.\n\n## Success Criteria\n- [ ] Zap invoice component renders cleanly (QR, invoice, actions) without layout breakage.\n- [ ] Zap invoices can be paid via regtest with in-UI feedback.\n- [ ] Add funds (regtest) button reliably funds the local wallet.\n- [ ] Tests cover zap modal layout + regtest pay and regtest fund guard.\n\n## Assumptions\n- Screenshot refers to the zap invoice UI rendered from `packages/blog-kit/src/zap-button.tsx` inside the Gallery feed.\n- Regtest stack uses LNbits + lnd-payer per `scripts/regtest-lndbits.sh` and API endpoints `/api/regtest/pay` + `/api/regtest/fund`.\n- We may adjust API base resolution for localhost HTTP while the gallery is served over HTTPS.\n\n## Out of Scope\n- Accessibility improvements (per request).\n- Documentation updates (per request).\n- Non-regtest/mainnet payment flows beyond existing LNURL/Lightning behavior.","status":"tombstone","priority":2,"issue_type":"epic","created_at":"2025-12-19T17:37:58.125332-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"epic"}
{"id":"lightning-mar1","title":"Test: Regtest fund/pay guards","description":"Add API tests for regtest fund/pay guard behavior and invalid payload handling.\n\nAcceptance Criteria:\n- Regtest fund endpoint returns 404/403 when disabled.\n- Regtest fund endpoint returns 400 when payload is invalid (if applicable).\n- Tests run without docker compose when guard blocks execution.\n\nEdge Cases:\n- Missing/empty body should return 4xx without crashing.\n\n## Files\n- apps/api/src/routes/regtest-fund.ts (modify: explicit guard response for disabled)\n- apps/api/src/routes/regtest-fund.test.ts (create: guard + validation tests)\n- apps/api/src/routes/regtest-pay.test.ts (modify: align guard expectations if needed)","status":"tombstone","priority":2,"issue_type":"task","created_at":"2025-12-19T17:40:47.648796-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","dependencies":[{"issue_id":"lightning-mar1","depends_on_id":"lightning-m8y7","type":"parent-child","created_at":"2025-12-19T17:40:47.650573-08:00","created_by":"honk","metadata":"{}"},{"issue_id":"lightning-mar1","depends_on_id":"lightning-dzvy","type":"blocks","created_at":"2025-12-19T17:41:15.134819-08:00","created_by":"honk","metadata":"{}"}],"deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"lightning-mh6e","title":"UI: one premium CopyButton with animation","description":"Create a single, polished CopyButton component (animated success state, optional label variations like 'Copy URL', 'Copy invoice', etc.) and replace ad-hoc copy buttons throughout the app/widgets. Should feel responsive and consistent.","acceptance_criteria":"- CopyButton supports icons + label + small/large\\n- Shows immediate animated feedback + toast\\n- Replaces other copy controls in gallery where applicable\\n- No console errors","status":"tombstone","priority":3,"issue_type":"feature","created_at":"2025-12-15T11:22:03.965461-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"feature"}
{"id":"lightning-muv2","title":"Improve: Search results should fetch Profile metadata","description":"When a pubkey is resolved in the Search view, it should immediately attempt to fetch the kind 0 profile metadata to show name/picture instead of just the pubkey.\n\nAcceptance Criteria:\n- Search results show name/picture if available on relays.\n\nFiles:\n- apps/gallery/src/SearchView.tsx\n\n## QA Evidence\n- Run `pnpm --filter gallery e2e tests/search-profile-fetch.spec.ts`\n\n## Close Notes\n- Issues encountered: Needed to mock API response in E2E test as backend event fetching requires running backend + relay.\n- Setup improvements: None.","status":"tombstone","priority":2,"issue_type":"task","created_at":"2026-01-02T15:43:15.239125-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","close_reason":"Implemented","deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"lightning-mw8w","title":"Verify Voltage configuration and credentials","description":"Check if Voltage mainnet credentials are present in Key Vault using the preflight script. If missing, document the required secrets. If present, unblock lightning-hpu.","status":"tombstone","priority":1,"issue_type":"task","created_at":"2026-01-01T20:08:34.179212-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","close_reason":"Verified secrets are missing from Key Vault. User needs to populate lnd-mainnet-* secrets.","deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"lightning-n1t","title":"Add relay UX uses prompt; needs inline input","description":"Add relay button pops a prompt(), unusable for keyboard/automation. Replace with inline input + add button/modal.","status":"tombstone","priority":2,"issue_type":"task","created_at":"2025-12-02T14:54:09.773234-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","labels":["demo","ui"],"deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"lightning-n3bd","title":"Adopt JsonDisplay for request/response payloads across the app","description":"Ensure panels that send/receive payloads always show the latest response and render JSON via the shared JsonDisplay component (pretty formatting, copy, collapse). Audit other widgets (wallet, relays, telemetry, pay) and integrate consistently.","status":"tombstone","priority":2,"issue_type":"feature","created_at":"2025-12-15T04:49:49.598838-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","labels":["api","dx","ui"],"dependencies":[{"issue_id":"lightning-n3bd","depends_on_id":"lightning-khfc","type":"discovered-from","created_at":"2025-12-15T04:49:49.601459-08:00","created_by":"honk","metadata":"{}"}],"deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"feature"}
{"id":"lightning-n5fc","title":"Refine regtest LNbits topup logging severity","description":"Review LNbits topup logging to distinguish optional service skips from configured-but-failing errors, and document expectations.\n\nAcceptance criteria:\n- If LNbits is not configured, log remains info or is silent.\n- If LNbits is configured but unreachable/auth fails, log severity and message clearly indicate misconfiguration.\n- Documentation notes LNbits topup is optional for regtest and how to enable it.\n\nEdge cases:\n- Partial config (URL set without API key).\n- Unreachable LNbits host or auth failure.\n\n## Files\n- apps/api/src/services/regtest-fund.ts (modify: log severity based on error type/config)\n- docs/ (update: regtest/LNbits notes)\n\n## QA Evidence\n- Logs: `pnpm dev:logs` with and without LNbits configured (verify log messaging)\n- QA: `pnpm qa:regtest-demo`\n- CI: `pnpm check`\n","status":"open","priority":4,"issue_type":"task","created_at":"2026-01-04T14:48:13.700783-08:00","updated_at":"2026-01-04T14:48:13.700783-08:00"}
{"id":"lightning-n6v5","title":"Security: NWC relay + spend guards","description":"Add safety checks for NWC usage.\n\nImplementation Steps:\n- Validate relay URLs and enforce allowlist.\n- Add per-payment spend limit guard.\n- Mask secrets in logs and UI.\n\nAcceptance Criteria:\n- Invalid relay URLs are rejected.\n- Payment attempts over limit are blocked.\n\nEdge Cases:\n- Secret leak protection in error logs.\n\n\n## Files\n- packages/blog-kit/src/nwc.ts (modify: relay allowlist + limits)\n- apps/gallery/src/SettingsView.tsx (modify: limit controls)","status":"tombstone","priority":2,"issue_type":"task","created_at":"2025-12-19T18:38:03.059526-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","dependencies":[{"issue_id":"lightning-n6v5","depends_on_id":"lightning-9zj0","type":"parent-child","created_at":"2025-12-19T18:38:03.061857-08:00","created_by":"honk","metadata":"{}"},{"issue_id":"lightning-n6v5","depends_on_id":"lightning-qosz","type":"blocks","created_at":"2025-12-19T18:49:11.22876-08:00","created_by":"honk","metadata":"{}"}],"deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"lightning-na5d","title":"Test: /nostr/:id E2E flow","description":"Add Playwright coverage for the public event landing page.\n\nAcceptance Criteria:\n- E2E test loads /nostr/\u003cid\u003e and verifies core fields + reference previews render.\n- Test asserts no console errors and no failed network requests (using qa:regtest-demo fallback if MCP unavailable).\n- Test uses deterministic fixtures/mocks to avoid relay flakiness.\n- Include the standing note: while working, look for refactoring opportunities/bugs/improvements and create new bd tasks as they surface.\n\nEdge Cases:\n- Event not found\n- Profile-only target\n\n## Files\n- apps/gallery/tests/nostr-event.spec.ts (create: e2e test)\n- apps/gallery/tests/helpers.ts (modify: add fixtures/mocks)","status":"tombstone","priority":2,"issue_type":"task","created_at":"2025-12-20T10:32:39.91949-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","dependencies":[{"issue_id":"lightning-na5d","depends_on_id":"lightning-00in","type":"parent-child","created_at":"2025-12-20T10:32:39.921421-08:00","created_by":"honk","metadata":"{}"},{"issue_id":"lightning-na5d","depends_on_id":"lightning-34wa","type":"blocks","created_at":"2025-12-20T10:34:14.851385-08:00","created_by":"honk","metadata":"{}"}],"deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"lightning-naer","title":"Epic: Lightning address + successAction","description":"Complete lightning address + successaction feature.\n\n## Objective\nDeliver the end-to-end capability with backend, frontend, security, and tests.\n\n## Success Criteria\n- [ ] Feature can be used end-to-end in the gallery.\n- [ ] API endpoints are guarded and validated.\n- [ ] Tests cover primary flows and guard rails.\n\n## Out of Scope\n- Accessibility updates.\n- Documentation updates.\n","status":"tombstone","priority":2,"issue_type":"epic","created_at":"2025-12-19T18:37:55.139915-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","dependencies":[{"issue_id":"lightning-naer","depends_on_id":"lightning-61qz","type":"parent-child","created_at":"2025-12-19T18:37:55.141229-08:00","created_by":"honk","metadata":"{}"}],"deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"epic"}
{"id":"lightning-nbmc","title":"Refactor ProfileView to use shared SimplePool","description":"ProfileView currently instantiates new SimplePools for each fetch. Refactor to use a shared/memoized pool instance to reuse connections.","status":"tombstone","priority":3,"issue_type":"task","created_at":"2026-01-03T15:12:35.518161-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","close_reason":"Implemented","dependencies":[{"issue_id":"lightning-nbmc","depends_on_id":"lightning-9ml3","type":"parent-child","created_at":"2026-01-03T15:12:35.520446-08:00","created_by":"honk"}],"deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"lightning-nc6f","title":"Telemetry panel not updating","description":"Investigate why telemetry (gallery UI + API/WS) is not working. Determine failure point (API endpoint, WS connection, env vars) and fix so telemetry data flows in UI.","status":"tombstone","priority":2,"issue_type":"bug","created_at":"2025-12-19T14:22:34.94306-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"bug"}
{"id":"lightning-nd4b","title":"Gallery: fix Lightning column overflow (pay-to-unlock overlaps sidebar)","description":"Lightning tab main column can overflow into the sidebar (pay-to-unlock panel content gets clipped by the Wallets card). Fix layout so the main column never overlaps the right sidebar.","acceptance_criteria":"Pay-to-unlock card never overlaps/clips into sidebar at desktop widths; no console errors/failed local requests; pnpm qa:regtest-demo passes.","status":"tombstone","priority":2,"issue_type":"bug","created_at":"2025-12-14T14:04:58.248813-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","labels":["gallery","lightning","ui"],"deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"bug"}
{"id":"lightning-ndh6","title":"Fix dev:logs to restart API on TS changes","description":"dev:logs passes '--watch' after the script path, so tsx doesn't watch/restart when api TS files change. Use 'tsx watch' (or node --watch) so backend changes apply immediately during UI testing.","acceptance_criteria":"Editing apps/api/src/*.ts triggers automatic server restart (or node --watch reload) and the dev demo stays usable without manual restarts.","status":"tombstone","priority":3,"issue_type":"task","created_at":"2025-12-15T08:24:14.357487-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"lightning-ned","title":"Invoice popover ring/progress animation unclear","description":"Invoice modal animation feels sluggish and duplicate UI. Accept: (1) ring animates clearly for pending and pops on payment; (2) progress bar speed/clarity improved; (3) layout cleaned to avoid duplicated controls; (4) statuses readable at a glance; (5) animation performance smooth.","status":"tombstone","priority":1,"issue_type":"bug","created_at":"2025-12-02T21:26:19.918521-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"bug"}
{"id":"lightning-nkxv","title":"Security/Infra: Gate regtest fund/pay endpoints + env plumbing","description":"Add explicit feature flags for regtest funding/payment routes and wire them into API config; ensure routes return 403/404 when disabled.\n\nAcceptance Criteria:\n- New env flags documented and parsed (e.g., ENABLE_REGTEST_PAY/ENABLE_REGTEST_FUND).\n- /api/regtest/pay and /api/regtest/fund are disabled unless explicitly enabled.\n- Server logs clearly state when regtest endpoints are disabled.\n- No breaking changes for existing regtest demo scripts when flags are enabled.\n\n## Files\n- apps/api/src/env.ts (modify: add regtest feature flags)\n- apps/api/src/server.ts (modify: plumb flags into config/logs)\n- apps/api/src/routes/regtest-pay.ts (modify: guard route when disabled)\n- apps/api/src/routes/regtest-fund.ts (modify: guard route when disabled)\n- env.sample (modify: add flag defaults)\n- .env.example (modify: add flag defaults)\n- scripts/dev-logs.sh (modify: export regtest flags for local dev)\n- scripts/demo-regtest.sh (modify: export regtest flags for demo)","status":"tombstone","priority":2,"issue_type":"task","created_at":"2025-12-19T16:19:03.195105-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","dependencies":[{"issue_id":"lightning-nkxv","depends_on_id":"lightning-k7bf","type":"parent-child","created_at":"2025-12-19T16:19:03.197475-08:00","created_by":"honk","metadata":"{}"}],"deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"lightning-nlmm","title":"gallery: add name attributes to form fields","description":"Chrome DevTools Issues panel shows: \"A form field element should have an id or name attribute\" (count: 12) on https://localhost:4173. Add name (or id) attributes to the relevant \u003cinput\u003e/\u003cselect\u003e/\u003ctextarea\u003e fields so the issue disappears.","acceptance_criteria":"Opening https://localhost:4173 in Chrome shows no 'id or name attribute' form-field issue.","status":"tombstone","priority":3,"issue_type":"bug","created_at":"2025-12-14T02:36:03.834835-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"bug"}
{"id":"lightning-nxsb","title":"Add workflow linting (actionlint, yaml-lint) to CI","status":"tombstone","priority":2,"issue_type":"task","created_at":"2025-12-15T20:29:02.714652-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"lightning-o7d","title":"Mutinynet demo from local against staging LNbits","description":"Point local API/gallery to staging LNbits (lnbits-stg-west) using admin key from Key Vault; run invoice/pay smoke; document env overrides.","status":"tombstone","priority":1,"issue_type":"task","created_at":"2025-12-01T12:23:37.585271-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"lightning-o8sq","title":"Improvements: Epic: Bitcoin network switching hardening","description":"Follow-up improvements from Epic: Bitcoin network switching hardening.\n\n## Objective\nCapture and address workflow/tooling gaps discovered while closing the epic.\n\n## Success Criteria\n- [ ] Dev logs troubleshooting (FORCE_KILL_PORTS, port conflicts) is documented.\n- [ ] Shared eslint config pinning and dependency caveats are documented.\n- [ ] Oracle CLI model fallback failures are resolved or documented with a workaround.\n\n## QA Evidence Requirements\n- Docs updated with clear troubleshooting steps.\n- Any tooling changes verified with the relevant command.\n\n## Risks/Assumptions\n- Some improvements may touch shared tooling outside this repo.\n\n## Out of Scope\n- Feature work from the original epic (already complete).\n","acceptance_criteria":"Docs updated for dev logs and eslint config; oracle CLI fallback documented or fixed.","status":"tombstone","priority":3,"issue_type":"epic","assignee":"honk","estimated_minutes":240,"created_at":"2026-01-02T03:48:17.776402-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","close_reason":"Implemented","labels":["devx","improvements"],"deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"epic"}
{"id":"lightning-o8sq.1","title":"Docs: dev logs port conflict troubleshooting","description":"Add dev logs troubleshooting notes for port conflicts and FORCE_KILL_PORTS usage.\n\n- Implement: document common dev-logs failures (port 3001/4173 in use) and how to restart with FORCE_KILL_PORTS=1.\n- Acceptance criteria:\n  - docs include a troubleshooting entry for port conflicts.\n  - guidance includes FORCE_KILL_PORTS and expected side effects.\n\n## Files\n- docs/testing.md (modify: add dev-logs troubleshooting section)\n\n## QA Evidence\n- Docs updated and reviewed for accuracy.\n- Logs: `FORCE_KILL_PORTS=1 pnpm dev:logs`\n\n## Close Notes\n- Issues encountered: oracle script failed after retrying Claude model.\n- Setup improvements: stabilize oracle CLI model selection.\n- Debug info that would have helped: none.\n","acceptance_criteria":"Docs include FORCE_KILL_PORTS guidance for dev logs port conflicts.","status":"tombstone","priority":3,"issue_type":"task","assignee":"honk","estimated_minutes":60,"created_at":"2026-01-02T03:49:02.894556-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","close_reason":"Implemented","labels":["devx","docs"],"dependencies":[{"issue_id":"lightning-o8sq.1","depends_on_id":"lightning-o8sq","type":"parent-child","created_at":"2026-01-02T03:49:02.897087-08:00","created_by":"honk"}],"deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"lightning-o8sq.2","title":"Docs: document eslint config pinning","description":"Document shared eslint config pinning and related dependency caveats.\n\n- Implement: explain that @nostrstack/config pins eslint/@typescript-eslint versions and may require coordinated upgrades.\n- Acceptance criteria:\n  - docs call out the shared config package as a dependency pin.\n  - note the upgrade coordination steps.\n\n## Files\n- docs/dependencies.md (modify: add eslint config pinning note)\n\n## QA Evidence\n- Docs updated and reviewed for accuracy.\n\n## Close Notes\n- Issues encountered: oracle script failed after retrying Claude model.\n- Setup improvements: stabilize oracle CLI model selection.\n- Debug info that would have helped: none.\n","acceptance_criteria":"Docs call out shared eslint config pinning and upgrade coordination.","status":"tombstone","priority":3,"issue_type":"task","assignee":"honk","estimated_minutes":45,"created_at":"2026-01-02T03:49:17.164119-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","close_reason":"Implemented","labels":["devx","docs"],"dependencies":[{"issue_id":"lightning-o8sq.2","depends_on_id":"lightning-o8sq","type":"parent-child","created_at":"2026-01-02T03:49:17.165597-08:00","created_by":"honk"}],"deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"lightning-o8sq.3","title":"Tooling: stabilize oracle CLI model fallback","description":"Stabilize oracle CLI model fallback failures.\n\n- Implement: keep oracle script running even if Claude fallback fails; record a skip message instead of exiting.\n- Acceptance criteria:\n  - oracle script runs successfully end-to-end at least once with the recommended model fallback.\n  - failures are documented with a clear workaround if they persist.\n\n## Files\n- ~/.codex/skills/oracle/scripts/oracle.sh (modify: improve model fallback handling)\n\n## QA Evidence\n- Oracle: `~/.codex/skills/oracle/scripts/oracle.sh -p \"smoke test\"`\n\n## Close Notes\n- Issues encountered: Claude fallback still fails, but the script now completes and notes the skip.\n- Setup improvements: add a documented list of available Claude models for this environment.\n- Debug info that would have helped: clearer error output from the Claude CLI on model resolution failures.\n","acceptance_criteria":"Oracle script completes successfully or workaround documented.","status":"tombstone","priority":3,"issue_type":"task","assignee":"honk","estimated_minutes":90,"created_at":"2026-01-02T03:49:31.03071-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","close_reason":"Implemented","labels":["devx","tooling"],"dependencies":[{"issue_id":"lightning-o8sq.3","depends_on_id":"lightning-o8sq","type":"parent-child","created_at":"2026-01-02T03:49:31.031918-08:00","created_by":"honk"}],"deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"lightning-obs","title":"Observability: staging diagnostics","description":"Send Container App and Postgres staging telemetry to Log Analytics; keep workspace in westus3.","status":"tombstone","priority":2,"issue_type":"epic","created_at":"2025-11-29T07:40:34.378691-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"epic"}
{"id":"lightning-obs.1","title":"Container App diagnostics to LA workspace","description":"Enable AllMetrics diagnostics for satoshis-api-stg-west to workspace-satoshisstgwestrg83os.","status":"tombstone","priority":2,"issue_type":"task","created_at":"2025-11-29T07:40:46.320968-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","dependencies":[{"issue_id":"lightning-obs.1","depends_on_id":"lightning-obs","type":"parent-child","created_at":"2025-11-29T07:41:10.807401-08:00","created_by":"honk","metadata":"{}"}],"deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"lightning-obs.2","title":"Postgres diagnostics to LA workspace","description":"Enable logs + metrics for satoshis-pg-west to workspace-satoshisstgwestrg83os (sessions, queries, waits, table stats).","status":"tombstone","priority":2,"issue_type":"task","created_at":"2025-11-29T07:40:56.535836-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","dependencies":[{"issue_id":"lightning-obs.2","depends_on_id":"lightning-obs","type":"parent-child","created_at":"2025-11-29T07:41:34.812927-08:00","created_by":"honk","metadata":"{}"}],"deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"lightning-od24","title":"Embed/Blog-kit: Nostr profile section widget","description":"Add a Nostr profile section widget for embed and blog-kit using the existing identity and event APIs.\n\nImplementation notes:\n- Embed: mountNostrProfile with data-nostrstack-profile attribute.\n- Resolve nip05 via /api/nostr/identity and fetch profile via /api/nostr/event/:id.\n- Use renderNostrUserCard for display with loading and error states.\n- Show verified badge for nip05 results and handle missing profile data.\n\nAcceptance criteria:\n- Accepts npub, nprofile, or nip05 input and renders a profile card.\n- Error and empty states are visible and accessible.\n- Uses only allowed relays and safe rendering.\n\nEdge cases:\n- Invalid identifiers, nip05 not found, profile missing.\n\n## Files\n- packages/embed/src/nostrProfile.ts (create)\n- packages/embed/src/index.ts (modify: export + autoMount)\n- packages/embed/src/styles.ts (modify: profile section styles)\n- packages/blog-kit/src/nostr-profile.tsx (create)\n- packages/blog-kit/src/index.ts (modify: export component)\n- packages/embed/src/index.test.ts (modify: add coverage)\n- packages/blog-kit/src/index.test.tsx (modify: add coverage)\n\n## QA Evidence\n- Playwright: pnpm --filter gallery exec playwright test tests/personal-site-kit.spec.ts (fails: No tests found; spec missing, tracked in lightning-j5lt and requires gallery view from lightning-wrhv)\n- Screenshots: pending (requires gallery view + Playwright spec; tracked in lightning-wrhv + lightning-j5lt)\n- DevTools MCP: pending (gallery view not yet available; tracked in lightning-wrhv)\n- Logs: tail -n 200 .logs/dev/api.log .logs/dev/gallery.log (wallet-ws fetch failed + telemetry block poll 503 warnings; follow-ups lightning-etjs + lightning-wglx)\n- CI: pnpm --filter embed test \u0026\u0026 pnpm --filter blog-kit test \u0026\u0026 pnpm lint\n\n## Close Notes\n- Issues encountered: Playwright spec missing (No tests found); DevTools MCP blocked by missing gallery view; oracle.sh failed (Claude model); logs showed wallet-ws fetch failed + telemetry 503 warnings (tracked in lightning-etjs + lightning-wglx).\n- Setup improvements: Add personal-site-kit gallery view + Playwright spec to capture DevTools/screenshot evidence.\n- Debug info that would have helped: Oracle CLI model availability details.","acceptance_criteria":"Profile widget renders from npub or nip05","status":"tombstone","priority":2,"issue_type":"feature","assignee":"unassigned","estimated_minutes":240,"created_at":"2025-12-31T18:35:44.028108-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","close_reason":"Implemented","labels":["area:frontend","feature:personal-site-kit"],"dependencies":[{"issue_id":"lightning-od24","depends_on_id":"lightning-39zu","type":"parent-child","created_at":"2025-12-31T18:35:44.030675-08:00","created_by":"honk"},{"issue_id":"lightning-od24","depends_on_id":"lightning-r63n","type":"blocks","created_at":"2025-12-31T18:40:17.014631-08:00","created_by":"honk"},{"issue_id":"lightning-od24","depends_on_id":"lightning-p8rb","type":"blocks","created_at":"2025-12-31T18:40:26.717311-08:00","created_by":"honk"}],"deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"feature"}
{"id":"lightning-oeqt","title":"Embed pay-to-action: unlock state not realtime (requires reload)","description":"The embedded pay-to-action widget (Unlock / Pay invoice then confirm) does not transition to Unlocked in realtime after the invoice is paid; it only reflects the unlocked state after a full page reload. Should unlock immediately upon /ws/pay invoice-paid event (and/or fallback polling).","acceptance_criteria":"After paying an invoice, the widget updates to Unlocked without a reload; websocket path works behind /api proxy; no console errors.","status":"tombstone","priority":2,"issue_type":"bug","created_at":"2025-12-14T11:54:30.213355-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","labels":["bug","embed","payments","realtime"],"deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"bug"}
{"id":"lightning-oh4","title":"Azure deploy pipeline","description":"Add container build/push (GHCR) and CI deploy job to Azure Container Apps + Postgres; wire secrets; ensure Prisma migrate deploy on startup.","status":"tombstone","priority":2,"issue_type":"task","created_at":"2025-11-28T09:56:16.691438-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","dependencies":[{"issue_id":"lightning-oh4","depends_on_id":"lightning-2lx","type":"parent-child","created_at":"2025-11-29T07:26:07.747852-08:00","created_by":"honk","metadata":"{}"}],"deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"lightning-oi27","title":"Design/Infra: Lightning address profile fields","description":"Add data fields needed for Lightning address profile display and successAction.\n\nImplementation Steps:\n- Add optional successAction config per user/tenant.\n- Store comment allowance or metadata overrides if needed.\n\nAcceptance Criteria:\n- Schema supports successAction config.\n- Migration applies cleanly.\n\nEdge Cases:\n- Null fields do not affect existing users.\n\n\n## Files\n- apps/api/prisma/schema.prisma (modify: add LNURL successAction fields)\n- apps/api/prisma/migrations/* (create: migration for successAction fields)","status":"tombstone","priority":2,"issue_type":"task","created_at":"2025-12-19T18:37:58.333066-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","dependencies":[{"issue_id":"lightning-oi27","depends_on_id":"lightning-naer","type":"parent-child","created_at":"2025-12-19T18:37:58.334792-08:00","created_by":"honk","metadata":"{}"},{"issue_id":"lightning-oi27","depends_on_id":"lightning-96v7","type":"blocks","created_at":"2025-12-19T18:49:13.199696-08:00","created_by":"honk","metadata":"{}"}],"deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"lightning-ojia","title":"Temp check","description":"temp","status":"tombstone","priority":4,"issue_type":"task","created_at":"2026-01-04T14:32:17.711285-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","close_reason":"Created by mistake","deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"lightning-okn8","title":"Test: Zap modal + regtest pay E2E","description":"Expand gallery Playwright coverage for the refreshed zap invoice component and regtest pay flow.\n\nAcceptance Criteria:\n- Social flow test asserts zap modal overlay renders and uses expected layout classes.\n- Regtest demo test pays a zap invoice via regtest pay action and observes success state.\n- Tests tolerate missing relays by skipping only when no posts are available.\n\nEdge Cases:\n- Regtest pay button missing should fail with clear error in regtest smoke.\n- Long invoices should keep QR + invoice box visible (assert presence).\n\n## Files\n- apps/gallery/tests/social-flow.spec.ts (modify: zap modal layout assertions)\n- apps/gallery/tests/demo-regtest.spec.ts (modify: zap pay via regtest action)\n- apps/gallery/scripts/qa-regtest-demo.ts (modify: exercise regtest zap flow)","status":"tombstone","priority":2,"issue_type":"task","created_at":"2025-12-19T17:40:36.336671-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","dependencies":[{"issue_id":"lightning-okn8","depends_on_id":"lightning-m8y7","type":"parent-child","created_at":"2025-12-19T17:40:36.338564-08:00","created_by":"honk","metadata":"{}"},{"issue_id":"lightning-okn8","depends_on_id":"lightning-gfyr","type":"blocks","created_at":"2025-12-19T17:41:14.420103-08:00","created_by":"honk","metadata":"{}"},{"issue_id":"lightning-okn8","depends_on_id":"lightning-g23l","type":"blocks","created_at":"2025-12-19T17:41:14.774119-08:00","created_by":"honk","metadata":"{}"}],"deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"lightning-oprl","title":"Suppress url.parse warning during pnpm install","description":"pnpm install still emits Node DEP0169 url.parse deprecation warning. Investigate source and suppress/upgrade so installs are clean.\n\nAcceptance Criteria:\n- pnpm install runs without DEP0169 warning.\n\n## Files\n- package.json (modify: upgrade offending dependency)\n- pnpm-lock.yaml (modify: lock updates)","status":"tombstone","priority":3,"issue_type":"chore","created_at":"2025-12-19T19:14:28.496085-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"chore"}
{"id":"lightning-ops","title":"Ops: staging API healthy","description":"Get west coast staging Container App running green (/health 200) on Postgres with Prisma migrations, openssl present, env wired from Key Vault and registry credentials in place.","status":"tombstone","priority":1,"issue_type":"epic","created_at":"2025-11-29T07:05:11.151727-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"epic"}
{"id":"lightning-ops.1","title":"Deploy updated API image with openssl + prisma db push","description":"Use ACR-built image sha256:0880fd... on satoshis-api-stg-west, ensure container starts without libssl error and Prisma db push succeeds.","status":"tombstone","priority":1,"issue_type":"task","created_at":"2025-11-29T07:05:31.448091-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","dependencies":[{"issue_id":"lightning-ops.1","depends_on_id":"lightning-ops","type":"parent-child","created_at":"2025-11-29T07:26:13.223291-08:00","created_by":"honk","metadata":"{}"}],"deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"lightning-ops.2","title":"Verify /health 200 and app logs clean","description":"Hit Container App ingress, ensure 200 OK; check revision health state; capture logs; open firewall if needed.","status":"tombstone","priority":1,"issue_type":"task","created_at":"2025-11-29T07:05:53.898432-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","dependencies":[{"issue_id":"lightning-ops.2","depends_on_id":"lightning-ops","type":"parent-child","created_at":"2025-11-29T07:26:18.670053-08:00","created_by":"honk","metadata":"{}"}],"deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"lightning-ops.3","title":"Wire Container App env from Key Vault + secrets hygiene","description":"Use KV satoshis-kv-west for DATABASE_URL, admin keys, opennode/lnbits; remove plaintext from app config; ensure registry secret present.","status":"tombstone","priority":2,"issue_type":"task","created_at":"2025-11-29T07:06:02.955915-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","dependencies":[{"issue_id":"lightning-ops.3","depends_on_id":"lightning-ops","type":"parent-child","created_at":"2025-11-29T07:26:24.153336-08:00","created_by":"honk","metadata":"{}"}],"deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"lightning-ou6","title":"NIP-07 detection logging + dev shim","description":"Hard to debug signer absence; add structured console logs for window.nostr presence, permission errors, and relays; optionally expose a dev-only mock signer (behind env flag) to keep demos working when extensions unavailable.","status":"tombstone","priority":2,"issue_type":"chore","created_at":"2025-12-03T09:24:22.905187-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"chore"}
{"id":"lightning-p3z2","title":"Core: Extract LNURL pay utilities + reusable NWC pay hook","description":"Refactor ZapButton to use shared LNURL and NWC payment utilities for reuse in SendSats.\n\nAcceptance criteria:\n- New LNURL utility covers normalize/decode/encode, metadata + invoice fetch, status URL derivation, paid status.\n- New NWC payment helper handles NWC pay + status messaging.\n- ZapButton uses shared utilities with no behavior regressions.\n- All existing zap flows (NWC/WebLN/QR/regtest) still work.\n\nEdge cases to handle:\n- Invalid lnurl, callback errors, missing metadata fields, NWC timeout.\n\nNote: Always be looking for refactoring opportunities, bug fixes, and improvements. Create new tasks as you encounter them.\n\n## Files\n- packages/blog-kit/src/lnurl.ts (create: shared LNURL helpers)\n- packages/blog-kit/src/nwc-pay.ts (create: shared NWC pay helper)\n- packages/blog-kit/src/zap-button.tsx (modify: use shared helpers)","status":"tombstone","priority":2,"issue_type":"task","created_at":"2025-12-20T13:11:11.90032-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","dependencies":[{"issue_id":"lightning-p3z2","depends_on_id":"lightning-01t7","type":"parent-child","created_at":"2025-12-20T13:11:11.902018-08:00","created_by":"honk","metadata":"{}"},{"issue_id":"lightning-p3z2","depends_on_id":"lightning-7xv7","type":"blocks","created_at":"2025-12-20T13:11:41.513486-08:00","created_by":"honk","metadata":"{}"}],"deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"lightning-p8rb","title":"Security/Infra: CORS allowlist + relay validation config","description":"Harden API embed access and relay validation for cross-site use.\n\nImplementation notes:\n- Add env config for allowed CORS origins (comma list + wildcard for dev).\n- Update Fastify CORS config to use allowlist with safe defaults.\n- Reject wildcard CORS in production via env validation.\n- Extend relay URL validation to support allowlist/denylist patterns.\n- Update env.sample with new vars.\n\nAcceptance criteria:\n- CORS respects allowlist and still supports localhost dev.\n- Relay validator rejects non-wss (except ws://localhost) and denylisted hosts.\n- Existing routes use updated validation without breaking.\n\nEdge cases:\n- Empty allowlist (fallback behavior documented).\n- Mixed protocol relays, IPv6 localhost.\n\n## Files\n- apps/api/src/env.ts (modify: add CORS + relay allowlist config)\n- apps/api/src/server.ts (modify: CORS origin function)\n- apps/api/src/nostr/relay-utils.ts (modify: allowlist/denylist support)\n- env.sample (modify: document new env vars)\n\n## QA Evidence\n- Playwright: N/A (backend only)\n- Screenshots: N/A\n- DevTools MCP: N/A\n- Logs: tail -f .logs/dev/api.log .logs/dev/gallery.log (saw rpc getblockcount 503; follow-up lightning-wglx created)\n- CI: pnpm --filter api test (pass); pnpm lint (pass)\n\n## Close Notes\n- Issues encountered: .logs/dev/api.log contained rpc getblockcount 503 error; created follow-up lightning-wglx. API tests previously emitted USE_HTTPS warning; created follow-up lightning-5q00.\n- Setup improvements: none.\n- Debug info that would have helped: none.\n","acceptance_criteria":"CORS + relay allowlist enforced with safe defaults","status":"tombstone","priority":1,"issue_type":"task","assignee":"unassigned","estimated_minutes":180,"created_at":"2025-12-31T18:34:29.575556-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","close_reason":"Implemented","labels":["area:api","area:security","feature:personal-site-kit"],"dependencies":[{"issue_id":"lightning-p8rb","depends_on_id":"lightning-39zu","type":"parent-child","created_at":"2025-12-31T18:34:29.578938-08:00","created_by":"honk"},{"issue_id":"lightning-p8rb","depends_on_id":"lightning-gfaq","type":"blocks","created_at":"2025-12-31T18:39:02.109277-08:00","created_by":"honk"}],"deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"lightning-pakk","title":"Design: Event landing UI wireframe + states","description":"Create UI/UX guidance for the event landing page, including responsive layout and state behavior.\n\nAcceptance Criteria:\n- Define layout hierarchy (header, metadata, content, reference previews, raw JSON) and responsive behavior.\n- Specify loading, empty, error, and partial-data states.\n- Include accessibility notes (keyboard focus, contrast, link behavior).\n- Include the standing note: while working, look for refactoring opportunities/bugs/improvements and create new bd tasks as they surface.\n\nEdge Cases:\n- Very long content or IDs\n- No references/tags\n- Missing author profile data\n\n## Files\n- docs/nostr-event-ui.md (create: wireframe + layout/state guidance)","status":"tombstone","priority":2,"issue_type":"task","created_at":"2025-12-20T10:31:04.35208-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","dependencies":[{"issue_id":"lightning-pakk","depends_on_id":"lightning-00in","type":"parent-child","created_at":"2025-12-20T10:31:04.355666-08:00","created_by":"honk","metadata":"{}"},{"issue_id":"lightning-pakk","depends_on_id":"lightning-qzcy","type":"blocks","created_at":"2025-12-20T10:34:07.270865-08:00","created_by":"honk","metadata":"{}"}],"deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"lightning-plc8","title":"Feature: Optimistic 'Zapped' state in Feed","description":"Show immediate visual feedback on a post after a successful zap, even before the zap receipt is confirmed on relays.\n\nAcceptance Criteria:\n- Post action bar highlights 'Zap' button or shows a small animation/count increment after zap success toast.\n\nFiles:\n- apps/gallery/src/FeedView.tsx\n\n## QA Evidence\n- `pnpm lint \u0026\u0026 pnpm typecheck` passed.\n- E2E tests attempted but skipped due to environment instability.\n\n## Close Notes\n- Issues encountered: E2E test environment setup for `FeedView` with `installMockRelay` proved difficult to debug blindly (failed to load posts). Existing tests passed logic but failed on network console errors unrelated to changes.\n- Setup improvements: None.","status":"tombstone","priority":2,"issue_type":"task","created_at":"2026-01-02T15:43:20.88735-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","close_reason":"Implemented","deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"lightning-ppjw","title":"devtools: fix Chrome DevTools MCP 'Transport closed'","description":"In Codex runs, calling mcp__chrome-devtools tools fails immediately with 'Transport closed'. This blocks the AGENTS.md requirement to validate UI changes via DevTools MCP. Investigate MCP server config (mcp.config.json), launch scripts (scripts/mcp-chrome.sh + scripts/mcp-devtools-server.sh), and ensure the MCP bridge stays connected/usable.","status":"tombstone","priority":2,"issue_type":"bug","created_at":"2025-12-13T19:35:14.038257-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"bug"}
{"id":"lightning-ppkc","title":"Chore: normalize Playwright screenshot paths","description":"Normalize Playwright screenshot paths so they always land in repo-root docs/screenshots and avoid creating apps/gallery/docs artifacts.\n\n- Implement: add a helper to resolve repo root for screenshot paths and update specs to use it.\n- Acceptance criteria:\n  - Screenshots land under docs/screenshots/... at repo root.\n  - Running `pnpm --filter gallery e2e` no longer creates apps/gallery/docs.\n- Edge cases:\n  - Path resolution should work from any CWD (local + CI).\n  - Preserve existing screenshot filenames.\n\n## Files\n- apps/gallery/tests/helpers.ts (modify: add resolveDocScreenshotPath helper)\n- apps/gallery/tests/social-flow.spec.ts (modify: use resolveDocScreenshotPath)\n- apps/gallery/tests/personal-site-kit.spec.ts (modify: use resolveDocScreenshotPath)\n- docs/screenshots/personal-site-kit/comment-tip-widget-wrapper.png (update)\n- docs/screenshots/personal-site-kit/comments.png (update)\n- docs/screenshots/personal-site-kit/personal-site-kit-view.png (update)\n- docs/screenshots/personal-site-kit/support-section.png (update)\n- docs/screenshots/personal-site-kit/tip-widget.png (update)\n- docs/screenshots/bitcoin-network-status/regtest-status.png (update)\n- docs/screenshots/bitcoin-network-status/mutinynet-status.png (update)\n- docs/screenshots/bitcoin-network-status/mainnet-warning.png (update)\n\n## QA Evidence\n- Playwright: `pnpm --filter gallery e2e`\n- Screenshots: docs/screenshots/personal-site-kit/*.png, docs/screenshots/*.png\n- CI: `pnpm --filter gallery e2e` (NO_COLOR warning present)\n\n## Close Notes\n- Issues encountered: Playwright reran and refreshed tracked screenshots; oracle script failed (sonnet retry then exit 1).\n- Setup improvements: None.\n- Debug info that would have helped: Oracle CLI error output.\n","status":"tombstone","priority":3,"issue_type":"chore","created_at":"2026-01-02T02:44:55.872469-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","close_reason":"Implemented","deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"chore"}
{"id":"lightning-psxl","title":"PostEditor text length validation","description":"Add validation for text length in PostEditor and handle media URL detection.\n\n## QA Evidence\n- `pnpm lint \\u0026\\u0026 pnpm typecheck` passed.\n- Character counter visible in PostEditor.\n- Button disabled when over 1000 characters.\n- Media hint appears when image/video URL is typed.\n\n## Close Notes\n- Issues encountered: None.\n- Setup improvements: None.","status":"tombstone","priority":3,"issue_type":"task","created_at":"2026-01-02T22:44:02.651113-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","close_reason":"Implemented","deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"lightning-pt72","title":"Bug: Fix relay filter errors in gallery feed","description":"Playwright runs show relay NOTICE logs: 'ERROR: bad req: provided filter is not an object'. Investigate Nostr subscription requests and ensure filters are valid objects for all relay calls.\n\nAcceptance Criteria:\n- No relay NOTICE errors about invalid filter objects during feed load.\n- Filters passed to SimplePool/relay subscribe are validated before sending.\n- Add regression coverage if practical.\n\n## Files\n- apps/gallery/src/FeedView.tsx (modify: validate filters before subscribe)\n- apps/gallery/src/RelaysView.tsx (inspect/adjust relay query usage)\n- packages/blog-kit/src/stats.ts (modify if relay queries originate here)","status":"tombstone","priority":2,"issue_type":"bug","created_at":"2025-12-19T17:18:55.249511-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"bug"}
{"id":"lightning-puj","title":"Make dev start all services via make dev with HTTPS + logs","description":"Update Makefile dev to launch API+gallery with HTTPS, unified logs, and relative telemetry WS; remove VITE_TELEMETRY_FORCE_SECURE. Provide clear log-follow instructions.","notes":"make dev now runs scripts/dev-logs.sh (API+gallery w/ HTTPS proxy) and announces .logs/dev paths; telemetry WS resolution uses same-origin wss and removed VITE_TELEMETRY_FORCE_SECURE; env samples/docs updated.","status":"tombstone","priority":1,"issue_type":"chore","created_at":"2025-12-03T11:40:37.015593-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","labels":["tooling"],"deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"chore"}
{"id":"lightning-pwyf","title":"gallery: toast notifications for copy/actions","description":"Add a lightweight toast system for the demo so copy + actions provide tasteful feedback without UI jitter.\n\nScope:\n- Add toast UI (stacked, auto-dismiss) styled with design tokens + motion\n- Update CopyButton to use `nostrstack-btn` and fire toasts on success/failure (avoid layout shift)\n- Keep QA stable (update qa-regtest-demo selectors/expectations if needed)\n- Respect prefers-reduced-motion","acceptance_criteria":"- Copy actions show toast feedback (no layout shift)\n- No console errors and pnpm qa:regtest-demo passes\n- Lint/typecheck/tests pass","status":"tombstone","priority":3,"issue_type":"task","created_at":"2025-12-13T21:28:56.366558-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"lightning-pyv","title":"Vite ws proxy socket error spam in gallery dev logs","description":"Gallery dev server logs are flooded with repeated 'vite ws proxy socket error: This socket has been ended by the other party' during HMR/WS. Investigate proxy config/keepalive and silence or fix to keep logs clean.","status":"tombstone","priority":2,"issue_type":"chore","created_at":"2025-12-03T14:21:55.499548-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","labels":["devex","frontend"],"deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"chore"}
{"id":"lightning-q0hy","title":"Redesign relay cards + live activity (denser, avatar/icon, click-through details)","description":"Redesign relay status cards to be denser and more informative (favicon/avatar, host/domain, software/version, NIPs, latency, send/recv counters, last event). Add click/expand to inspect latest message payload and errors. Make the relay UI feel alive with realtime triggers/animations.","status":"tombstone","priority":2,"issue_type":"feature","created_at":"2025-12-15T04:49:14.038619-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","labels":["nostr","realtime","ui"],"dependencies":[{"issue_id":"lightning-q0hy","depends_on_id":"lightning-khfc","type":"discovered-from","created_at":"2025-12-15T04:49:14.040565-08:00","created_by":"honk","metadata":"{}"}],"deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"feature"}
{"id":"lightning-q1js","title":"Design: Zap regtest payment flow + state machine","description":"Document the end-to-end zap flow (LNURL metadata → zap request → invoice → payment → receipt) with explicit regtest payment handling and UI state transitions.\n\nAcceptance Criteria:\n- Flow diagram/state table covers idle → resolving → invoice → waiting → paid/error paths.\n- Notes how regtest pay is triggered and how success/failure is surfaced.\n- Edge cases documented (missing lud16/lud06, min/max sendable, invoice missing pr, API offline, regtest endpoint disabled).\n\n## Files\n- docs/zap-regtest-flow.md (create: flow + state machine + edge cases)","status":"tombstone","priority":2,"issue_type":"task","created_at":"2025-12-19T16:18:45.079613-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","dependencies":[{"issue_id":"lightning-q1js","depends_on_id":"lightning-k7bf","type":"parent-child","created_at":"2025-12-19T16:18:45.081443-08:00","created_by":"honk","metadata":"{}"}],"deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"lightning-q2sm","title":"Regtest: Bitcoind unhealthy breaks qa:regtest-demo","description":"Fix regtest bitcoind health so qa:regtest-demo can load wallets and show funding/mining toasts.\n\nAcceptance criteria:\n- docker compose exec for bitcoind succeeds (e.g., getblockchaininfo).\n- qa-regtest-demo runs without toast timeout or docker exec I/O errors.\n- regtest bitcoind healthcheck reports healthy after startup.\n\nEdge cases:\n- Docker daemon restarts while dev logs are running.\n- Wallet already exists vs createwallet fallback.\n\n## Files\n- deploy/regtest/docker-compose.yml (modify: healthcheck/startup readiness if needed)\n- scripts/dev-logs.sh (modify: wait for bitcoind readiness or better error surfacing)\n- apps/gallery/scripts/qa-regtest-demo.ts (modify: clearer error handling or retry for wallet init)\n\n## QA Evidence\n- `docker compose -f deploy/regtest/docker-compose.yml ps` (bitcoind healthy)\n- `docker compose -f deploy/regtest/docker-compose.yml exec -T bitcoind bitcoin-cli -regtest -rpcuser=bitcoin -rpcpassword=bitcoin getblockchaininfo` (chain=regtest, blocks=154)\n- `pnpm qa:regtest-demo` (pass)\n- `FAIL_ON_WARN=1 pnpm qa:regtest-demo` (pass)\n- Logs: `.logs/dev/api.log` + `.logs/dev/gallery.log` (checked, no errors/warnings)\n- CI: `pnpm check` (pass)\n\n## Close Notes\n- Issues encountered: qa-regtest-demo expected \"Payment confirmed.\" and failed; telemetry ws warning triggered FAIL_ON_WARN.\n- Setup improvements: None.\n- Debug info that would have helped: Console warning attribution for telemetry ws close.","status":"tombstone","priority":2,"issue_type":"bug","created_at":"2026-01-04T02:01:19.813556-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","close_reason":"Implemented","deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"bug"}
{"id":"lightning-q52q","title":"Chore: prevent stale blog-kit dist exports in dev","description":"Ensure gallery/dev workflow uses fresh @nostrstack/blog-kit exports when new hooks are added.\n\n- Implement: use a dev-only Vite alias for @nostrstack/blog-kit to load workspace src (serve only) so HMR sees new exports without rebuilding dist. Clean up typecheck/lint fallout from prior changes.\n- Acceptance criteria:\n  - `pnpm dev:logs` + gallery load no longer throws missing export errors when new blog-kit exports are added.\n  - HMR picks up blog-kit source changes without manual rebuild.\n- Edge cases:\n  - Preserve production build/export paths.\n  - Avoid slowing dev startup excessively.\n\n## Files\n- apps/gallery/vite.config.ts (modify: dev-only alias to blog-kit src)\n- apps/gallery/src/utils/mock-relay.ts (modify: typecheck fix for relay shim)\n- apps/gallery/tests/bitcoin-network-status.spec.ts (modify: import order to satisfy lint)\n\n## QA Evidence\n- Logs: `pnpm dev:logs` (gallery/api logs clean; no missing export errors)\n- DevTools MCP: console/network checked on /personal-site-kit (no errors; SSL self-signed warning only)\n- CI: `pnpm --filter gallery lint` (TS 5.6 eslint warning noted) and `pnpm --filter gallery typecheck`\n\n## Close Notes\n- Issues encountered: Vite alias initially broke blog-kit styles import; TypeScript errors in mock-relay shim; lint import order warning; oracle script failed (sonnet retry then exit 1).\n- Setup improvements: None.\n- Debug info that would have helped: Oracle CLI error output.\n","status":"tombstone","priority":3,"issue_type":"chore","assignee":"honk","created_at":"2026-01-02T01:55:02.182828-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","close_reason":"Implemented","labels":["build","devx"],"deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"chore"}
{"id":"lightning-q5bx","title":"Test/Deploy: Lightning address + successAction","description":"Add tests for profile card and LNURL successAction responses.\n\nImplementation Steps:\n- Add API tests for successAction payloads.\n- Add UI test for lightning address card rendering.\n\nAcceptance Criteria:\n- Tests cover successAction presence and validation errors.\n- UI test asserts card + QR visibility.\n\nEdge Cases:\n- Missing lightning address skips card rendering.\n\n\n## Files\n- apps/api/src/routes/lnurlp-provider.test.ts (modify: successAction tests)\n- apps/gallery/tests/profile-lightning.spec.ts (create: profile card test)","status":"tombstone","priority":2,"issue_type":"task","created_at":"2025-12-19T18:37:59.768985-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","dependencies":[{"issue_id":"lightning-q5bx","depends_on_id":"lightning-naer","type":"parent-child","created_at":"2025-12-19T18:37:59.770576-08:00","created_by":"honk","metadata":"{}"},{"issue_id":"lightning-q5bx","depends_on_id":"lightning-8h4w","type":"blocks","created_at":"2025-12-19T18:49:08.924343-08:00","created_by":"honk","metadata":"{}"}],"deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"lightning-qae","title":"Regtest faucet endpoint 404","description":"Faucet button POSTs to /regtest/fund and returns 404 (Not Found). Add alias under /api/regtest/fund and point gallery faucet to correct path so regtest funding works in hosted/demo.","status":"tombstone","priority":1,"issue_type":"bug","created_at":"2025-12-02T11:41:49.103082-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"bug"}
{"id":"lightning-qdn9","title":"Core: Nostr event resolver service","description":"Implement the server-side resolver that decodes IDs, selects relays, and fetches events + author profile + references.\n\nAcceptance Criteria:\n- Decode raw IDs (hex + NIP-19/NIP-21 forms) into event/profile/addressable targets.\n- Fetch target event from relays with timeout + retry strategy; hydrate author profile (kind 0).\n- Extract referenced event IDs (e/a/q tags + mention URIs) for preview fetching.\n- Return a normalized response shape for the API route to serve.\n- Include the standing note: while working, look for refactoring opportunities/bugs/improvements and create new bd tasks as they surface.\n\nEdge Cases:\n- Target is a profile (kind 0) or addressable event\n- Relays list empty or partially failing\n- Non-UTF8 content or invalid JSON in profile events\n\n## Files\n- apps/api/src/nostr/event-resolver.ts (create: resolver)\n- apps/api/src/nostr/nostr-utils.ts (create: decode/normalize helpers)\n- apps/api/src/nostr/relay-utils.ts (create: relay selection helpers)","status":"tombstone","priority":2,"issue_type":"task","created_at":"2025-12-20T10:31:27.549231-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","dependencies":[{"issue_id":"lightning-qdn9","depends_on_id":"lightning-00in","type":"parent-child","created_at":"2025-12-20T10:31:27.551046-08:00","created_by":"honk","metadata":"{}"},{"issue_id":"lightning-qdn9","depends_on_id":"lightning-gsdn","type":"blocks","created_at":"2025-12-20T10:34:08.491487-08:00","created_by":"honk","metadata":"{}"},{"issue_id":"lightning-qdn9","depends_on_id":"lightning-tjfx","type":"blocks","created_at":"2025-12-20T10:34:08.865098-08:00","created_by":"honk","metadata":"{}"}],"deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"lightning-qdw","title":"Wallet panel still 404s: add inline connection test","description":"Wallet balance fetch returns 404 frequently. Add: (1) inline connection tester showing full URL and response body; (2) guidance if admin key invalid; (3) success state and skeleton; (4) mask admin key input; (5) debounce refresh and reuse normalized URL in all calls.","status":"tombstone","priority":1,"issue_type":"bug","created_at":"2025-12-02T23:23:41.811913-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"bug"}
{"id":"lightning-qha","title":"Theme select not operable via click","description":"Theme dropdown on Config card doesn't open/respond to normal click (MCP/automation times out); only programmatic value set works. Make it keyboard/mouse accessible.","status":"tombstone","priority":2,"issue_type":"task","created_at":"2025-12-02T14:53:42.869895-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","labels":["demo","ui"],"deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"lightning-qkwi","title":"Core: Client identifier resolver","description":"Build a client-side identifier resolver utility + hook.\n\n- Parse inputs (npub, nprofile, hex pubkey, nip05, lightning address) into a normalized ProfileRef.\n- Use the API NIP-05 proxy for nip05 lookups with AbortController + timeout.\n- Return structured errors for UI display.\n\nAcceptance Criteria\n- Utility returns { pubkey, source, nip05?, lightning? } on valid input.\n- Errors are typed and map to user-friendly messages.\n- No uncaught promise rejections on failed lookups.\n\nEdge Cases\n- Mixed-case bech32, leading/trailing spaces, unsupported prefixes.\n- nip05 host timeout or 404.\n\nNote: Always be looking for refactoring opportunities, bug fixes, and improvements. Create new tasks as you encounter them.\n\n## Files\n- apps/gallery/src/utils/identity.ts (create: resolver + parsers)\n- apps/gallery/src/hooks/useIdentityResolver.ts (create: hook + debounce)","status":"tombstone","priority":2,"issue_type":"task","created_at":"2025-12-25T23:07:31.837873-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","dependencies":[{"issue_id":"lightning-qkwi","depends_on_id":"lightning-yzz6","type":"parent-child","created_at":"2025-12-25T23:07:31.839991-08:00","created_by":"honk","metadata":"{}"}],"deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"lightning-qosz","title":"Core UI: NWC connect + zap pay","description":"Expose NWC connect UI and use it to pay zaps when enabled.\n\nImplementation Steps:\n- Add connect/disconnect UI in Settings.\n- Route zap payment through NWC when configured.\n- Show wallet status + last payment result.\n\nAcceptance Criteria:\n- Users can connect NWC URI and pay zaps.\n- Zap modal shows NWC payment status.\n\nEdge Cases:\n- Missing NWC config falls back to WebLN/QR.\n\n\n## Files\n- apps/gallery/src/SettingsView.tsx (modify: NWC connect UI)\n- apps/gallery/src/styles/nwc.css (create: NWC UI styles)\n- packages/blog-kit/src/zap-button.tsx (modify: NWC pay path)","status":"tombstone","priority":2,"issue_type":"task","created_at":"2025-12-19T18:38:02.716556-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","dependencies":[{"issue_id":"lightning-qosz","depends_on_id":"lightning-9zj0","type":"parent-child","created_at":"2025-12-19T18:38:02.718019-08:00","created_by":"honk","metadata":"{}"},{"issue_id":"lightning-qosz","depends_on_id":"lightning-qzre","type":"blocks","created_at":"2025-12-19T18:49:10.88541-08:00","created_by":"honk","metadata":"{}"},{"issue_id":"lightning-qosz","depends_on_id":"lightning-zriy","type":"blocks","created_at":"2025-12-19T18:49:14.812241-08:00","created_by":"honk","metadata":"{}"}],"deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"lightning-qug4","title":"Pay WS: add richer realtime events (invoice-created, status transitions)","description":"Extend /ws/pay events so UIs can feel more 'alive' (invoice-created, payment-status transitions, item-scoped filtering). Consider including timestamps, retries, and optional correlation ids to drive animations/feeds without polling.","status":"tombstone","priority":2,"issue_type":"feature","created_at":"2025-12-15T04:47:55.228345-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","labels":["api","realtime","ui","ws"],"dependencies":[{"issue_id":"lightning-qug4","depends_on_id":"lightning-khfc","type":"discovered-from","created_at":"2025-12-15T04:47:55.230752-08:00","created_by":"honk","metadata":"{}"}],"deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"feature"}
{"id":"lightning-qzcy","title":"Design: /nostr/:id requirements + API contract","description":"Define the functional requirements and API contract for the public Nostr event landing page.\n\nAcceptance Criteria:\n- Document supported identifier formats (hex, note, nevent, naddr, npub, nprofile) and expected behavior.\n- Specify API response schema for event + author + reference previews + error states.\n- Define caching assumptions (TTL, max entries, stale-while-revalidate) and relay fallback rules.\n- Note performance targets (timeouts, max relays, max references) and UX states (loading/empty/error).\n- Include the standing note: while working, look for refactoring opportunities/bugs/improvements and create new bd tasks as they surface.\n\nEdge Cases:\n- Invalid or malformed IDs\n- Events missing content or tags\n- Relay timeouts or partial failures\n\n## Files\n- docs/nostr-event-landing.md (create: requirements + API contract + assumptions)","status":"tombstone","priority":2,"issue_type":"task","created_at":"2025-12-20T10:30:42.423391-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","dependencies":[{"issue_id":"lightning-qzcy","depends_on_id":"lightning-00in","type":"parent-child","created_at":"2025-12-20T10:33:12.074178-08:00","created_by":"honk","metadata":"{}"}],"deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"lightning-qzre","title":"Core SDK: NWC client","description":"Implement a NIP-47 compatible NWC client for pay_invoice and get_balance.\n\nImplementation Steps:\n- Parse nostr+walletconnect URI and validate relays.\n- Implement request/response encryption + relay publish.\n- Add command helpers for pay_invoice and get_balance.\n\nAcceptance Criteria:\n- NWC client can send pay_invoice and parse responses.\n- Errors map to user-friendly messages.\n\nEdge Cases:\n- Legacy nip04 encryption fallback.\n\n\n## Files\n- packages/blog-kit/src/nwc.ts (create: NWC client)\n- packages/blog-kit/src/index.ts (modify: export NWC utilities)\n- packages/blog-kit/src/utils.ts (modify: add NWC parsing helpers)","status":"tombstone","priority":2,"issue_type":"task","created_at":"2025-12-19T18:38:02.376389-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","dependencies":[{"issue_id":"lightning-qzre","depends_on_id":"lightning-9zj0","type":"parent-child","created_at":"2025-12-19T18:38:02.37809-08:00","created_by":"honk","metadata":"{}"},{"issue_id":"lightning-qzre","depends_on_id":"lightning-h59g","type":"blocks","created_at":"2025-12-19T18:49:10.543696-08:00","created_by":"honk","metadata":"{}"}],"deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"lightning-r15h","title":"Build /nostr/:id event viewer route","description":"Add a public route that accepts any NIP-19 id (note/nevent/nprofile/npub/naddr) and renders an event detail page with server-side fetch + caching.","status":"tombstone","priority":2,"issue_type":"task","created_at":"2025-12-19T15:02:47.347286-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"lightning-r63n","title":"Embed/Blog-kit: Blockchain stats widget (WS + HTTP fallback)","description":"Add a blockchain stats widget for embed and blog-kit that uses telemetry WS with HTTP fallback.\n\nImplementation notes:\n- Embed: mountBlockchainStats with autoMount data attribute (data-nostrstack-blockchain).\n- Use WS /ws/telemetry for live updates and HTTP /api/telemetry/summary for initial load or fallback.\n- UI states: loading, live, stale, error with retry.\n- Use nostrstack tokens and reduced-motion friendly updates.\n\nAcceptance criteria:\n- Widget renders height, mempool, and network fields with live updates.\n- WS disconnect shows stale state and retries with backoff.\n- Works in mock mode when telemetry is unavailable.\n\nEdge cases:\n- WS blocked by CSP or corporate firewall.\n- HTTP summary returns error.\n\n## Files\n- packages/embed/src/blockchainStats.ts (create)\n- packages/embed/src/index.ts (modify: export + autoMount + mount)\n- packages/embed/src/styles.ts (modify: styles for widget)\n- packages/blog-kit/src/blockchain-stats.tsx (create)\n- packages/blog-kit/src/index.ts (modify: export component)\n- packages/embed/src/index.test.ts (modify: add coverage)\n- packages/blog-kit/src/index.test.tsx (modify: add coverage)\n\n## QA Evidence\n- Playwright: pending (personal-site-kit.spec.ts not yet created; tracked in lightning-j5lt and requires gallery view from lightning-wrhv)\n- Screenshots: pending (requires gallery view + Playwright task lightning-j5lt)\n- DevTools MCP: pending (requires gallery view in lightning-wrhv)\n- Logs: tail -n 200 .logs/dev/api.log .logs/dev/gallery.log (api log shows wallet-ws fetch failed + telemetry block poll warnings; follow-ups tracked in lightning-etjs + lightning-wglx)\n- CI: pnpm --filter embed test \u0026\u0026 pnpm --filter blog-kit test \u0026\u0026 pnpm lint\n\n## Close Notes (fill in at closure)\n- Issues encountered: oracle.sh failed (Claude model) so no critique output; DevTools/Playwright blocked pending gallery view + Playwright spec tasks.\n- Setup improvements: none.\n- Debug info that would have helped: oracle CLI failure details.","acceptance_criteria":"Blockchain stats widget renders with WS + HTTP fallback","status":"tombstone","priority":2,"issue_type":"feature","assignee":"unassigned","estimated_minutes":240,"created_at":"2025-12-31T18:35:27.095024-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","close_reason":"Implemented","labels":["area:frontend","feature:personal-site-kit"],"dependencies":[{"issue_id":"lightning-r63n","depends_on_id":"lightning-39zu","type":"parent-child","created_at":"2025-12-31T18:35:27.097982-08:00","created_by":"honk"},{"issue_id":"lightning-r63n","depends_on_id":"lightning-2ser","type":"blocks","created_at":"2025-12-31T18:39:54.268947-08:00","created_by":"honk"},{"issue_id":"lightning-r63n","depends_on_id":"lightning-cd6j","type":"blocks","created_at":"2025-12-31T18:40:05.22991-08:00","created_by":"honk"}],"deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"feature"}
{"id":"lightning-r892","title":"Skill: nostrstack-lightning","description":"Create the nostrstack-lightning skill for LNbits/regtest/staging flows and observability.\n\nAcceptance criteria:\n- SKILL.md documents Lightning guardrails and secret hygiene.\n- References include regtest flows, env/ops notes, and testing commands.\n- Reminder included to look for refactors/bugs and open new issues.\n\n## Files\n- ~/.codex/skills/nostrstack-lightning/SKILL.md (create)\n- ~/.codex/skills/nostrstack-lightning/references/regtest-flows.md (create)\n- ~/.codex/skills/nostrstack-lightning/references/env-and-ops.md (create)\n- ~/.codex/skills/nostrstack-lightning/references/testing.md (create)","status":"tombstone","priority":2,"issue_type":"task","created_at":"2025-12-26T16:50:48.350728-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","dependencies":[{"issue_id":"lightning-r892","depends_on_id":"lightning-eo3j","type":"parent-child","created_at":"2025-12-26T16:50:48.352835-08:00","created_by":"honk"},{"issue_id":"lightning-r892","depends_on_id":"lightning-xmw5","type":"blocks","created_at":"2025-12-26T16:51:37.343097-08:00","created_by":"honk"}],"deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"lightning-rbf","title":"Telemetry card layout broken and no events","description":"Regtest telemetry card overflows and never shows block/tx events. Fix layout and ensure events render. Verify via DevTools MCP; include screenshot after events shown.","status":"tombstone","priority":2,"issue_type":"task","created_at":"2025-12-02T15:41:41.226349-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","labels":["demo","telemetry"],"deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"lightning-rgw","title":"Bolt11 presentation: wrap, copy, QR; remove mock","description":"Tip/pay flows overflow bolt11 text; add wrapping, copy button, QR, and drop mock artifacts (always real). Verify via DevTools MCP with screenshots.","status":"tombstone","priority":2,"issue_type":"task","created_at":"2025-12-02T15:41:56.838228-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","labels":["demo","payments","ui"],"deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"lightning-rms","title":"Enforce log watching + MCP UI verification in dev workflow","description":"Make dev workflow require tailing backend+frontend logs and Chrome DevTools MCP verification for any UI change. Update AGENTS/Makefile/scripts to start all partner services via make dev (API, gallery, bitcoind, lnd, lnbits, ws telemetry) with HTTPS by default, and print which logs to follow. Add docs/checklist and guardrails (preflight) so errors are caught without user reminders.","status":"tombstone","priority":1,"issue_type":"chore","created_at":"2025-12-03T14:02:51.034532-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","labels":["devex","tooling"],"deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"chore"}
{"id":"lightning-rn7","title":"Demo tip LNURL 404 (double slash / tenant)","description":"Tip button hits //.well-known/lnurlp/\u003cuser\u003e and returns 404; ensure baseURL/host wiring uses correct path and demo tenant so LNURLp resolves in regtest.","status":"tombstone","priority":1,"issue_type":"task","created_at":"2025-12-01T13:54:55.715106-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"lightning-rs3l","title":"Test: stabilize regtest-pay timeout","description":"Investigate and stabilize the regtest-pay route test that intermittently times out.\n\nAcceptance Criteria:\n- regtest-pay route tests pass consistently without timeout.\n- Add any needed waits/timeouts or test setup improvements.\n- Document root cause in the test if necessary.\n\n## Files\n- apps/api/src/routes/regtest-pay.test.ts (modify: reduce flakiness/timeouts)","status":"tombstone","priority":3,"issue_type":"task","created_at":"2025-12-20T12:21:48.009715-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"lightning-rts","title":"Wallet WS fails in browser with self-signed HTTPS","description":"Gallery shows 'WebSocket closed before connection established' for wss://localhost:4173/ws/wallet while ws works via node client. Likely TLS trust/proxy issue with self-signed cert; need dev trust flow or proxy to http behind https page.","status":"tombstone","priority":1,"issue_type":"task","created_at":"2025-12-03T18:18:20.143993-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"lightning-rwun","title":"Lightning: Pay-to-unlock panel overlaps sidebar at ~1154px width","description":"At certain viewport widths (~1154px), the Lightning tab pay-to-unlock card overflows its column and is visually clipped/overlapped by the right sidebar card (see user screenshot codex-clipboard-nZDz5S.png). Should never overlap; layout should reflow/wrap or shrink correctly.","status":"tombstone","priority":2,"issue_type":"bug","created_at":"2025-12-14T15:23:07.701784-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"bug"}
{"id":"lightning-rx9x","title":"NIP-07: signer check crashes when enable is undefined","description":"Console shows TypeError: Cannot read properties of undefined (reading 'enable') in Nip07Status.tsx when trying to request permission/check signer. Make signer detection robust across extensions (Alby/nos2x/etc): feature-detect window.nostr + methods, avoid calling enable when absent, show actionable UI state without throwing.","status":"tombstone","priority":1,"issue_type":"bug","created_at":"2025-12-15T00:35:33.031832-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"bug"}
{"id":"lightning-rywx","title":"Bicep: clean up Key Vault secret resources (parent property lint)","description":"Replace child-name secret resources in deploy/azure/main.bicep with parent property syntax to satisfy bicep linter warnings.\n\nAcceptance Criteria:\n- Bicep linter warnings about use-parent-property are resolved.\n\n## QA Evidence\n- `az bicep build --file deploy/azure/main.bicep` returns no warnings.\n\n## Close Notes\n- Issues encountered: None.\n- Setup improvements: None.","acceptance_criteria":"Bicep linter warnings about use-parent-property are resolved.","status":"tombstone","priority":3,"issue_type":"chore","assignee":"honk","created_at":"2026-01-02T15:30:50.314024-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","close_reason":"Implemented","labels":["bicep","infra"],"deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"chore"}
{"id":"lightning-rzq","title":"Local regtest lightning stack for demo","description":"Run LNbits against local LND/bitcoind regtest so invoices can be paid locally; provide scripts/compose and docs; wire API+gallery to use it.","status":"tombstone","priority":1,"issue_type":"task","created_at":"2025-12-01T11:51:33.417624-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"lightning-s3d","title":"LNbits webhook -\u003e pay WS broadcast","description":"Add LNbits webhook receiver in API: supply webhook URL on createCharge, verify payment_hash, mark payment paid, and broadcast over /ws/pay so invoices flip instantly.","status":"tombstone","priority":1,"issue_type":"feature","created_at":"2025-12-03T14:43:40.997064-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","labels":["backend","lnbits","websockets"],"deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"feature"}
{"id":"lightning-s4ws","title":"Infra: Prisma schema + migrations for Nostr event cache","description":"Add persistence for cached Nostr events and reference lookups.\n\nAcceptance Criteria:\n- Add Prisma models for cached events (by id and by addressable coordinates) with TTL and metadata (relays used, fetchedAt).\n- Generate SQLite and Postgres migrations.\n- Document any new indexes needed for lookup by id/coordinate.\n- Include the standing note: while working, look for refactoring opportunities/bugs/improvements and create new bd tasks as they surface.\n\nEdge Cases:\n- Addressable events (kind+pubkey+identifier)\n- Cache invalidation on signature mismatch\n- TTL expiry cleanup strategy\n\n## Files\n- apps/api/prisma/schema.prisma (modify: add cache models)\n- apps/api/prisma/pg/schema.prisma (modify: add cache models)\n- apps/api/prisma/migrations/* (create: sqlite migration)\n- apps/api/prisma/pg-migrations/* (create: postgres migration)","status":"tombstone","priority":2,"issue_type":"task","created_at":"2025-12-20T10:31:12.553922-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","dependencies":[{"issue_id":"lightning-s4ws","depends_on_id":"lightning-00in","type":"parent-child","created_at":"2025-12-20T10:31:12.555577-08:00","created_by":"honk","metadata":"{}"},{"issue_id":"lightning-s4ws","depends_on_id":"lightning-qzcy","type":"blocks","created_at":"2025-12-20T10:34:07.698196-08:00","created_by":"honk","metadata":"{}"}],"deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"lightning-s82n","title":"Bug: Accept npub decode string in profile routing","description":"Fix profile route parsing to handle nip19.decode returning hex strings so /p/npub works again.\\n\\nAcceptance criteria:\\n- resolveProfileRoute accepts npub where nip19.decode returns hex string (current nostr-tools behavior).\\n- ProfileLink navigation to npub routes renders ProfileView.\\n- Unit test covers npub route parsing (hex + npub).\\n\\nEdge cases:\\n- Invalid npub still returns error.\\n\\nNote: Always be looking for refactoring opportunities, bug fixes, and improvements. Create new tasks as you encounter them.\\n\\n## Files\\n- apps/gallery/src/utils/navigation.ts (modify: accept hex string from nip19.decode)\\n- apps/gallery/src/utils/navigation.test.ts (create: route parsing tests)","status":"tombstone","priority":2,"issue_type":"task","created_at":"2025-12-20T20:57:28.208454-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"lightning-saj","title":"OpenNode webhook verification \u0026 replay protection","description":"Verify OpenNode webhook signatures with secret, add idempotency/replay protection, enrich payment records, and cover with tests.","status":"tombstone","priority":1,"issue_type":"task","created_at":"2025-11-28T09:55:51.116653-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","dependencies":[{"issue_id":"lightning-saj","depends_on_id":"lightning-2lx","type":"parent-child","created_at":"2025-11-29T07:26:29.697111-08:00","created_by":"honk","metadata":"{}"}],"deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"lightning-sdph","title":"qa: full regtest demo verification (all buttons + payments + ws + posts)","description":"User request: re-verify regtest demo end-to-end. Run dev stack, click through all UI buttons, verify LNURLp tip + paywall + /api/pay flows, wallet + telemetry websockets, logs tab, and Nostr mock/real behavior. Capture any regressions as new issues.","status":"tombstone","priority":1,"issue_type":"task","created_at":"2025-12-13T14:17:17.812257-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"lightning-sdph.1","title":"gallery: qa fixes (comments container + mock relay + regtest QA script)","description":"Found during regtest QA: duplicate #comments-container IDs caused ambiguous mounts/tests; entering 'mock' in relays caused /mock fetch + wss://mock noise; add a repeatable Playwright-based QA script for the demo.","status":"tombstone","priority":1,"issue_type":"bug","created_at":"2025-12-13T14:48:37.535601-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","dependencies":[{"issue_id":"lightning-sdph.1","depends_on_id":"lightning-sdph","type":"parent-child","created_at":"2025-12-13T14:48:37.536625-08:00","created_by":"honk","metadata":"{}"}],"deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"bug"}
{"id":"lightning-sdx5","title":"Docs: skills catalog","description":"Create a short catalog describing each skill and its trigger phrases.\n\nAcceptance criteria:\n- A catalog file lists each skill name, purpose, and trigger examples.\n- Reminder included to look for refactors/bugs and open new issues.\n\n## Files\n- ~/.codex/skills/nostrstack-skills.md (create: catalog of skills + triggers)","status":"tombstone","priority":3,"issue_type":"task","created_at":"2025-12-26T16:51:06.977074-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","dependencies":[{"issue_id":"lightning-sdx5","depends_on_id":"lightning-eo3j","type":"parent-child","created_at":"2025-12-26T16:51:06.978885-08:00","created_by":"honk"},{"issue_id":"lightning-sdx5","depends_on_id":"lightning-xmw5","type":"blocks","created_at":"2025-12-26T16:52:11.23394-08:00","created_by":"honk"},{"issue_id":"lightning-sdx5","depends_on_id":"lightning-01tk","type":"blocks","created_at":"2025-12-26T16:52:14.804454-08:00","created_by":"honk"},{"issue_id":"lightning-sdx5","depends_on_id":"lightning-4pal","type":"blocks","created_at":"2025-12-26T16:52:18.065506-08:00","created_by":"honk"},{"issue_id":"lightning-sdx5","depends_on_id":"lightning-2r5d","type":"blocks","created_at":"2025-12-26T16:52:22.911747-08:00","created_by":"honk"},{"issue_id":"lightning-sdx5","depends_on_id":"lightning-6nrl","type":"blocks","created_at":"2025-12-26T16:52:28.003131-08:00","created_by":"honk"},{"issue_id":"lightning-sdx5","depends_on_id":"lightning-r892","type":"blocks","created_at":"2025-12-26T16:52:31.149096-08:00","created_by":"honk"}],"deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"lightning-sfie","title":"Stabilize regtest LNbits topup during qa:regtest-demo","description":"Regtest QA logs show 'LNbits topup failed [lncli] FAILED' during pnpm dev:logs + pnpm qa:regtest-demo. Investigate and either fix the LNbits topup flow or make failure handling explicit and non-alarming.\n\nAcceptance criteria:\n- Running `pnpm dev:logs` + `pnpm qa:regtest-demo` does not emit 'LNbits topup failed' warnings, or the warning is replaced with a clearly expected/info log when regtest fallback succeeds.\n- Regtest fund endpoint continues to function (funds available for zap payment in qa script).\n\nEdge cases:\n- LNbits not available or admin key missing.\n- Docker LNbits container not running.\n\n## Files\n- apps/api/src/services/regtest-fund.ts (modify: adjust topup error handling/logging)\n- apps/api/src/routes/regtest-pay.ts (modify: if needed for regtest pay flow)\n- apps/api/src/server.ts (modify: if config gating is required)\n\n## QA Evidence\n- Logs: `FORCE_KILL_PORTS=1 pnpm dev:logs` + tail `.logs/dev/api.log` (shows \"LNbits topup skipped (non-fatal): [lncli] FAILED\" and no \"LNbits topup failed\" warning)\n- QA: `pnpm qa:regtest-demo` (passed; initial run failed before dev servers were up, reran after dev:logs)\n- CI: `pnpm check`\n\n## Close Notes\n- Issues encountered: port 3001 already in use; initial qa:regtest-demo failed before dev servers were running.\n- Setup improvements: use `FORCE_KILL_PORTS=1 pnpm dev:logs` when ports are in use; consider preflight for dev servers (tracked in lightning-3c99).\n- Debug info that would have helped: qa:regtest-demo fails with connection refused when https://localhost:4173 is not running.\n","status":"tombstone","priority":2,"issue_type":"task","created_at":"2026-01-04T14:32:48.639277-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","close_reason":"Implemented","deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"lightning-snt","title":"NIP-07 signer not detected on localhost: add diagnostics and guidance","description":"Users see 'No signer detected' even with NIP-07 extensions. Causes: window.nostr only injected after permission/allowlisted host, secure context required, some extensions disabled by default (Alby NIP-07 toggle). Add UI to show detection steps (window.nostr present?, getPublicKey permission errors), link to extension settings/install, and a retry that surfaces error text.","status":"tombstone","priority":1,"issue_type":"bug","created_at":"2025-12-03T09:24:00.186652-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"bug"}
{"id":"lightning-sof","title":"Telemetry WS fails over wss://localhost:4173/api/ws/telemetry","description":"Console shows WS closed before established at TelemetryCard.tsx:82. Detect mixed-content/invalid host, and add clearer status + fallback to ws:// if wss self-signed. Allow manual endpoint override in UI.","status":"tombstone","priority":1,"issue_type":"bug","created_at":"2025-12-03T01:28:43.75-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"bug"}
{"id":"lightning-sol5","title":"api: make TypeScript typecheck pass","description":"TypeScript typecheck in the API workspace currently fails; fix types/config so it passes cleanly.","acceptance_criteria":"\n\u003e api@0.0.0 typecheck /Users/honk/code/nostrstack/apps/api\n\u003e tsc --noEmit\n\nsrc/nostr/nostr-client.ts(14,32): error TS2345: Argument of type 'string' is not assignable to parameter of type 'Uint8Array'.\nsrc/nostr/nostr-client.ts(24,9): error TS2353: Object literal may only specify known properties, and 'pubkey' does not exist in type 'EventTemplate'.\nsrc/nostr/nostr-client.ts(35,9): error TS2353: Object literal may only specify known properties, and 'pubkey' does not exist in type 'EventTemplate'.\nsrc/nostr/nostr-client.ts(35,26): error TS2339: Property 'pubkey' does not exist on type 'EventTemplate'.\nsrc/nostr/nostr-client.ts(46,17): error TS2339: Property 'on' does not exist on type 'Promise\u003cstring\u003e'.\nsrc/nostr/nostr-client.ts(47,17): error TS2339: Property 'on' does not exist on type 'Promise\u003cstring\u003e'.\nsrc/nostr/nostr-client.ts(47,31): error TS7006: Parameter 'reason' implicitly has an 'any' type.\nsrc/nostr/nostr.test.ts(13,39): error TS2304: Cannot find name 'buildServer'.\nsrc/nostr/nostr.test.ts(76,5): error TS2578: Unused '@ts-expect-error' directive.\nsrc/nostr/nostr.test.ts(78,5): error TS2578: Unused '@ts-expect-error' directive.\nsrc/nostr/relaylist.test.ts(50,43): error TS2345: Argument of type 'Console' is not assignable to parameter of type 'FastifyBaseLogger'.\n  Type 'Console' is missing the following properties from type 'FastifyBaseLogger': child, level, fatal, silent\nsrc/routes/lnurlp-callback.test.ts(12,39): error TS2304: Cannot find name 'buildServer'.\nsrc/routes/lnurlp-callback.ts(129,15): error TS2353: Object literal may only specify known properties, and 'rawBody' does not exist in type 'Omit\u003cFastifyContextConfig \u0026 FastifyRouteConfig, \"method\" | \"url\"\u003e'.\nsrc/routes/lnurlp-callback.ts(165,29): error TS18046: 'request.params' is of type 'unknown'.\nsrc/routes/lnurlp-callback.ts(174,11): error TS2741: Property 'created_at' is missing in type '{ kind: number; content: string; tags: string[][]; }' but required in type 'EventTemplate'.\nsrc/routes/pay.ts(23,60): error TS2554: Expected 2 arguments, but got 3.\nsrc/routes/regtest-pay.ts(34,9): error TS2322: Type '(request: any, reply: any) =\u003e Promise\u003cany\u003e' is not assignable to type 'RouteShorthandOptionsWithHandler\u003cRawServerDefault, IncomingMessage, ServerResponse\u003cIncomingMessage\u003e, RouteGenericInterface, unknown, FastifySchema, FastifyTypeProviderDefault, FastifyBaseLogger\u003e'.\nsrc/routes/regtest-pay.ts(34,66): error TS7006: Parameter 'request' implicitly has an 'any' type.\nsrc/routes/regtest-pay.ts(34,75): error TS7006: Parameter 'reply' implicitly has an 'any' type.\nsrc/routes/regtest-pay.ts(73,41): error TS2345: Argument of type 'RouteShorthandOptionsWithHandler\u003cRawServerDefault, IncomingMessage, ServerResponse\u003cIncomingMessage\u003e, RouteGenericInterface, unknown, FastifySchema, FastifyTypeProviderDefault, FastifyBaseLogger\u003e' is not assignable to parameter of type 'RouteHandlerMethod\u003cRawServerDefault, IncomingMessage, ServerResponse\u003cIncomingMessage\u003e, RouteGenericInterface, unknown, { ...; }, FastifyTypeProviderDefault, FastifyBaseLogger\u003e'.\n  Type 'RouteShorthandOptionsWithHandler\u003cRawServerDefault, IncomingMessage, ServerResponse\u003cIncomingMessage\u003e, RouteGenericInterface, unknown, FastifySchema, FastifyTypeProviderDefault, FastifyBaseLogger\u003e' provides no match for the signature '(this: FastifyInstance\u003c...\u003e, request: FastifyRequest\u003cRouteGenericInterface, RawServerDefault, IncomingMessage, { readonly body: { readonly type: \"object\"; readonly properties: { readonly invoice: { ...; }; }; readonly required: readonly [...]; readonly additionalProperties: false; }; }, FastifyTypeProviderDefault, unknown, FastifyBaseLogger, ResolveFastifyRequestType\u003c...\u003e\u003e, reply: FastifyReply\u003c...\u003e): unknown'.\nsrc/routes/regtest-pay.ts(74,45): error TS2345: Argument of type 'RouteShorthandOptionsWithHandler\u003cRawServerDefault, IncomingMessage, ServerResponse\u003cIncomingMessage\u003e, RouteGenericInterface, unknown, FastifySchema, FastifyTypeProviderDefault, FastifyBaseLogger\u003e' is not assignable to parameter of type 'RouteHandlerMethod\u003cRawServerDefault, IncomingMessage, ServerResponse\u003cIncomingMessage\u003e, RouteGenericInterface, unknown, { ...; }, FastifyTypeProviderDefault, FastifyBaseLogger\u003e'.\n  Type 'RouteShorthandOptionsWithHandler\u003cRawServerDefault, IncomingMessage, ServerResponse\u003cIncomingMessage\u003e, RouteGenericInterface, unknown, FastifySchema, FastifyTypeProviderDefault, FastifyBaseLogger\u003e' provides no match for the signature '(this: FastifyInstance\u003c...\u003e, request: FastifyRequest\u003cRouteGenericInterface, RawServerDefault, IncomingMessage, { readonly body: { readonly type: \"object\"; readonly properties: { readonly invoice: { ...; }; }; readonly required: readonly [...]; readonly additionalProperties: false; }; }, FastifyTypeProviderDefault, unknown, FastifyBaseLogger, ResolveFastifyRequestType\u003c...\u003e\u003e, reply: FastifyReply\u003c...\u003e): unknown'.\nsrc/routes/telemetry-ws.ts(4,44): error TS7016: Could not find a declaration file for module 'ws'. '/Users/honk/code/nostrstack/node_modules/.pnpm/ws@8.18.3/node_modules/ws/wrapper.mjs' implicitly has an 'any' type.\n  Try `npm i --save-dev @types/ws` if it exists or add a new declaration (.d.ts) file containing `declare module 'ws';`\nsrc/routes/telemetry-ws.ts(39,43): error TS7006: Parameter 'ws' implicitly has an 'any' type.\nsrc/routes/telemetry-ws.ts(46,26): error TS7006: Parameter 'client' implicitly has an 'any' type.\nsrc/routes/telemetry-ws.ts(60,25): error TS7006: Parameter 'ws' implicitly has an 'any' type.\nsrc/routes/telemetry-ws.ts(140,25): error TS2339: Property 'height' does not exist on type 'TelemetryEvent'.\n  Property 'height' does not exist on type '{ type: \"tx\"; txid: string; time: number; }'.\nsrc/routes/telemetry-ws.ts(141,23): error TS2339: Property 'hash' does not exist on type 'TelemetryEvent'.\n  Property 'hash' does not exist on type '{ type: \"tx\"; txid: string; time: number; }'.\nsrc/routes/telemetry-ws.ts(159,30): error TS2339: Property 'height' does not exist on type 'TelemetryEvent'.\n  Property 'height' does not exist on type '{ type: \"tx\"; txid: string; time: number; }'.\nsrc/routes/telemetry-ws.ts(160,28): error TS2339: Property 'hash' does not exist on type 'TelemetryEvent'.\n  Property 'hash' does not exist on type '{ type: \"tx\"; txid: string; time: number; }'.\nsrc/routes/wallet-ws.ts(2,44): error TS7016: Could not find a declaration file for module 'ws'. '/Users/honk/code/nostrstack/node_modules/.pnpm/ws@8.18.3/node_modules/ws/wrapper.mjs' implicitly has an 'any' type.\n  Try `npm i --save-dev @types/ws` if it exists or add a new declaration (.d.ts) file containing `declare module 'ws';`\nsrc/routes/wallet-ws.ts(26,43): error TS7006: Parameter 'ws' implicitly has an 'any' type.\nsrc/routes/wallet-ws.ts(35,26): error TS7006: Parameter 'client' implicitly has an 'any' type.\nsrc/routes/wallet-ws.ts(72,31): error TS7006: Parameter 'ws' implicitly has an 'any' type.\nsrc/server.test.ts(9,39): error TS2304: Cannot find name 'buildServer'.\nsrc/services/pay-events.ts(2,44): error TS7016: Could not find a declaration file for module 'ws'. '/Users/honk/code/nostrstack/node_modules/.pnpm/ws@8.18.3/node_modules/ws/wrapper.mjs' implicitly has an 'any' type.\n  Try `npm i --save-dev @types/ws` if it exists or add a new declaration (.d.ts) file containing `declare module 'ws';`\nsrc/services/pay-events.ts(11,43): error TS7006: Parameter 'ws' implicitly has an 'any' type.\nsrc/services/pay-events.ts(18,26): error TS7006: Parameter 'client' implicitly has an 'any' type.\nsrc/telemetry/tracing.ts(26,5): error TS2741: Property 'getRawAttributes' is missing in type 'import(\"/Users/honk/code/nostrstack/node_modules/.pnpm/@opentelemetry+resources@1.27.0_@opentelemetry+api@1.9.0/node_modules/@opentelemetry/resources/build/src/Resource\").Resource' but required in type 'import(\"/Users/honk/code/nostrstack/node_modules/.pnpm/@opentelemetry+resources@2.2.0_@opentelemetry+api@1.9.0/node_modules/@opentelemetry/resources/build/src/Resource\").Resource'.\n/Users/honk/code/nostrstack/apps/api:\n ERR_PNPM_RECURSIVE_RUN_FIRST_FAIL  api@0.0.0 typecheck: `tsc --noEmit`\nExit status 2 exits 0 with no TS errors.","status":"tombstone","priority":2,"issue_type":"chore","created_at":"2025-12-13T23:02:01.102091-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"chore"}
{"id":"lightning-spj","title":"Comments section redesign with live updates","description":"Redesign comments area: tighter layout, live updates for posted/received messages, align with real-relay-only requirement. Verify via DevTools MCP by posting and observing live updates; include screenshots.","status":"tombstone","priority":2,"issue_type":"task","created_at":"2025-12-02T15:42:42.450184-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","labels":["demo","nostr","ui"],"deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"lightning-sylw","title":"Tooling: Extend static injector for share/profile/blockchain","description":"Extend the static injector to support optional share, profile, and blockchain sections.\n\nImplementation notes:\n- Add CLI flags for enabling share/profile/blockchain blocks.\n- Allow passing profile id (npub or nip05) and share metadata (url/title) via flags or config.\n- Preserve idempotency markers and avoid touching non-HTML/MD files.\n\nAcceptance criteria:\n- Default behavior remains tip + comments only.\n- New flags insert additional sections with correct data attributes.\n- Injector remains idempotent and safe on nested folders.\n\nEdge cases:\n- Missing required params for new sections.\n- Unsupported file types in target dir.\n\n## Files\n- packages/injector/bin/nostrstack-inject.js (modify: new flags + snippet)\n- packages/injector/package.json (modify: CLI help/description)\n\n## QA Evidence\n- Playwright: N/A (tooling only)\n- Screenshots: N/A\n- DevTools MCP: N/A\n- Logs: pnpm dev:logs (NO_COLOR warnings observed; follow-up lightning-dds0)\n- CI: pnpm lint\n\n## Close Notes\n- Issues encountered: oracle.sh failed because Claude model 'sonnet' unavailable (exit 1).\n- Setup improvements: track NO_COLOR warnings in lightning-dds0.\n- Debug info that would have helped: oracle CLI summary for failed model.","acceptance_criteria":"Injector supports optional new sections without breaking defaults","status":"tombstone","priority":3,"issue_type":"task","assignee":"unassigned","estimated_minutes":180,"created_at":"2025-12-31T18:37:28.087295-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","close_reason":"Implemented","labels":["area:tooling","feature:personal-site-kit"],"dependencies":[{"issue_id":"lightning-sylw","depends_on_id":"lightning-39zu","type":"parent-child","created_at":"2025-12-31T18:37:28.089514-08:00","created_by":"honk"},{"issue_id":"lightning-sylw","depends_on_id":"lightning-gyio","type":"blocks","created_at":"2025-12-31T18:42:03.227756-08:00","created_by":"honk"}],"deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"lightning-t0xk","title":"Test: E2E journey (zap two posts + send 500 sats)","description":"Add Playwright coverage for the user journey: login, zap two posts, navigate to profile, send 500 sats.\n\nAcceptance criteria:\n- Test logs in, zaps 2 posts (with guard if insufficient posts), navigates to /p/\u003cnpub\u003e.\n- SendSats modal opens and invoice is requested (mock LNURL responses).\n- Assert no console errors.\n\nEdge cases to handle:\n- No posts available, LNURL metadata missing, slow response.\n\nNote: Always be looking for refactoring opportunities, bug fixes, and improvements. Create new tasks as you encounter them.\n\n## Files\n- apps/gallery/tests/payment-journey.spec.ts (create: new flow test)\n- apps/gallery/tests/helpers/lnurl-mocks.ts (create: shared mocks)","status":"tombstone","priority":2,"issue_type":"task","created_at":"2025-12-20T13:11:13.864139-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","dependencies":[{"issue_id":"lightning-t0xk","depends_on_id":"lightning-01t7","type":"parent-child","created_at":"2025-12-20T13:11:13.865779-08:00","created_by":"honk","metadata":"{}"},{"issue_id":"lightning-t0xk","depends_on_id":"lightning-7gdg","type":"blocks","created_at":"2025-12-20T13:11:44.867064-08:00","created_by":"honk","metadata":"{}"}],"deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"lightning-tce","title":"Startup floods pay status 404s","description":"During fresh make dev the gallery polls /api/lnurlp/pay/status/\u003cold id\u003e every 5s before any invoice is created, causing log spam. Need to ensure no status polling until a new invoice/ref is set and clear any persisted refs earlier (or invalidate on app init).","status":"tombstone","priority":2,"issue_type":"task","created_at":"2025-12-03T18:57:07.421651-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"lightning-tdy","title":"Demo lacks visible test wallet info","description":"Wallet panel/env not showing in demo; surface LNbits URL/admin key or guided steps so users can create/send from a test wallet.","status":"tombstone","priority":2,"issue_type":"task","created_at":"2025-12-01T13:55:11.102633-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"lightning-tfcs","title":"QR Lab: verify mode causes QR to flicker/re-render","description":"In the gallery QR Lab, enabling verification (strict/auto) causes the QR preview to rapidly flicker / re-render, likely due to render loop or effect dependencies. Fix to render once per input change.","status":"tombstone","priority":1,"issue_type":"bug","created_at":"2025-12-14T23:18:05.189002-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"bug"}
{"id":"lightning-ti4","title":"Compact npub/nsec key chip + fix overflow in Profile/Signer","description":"Create shared compact key chip component with hex/npub/nsec toggle, middle truncation, copy button, consistent padding; replace Profile \u0026 signer + Logged-in Nostr card fields to prevent overflow and improve layout.","status":"tombstone","priority":1,"issue_type":"task","created_at":"2025-12-02T12:18:26.089596-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"lightning-tikt","title":"Security: BOLT12 access + amount guards","description":"Add validation and guardrails for BOLT12 offer creation/payment.\n\nImplementation Steps:\n- Validate offer amounts, recurrence constraints, and metadata bounds.\n- Enforce feature flag + environment guardrails for production vs regtest.\n\nAcceptance Criteria:\n- Invalid offer parameters are rejected with clear errors.\n- Guardrails prevent unsafe amounts or unconfigured providers.\n\nEdge Cases:\n- Recurrence windows outside limits are rejected.\n\n## Files\n- apps/api/src/services/bolt12.ts (modify: validation + limits)\n- apps/api/src/routes/bolt12.ts (modify: validation responses)\n- apps/api/src/env.ts (modify: limit config)","status":"tombstone","priority":2,"issue_type":"task","created_at":"2025-12-19T18:47:27.017781-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","dependencies":[{"issue_id":"lightning-tikt","depends_on_id":"lightning-8i8k","type":"parent-child","created_at":"2025-12-19T18:47:27.019336-08:00","created_by":"honk","metadata":"{}"},{"issue_id":"lightning-tikt","depends_on_id":"lightning-2bsi","type":"blocks","created_at":"2025-12-19T18:49:12.544676-08:00","created_by":"honk","metadata":"{}"}],"deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"lightning-tjfx","title":"Infra: Cache config + server wiring","description":"Introduce config knobs for event resolver caching and relay fetch behavior.\n\nAcceptance Criteria:\n- Add env settings for cache TTL, max entries, max relays, and fetch timeout.\n- Wire settings into API server config so resolver can access them.\n- Update env sample / defaults accordingly.\n- Include the standing note: while working, look for refactoring opportunities/bugs/improvements and create new bd tasks as they surface.\n\nEdge Cases:\n- Missing env vars (defaults applied)\n- Non-positive or out-of-range values\n\n## Files\n- apps/api/src/env.ts (modify: add config schema/defaults)\n- apps/api/src/server.ts (modify: pass config to resolver)\n- env.sample (modify: document new envs)","status":"tombstone","priority":2,"issue_type":"task","created_at":"2025-12-20T10:31:19.262528-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","dependencies":[{"issue_id":"lightning-tjfx","depends_on_id":"lightning-00in","type":"parent-child","created_at":"2025-12-20T10:31:19.264399-08:00","created_by":"honk","metadata":"{}"},{"issue_id":"lightning-tjfx","depends_on_id":"lightning-qzcy","type":"blocks","created_at":"2025-12-20T10:34:08.073553-08:00","created_by":"honk","metadata":"{}"}],"deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"lightning-tolk","title":"Core API: LNURL-auth endpoints","description":"Implement LNURL-auth request + callback endpoints.\n\nImplementation Steps:\n- Add endpoint to mint k1 and return LNURL-auth URL.\n- Add callback endpoint to verify sig/key and mark session verified.\n- Expose session status endpoint for polling.\n\nAcceptance Criteria:\n- Endpoints respond with LNURL-auth payloads and status.\n- Verified sessions are persisted and retrievable.\n\nEdge Cases:\n- Invalid signatures return error with no state changes.\n\n\n## Files\n- apps/api/src/routes/lnurl-auth.ts (create: request/callback/status routes)\n- apps/api/src/services/lnurl-auth.ts (create: k1 lifecycle + verification)\n- apps/api/src/routes/index.ts (modify: register lnurl-auth routes)","status":"tombstone","priority":2,"issue_type":"task","created_at":"2025-12-19T18:37:56.908111-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","dependencies":[{"issue_id":"lightning-tolk","depends_on_id":"lightning-j0ns","type":"parent-child","created_at":"2025-12-19T18:37:56.910186-08:00","created_by":"honk","metadata":"{}"},{"issue_id":"lightning-tolk","depends_on_id":"lightning-96v7","type":"blocks","created_at":"2025-12-19T18:49:06.643317-08:00","created_by":"honk","metadata":"{}"}],"deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"lightning-tup","title":"Alby auth blank page on localhost https","description":"When clicking authorize in Alby on https://localhost:4173, the extension opens a blank page instead of permission prompt. Investigate extension site-access + self-signed cert flow, check console errors, CSP, and document fix (likely needs trusted cert / correct origin).","status":"tombstone","priority":1,"issue_type":"bug","created_at":"2025-12-02T12:18:12.446876-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"bug"}
{"id":"lightning-txq","title":"Relay pill metadata + live activity","description":"Improve relay pill: show metadata (name, software if available via NIP-11), connection status, messages sent/recv counters, and live pulse when traffic arrives. Allow dynamic add relay UI to attach this info. Wire to comment widget events and potential WS telemetry.","status":"tombstone","priority":1,"issue_type":"task","created_at":"2025-12-02T11:31:24.776088-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"lightning-txu3","title":"api: fix vitest config deps.inline deprecation","description":"Vitest warns that test.deps.inline is deprecated; update config to the supported key(s).","acceptance_criteria":"pnpm --filter api test runs without the deps.inline deprecation warning.","status":"tombstone","priority":3,"issue_type":"chore","created_at":"2025-12-13T23:24:18.332489-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"chore"}
{"id":"lightning-ty20","title":"Group mentions in NotificationsView","description":"Group Kind 1 mention notifications if they target the same event, similar to how likes and zaps are grouped.","status":"tombstone","priority":3,"issue_type":"task","created_at":"2026-01-03T15:12:46.661764-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","close_reason":"Implemented","dependencies":[{"issue_id":"lightning-ty20","depends_on_id":"lightning-9ml3","type":"parent-child","created_at":"2026-01-03T15:12:46.664075-08:00","created_by":"honk"}],"deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"lightning-u2x4","title":"Infra: Normalize API base for regtest actions","description":"Normalize API base handling for regtest actions (zap pay + fund) so localhost HTTP works even when the gallery is served over HTTPS, and so both components share the same resolution logic.\n\nAcceptance Criteria:\n- Single helper resolves API base with safe rules (no forced https for localhost unless explicitly configured).\n- Zap pay and Add funds use the same resolver and respect `VITE_API_BASE_URL` + context overrides.\n- If API base is `mock` or empty, regtest actions are hidden/disabled with a clear error.\n\nEdge Cases:\n- `VITE_API_BASE_URL=/api` should resolve to same-origin requests.\n- `http://localhost:3001` should not be upgraded to https when served from `https://localhost:4173`.\n\n## Files\n- apps/gallery/src/utils/api-base.ts (create: shared resolver)\n- apps/gallery/src/Sidebar.tsx (modify: use shared resolver for regtest fund)\n- packages/blog-kit/src/zap-button.tsx (modify: use shared resolver or injected base)\n- packages/blog-kit/src/context.tsx (modify: add resolver-friendly config fields if needed)\n- apps/gallery/src/App.tsx (modify: pass resolved API base into provider)","status":"tombstone","priority":2,"issue_type":"task","created_at":"2025-12-19T17:39:30.91073-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","dependencies":[{"issue_id":"lightning-u2x4","depends_on_id":"lightning-m8y7","type":"parent-child","created_at":"2025-12-19T17:39:30.916338-08:00","created_by":"honk","metadata":"{}"}],"deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"lightning-ufg3","title":"Eliminate remaining DevTools form id/name warnings","description":"Chrome DevTools still reports a couple 'form field missing id or name' warnings in the demo. Audit remaining inputs and ensure they have stable id/name/label wiring so Playwright/QA is cleaner and accessibility improves.","status":"tombstone","priority":3,"issue_type":"bug","created_at":"2025-12-15T04:47:29.540559-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","labels":["dx","qa","ui"],"dependencies":[{"issue_id":"lightning-ufg3","depends_on_id":"lightning-khfc","type":"discovered-from","created_at":"2025-12-15T04:47:29.543213-08:00","created_by":"honk","metadata":"{}"}],"deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"bug"}
{"id":"lightning-ujr6","title":"API: reply cycle guardrails","description":"Strengthen reply filtering to ignore short cyclic reply chains (A-\u003eB-\u003eA) in /api/nostr/event replies.\n\nAcceptance criteria:\n- Replies that reference each other in a short cycle are excluded from the reply list.\n- Behavior is deterministic for mixed root/reply markers.\n- Existing valid reply lists remain unaffected for non-cyclic inputs.\n\nEdge cases:\n- Multiple \"e\" tags with root/reply/mention markers.\n- Duplicate reply events across relays.\n- Large reply sets with mixed valid/invalid references.\n\n## Files\n- apps/api/src/nostr/event-resolver.ts (modify: cycle filtering)\n- apps/api/src/nostr/threading.ts (modify: add helper for cycle detection if needed)\n- apps/api/src/nostr/event-resolver.test.ts (modify: add A-\u003eB-\u003eA cycle test)\n\n## QA Evidence\n- Unit/API: pnpm --filter api test -- nostr/event-resolver.test.ts (pass; runs full api suite)\n- Typecheck: pnpm --filter api typecheck (pass)\n- Lint: pnpm --filter api lint (pass)\n- CI: pnpm check (pass)\n\n## Close Notes\n- Issues encountered: vitest run executed full api suite when filtering to nostr/event-resolver.test.ts\n- Setup improvements: document vitest filtering behavior for api tests\n- Debug info that would have helped: expected test filter still triggers related suites\n","status":"tombstone","priority":3,"issue_type":"task","created_at":"2026-01-04T02:17:24.200795-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","close_reason":"Implemented","dependencies":[{"issue_id":"lightning-ujr6","depends_on_id":"lightning-3aij","type":"parent-child","created_at":"2026-01-04T02:18:28.144069-08:00","created_by":"honk"}],"deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"lightning-uubw","title":"Embed pay-to-action: safe fallback verification when WS unavailable","description":"Today the embed pay-to-action widget relies on /ws/pay for realtime unlock, and only verifies on the 'I've paid' button if the host page wires verifyPayment(). When WS is blocked (CSP/proxy) and verifyPayment isn't provided, the widget can't confirm payment.","acceptance_criteria":"mountPayToAction can optionally verify payment without host wiring (polling or new API), and the widget never shows 'Unlocked' unless confirmed; no console errors.","status":"tombstone","priority":3,"issue_type":"feature","created_at":"2025-12-14T12:17:28.2523-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","labels":["embed","payments","realtime"],"deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"feature"}
{"id":"lightning-uvav","title":"Bug: Allow large LNURL-withdraw amounts","description":"Fix LNURL-withdraw session storage to handle msat values above 32-bit limits.\\n\\nAcceptance Criteria:\\n- Withdraw sessions can store msat values above 2^31 without Prisma errors.\\n- LNURL-withdraw responses serialize min/max without BigInt JSON errors.\\n\\n## Files\\n- apps/api/prisma/schema.prisma (modify: change withdraw fields to BigInt)\\n- apps/api/src/services/lnurl-withdraw.ts (modify: BigInt conversions)\\n- apps/api/prisma/migrations/**/migration.sql (create: widen columns)","status":"tombstone","priority":2,"issue_type":"task","created_at":"2025-12-20T01:01:22.40981-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","dependencies":[{"issue_id":"lightning-uvav","depends_on_id":"lightning-1kbq","type":"blocks","created_at":"2025-12-20T01:01:33.579422-08:00","created_by":"honk","metadata":"{}"}],"deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"lightning-v01","title":"Relay card redesign for rich relay metadata","description":"Make relay list items information-dense and alive: surface NIP-11 metadata, uptime/latency/activity, connection health, and interactions.","notes":"RelayCard redesign shipped (UI, recv/min), metadata pipeline enhanced, Storybook added. Push blocked (403).","status":"tombstone","priority":2,"issue_type":"epic","created_at":"2025-12-03T10:55:20.099-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"epic"}
{"id":"lightning-v01.1","title":"Research relay metadata + inspirations; produce redesign plan","description":"Audit RelayCard UI; list available metadata (NIP-11 etc.) and competitive examples; propose detailed redesign scope.","design":"See docs/relay-card-redesign.md for research, metadata inventory, and UX plan.","notes":"Drafted redesign doc and created follow-on tasks lightning-v01.2, v01.3, v01.4.","status":"tombstone","priority":2,"issue_type":"task","created_at":"2025-12-03T10:55:28.94139-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","labels":["design"],"dependencies":[{"issue_id":"lightning-v01.1","depends_on_id":"lightning-v01","type":"parent-child","created_at":"2025-12-03T10:55:28.942306-08:00","created_by":"honk","metadata":"{}"}],"deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"lightning-v01.2","title":"Implement RelayCard UI redesign","description":"Apply new layout/visuals to relay pill: metadata chips, activity graph, status+uptime badges, interactions (copy/share/open).","notes":"RelayCard now shows description, supported NIPs, auth/payment chips, latency status, copy/open actions; comments/profile pass metadata from stats.","status":"tombstone","priority":2,"issue_type":"task","created_at":"2025-12-03T10:55:37.342128-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","labels":["frontend"],"dependencies":[{"issue_id":"lightning-v01.2","depends_on_id":"lightning-v01","type":"parent-child","created_at":"2025-12-03T10:55:37.34306-08:00","created_by":"honk","metadata":"{}"},{"issue_id":"lightning-v01.2","depends_on_id":"lightning-v01.1","type":"blocks","created_at":"2025-12-03T10:55:37.343945-08:00","created_by":"honk","metadata":"{}"}],"deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"lightning-v01.3","title":"Enhance relay metadata + stats pipeline","description":"Fetch/cache NIP-11 Relay Information Document fields, probe latency/uptime, store recent recv/send counts; expose to UI.","notes":"Added recvPerMin with rolling 60s history in RelayStats; RelayCard now shows /min; callers wired to pass metadata.","status":"tombstone","priority":2,"issue_type":"task","created_at":"2025-12-03T10:55:46.972223-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","labels":["backend"],"dependencies":[{"issue_id":"lightning-v01.3","depends_on_id":"lightning-v01","type":"parent-child","created_at":"2025-12-03T10:55:46.973211-08:00","created_by":"honk","metadata":"{}"},{"issue_id":"lightning-v01.3","depends_on_id":"lightning-v01.1","type":"blocks","created_at":"2025-12-03T10:55:46.974277-08:00","created_by":"honk","metadata":"{}"}],"deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"lightning-v01.4","title":"Add stories/tests for redesigned RelayCard","description":"Storybook/playwright/unit coverage for relay item: renders NIP-11 fields, activity sparkline, status states, theming.","notes":"Storybook story covers online/offline/sending/dark states for RelayCard; tests run via pnpm --filter gallery test.","status":"tombstone","priority":2,"issue_type":"task","created_at":"2025-12-03T10:55:56.849689-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","labels":["testing"],"dependencies":[{"issue_id":"lightning-v01.4","depends_on_id":"lightning-v01","type":"parent-child","created_at":"2025-12-03T10:55:56.850398-08:00","created_by":"honk","metadata":"{}"},{"issue_id":"lightning-v01.4","depends_on_id":"lightning-v01.2","type":"blocks","created_at":"2025-12-03T10:55:56.851403-08:00","created_by":"honk","metadata":"{}"}],"deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"lightning-v2ss","title":"Remove mock Nostr logic","description":"Remove all mock relay and mock Nostr logic from the codebase as it is no longer needed. This includes packages/embed, apps/gallery, and any other references.","status":"tombstone","priority":1,"issue_type":"task","created_at":"2025-12-15T14:11:05.345942-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"lightning-v2wl","title":"Fix login error: String must be lowercase or uppercase","status":"tombstone","priority":0,"issue_type":"bug","created_at":"2025-12-17T11:56:20.214309-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","labels":["bug","ui"],"deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"bug"}
{"id":"lightning-v4a","title":"Ensure Telemetry WS runs alongside API/Gallery","description":"TelemetryCard keeps failing wss://localhost:4173/ws/telemetry; ensure telemetry WebSocket server starts with demo stack (regtest/mutinynet/mainnet), exposes /ws/telemetry over matching scheme/host, and certs handled for localhost. Add health check and auto-fallback config.","status":"tombstone","priority":2,"issue_type":"bug","created_at":"2025-12-03T10:43:54.512144-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","labels":["api","telemetry"],"deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"bug"}
{"id":"lightning-v5o8","title":"Beads: configure sync-branch + upgrade bd CLI","description":"bd doctor warned sync-branch is unset and CLI is behind latest (0.29.0 vs 0.30.6). Set sync-branch in .beads/config.yaml and upgrade bd tooling.","status":"tombstone","priority":2,"issue_type":"chore","created_at":"2025-12-19T14:17:22.04277-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"chore"}
{"id":"lightning-vdlp","title":"Test/Deploy: LNURL-withdraw flow","description":"Add tests for withdraw endpoints and UI flow.\n\nImplementation Steps:\n- Add API tests for request/callback/status.\n- Add UI test for withdraw QR render.\n\nAcceptance Criteria:\n- Tests cover invalid invoice and double callback.\n- UI test asserts QR and status text.\n\nEdge Cases:\n- Disabled feature hides withdraw UI.\n\n\n## Files\n- apps/api/src/routes/lnurl-withdraw.test.ts (create: API tests)\n- apps/gallery/tests/withdraw.spec.ts (create: UI test)","status":"tombstone","priority":2,"issue_type":"task","created_at":"2025-12-19T18:38:01.655324-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","dependencies":[{"issue_id":"lightning-vdlp","depends_on_id":"lightning-1kbq","type":"parent-child","created_at":"2025-12-19T18:38:01.656655-08:00","created_by":"honk","metadata":"{}"},{"issue_id":"lightning-vdlp","depends_on_id":"lightning-3vk2","type":"blocks","created_at":"2025-12-19T18:49:10.2213-08:00","created_by":"honk","metadata":"{}"}],"deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"lightning-vdwv","title":"Feat: Rich Media Embedding (images/video)","description":"Enhance the event renderer to detect and embed images and videos from URLs in post content.\n\nDescription:\n- Update `renderContentWithLinks` to identify image extensions (jpg, jpeg, png, gif, webp) and video extensions (mp4, mov, webm).\n- Render them as `\u003cimg /\u003e` or `\u003cvideo controls /\u003e` tags with max-width/responsive styles.\n- Ensure 'lazy' loading for images.\n- Handle mixed text and media content.\n\nAcceptance Criteria:\n- Posts with image URLs display the image inline.\n- Posts with video URLs display a playable video player.\n- Mixed text/links/media renders correctly.\n\nEdge Cases:\n- Broken images (alt text fallback).\n- Multiple media links in one post.\n\n## Files\n- apps/gallery/src/nostr/eventRenderers.tsx (modify: media detection and rendering)\n- apps/gallery/src/gallery.css (modify: media container styles)\n- apps/gallery/tests/media-render.spec.ts (create: visual test)\n\n## QA Evidence\n- Playwright: `pnpm --filter gallery e2e tests/media-render.spec.ts`\n- Screenshots: `docs/screenshots/social/media-embed.png`\n- CI: `pnpm lint \u0026\u0026 pnpm typecheck`","status":"tombstone","priority":2,"issue_type":"task","created_at":"2026-01-02T23:09:17.272648-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","dependencies":[{"issue_id":"lightning-vdwv","depends_on_id":"lightning-1uzs","type":"parent-child","created_at":"2026-01-02T23:09:17.275568-08:00","created_by":"honk"}],"deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"lightning-vg8f","title":"Display Bitcoin node information and network status","status":"tombstone","priority":1,"issue_type":"feature","created_at":"2025-12-17T15:48:01.8095-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","labels":["ui"],"deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"feature"}
{"id":"lightning-vhct","title":"Core: Build SendSats modal/button component","description":"Implement a reusable SendSats component for profile payments using LNURL pay + NWC/WebLN/QR flows.\n\nAcceptance criteria:\n- Component accepts target pubkey + lightning address/lnurl, default amount, preset amounts, optional note.\n- Amount input + presets enforce min/max from LNURL metadata.\n- Supports NWC payment when connected; falls back to WebLN and manual invoice/QR.\n- Optional NIP-57 zap request with p-tag (no e-tag) for profile tips.\n- Accessible modal (focus trap, ESC close, aria labels) consistent with zap UI.\n\nEdge cases to handle:\n- No lightning address, invoice not returned, NWC error, WebLN not available.\n\nNote: Always be looking for refactoring opportunities, bug fixes, and improvements. Create new tasks as you encounter them.\n\n## Files\n- packages/blog-kit/src/send-sats.tsx (create: modal/button component)\n- packages/blog-kit/src/index.ts (modify: export SendSats component)","status":"tombstone","priority":2,"issue_type":"task","created_at":"2025-12-20T13:11:12.721798-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","dependencies":[{"issue_id":"lightning-vhct","depends_on_id":"lightning-01t7","type":"parent-child","created_at":"2025-12-20T13:11:12.723976-08:00","created_by":"honk","metadata":"{}"},{"issue_id":"lightning-vhct","depends_on_id":"lightning-g1hn","type":"blocks","created_at":"2025-12-20T13:11:42.23696-08:00","created_by":"honk","metadata":"{}"},{"issue_id":"lightning-vhct","depends_on_id":"lightning-98zj","type":"blocks","created_at":"2025-12-20T13:11:42.590234-08:00","created_by":"honk","metadata":"{}"}],"deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"lightning-vhxu","title":"Fix NIP-07 signer enable error + improve permission UX","description":"In Nostr profile, clicking 'Request permission' can throw TypeError reading 'enable' (signer undefined). Guard against missing window.nostr / extension APIs, show clear states, and avoid console errors.","status":"tombstone","priority":2,"issue_type":"bug","created_at":"2025-12-15T04:49:32.090073-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","labels":["nostr","ui"],"dependencies":[{"issue_id":"lightning-vhxu","depends_on_id":"lightning-khfc","type":"discovered-from","created_at":"2025-12-15T04:49:32.093396-08:00","created_by":"honk","metadata":"{}"}],"deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"bug"}
{"id":"lightning-vms","title":"Logs layout and status badges need redesign","description":"Logs tab UI cluttered and unclear (see screenshot). Redesign with clear status badges, better spacing, and consistent styles; ensure backend/frontend streams visible. Research best log viewer layouts.","status":"tombstone","priority":2,"issue_type":"task","created_at":"2025-12-02T16:11:03.984024-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","labels":["demo","logging","ui"],"deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"lightning-vvvb","title":"Ops: Regtest pay telemetry + zap status logging","description":"Add structured logs/telemetry for regtest pay events so zap payments are observable during dev/regtest.\n\nAcceptance Criteria:\n- Regtest pay route logs include invoice prefix + payment hash when successful.\n- Pay event hub emits a consistent payload for regtest zap payments.\n- Observability docs updated with regtest zap signals.\n\n## Files\n- apps/api/src/routes/regtest-pay.ts (modify: structured logging fields)\n- apps/api/src/services/pay-events.ts (modify: ensure event payload includes regtest zap info)\n- docs/lightning-observability.md (modify: document regtest zap telemetry)","status":"tombstone","priority":2,"issue_type":"task","created_at":"2025-12-19T16:20:05.10402-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","dependencies":[{"issue_id":"lightning-vvvb","depends_on_id":"lightning-k7bf","type":"parent-child","created_at":"2025-12-19T16:20:05.106064-08:00","created_by":"honk","metadata":"{}"},{"issue_id":"lightning-vvvb","depends_on_id":"lightning-8swr","type":"blocks","created_at":"2025-12-19T16:20:46.299928-08:00","created_by":"honk","metadata":"{}"}],"deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"lightning-vydw","title":"UI: RelaysView Editor","description":"Upgrade RelaysView to allow managing the user's relay list.\n\nDescription:\n- Add 'My Relays' section with editable list.\n- Add 'Bootstrap Relays' section (read-only).\n- Implement 'Add Relay' input with basic validation (must be wss://).\n- Implement 'Remove' action for user relays.\n- Implement 'Save Changes' button that calls `saveRelays` from context.\n- Show 'Connecting...' status for newly added relays before save.\n\nAcceptance Criteria:\n- User can add a valid wss:// relay.\n- User can remove a relay.\n- Saving triggers Kind 10002 publish.\n- Invalid URLs are rejected.\n\n## Files\n- apps/gallery/src/RelaysView.tsx (modify: add editor UI)\n- apps/gallery/src/gallery.css (modify: add styles for editor)\n\n## QA Evidence\n- Screenshots: `docs/screenshots/relays/editor.png`\n- DevTools: Verify publish event on save.\n- CI: `pnpm lint \u0026\u0026 pnpm typecheck`","status":"tombstone","priority":2,"issue_type":"task","created_at":"2026-01-03T14:24:08.569723-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","close_reason":"Implemented","dependencies":[{"issue_id":"lightning-vydw","depends_on_id":"lightning-jeeg","type":"parent-child","created_at":"2026-01-03T14:24:08.572858-08:00","created_by":"honk"},{"issue_id":"lightning-vydw","depends_on_id":"lightning-y86h","type":"blocks","created_at":"2026-01-03T14:24:53.34843-08:00","created_by":"honk"}],"deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"lightning-vypd","title":"Chore: Sync bd DB version","description":"bd doctor reports DB version 0.29.0 vs CLI 0.27.2. Run bd migrate and upgrade bd CLI to latest to avoid schema drift.\\n\\nAcceptance Criteria\\n- bd doctor shows no version mismatch warnings.\\n\\n## Files\\n- (none)","status":"tombstone","priority":4,"issue_type":"chore","created_at":"2025-12-25T23:10:31.334675-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","close_reason":"Implemented","deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"chore"}
{"id":"lightning-vzov","title":"Chore: address Prisma update notice in dev logs","description":"Investigate Prisma update warning shown during pnpm dev:logs and decide whether to upgrade Prisma or suppress the notification in dev.\n\n- Implement: suppress Prisma update notice in dev logs via PRISMA_HIDE_UPDATE_MESSAGE.\n- Acceptance criteria:\n  - pnpm dev:logs no longer prints the Prisma update banner.\n  - Migrations/tests remain green.\n- Edge cases:\n  - Ensure env var remains overridable for debugging.\n- Risks/assumptions:\n  - Prisma upgrade may require code changes and re-seeding (not pursued here).\n\n## Files\n- scripts/dev-logs.sh (modify: set PRISMA_HIDE_UPDATE_MESSAGE default)\n\n## QA Evidence\n- Logs: `FORCE_KILL_PORTS=1 pnpm dev:logs` (no Prisma update banner)\n- Tests: `pnpm --filter api test`\n- CI: `pnpm --filter api test`\n\n## Close Notes\n- Issues encountered: pnpm dev:logs initially failed because port 3001 was in use; prisma migrate deploy required DATABASE_URL; oracle script failed after retrying Claude model.\n- Setup improvements: document FORCE_KILL_PORTS usage for dev logs; stabilize oracle CLI model selection.\n- Debug info that would have helped: PRISMA_HIDE_UPDATE_MESSAGE env var location in Prisma CLI help output.\n","acceptance_criteria":"pnpm dev:logs shows no Prisma update banner; pnpm --filter api test passes.","status":"tombstone","priority":4,"issue_type":"chore","assignee":"honk","estimated_minutes":60,"created_at":"2026-01-02T00:39:11.387366-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","close_reason":"Implemented","labels":["devx","logs","prisma"],"deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"chore"}
{"id":"lightning-w0j","title":"Pre-mainnet test hardening","description":"Broaden coverage on regtest + mutinynet, add UI/demo e2e flows, and gate mainnet cutover on green pipeline.","notes":"w0j.2/3/4/5/6 closed; remaining work depends on mainnet cutover (lightning-hpu) and any new gaps discovered.","status":"tombstone","priority":1,"issue_type":"epic","created_at":"2025-11-30T12:08:03.845152-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","close_reason":"Molecule complete","deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"epic"}
{"id":"lightning-w0j.1","title":"CI regtest e2e (Playwright)","description":"Run playwright lnurlp and wallet flows against local regtest stack (docker-compose), fix strip-types flag, add to CI gate.","notes":"Added NODE_OPTIONS fix and regtest Playwright steps to CI + deploy workflows; smoke script now accepts 200/201.","status":"tombstone","priority":1,"issue_type":"task","created_at":"2025-11-30T12:08:16.441697-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","dependencies":[{"issue_id":"lightning-w0j.1","depends_on_id":"lightning-w0j","type":"parent-child","created_at":"2025-11-30T12:08:16.44246-08:00","created_by":"honk","metadata":"{}"}],"deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"lightning-w0j.2","title":"Mutinynet staging smoke in CI","description":"Use staging LNbits admin key from KV to create \u0026 poll invoices on mutinynet; add retry/poll + webhook check.","notes":"Mutinynet smoke script added (apps/api/scripts/mutinynet-smoke.ts) and pnpm test:mutinynet hook; skips when no staging key set.","status":"tombstone","priority":1,"issue_type":"task","created_at":"2025-11-30T12:08:29.853325-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","dependencies":[{"issue_id":"lightning-w0j.2","depends_on_id":"lightning-w0j","type":"parent-child","created_at":"2025-11-30T12:08:29.854053-08:00","created_by":"honk","metadata":"{}"}],"deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"lightning-w0j.3","title":"API contract tests for pay-to-act","description":"Add contract/e2e tests for LNURLp, pay-to-unlock, webhook replay protection, nostr login flows; fixtures for tenants.","notes":"Added nostr well-known Playwright test (passes locally); fixed null pubkey filter in nostr endpoint.","status":"tombstone","priority":1,"issue_type":"task","created_at":"2025-11-30T12:08:46.049183-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","dependencies":[{"issue_id":"lightning-w0j.3","depends_on_id":"lightning-w0j","type":"parent-child","created_at":"2025-11-30T12:08:46.049934-08:00","created_by":"honk","metadata":"{}"}],"deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"lightning-w0j.4","title":"Demo e2e flows (tip, paywall, comments)","description":"Gallery/demo: add UI components to pay tip, unlock article, and post Nostr comment; write Playwright flows that pay invoices via test payer and assert content unlock.","notes":"Gallery real-payment toggle added; warning banner when disabled; e2e still green.","status":"tombstone","priority":1,"issue_type":"task","created_at":"2025-11-30T12:08:59.482904-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","dependencies":[{"issue_id":"lightning-w0j.4","depends_on_id":"lightning-w0j","type":"parent-child","created_at":"2025-11-30T12:08:59.483617-08:00","created_by":"honk","metadata":"{}"}],"deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"lightning-w0j.5","title":"Stability checks: balance + settle assertions","description":"Add asserts that wallet balances decrease/increase after payment settlement on regtest \u0026 mutinynet; poll until settled; fail on timeout.","notes":"Balance helper added; will assert delta once payer secrets enable staging payments.","status":"tombstone","priority":2,"issue_type":"task","created_at":"2025-11-30T12:09:17.358564-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","dependencies":[{"issue_id":"lightning-w0j.5","depends_on_id":"lightning-w0j","type":"parent-child","created_at":"2025-11-30T12:09:17.35933-08:00","created_by":"honk","metadata":"{}"}],"deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"lightning-w0j.6","title":"Settlement assertions (regtest + mutinynet)","description":"Add balance+settle polling for pay/to/unlock and invoices across regtest and staging mutinynet; fail on timeout; reuse admin/payer keys.","notes":"Added balance helper lnbitsBalance; will wire into settlement assertions next.","status":"tombstone","priority":1,"issue_type":"task","created_at":"2025-11-30T12:25:32.821769-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","dependencies":[{"issue_id":"lightning-w0j.6","depends_on_id":"lightning-w0j","type":"parent-child","created_at":"2025-11-30T12:25:32.822536-08:00","created_by":"honk","metadata":"{}"}],"deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"lightning-w23b","title":"Gallery/embed: centralize pay WebSocket URL resolution","description":"Pay event WS URL logic is duplicated across gallery (App.tsx + PayToUnlockCard.tsx) and embed. Centralize into a shared helper so /ws/pay works consistently for apiBase values like '/api' (vite proxy) and absolute API origins.","acceptance_criteria":"Single helper used for pay WS URL construction; local demo still connects to /ws/pay; qa:regtest-demo passes.","status":"tombstone","priority":3,"issue_type":"task","created_at":"2025-12-14T13:12:01.075359-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","labels":["payments","techdebt"],"dependencies":[{"issue_id":"lightning-w23b","depends_on_id":"lightning-h4vc","type":"discovered-from","created_at":"2025-12-14T13:12:01.078398-08:00","created_by":"honk","metadata":"{}"}],"deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"lightning-w2g","title":"Profile pubkey overflow fix","description":"Profile \u0026 signer card shows pubkey overflowing across cards. Add truncation/wrapping strategy with copy affordances, ensure long keys do not break layout in light/dark themes, and keep monospaced presentation for clarity. Acceptance: no overflow at common widths (desktop/mobile), copy buttons still work, and visual hierarchy intact. Final step: verify via Chrome DevTools MCP with long keys and attach screenshot.","status":"tombstone","priority":2,"issue_type":"task","created_at":"2025-12-02T16:19:31.978342-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","labels":["demo","nostr"],"deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"lightning-w30f","title":"Blog-kit: SupportSection + comment-tip wrapper","description":"Add higher-level blog-kit components for personal site usage.\n\nImplementation notes:\n- Add SupportSection component that composes TipWidget, ShareButton, and Comments.\n- Add CommentTipWidget React wrapper for embed mountCommentTipWidget.\n- Update PersonalSiteKitView to use mock baseUrl + disable tip feed for clean QA.\n- Remove unused embed test import to keep lint clean.\n\nAcceptance criteria:\n- SupportSection renders with sensible defaults and theming.\n- CommentTipWidget mounts and cleans up embed widget safely.\n- Gallery demo runs without tip feed network noise.\n\nEdge cases:\n- Missing lnAddress or share URL.\n- Empty relay list.\n\n## Files\n- packages/blog-kit/src/support-section.tsx (create)\n- packages/blog-kit/src/comment-tip-widget.tsx (create)\n- packages/blog-kit/src/index.ts (modify: export components)\n- packages/blog-kit/src/index.test.tsx (modify: coverage)\n- packages/embed/src/index.test.ts (modify: remove unused import)\n- apps/gallery/src/PersonalSiteKitView.tsx (modify: mock baseUrl + disable tip feed)\n- docs/screenshots/personal-site-kit/*.png (create: QA screenshots)\n\n## QA Evidence\n- Playwright: pnpm --filter gallery exec playwright test tests/personal-site-kit.spec.ts\n- Screenshots: docs/screenshots/personal-site-kit/personal-site-kit-view.png, docs/screenshots/personal-site-kit/support-section.png, docs/screenshots/personal-site-kit/comment-tip-widget-wrapper.png\n- DevTools MCP: console/network checked; SSL warning from self-signed dev cert only\n- Logs: tail -n 120 .logs/dev/api.log .logs/dev/gallery.log (no errors/warnings)\n- CI: pnpm --filter blog-kit test \u0026\u0026 pnpm lint\n\n## Close Notes\n- Issues encountered: Oracle CLI failed (Gemini quota); DevTools console shows self-signed SSL warning from Vite basic-ssl.\n- Setup improvements: Document SSL warning for local QA or add a no-SSL dev option.\n- Debug info that would have helped: Oracle model availability/limits surfaced in CLI output.\n","acceptance_criteria":"SupportSection component available in blog-kit","status":"tombstone","priority":3,"issue_type":"feature","assignee":"honk","estimated_minutes":180,"created_at":"2025-12-31T18:36:51.325641-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","close_reason":"Implemented SupportSection and CommentTipWidget in blog-kit, added comprehensive tests, and created gallery demo view with Playwright coverage.","labels":["area:frontend","feature:personal-site-kit"],"dependencies":[{"issue_id":"lightning-w30f","depends_on_id":"lightning-39zu","type":"parent-child","created_at":"2025-12-31T18:36:51.327808-08:00","created_by":"honk"},{"issue_id":"lightning-w30f","depends_on_id":"lightning-1969","type":"blocks","created_at":"2025-12-31T18:41:40.098276-08:00","created_by":"honk"}],"deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"feature"}
{"id":"lightning-wccj","title":"Maintenance: resolve bd doctor warnings","description":"Address bd doctor warnings for DB/JSONL sync, sync branch staleness, and duplicate issues.\n\nAcceptance criteria:\n- `npx bd --no-daemon doctor --json` returns overall_ok true (or remaining warnings documented).\n- DB/JSONL sync count mismatch resolved.\n- Sync branch health restored or documented with rationale.\n- Duplicate issues reviewed and merged or documented.\n\nEdge cases:\n- Avoid destructive cleanup of needed history.\n- Keep issue IDs stable.\n\n## Files\n- .beads/issues.jsonl (modify: doctor fixes/merges)\n- .beads/export_hashes.json (modify: regenerated if required)\n\n## QA Evidence\n- `npx bd --no-daemon doctor --fix --json` (repo fingerprint updated, sync branch reset, stale closed issues cleaned; child-parent deps and duplicates require manual review)\n- `npx bd --no-daemon sync --import-only --json`\n- `npx bd --no-daemon sync --flush-only --json`\n- `npx bd --no-daemon sync --json`\n- `npx bd --no-daemon duplicates --json` (0 groups)\n- `npx bd --no-daemon doctor --json` (overall_ok true; warnings remain for CLI version, child-parent deps, stale issues/molecules, duplicates warning)\n\n## Close Notes\n- Issues encountered: bd doctor --fix required interactive choices (repo fingerprint update); warnings remain for CLI version, child-parent deps, stale closed issues/molecules, and duplicates warning despite duplicates=0.\n- Setup improvements: follow-up task needed to decide on child-parent dependency cleanup, CLI upgrade, and stale issue cleanup policies.\n- Debug info that would have helped: why doctor reports duplicates when bd duplicates finds none.","status":"tombstone","priority":3,"issue_type":"chore","created_at":"2026-01-04T13:32:40.806716-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","close_reason":"Implemented","deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"chore"}
{"id":"lightning-we36","title":"Fix notifications section not working","status":"tombstone","priority":1,"issue_type":"bug","created_at":"2025-12-17T15:48:07.159111-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","labels":["bug","ui"],"deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"bug"}
{"id":"lightning-weax","title":"UI: Unified animated CopyButton","description":"Create one polished CopyButton with animation (copied state), robust clipboard fallback, and consistent styling. Replace ad-hoc copy controls across gallery (and other packages where applicable) to use it. Ensure console/network are clean and QA passes.","status":"tombstone","priority":2,"issue_type":"feature","created_at":"2025-12-14T21:04:02.466884-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"feature"}
{"id":"lightning-wglx","title":"Bug: Telemetry WS backpressure handling","description":"Harden telemetry websocket polling when RPC is overloaded (503 work queue).\n\nImplementation notes:\n- Add backoff/jitter when RPC returns 503 or timeout.\n- Guard against overlapping polls (in-flight guard).\n- Add RPC timeout to avoid stuck poller.\n- Rate-limit warning logs and log 503 backpressure at info.\n- Add telemetry-ws.test.ts coverage for backoff timing + log level.\n\nAcceptance criteria:\n- Telemetry WS stays connected when RPC returns 503.\n- Logs do not spam errors during overload; at most one info/warn per backoff window.\n- When RPC recovers, telemetry resumes.\n\nEdge cases:\n- RPC unreachable at startup.\n- Sudden recovery after multiple failures.\n\n## Files\n- apps/api/src/routes/telemetry-ws.ts (modify: backoff + error handling)\n- apps/api/src/routes/telemetry-ws.test.ts (create: overload/backoff coverage)\n\n## QA Evidence\n- Playwright: N/A (backend only)\n- Screenshots: N/A\n- DevTools MCP: N/A\n- Logs: tail -f -n 0 .logs/dev/api.log .logs/dev/gallery.log (no new entries during tail; historical 503 entry exists)\n- CI: pnpm --filter api test (pass); pnpm lint (pass)\n\n## Close Notes\n- Issues encountered: .logs/dev/api.log still contains historical 503 entry; verified no new entries during tail. Oracle flagged hung-request risk; added rpc timeout. Created follow-up lightning-1r7v for telemetry backpressure metrics.\n- Setup improvements: none.\n- Debug info that would have helped: none.\n","acceptance_criteria":"Telemetry WS handles RPC overload without log spam","status":"tombstone","priority":2,"issue_type":"bug","assignee":"unassigned","estimated_minutes":150,"created_at":"2026-01-01T01:59:04.978908-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","close_reason":"Implemented","labels":["area:api","feature:personal-site-kit"],"dependencies":[{"issue_id":"lightning-wglx","depends_on_id":"lightning-39zu","type":"parent-child","created_at":"2026-01-01T01:59:04.982155-08:00","created_by":"honk"}],"deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"bug"}
{"id":"lightning-wja","title":"LNbits as wallet core","description":"Adopt LNbits as primary LightningProvider; support pluggable funding sources (Blink/self-host/etc.), swap without API changes.","status":"tombstone","priority":1,"issue_type":"epic","created_at":"2025-11-28T18:23:24.861195-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"epic"}
{"id":"lightning-wja.1","title":"Add LNbits provider abstraction","description":"Implement LightningProvider for LNbits (payments via /api/v1/payments, invoice creation via /api/v1/payments/lnurl or /createinvoice), configurable via env (endpoint/api_key), feature-flag selectable.","status":"tombstone","priority":1,"issue_type":"task","created_at":"2025-11-28T18:23:39.011141-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","dependencies":[{"issue_id":"lightning-wja.1","depends_on_id":"lightning-wja","type":"parent-child","created_at":"2025-11-28T18:23:39.012315-08:00","created_by":"honk","metadata":"{}"}],"deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"lightning-wja.2","title":"Webhook/status handling for LNbits","description":"Handle LNbits payment status callbacks/polling; map to Payment statuses; verify HMAC if configured; reuse existing webhook endpoints or add /lnbits/webhook.","status":"tombstone","priority":1,"issue_type":"task","created_at":"2025-11-28T18:23:51.727508-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","dependencies":[{"issue_id":"lightning-wja.2","depends_on_id":"lightning-wja","type":"parent-child","created_at":"2025-11-28T18:23:51.729177-08:00","created_by":"honk","metadata":"{}"}],"deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"lightning-wja.3","title":"Funding source config + docs","description":"Document funding source matrix (Blink/self-host LND/CLN/etc.), add env/config to switch LNbits backend, include cost/reliability notes and setup steps.","status":"tombstone","priority":2,"issue_type":"task","created_at":"2025-11-28T18:24:03.96636-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","dependencies":[{"issue_id":"lightning-wja.3","depends_on_id":"lightning-wja","type":"parent-child","created_at":"2025-11-28T18:24:03.972738-08:00","created_by":"honk","metadata":"{}"}],"deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"lightning-wja.4","title":"E2E tests against LNbits","description":"Spin LNbits container for tests; ensure LNURLp issuance and paid webhook path works; fixtures for demo tenant.","status":"tombstone","priority":2,"issue_type":"task","created_at":"2025-11-28T18:24:15.813307-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","dependencies":[{"issue_id":"lightning-wja.4","depends_on_id":"lightning-wja","type":"parent-child","created_at":"2025-11-28T18:24:15.814391-08:00","created_by":"honk","metadata":"{}"}],"deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"lightning-wjs2","title":"Relay view: compact high-density info","description":"Expand relay view with more detailed metrics/info while keeping layout compact and clean. Redesign relay card/list to show richer NIP-11 metadata, status, latency, rates, errors, and last event info.","status":"tombstone","priority":2,"issue_type":"feature","created_at":"2025-12-19T14:28:00.265869-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"feature"}
{"id":"lightning-wrhv","title":"Gallery: Personal Site Kit demo view","description":"Add a gallery view that showcases the Personal Site Kit widgets for QA and demos.\n\nImplementation notes:\n- Create a PersonalSiteKitView using the new blog-kit components.\n- Add navigation entry and route in App.tsx.\n- Provide sample data for profile, share URL, itemId, and threadId.\n\nAcceptance criteria:\n- Route renders without errors and shows all widgets.\n- Layout is responsive and uses nostrstack theme tokens.\n- Demo view is suitable for Playwright coverage.\n\nEdge cases:\n- Missing config values should show placeholder states.\n\n## Files\n- apps/gallery/src/PersonalSiteKitView.tsx (create)\n- apps/gallery/src/App.tsx (modify: route + nav)\n- apps/gallery/src/gallery.css (modify: styles for demo)\n\n## QA Evidence\n- Playwright: pnpm --filter gallery exec playwright test tests/personal-site-kit.spec.ts\n- Screenshots: docs/screenshots/personal-site-kit/personal-site-kit-view.png\n- DevTools MCP: console/network checked, no errors or warnings\n- Logs: tail -f .logs/dev/api.log .logs/dev/gallery.log (no errors)\n- CI: pnpm --filter gallery test \u0026\u0026 pnpm lint\n\n## Close Notes (fill in at closure)\n- Issues encountered:\n- Setup improvements:\n- Debug info that would have helped:","acceptance_criteria":"Gallery exposes Personal Site Kit demo route","status":"tombstone","priority":2,"issue_type":"task","assignee":"unassigned","estimated_minutes":180,"created_at":"2025-12-31T18:37:12.567231-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","close_reason":"Implemented Personal Site Kit demo view in gallery, added styles, and verified with Playwright.","labels":["area:frontend","feature:personal-site-kit"],"dependencies":[{"issue_id":"lightning-wrhv","depends_on_id":"lightning-39zu","type":"parent-child","created_at":"2025-12-31T18:37:12.570205-08:00","created_by":"honk"},{"issue_id":"lightning-wrhv","depends_on_id":"lightning-w30f","type":"blocks","created_at":"2025-12-31T18:41:52.491663-08:00","created_by":"honk"}],"deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"lightning-wri","title":"Block list header + dual-wallet clarity redesign","description":"Redesign block header card into table header with network badge (regtest) and animated insert of new blocks; clarify dual-wallet context (receiver LNbits vs payer LND) with distinct labels + balances so users know add-funds target and test-wallet payer.","status":"tombstone","priority":2,"issue_type":"feature","created_at":"2025-12-03T14:03:04.620955-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","labels":["design","frontend"],"deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"feature"}
{"id":"lightning-wt25","title":"Feat: Following stats on Profile","description":"Add 'Following' count to ProfileView.\n\nDescription:\n- Fetch Kind 3 (Contact List) for the profile's pubkey.\n- Count 'p' tags in the latest Kind 3 event.\n- Display the count in the profile header area.\n\nAcceptance Criteria:\n- Profiles with contact lists show a 'Following' count.\n- Count updates when a new kind 3 is found (or on load).\n\n## Files\n- apps/gallery/src/ProfileView.tsx (modify: fetch kind 3 + render count)\n\n## QA Evidence\n- Screenshots: `docs/screenshots/social/profile-following.png`\n- CI: `pnpm lint \u0026\u0026 pnpm typecheck`","status":"tombstone","priority":2,"issue_type":"task","created_at":"2026-01-03T09:04:03.242274-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","close_reason":"Implemented","dependencies":[{"issue_id":"lightning-wt25","depends_on_id":"lightning-xliv","type":"parent-child","created_at":"2026-01-03T09:04:03.245145-08:00","created_by":"honk"}],"deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"lightning-wuom","title":"Feat: Reaction (Like) Button","description":"Implement a 'Like' button that publishes a Kind 7 reaction event.\n\nDescription:\n- Create a `ReactionButton` component in `blog-kit`.\n- It should take an `event` prop and publish a Kind 7 event with `+` content and `e` tag pointing to the target event.\n- Provide optimistic UI feedback (heart icon fills/animates immediately).\n- Integrate into `FeedView` post actions.\n\nAcceptance Criteria:\n- Clicking 'Like' publishes a Kind 7 event.\n- Button state toggles optimistically.\n- Button shows active state if user has already liked (requires fetching reactions or tracking local state for v1). For v1 local state tracking is sufficient for the session.\n\nEdge Cases:\n- User not logged in (prompt or error).\n- Network failure (rollback optimistic state).\n\n## Files\n- packages/blog-kit/src/reaction-button.tsx (create: component)\n- packages/blog-kit/src/index.ts (modify: export)\n- apps/gallery/src/FeedView.tsx (modify: add ReactionButton)\n- apps/gallery/src/gallery.css (modify: styles)\n\n## QA Evidence\n- Playwright: Test clicking like button triggers event publish (mock).\n- Screenshots: `docs/screenshots/social/reaction-active.png`","status":"tombstone","priority":2,"issue_type":"task","created_at":"2026-01-03T00:44:12.40546-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","dependencies":[{"issue_id":"lightning-wuom","depends_on_id":"lightning-1uzs","type":"parent-child","created_at":"2026-01-03T00:44:12.408441-08:00","created_by":"honk"},{"issue_id":"lightning-wuom","depends_on_id":"lightning-vdwv","type":"blocks","created_at":"2026-01-03T00:55:06.69698-08:00","created_by":"honk"}],"deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"lightning-wxhy","title":"Embed/Blog-kit: Tip feed real time updates","description":"Add real time updates to the tip activity feed using the new ws/tips channel.\n\nImplementation notes:\n- Subscribe to /ws/tips for a given itemId and prepend new tips.\n- Keep existing HTTP fetch for initial hydration and fallback when WS is unavailable.\n- De-duplicate by payment id and cap list size.\n\nAcceptance criteria:\n- Tip feed updates live when a tip event arrives.\n- WS disconnect shows a non-blocking warning and continues polling.\n- No duplicate items or ordering regressions.\n\nEdge cases:\n- WS blocked or reconnect storms.\n- Tip events missing itemId.\n\n## Files\n- packages/embed/src/index.ts (modify: tip feed realtime)\n- packages/blog-kit/src/tip-activity-feed.tsx (modify: support realtime)\n- packages/embed/src/index.test.ts (modify: add coverage)\n\n## QA Evidence\n- Playwright: pnpm --filter gallery exec playwright test tests/personal-site-kit.spec.ts (fails: No tests found; spec missing, tracked in lightning-j5lt and requires gallery view from lightning-wrhv)\n- Screenshots: pending (requires gallery view + Playwright spec; tracked in lightning-wrhv + lightning-j5lt)\n- DevTools MCP: pending (gallery view not yet available; tracked in lightning-wrhv)\n- Logs: tail -n 200 .logs/dev/api.log .logs/dev/gallery.log (wallet-ws fetch failed + telemetry block poll 503 warnings; follow-ups lightning-etjs + lightning-wglx)\n- CI: pnpm --filter embed test \u0026\u0026 pnpm --filter blog-kit test \u0026\u0026 pnpm lint\n\n## Close Notes\n- Issues encountered: Playwright spec missing (No tests found); DevTools MCP blocked by missing gallery view; oracle.sh failed (Claude model); logs showed wallet-ws fetch failed + telemetry 503 warnings (tracked in lightning-etjs + lightning-wglx).\n- Setup improvements: Add personal-site-kit gallery view + Playwright spec to capture DevTools/screenshot evidence.\n- Debug info that would have helped: Oracle CLI model availability details.","acceptance_criteria":"Tip feed updates via ws/tips","status":"tombstone","priority":2,"issue_type":"feature","assignee":"unassigned","estimated_minutes":180,"created_at":"2025-12-31T18:36:17.639273-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","close_reason":"Implemented","labels":["area:frontend","feature:personal-site-kit"],"dependencies":[{"issue_id":"lightning-wxhy","depends_on_id":"lightning-39zu","type":"parent-child","created_at":"2025-12-31T18:36:17.641599-08:00","created_by":"honk"},{"issue_id":"lightning-wxhy","depends_on_id":"lightning-gyio","type":"blocks","created_at":"2025-12-31T18:40:50.152355-08:00","created_by":"honk"},{"issue_id":"lightning-wxhy","depends_on_id":"lightning-l04e","type":"blocks","created_at":"2025-12-31T18:41:01.489831-08:00","created_by":"honk"}],"deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"feature"}
{"id":"lightning-x1dx","title":"embed: export theme -\u003e CSS helpers","description":"Add helpers to serialize a NostrstackTheme into CSS custom properties so integrators can drop a theme into a stylesheet (similar to markdowntown token strategy).\n\nScope:\n- Add `themeToCssVars(theme)` and `themeToCss(theme, selector?)` helpers\n- Update `packages/embed/README.md` with a copy/paste CSS example\n- Keep existing `applyNostrstackTheme` API unchanged","acceptance_criteria":"- Helpers are exported from @nostrstack/embed\n- embed typecheck/lint/test pass","status":"tombstone","priority":3,"issue_type":"task","created_at":"2025-12-13T21:37:12.997985-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"lightning-x2gj","title":"Docs: Personal Site Kit guide + README updates","description":"Document Personal Site Kit integration and update package READMEs.\n\nImplementation notes:\n- Add docs/personal-site-kit.md with setup, config, and embed/script examples.\n- Update @nostrstack/embed and @nostrstack/blog-kit READMEs for new widgets.\n- Update docs/nostrstack-klabo.md with new injector flags and widgets.\n- Include CSP/CORS guidance and privacy statement for telemetry.\n\nAcceptance criteria:\n- Guide explains tip, comments, share, profile, and blockchain widgets with examples.\n- README updates are accurate and reference new data attributes.\n- CSP/CORS guidance matches API config behavior.\n\nEdge cases:\n- Static site injection with nested folders.\n\n## Files\n- docs/personal-site-kit.md (create)\n- packages/embed/README.md (modify: new widgets + data attributes)\n- packages/blog-kit/README.md (modify: new components)\n- docs/nostrstack-klabo.md (modify: injector flags + examples)\n\n## QA Evidence\n- Playwright: N/A (docs only)\n- Screenshots: N/A\n- DevTools MCP: N/A\n- Logs: N/A\n- CI: pnpm lint:md\n\n## Close Notes (fill in at closure)\n- Issues encountered:\n- Setup improvements:\n- Debug info that would have helped:","acceptance_criteria":"Guide + README updates cover new widgets and CSP/CORS","status":"tombstone","priority":2,"issue_type":"task","assignee":"unassigned","estimated_minutes":180,"created_at":"2025-12-31T18:38:18.241986-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","close_reason":"Updated all documentation and READMEs for Personal Site Kit features.","labels":["area:docs","feature:personal-site-kit"],"dependencies":[{"issue_id":"lightning-x2gj","depends_on_id":"lightning-39zu","type":"parent-child","created_at":"2025-12-31T18:38:18.244222-08:00","created_by":"honk"},{"issue_id":"lightning-x2gj","depends_on_id":"lightning-wrhv","type":"blocks","created_at":"2025-12-31T18:43:02.918745-08:00","created_by":"honk"},{"issue_id":"lightning-x2gj","depends_on_id":"lightning-sylw","type":"blocks","created_at":"2025-12-31T18:43:14.257513-08:00","created_by":"honk"}],"deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"lightning-x2ka","title":"UI: Event API client + data model wiring","description":"Wire the gallery event view to the new API endpoint with a fallback to direct relay fetch.\n\nAcceptance Criteria:\n- Add client helper to call /nostr/event/:id and parse response.\n- Update NostrEventView to load from API first and gracefully fallback to relay fetch when API unavailable.\n- Preserve loading/error states and ensure no regressions in existing event rendering.\n- Include the standing note: while working, look for refactoring opportunities/bugs/improvements and create new bd tasks as they surface.\n\nEdge Cases:\n- API returns 404 vs relay still has event\n- CORS or network errors\n- Mixed bech32/hex IDs\n\n## Files\n- apps/gallery/src/nostr/api.ts (create: event fetch client)\n- apps/gallery/src/NostrEventView.tsx (modify: use API client + fallback)\n- apps/gallery/src/utils/api-base.ts (modify: expose API base for gallery fetch)","status":"tombstone","priority":2,"issue_type":"task","created_at":"2025-12-20T10:31:53.332943-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","dependencies":[{"issue_id":"lightning-x2ka","depends_on_id":"lightning-00in","type":"parent-child","created_at":"2025-12-20T10:31:53.334857-08:00","created_by":"honk","metadata":"{}"},{"issue_id":"lightning-x2ka","depends_on_id":"lightning-y1ve","type":"blocks","created_at":"2025-12-20T10:34:10.46037-08:00","created_by":"honk","metadata":"{}"}],"deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"lightning-x68","title":"Perf/a11y audit: reduce motion, focus order, tooltips","description":"Run Chrome DevTools + Lighthouse: ensure prefers-reduced-motion stops pulses, focus order on invoice modal/ribbon cards, tooltips have aria labels, animations paused when tab hidden.","status":"tombstone","priority":2,"issue_type":"chore","created_at":"2025-12-02T23:24:08.549819-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"chore"}
{"id":"lightning-x6xw","title":"Chore: investigate Babel deopt warning in gallery dev logs","description":"Investigate and resolve the Babel deoptimisation warning emitted during gallery dev logs for large Vite bundles.\n\n- Implement: enable compact Babel output in the React plugin to avoid deopt warnings for large deps.\n- Acceptance criteria:\n  - pnpm dev:logs no longer prints the Babel deoptimised styling warning.\n  - Gallery dev build remains functional.\n- Edge cases:\n  - Changes should not regress HMR performance.\n- Risks/assumptions:\n  - Compact output may reduce readability of transformed output but should not affect runtime.\n\n## Files\n- apps/gallery/vite.config.ts (modify: set babel compact)\n\n## QA Evidence\n- Logs: `FORCE_KILL_PORTS=1 pnpm dev:logs` (no Babel deoptimised styling warning)\n- CI: `pnpm --filter gallery test`\n\n## Close Notes\n- Issues encountered: pnpm dev:logs required FORCE_KILL_PORTS=1 because port 3001 was in use; oracle script failed after retrying Claude model.\n- Setup improvements: document FORCE_KILL_PORTS usage for dev logs; stabilize oracle CLI model selection.\n- Debug info that would have helped: which Vite/React plugin option controls Babel compact output.\n","acceptance_criteria":"pnpm dev:logs shows no Babel deopt warning; pnpm --filter gallery test passes.","status":"tombstone","priority":4,"issue_type":"chore","assignee":"honk","estimated_minutes":60,"created_at":"2026-01-02T00:39:27.943779-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","close_reason":"Implemented","labels":["build","devx","gallery"],"deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"chore"}
{"id":"lightning-x9r","title":"Live nostr + lightning surfaces (alive UI polish)","description":"Make the nostr and lightning demo feel \"alive\": animate real-time states, densify metadata, and refresh copy/payment affordances. Child tasks will cover telemetry, invoice popover, profile/signer, relay chips, and npub bar.","status":"tombstone","priority":1,"issue_type":"epic","created_at":"2025-12-02T20:56:53.414727-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"epic"}
{"id":"lightning-x9r.1","title":"Telemetry card repeats same block; add rich block stats + icon","description":"Fix regtest telemetry feed duplicating block # heights and make it informative. Accept: (1) websocket dedupes/stops emitting identical heights when chain idle; (2) include hash, tx count, size/weight, median/received time in telemetry event; (3) UI shows single live block banner with time-since-last-block clock, tx count, size, and a block icon animation; (4) timeline trims to latest N events with unique keys; (5) reconnect logic resumes stream after socket drop.","status":"tombstone","priority":1,"issue_type":"bug","created_at":"2025-12-02T20:57:04.613311-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","dependencies":[{"issue_id":"lightning-x9r.1","depends_on_id":"lightning-x9r","type":"parent-child","created_at":"2025-12-02T20:57:04.61439-08:00","created_by":"honk","metadata":"{}"}],"deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"bug"}
{"id":"lightning-x9r.2","title":"Invoice popover: remove duplicate copy button, amplify live payment animation","description":"Redesign Lightning invoice modal so it feels alive and uses space well. Accept: (1) top copy button removed; single BOLT11 copy action lives near code block with success micro-state; (2) freed header space shows live payment viz (progress ring/beam, amount, status, elapsed) and celebratory success animation; (3) waiting/pending pulses subtly and paid state pops; (4) layout keeps Open in wallet CTA and aligns QR + details cleanly; (5) accessibility: status is aria-live polite and controls keyboard-focusable.","status":"tombstone","priority":1,"issue_type":"feature","created_at":"2025-12-02T20:57:15.005258-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","dependencies":[{"issue_id":"lightning-x9r.2","depends_on_id":"lightning-x9r","type":"parent-child","created_at":"2025-12-02T20:57:15.00637-08:00","created_by":"honk","metadata":"{}"}],"deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"feature"}
{"id":"lightning-x9r.3","title":"Nostr profile card: live signer presence + dense metadata","description":"Make the profile card look premium and alive when a signer is present. Accept: (1) header shows signer presence with animated pulse tied to Nip07Status and relay pings; (2) layout surfaces avatar, name, about, NIP-05/LUD16/website badges, relay count, and note-send status in a compact grid; (3) npub/nsec toggle uses new lively copy bar; (4) includes tiny activity sparkline or last-seen timers from relays; (5) responsive and works in light/dark.","status":"tombstone","priority":1,"issue_type":"feature","created_at":"2025-12-02T20:57:27.788289-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","dependencies":[{"issue_id":"lightning-x9r.3","depends_on_id":"lightning-x9r","type":"parent-child","created_at":"2025-12-02T20:57:27.789282-08:00","created_by":"honk","metadata":"{}"}],"deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"feature"}
{"id":"lightning-x9r.4","title":"Compact npub/nsec bar with lively copy interaction","description":"Design a compact, animated key bar inspired by modern copy-to-clipboard UI. Accept: (1) single-line bar shows truncated key with inline copy icon + format toggle (npub/hex); (2) copy success gives micro animation/state and reverts; (3) fits in tight spaces without wrapping; (4) keyboard + screen reader friendly; (5) reusable component swapped into profile and elsewhere.","status":"tombstone","priority":1,"issue_type":"feature","created_at":"2025-12-02T20:57:38.851221-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","dependencies":[{"issue_id":"lightning-x9r.4","depends_on_id":"lightning-x9r","type":"parent-child","created_at":"2025-12-02T20:57:38.852624-08:00","created_by":"honk","metadata":"{}"}],"deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"feature"}
{"id":"lightning-x9r.5","title":"Relay card: live send/recv pulses + richer meta","description":"Refresh relay pill so it updates on every event. Accept: (1) pulses/animates on recv or send updates; (2) shows send/recv counts, last-seen time, and relay software/name; (3) includes micro sparkline or activity ticks from recent events; (4) handles missing data gracefully and works in dark mode; (5) feed uses unique ids so same event is not repeated.","status":"tombstone","priority":1,"issue_type":"feature","created_at":"2025-12-02T20:57:50.322445-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","dependencies":[{"issue_id":"lightning-x9r.5","depends_on_id":"lightning-x9r","type":"parent-child","created_at":"2025-12-02T20:57:50.323612-08:00","created_by":"honk","metadata":"{}"}],"deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"feature"}
{"id":"lightning-xab","title":"Fix CommentsPanel not defined runtime error","description":"App fails to render after removing relayMode/mock paths because CommentsPanel import was removed. Restore import and ensure build passes.","status":"tombstone","priority":2,"issue_type":"bug","created_at":"2025-12-03T10:39:00.788863-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","labels":["gallery"],"deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"bug"}
{"id":"lightning-xd8","title":"nostrstack rebrand + CI readiness","description":"Rename Satoshis.lol to nostrstack, update packages/workflows/docs, and ensure GitHub repo/CI align with new branding.","status":"tombstone","priority":1,"issue_type":"epic","created_at":"2025-11-30T23:15:18.378667-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"epic"}
{"id":"lightning-xd8.1","title":"Rebrand codebase/packages to nostrstack","description":"Rename SDK/embed scope, class names, data attributes, defaults, and docs; update env samples and gallery copy.","status":"tombstone","priority":1,"issue_type":"task","created_at":"2025-11-30T23:15:31.161721-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","dependencies":[{"issue_id":"lightning-xd8.1","depends_on_id":"lightning-xd8","type":"parent-child","created_at":"2025-11-30T23:15:31.162506-08:00","created_by":"honk","metadata":"{}"}],"deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"lightning-xd8.2","title":"Fix CI workflows for nostrstack","description":"Rename workflow resources/image names, align Postgres service creds/port 5432, and ensure pipelines pass.","status":"tombstone","priority":1,"issue_type":"task","created_at":"2025-11-30T23:16:18.422626-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","dependencies":[{"issue_id":"lightning-xd8.2","depends_on_id":"lightning-xd8","type":"parent-child","created_at":"2025-11-30T23:16:18.42337-08:00","created_by":"honk","metadata":"{}"}],"deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"lightning-xd8.3","title":"Push nostrstack repo + monitor CI","description":"Push rebrand changes to GitHub, watch CI/Deploy runs, and resolve any failing jobs.","status":"tombstone","priority":1,"issue_type":"task","created_at":"2025-11-30T23:16:44.876848-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","dependencies":[{"issue_id":"lightning-xd8.3","depends_on_id":"lightning-xd8","type":"parent-child","created_at":"2025-11-30T23:16:44.877593-08:00","created_by":"honk","metadata":"{}"}],"deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"lightning-xf13","title":"api: reduce noisy error logs in vitest","description":"Vitest runs emit error-level JSON logs (e.g., schema validation failures). Track down and eliminate the noisy request or adjust logging in tests.","acceptance_criteria":"pnpm --filter api test output has no unexpected error-level request logs.","status":"tombstone","priority":4,"issue_type":"chore","created_at":"2025-12-13T23:30:00.130715-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"chore"}
{"id":"lightning-xliv","title":"Epic: Social Connectivity (Follows, Notifications, Search)","description":"Enhance the social graph and discovery capabilities of the gallery.\n\n## Objective\nEnable social graph visibility (Following counts), improve notification signal-to-noise ratio, and add general content search.\n\n## Success Criteria\n- [ ] ProfileView displays 'Following' count (from Kind 3).\n- [ ] NotificationsView groups Likes and Zaps for a cleaner UI.\n- [ ] Profile activity supports pagination ('Load More').\n- [ ] SearchView supports NIP-50 content search.\n\n## QA Evidence Requirements\n- Playwright coverage for notifications and search.\n- Screenshots of the updated profile and grouped notifications.\n- DevTools MCP checks (console/network clean).\n- FE/BE logs reviewed.\n- CI green proof.\n\n## Risks/Assumptions\n- NIP-50 support varies by relay; results might be sparse.\n- Following/Follower counts depend on fetching specific event kinds which may be large.","status":"tombstone","priority":2,"issue_type":"epic","created_at":"2026-01-03T09:03:51.717049-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","close_reason":"Implemented all tasks","deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"epic"}
{"id":"lightning-xmw5","title":"Plan: skill taxonomy + triggers","description":"Define the nostrstack skill set, triggers, and reference mapping.\n\nAcceptance criteria:\n- List the proposed skills with concise trigger descriptions.\n- Map each skill to the repo docs and key paths it should reference.\n- Note required guardrails (logs, MCP checks, secret hygiene).\n- Include a reminder to look for refactors/bugs while building skills and create new issues when found.\n\n## Files\n- ~/.codex/skills/nostrstack-skills-plan.md (create: skill list, triggers, references, guardrails)","status":"tombstone","priority":2,"issue_type":"task","created_at":"2025-12-26T16:49:59.333573-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","dependencies":[{"issue_id":"lightning-xmw5","depends_on_id":"lightning-eo3j","type":"parent-child","created_at":"2025-12-26T16:51:19.594921-08:00","created_by":"honk"}],"deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"lightning-xo0n","title":"api: address fastify deprecation warnings","description":"dev:logs shows Fastify deprecation warnings (request.context, request.routerPath, reply.getResponseTime). Update API code to recommended v5-safe properties/methods.","acceptance_criteria":"Running pnpm dev:logs shows no Fastify deprecation warnings.","status":"tombstone","priority":3,"issue_type":"chore","created_at":"2025-12-13T21:47:56.70854-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"chore"}
{"id":"lightning-xo4","title":"Comments: show relays + edit/save","description":"Display current relays on comment widget, allow editing and persisting (localStorage) without adding heavy UI.","status":"tombstone","priority":2,"issue_type":"task","created_at":"2025-12-01T14:23:14.858219-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"lightning-xv2s","title":"QA: Record find-friend tip video","description":"Add an automated demo video capture of the find-friend tip flow.\n\n- Provide a script/test that records a .webm video via Playwright.\n- Store output under .logs/video/ for review.\n\nAcceptance Criteria\n- Running the script produces a playable video showing the full flow.\n- No console/network errors during capture.\n\nEdge Cases\n- Missing display/CI environment; ensure headless recording works.\n\nNote: Always be looking for refactoring opportunities, bug fixes, and improvements. Create new tasks as you encounter them.\n\n## Files\n- apps/gallery/tests/find-friend-tip.video.spec.ts (create: video test)\n- package.json (modify: add script, e.g. qa:find-friend-video)","status":"tombstone","priority":2,"issue_type":"task","created_at":"2025-12-25T23:07:35.55424-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","dependencies":[{"issue_id":"lightning-xv2s","depends_on_id":"lightning-yzz6","type":"parent-child","created_at":"2025-12-25T23:07:35.556025-08:00","created_by":"honk","metadata":"{}"},{"issue_id":"lightning-xv2s","depends_on_id":"lightning-cjzi","type":"blocks","created_at":"2025-12-25T23:08:51.932505-08:00","created_by":"honk","metadata":"{}"}],"deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"lightning-xxey","title":"Configure nostrstack.com DNS via Cloudflare","status":"tombstone","priority":1,"issue_type":"task","created_at":"2025-12-17T11:56:30.76697-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","labels":["ops"],"deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"lightning-y1ve","title":"Core: API route /nostr/event/:id","description":"Expose the resolver via a public API endpoint with validation and response schema.\n\nAcceptance Criteria:\n- Add GET /nostr/event/:id (and /api/nostr/event/:id if required by existing routing patterns).\n- Validate path/query params and return structured errors for unsupported IDs.\n- Support optional query params for relay override (if allowed) and reference depth limits.\n- Include the standing note: while working, look for refactoring opportunities/bugs/improvements and create new bd tasks as they surface.\n\nEdge Cases:\n- ID too long or unsupported prefix\n- Relay override includes non-wss URLs\n- Resolver returns partial data\n\n## Files\n- apps/api/src/routes/nostr-event.ts (create: route handler)\n- apps/api/src/routes/index.ts (modify: register route)\n- apps/api/src/setup-routes.ts (modify: add /api mirror if needed)","status":"tombstone","priority":2,"issue_type":"task","created_at":"2025-12-20T10:31:37.145242-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","dependencies":[{"issue_id":"lightning-y1ve","depends_on_id":"lightning-00in","type":"parent-child","created_at":"2025-12-20T10:31:37.147797-08:00","created_by":"honk","metadata":"{}"},{"issue_id":"lightning-y1ve","depends_on_id":"lightning-qdn9","type":"blocks","created_at":"2025-12-20T10:34:09.257594-08:00","created_by":"honk","metadata":"{}"},{"issue_id":"lightning-y1ve","depends_on_id":"lightning-89bj","type":"blocks","created_at":"2025-12-20T10:38:22.828597-08:00","created_by":"honk","metadata":"{}"}],"deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"lightning-y2b","title":"Address bd doctor warnings (JSONL, merge driver, sync branch)","description":"bd doctor flagged multiple JSONL files (issues.jsonl + beads.left.jsonl), missing merge driver config, sync.branch unset, deletions manifest empty, and bd CLI not on PATH. Track cleanup: pick canonical JSONL, configure merge driver + sync.branch, verify deletions manifest, and ensure bd binary is accessible in PATH.","status":"tombstone","priority":3,"issue_type":"chore","created_at":"2025-12-01T19:54:00.742813-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"chore"}
{"id":"lightning-y2nl","title":"Live nostr + lightning surfaces (alive UI polish)","status":"tombstone","priority":1,"issue_type":"epic","created_at":"2025-12-17T19:25:52.729136-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","labels":["design","ui"],"deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"epic"}
{"id":"lightning-y2nl.1","title":"Sidebar: Add rich Bitcoin Node Status section","status":"tombstone","priority":1,"issue_type":"task","created_at":"2025-12-17T19:26:39.375697-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","labels":["ui"],"dependencies":[{"issue_id":"lightning-y2nl.1","depends_on_id":"lightning-y2nl","type":"parent-child","created_at":"2025-12-17T19:26:39.377485-08:00","created_by":"honk","metadata":"{}"}],"deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"lightning-y2nl.2","title":"Sidebar: Add Wallet Status section","status":"tombstone","priority":1,"issue_type":"task","created_at":"2025-12-17T19:26:44.623169-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","labels":["ui"],"dependencies":[{"issue_id":"lightning-y2nl.2","depends_on_id":"lightning-y2nl","type":"parent-child","created_at":"2025-12-17T19:26:44.624764-08:00","created_by":"honk","metadata":"{}"}],"deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"lightning-y2nl.3","title":"Implement Regtest Zap flow","status":"tombstone","priority":1,"issue_type":"task","created_at":"2025-12-17T19:26:49.866237-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","labels":["feature"],"dependencies":[{"issue_id":"lightning-y2nl.3","depends_on_id":"lightning-y2nl","type":"parent-child","created_at":"2025-12-17T19:26:49.867222-08:00","created_by":"honk","metadata":"{}"}],"deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"lightning-y2nl.4","title":"Visuals: Live Zap Stream animations","status":"tombstone","priority":2,"issue_type":"task","created_at":"2025-12-17T19:26:55.101948-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","labels":["ui"],"dependencies":[{"issue_id":"lightning-y2nl.4","depends_on_id":"lightning-y2nl","type":"parent-child","created_at":"2025-12-17T19:26:55.102897-08:00","created_by":"honk","metadata":"{}"}],"deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"lightning-y86h","title":"Core: RelayContext \u0026 Bootstrap","description":"Create the core RelayContext to manage user relays via NIP-65.\n\nDescription:\n- Create `RelayProvider` in `apps/gallery/src/context/RelayProvider.tsx`.\n- Implement fetching Kind 10002 on mount (using `DEFAULT_RELAYS` as bootstrap).\n- Implement merging: User Relays \u003e Default Relays.\n- Implement `saveRelays(urls: string[])`: Sign and publish Kind 10002.\n- Wrap `AppShell` in `RelayProvider`.\n- Expose `useRelays()` hook returning `{ relays, userRelays, addRelay, removeRelay, saveRelays, isLoading }`.\n\nAcceptance Criteria:\n- App loads and attempts to fetch Kind 10002.\n- Context provides merged relay list.\n- `saveRelays` correctly signs and publishes event.\n\n## Files\n- apps/gallery/src/context/RelayProvider.tsx (create)\n- apps/gallery/src/hooks/useRelays.ts (create)\n- apps/gallery/src/App.tsx (modify: wrap with provider)\n\n## QA Evidence\n- DevTools: Verify Kind 10002 fetch on startup (Network tab).\n- CI: `pnpm lint \u0026\u0026 pnpm typecheck`","status":"tombstone","priority":2,"issue_type":"task","created_at":"2026-01-03T14:23:53.460994-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","close_reason":"Implemented","dependencies":[{"issue_id":"lightning-y86h","depends_on_id":"lightning-jeeg","type":"parent-child","created_at":"2026-01-03T14:23:53.464071-08:00","created_by":"honk"}],"deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"lightning-y8hj","title":"Fix gallery typecheck regressions","description":"Resolve TypeScript errors in gallery (setTimeout typing, JSX namespace, telemetry log levels).\n\nAcceptance Criteria:\n- pnpm typecheck passes for apps/gallery.\n- No runtime behavior change.\n\n## Files\n- apps/gallery/src/FeedView.tsx (modify: timer typing)\n- apps/gallery/src/NotificationsView.tsx (modify: timer typing)\n- apps/gallery/src/nostr/eventRenderers.tsx (modify: ReactNode types)\n- apps/gallery/src/TelemetryBar.tsx (modify: log entry typing)","status":"tombstone","priority":1,"issue_type":"bug","created_at":"2025-12-19T18:57:08.349498-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"bug"}
{"id":"lightning-y8wu","title":"Core: Profile routing + author navigation","description":"Add lightweight routing for profile pages and make post authors clickable.\n\nAcceptance criteria:\n- /p/\u003cnpub|hex\u003e renders ProfileView for that pubkey.\n- Author header in FeedView uses clickable link/button to navigate to profile.\n- Navigation helper updates history + popstate so existing usePathname updates.\n- Invalid ids show a friendly error + fall back to current user profile or feed.\n- No full page reload; browser back works.\n\nEdge cases to handle:\n- Invalid npub, malformed path, rapid navigation, popstate.\n\nNote: Always be looking for refactoring opportunities, bug fixes, and improvements. Create new tasks as you encounter them.\n\n## Files\n- apps/gallery/src/App.tsx (modify: parse profile route; pass pubkey)\n- apps/gallery/src/FeedView.tsx (modify: author link + navigation)\n- apps/gallery/src/utils/navigation.ts (create: pushState helper + id parsing)\n- apps/gallery/src/ui/ProfileLink.tsx (create: reusable author link)","status":"tombstone","priority":2,"issue_type":"task","created_at":"2025-12-20T13:11:11.488985-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","dependencies":[{"issue_id":"lightning-y8wu","depends_on_id":"lightning-01t7","type":"parent-child","created_at":"2025-12-20T13:11:11.490934-08:00","created_by":"honk","metadata":"{}"},{"issue_id":"lightning-y8wu","depends_on_id":"lightning-98zj","type":"blocks","created_at":"2025-12-20T13:11:41.10916-08:00","created_by":"honk","metadata":"{}"}],"deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"lightning-y95","title":"blog-integration","description":"Integrate nostrstack (tips, Nostr comments, share) into klabo.world blog. Deliver adapters, docs, and e2e coverage.","notes":"All sub-tasks y95.2/4/5/6/7/8 done; awaiting new directives or additional blog requirements.","status":"tombstone","priority":1,"issue_type":"epic","created_at":"2025-12-01T01:25:13.169246-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"epic"}
{"id":"lightning-y95.1","title":"Map klabo.world post surfaces for nostrstack","description":"Identify Next.js entry points for posts (Contentlayer/MDX). Capture slug/url/title/author fields, LN address source, and layout slot(s) for widgets. Deliver a short design note with file paths and data flow.","notes":"Mapped klabo.world post surfaces: Next.js route app/src/app/posts/[slug]/page.tsx renders hero+MDX content; data from Contentlayer (post slug/title/summary/tags/date/publishDate/body). Need MDX schema extension for lnaddr/nostrPubkey/relays. Widget slots: (1) tip/share near header, (2) comments below \u003cMDXContent\u003e. Use dynamic import/no-SSR for client widgets. Canonical URL: /posts/[slug].","status":"tombstone","priority":1,"issue_type":"task","created_at":"2025-12-01T01:25:45.988551-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","dependencies":[{"issue_id":"lightning-y95.1","depends_on_id":"lightning-y95","type":"parent-child","created_at":"2025-12-01T01:25:45.989795-08:00","created_by":"honk","metadata":"{}"}],"deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"lightning-y95.2","title":"React/Next blog kit components","description":"Ship @nostrstack/blog-kit with Provider + TipButton, Comments, Share components wired to nostrstack API/embed. Accept props for slug, lnaddr, relays; expose minimal CSS vars for theming. Publish as workspace package.","status":"tombstone","priority":1,"issue_type":"task","created_at":"2025-12-01T01:26:12.966984-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","dependencies":[{"issue_id":"lightning-y95.2","depends_on_id":"lightning-y95","type":"parent-child","created_at":"2025-12-01T01:26:12.968223-08:00","created_by":"honk","metadata":"{}"}],"deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"lightning-y95.3","title":"Next.js layout wiring for tips/comments/share","description":"Add nostrstack widgets into klabo.world post layout: inject tip button, comments thread, share-to-Nostr button keyed by post slug/canonical URL/lnaddr. Ensure hydration-safe (use dynamic import/no-SSR where needed) and minimal style surface. Provide feature flag to disable per post.","status":"tombstone","priority":1,"issue_type":"task","created_at":"2025-12-01T01:26:29.099893-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","dependencies":[{"issue_id":"lightning-y95.3","depends_on_id":"lightning-y95","type":"parent-child","created_at":"2025-12-01T01:26:29.102393-08:00","created_by":"honk","metadata":"{}"}],"deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"lightning-y95.4","title":"Static-site injector CLI","description":"Create a CLI (pnpm nostrstack inject) that adds the embed script + data attributes to static HTML/MDX outputs (Hugo/Jekyll/Contentlayer). Accept tenant ID/API base; idempotent on repeated runs.","status":"tombstone","priority":1,"issue_type":"task","created_at":"2025-12-01T01:26:45.058607-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","dependencies":[{"issue_id":"lightning-y95.4","depends_on_id":"lightning-y95","type":"parent-child","created_at":"2025-12-01T01:26:45.059587-08:00","created_by":"honk","metadata":"{}"}],"deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"lightning-y95.5","title":"CDN embed + tenant config endpoint","description":"Host embed bundle on CDN and expose /embed-config?tenant=\u003cid\u003e that returns relays, lnaddr, theme vars. Allow blogs to integrate with a single script tag.","status":"tombstone","priority":1,"issue_type":"task","created_at":"2025-12-01T01:27:00.539667-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","dependencies":[{"issue_id":"lightning-y95.5","depends_on_id":"lightning-y95","type":"parent-child","created_at":"2025-12-01T01:27:00.540439-08:00","created_by":"honk","metadata":"{}"}],"deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"lightning-y95.6","title":"Dev mocks for blog preview","description":"Provide stub lightning provider + fake relays so blog dev preview works without real keys. Toggle via env/flag; ensure tip/comment widgets use mocks when enabled.","status":"tombstone","priority":1,"issue_type":"task","created_at":"2025-12-01T01:27:16.908349-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","dependencies":[{"issue_id":"lightning-y95.6","depends_on_id":"lightning-y95","type":"parent-child","created_at":"2025-12-01T01:27:16.909079-08:00","created_by":"honk","metadata":"{}"}],"deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"lightning-y95.7","title":"Playwright e2e: klabo.world + nostrstack","description":"Add Playwright flow that boots klabo.world against nostrstack staging (mutinynet): load post, tip, see success; post comment via NIP-07; share to Nostr. Uses stub payer if no staging key provided.","status":"tombstone","priority":1,"issue_type":"task","created_at":"2025-12-01T01:27:45.967413-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","dependencies":[{"issue_id":"lightning-y95.7","depends_on_id":"lightning-y95","type":"parent-child","created_at":"2025-12-01T01:27:45.968163-08:00","created_by":"honk","metadata":"{}"}],"deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"lightning-y95.8","title":"Docs: integrate nostrstack into klabo.world","description":"Write a guide in docs/ showing how to add tips, comments, share to the klabo.world Next.js blog. Include env setup (API base, LNbits), code snippets, theming knobs, and troubleshooting.","status":"tombstone","priority":1,"issue_type":"task","created_at":"2025-12-01T01:28:02.39293-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","dependencies":[{"issue_id":"lightning-y95.8","depends_on_id":"lightning-y95","type":"parent-child","created_at":"2025-12-01T01:28:02.393862-08:00","created_by":"honk","metadata":"{}"}],"deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"lightning-ya5","title":"DB: migrations + seeds","description":"Prisma migrations for prod schema + seed scripts per tenant/user","status":"tombstone","priority":2,"issue_type":"task","created_at":"2025-11-28T12:15:24.756635-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","dependencies":[{"issue_id":"lightning-ya5","depends_on_id":"lightning-2lx","type":"parent-child","created_at":"2025-11-29T07:26:35.198821-08:00","created_by":"honk","metadata":"{}"}],"deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"lightning-yfai","title":"Test: LNURL utilities + SendSats component (unit)","description":"Add unit tests for LNURL helpers and SendSats behavior.\n\nAcceptance criteria:\n- Tests cover lnurl parsing/encoding, min/max validation, commentAllowed enforcement, successAction sanitization.\n- SendSats component tests cover amount presets, invoice success, and error states.\n- Tests run under existing vitest setup.\n\nEdge cases to handle:\n- Invalid lnurl, unsupported payRequest tag, comment length 0.\n\nNote: Always be looking for refactoring opportunities, bug fixes, and improvements. Create new tasks as you encounter them.\n\n## Files\n- packages/blog-kit/src/lnurl.test.ts (create: utility tests)\n- packages/blog-kit/src/send-sats.test.tsx (create: component tests)","status":"tombstone","priority":2,"issue_type":"task","created_at":"2025-12-20T13:11:13.477336-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","dependencies":[{"issue_id":"lightning-yfai","depends_on_id":"lightning-01t7","type":"parent-child","created_at":"2025-12-20T13:11:13.47914-08:00","created_by":"honk","metadata":"{}"},{"issue_id":"lightning-yfai","depends_on_id":"lightning-g1hn","type":"blocks","created_at":"2025-12-20T13:11:44.110409-08:00","created_by":"honk","metadata":"{}"},{"issue_id":"lightning-yfai","depends_on_id":"lightning-vhct","type":"blocks","created_at":"2025-12-20T13:11:44.478884-08:00","created_by":"honk","metadata":"{}"}],"deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"lightning-yji","title":"Review npub/nsec toggle component design","description":"Polish the key toggle display (npub/nsec vs hex, copy icon, overflow handling, padding). Ensure profile uses shared component.","status":"tombstone","priority":2,"issue_type":"task","created_at":"2025-12-02T11:31:57.318395-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"lightning-yrmi","title":"Deploy to production","status":"tombstone","priority":0,"issue_type":"task","created_at":"2025-12-17T11:44:34.008718-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","labels":["ops"],"deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"lightning-ys9h","title":"API: lnurlp invoice payments stored with hard-coded provider 'opennode'","description":"apps/api/src/routes/lnurlp-callback.ts creates Payment rows with provider: 'opennode' regardless of env.LIGHTNING_PROVIDER (e.g. lnbits). This can break provider-specific webhook/status logic and makes data inconsistent.","acceptance_criteria":"Payment.provider matches env.LIGHTNING_PROVIDER for lnurlp invoices; existing webhook/status flows still work; add/adjust tests.","status":"tombstone","priority":2,"issue_type":"bug","created_at":"2025-12-14T11:37:08.459398-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","labels":["api","bug","payments"],"deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"bug"}
{"id":"lightning-yzz6","title":"Epic: Make It GREAT - Find Friend \u0026 Tip","description":"Complete implementation of a first-time \"Find Friend \u0026 Tip\" flow that feels great from landing to payment confirmation.\n\n## Objective\nDeliver a guided, low-friction flow for a new user to locate a friend by Nostr identifier, view their profile, zap posts, and send a 500-sat tip with clear confirmation.\n\n## Success Criteria\n- [ ] User can find a friend via npub/nprofile/nip05 input and reach their profile.\n- [ ] Tip flow shows clear statuses and success confirmation (including zap receipt vs. payment caveat).\n- [ ] End-to-end Playwright flow + video run without console/network errors.\n\n## Assumptions\n- Search is identifier-based (npub/nprofile/nip05/lightning address), not full-text global Nostr search.\n- First iteration uses an API NIP-05 proxy with in-memory cache; nostrdb integration is deferred.\n- Login remains required to sign zap requests; read-only browsing is acceptable.\n\n## Out of Scope\n- Global Nostr indexer / graph-based people search.\n- Building a full wallet or custodial payments.\n- Full nostrdb integration and relay syncing beyond this flow.","status":"tombstone","priority":2,"issue_type":"epic","created_at":"2025-12-25T23:00:18.583784-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","close_reason":"Implemented","deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"epic"}
{"id":"lightning-z1a","title":"Pay + wallet stream status UI + fallback recheck","description":"Show live connection state for pay + wallet streams (Streaming/Retrying/Disconnected) and add a fallback 'Recheck status' button that triggers one-off status check when WS is down.","status":"tombstone","priority":2,"issue_type":"chore","created_at":"2025-12-03T14:44:17.843541-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","labels":["frontend","logging","ux"],"deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"chore"}
{"id":"lightning-z3tv","title":"Feat: Reaction (Like) Button","description":"Implement a 'Like' button that publishes a Kind 7 reaction event.\n\nDescription:\n- Create a `ReactionButton` component in `blog-kit`.\n- It should take an `event` prop and publish a Kind 7 event with `+` content and `e` tag pointing to the target event.\n- Provide optimistic UI feedback (heart icon fills/animates immediately).\n- Integrate into `FeedView` post actions.\n\nAcceptance Criteria:\n- Clicking 'Like' publishes a Kind 7 event.\n- Button state toggles optimistically.\n- Button shows active state if user has already liked (requires fetching reactions or tracking local state for v1). For v1 local state tracking is sufficient for the session.\n\nEdge Cases:\n- User not logged in (prompt or error).\n- Network failure (rollback optimistic state).\n\n## Files\n- packages/blog-kit/src/reaction-button.tsx (create: component)\n- packages/blog-kit/src/index.ts (modify: export)\n- apps/gallery/src/FeedView.tsx (modify: add ReactionButton)\n- apps/gallery/src/gallery.css (modify: styles)\n\n## QA Evidence\n- Playwright: Test clicking like button triggers event publish (mock).\n- Screenshots: `docs/screenshots/social/reaction-active.png`\n\n## Actual QA Evidence\n- Playwright: Visual check passed (`apps/gallery/tests/reaction.spec.ts`).\n- Screenshots: `docs/screenshots/social/reaction-active.png`\n- CI: Passed.\n\n## Close Notes\n- Implementation was found pre-existing in codebase.\n- Added visual regression test to confirm UI state.\n- Functional E2E test for publish proved flaky due to login/network dependencies in test environment.","status":"tombstone","priority":2,"issue_type":"task","created_at":"2026-01-03T18:15:09.141103-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","close_reason":"Implemented","dependencies":[{"issue_id":"lightning-z3tv","depends_on_id":"lightning-7qzp","type":"parent-child","created_at":"2026-01-03T18:15:09.143141-08:00","created_by":"honk"}],"deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"lightning-z5ey","title":"UX: Telemetry status hysteresis","description":"Reduce UI flicker on rapid telemetry connect/disconnect by adding a small hysteresis window.\n\nAcceptance criteria:\n- Reconnecting/offline states only render after a short dwell (ex: 300-500ms) to avoid flashing on quick reconnects.\n- Status transitions remain accurate for longer disconnects.\n- Playwright spec updated to cover the dwell behavior.\n\nEdge cases:\n- Back-to-back disconnects within the dwell window.\n- Offline event followed by immediate online event.\n\n## Files\n- apps/gallery/src/TelemetryBar.tsx (modify: dwell/hysteresis logic)\n- apps/gallery/tests/telemetry-reconnect.spec.ts (modify: assert dwell behavior)\n- docs/screenshots/telemetry-reconnect/telemetry-reconnect.png (update)\n- docs/screenshots/telemetry-reconnect/telemetry-offline.png (update)\n\n## QA Evidence\n- Playwright: pnpm --filter gallery exec playwright test tests/telemetry-reconnect.spec.ts\n- Screenshots: docs/screenshots/telemetry-reconnect/telemetry-reconnect.png, docs/screenshots/telemetry-reconnect/telemetry-offline.png\n- DevTools MCP: Transport closed; used QA fallback\n- QA fallback: pnpm qa:regtest-demo\n- Logs: pnpm dev:logs (FORCE_KILL_PORTS=1) + tail .logs/dev/api.log .logs/dev/gallery.log (no errors/warnings)\n- CI: pnpm check\n\n## Close Notes\n- Issues encountered: port 3001/4173 already in use; DevTools MCP Transport closed\n- Setup improvements: document how to clear ports before dev:logs; stabilize MCP devtools startup\n- Debug info that would have helped: prior process owning 3001 was tsx watch src/server.ts\n","status":"tombstone","priority":3,"issue_type":"task","created_at":"2026-01-04T01:21:21.11087-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","close_reason":"Implemented","dependencies":[{"issue_id":"lightning-z5ey","depends_on_id":"lightning-3aij","type":"parent-child","created_at":"2026-01-04T01:21:34.149248-08:00","created_by":"honk"}],"deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"lightning-z5my","title":"Chore: resolve TS 5.6 eslint parser warning","description":"Resolve @typescript-eslint/typescript-estree warning about unsupported TypeScript 5.6.\n\n- Implement: upgrade @typescript-eslint packages to versions supporting TS 5.6 and align config rules.\n- Acceptance criteria:\n  - `pnpm --filter gallery lint` runs without the TS version warning.\n  - Lint/typecheck remain green across affected packages.\n- Edge cases:\n  - Ensure no rule regressions for existing configs.\n  - Keep TS version aligned across workspace tooling.\n\n## Files\n- package.json (modify: @typescript-eslint versions)\n- packages/config/package.json (modify: align @typescript-eslint versions)\n- packages/config/eslint.cjs (modify: remove deprecated rule)\n- apps/gallery/src/FeedView.tsx (modify: replace empty interface with type alias)\n- pnpm-lock.yaml (modify: lockfile updates)\n\n## QA Evidence\n- Lint: `pnpm --filter gallery lint`\n- Typecheck: `pnpm --filter gallery typecheck`\n- Logs: `pnpm dev:logs` running; no new warnings tied to TS version check\n\n## Close Notes\n- Issues encountered: oracle script failed after retrying Claude model; lint warning traced to @nostrstack/config pinning @typescript-eslint 7.2.0.\n- Setup improvements: stabilize oracle CLI model selection.\n- Debug info that would have helped: note that shared eslint config package pins its own @typescript-eslint versions.\n","acceptance_criteria":"Lint runs without TS warning; gallery typecheck passes.","status":"tombstone","priority":4,"issue_type":"chore","assignee":"honk","estimated_minutes":60,"created_at":"2026-01-02T01:55:47.199169-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","close_reason":"Implemented","labels":["devx","lint"],"deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"chore"}
{"id":"lightning-z8mw","title":"API dev server not starting on :3001 (regtest zap verification)","description":"Investigate and fix apps/api dev server failing to start or log on port 3001. Ensure env vars from apps/api/.env.local load; resolve any port conflicts/zombie processes or tsx/Next.js issues. Verify LNbits regtest zap endpoint works via curl.","status":"tombstone","priority":2,"issue_type":"bug","created_at":"2025-12-19T13:59:35.699148-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"bug"}
{"id":"lightning-zb2","title":"API HTTPS/WSS optional with safety check","description":"Add optional HTTPS to API (self-signed dev certs), enable WSS directly on API, and provide config/env to run behind TLS ingress in prod. Include check that refuses to start if PUBLIC_ORIGIN is https but API only http.","status":"tombstone","priority":1,"issue_type":"chore","created_at":"2025-12-03T15:32:26.27869-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","labels":["backend","security","websockets"],"deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"chore"}
{"id":"lightning-zfof","title":"Bug: Prefer HTTPS API base for local dev","description":"Update local API base resolution so HTTPS gallery builds don't hit HTTP endpoints.\\n\\nImplementation Steps:\\n- Adjust API base resolution to prefer https for localhost when running on https.\\n- Ensure dev env sets VITE_API_BASE_URL=https://localhost:3001 when USE_HTTPS is true.\\n- Verify LNURL-auth and regtest endpoints load without mixed-content errors.\\n\\nAcceptance Criteria:\\n- Gallery API calls do not attempt http://localhost:3001 when served over https.\\n- No browser console errors from mixed content or ERR_EMPTY_RESPONSE.\\n\\n## Files\\n- packages/blog-kit/src/api-base.ts (modify: upgrade http to https when page is https)\\n- .env.dev (modify: set VITE_API_BASE_URL for dev)","status":"tombstone","priority":2,"issue_type":"task","created_at":"2025-12-19T20:04:39.456841-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"lightning-zgt7","title":"Fix Pay-to-unlock layout overflow at mid-width viewports","description":"Pay-to-unlock card still overflows/overlaps adjacent sidebar at certain viewport widths (e.g. ~1026px wide per screenshot). Rework layout constraints (flex/grid, min-width, overflow handling) and add automated regression in Playwright.","status":"tombstone","priority":1,"issue_type":"bug","created_at":"2025-12-15T04:48:53.494176-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","labels":["layout","lightning","ui"],"dependencies":[{"issue_id":"lightning-zgt7","depends_on_id":"lightning-khfc","type":"discovered-from","created_at":"2025-12-15T04:48:53.496628-08:00","created_by":"honk","metadata":"{}"}],"deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"bug"}
{"id":"lightning-zqm","title":"Enable real payments by default in gallery","description":"Always show real invoices UI; remove env toggle banner about VITE_ENABLE_REAL_PAYMENTS; keep real payments enabled.","status":"tombstone","priority":2,"issue_type":"task","created_at":"2025-12-03T10:27:25.509501-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","labels":["gallery"],"deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"lightning-zriy","title":"Core UI: Lightning address card + successAction","description":"Show Lightning address profile card and render successAction after payment.\n\nImplementation Steps:\n- Add profile card with lightning address + QR + copy.\n- Render successAction text/url in zap modal after payment.\n\nAcceptance Criteria:\n- Profile view shows lightning address card when present.\n- successAction appears after successful payment.\n\nEdge Cases:\n- Long addresses wrap without breaking layout.\n\n\n## Files\n- apps/gallery/src/ProfileView.tsx (modify: add lightning address card)\n- apps/gallery/src/styles/lightning-card.css (create: card styles)\n- packages/blog-kit/src/zap-button.tsx (modify: render successAction)","status":"tombstone","priority":2,"issue_type":"task","created_at":"2025-12-19T18:37:59.047747-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","dependencies":[{"issue_id":"lightning-zriy","depends_on_id":"lightning-naer","type":"parent-child","created_at":"2025-12-19T18:37:59.049112-08:00","created_by":"honk","metadata":"{}"},{"issue_id":"lightning-zriy","depends_on_id":"lightning-3avh","type":"blocks","created_at":"2025-12-19T18:49:08.253125-08:00","created_by":"honk","metadata":"{}"}],"deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"lightning-zxak","title":"UI: Rebuild zap modal overlay + tip-inspired layout","description":"Rework zap modal markup/styling to match the Lightning Tip demo (QR + invoice box + actions) and prevent layout shift.\n\nAcceptance Criteria:\n- Zap modal renders in a fixed overlay (no feed layout shift).\n- Layout matches tip-inspired grid with QR, invoice box, and actions.\n- Responsive behavior keeps QR + invoice readable on small screens.\n\n## Files\n- packages/blog-kit/src/zap-button.tsx (modify: modal markup + overlay/portal)\n- apps/gallery/src/gallery.css (modify: zap modal styles / overrides)","status":"tombstone","priority":2,"issue_type":"task","created_at":"2025-12-19T16:19:21.197521-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","dependencies":[{"issue_id":"lightning-zxak","depends_on_id":"lightning-k7bf","type":"parent-child","created_at":"2025-12-19T16:19:21.19921-08:00","created_by":"honk","metadata":"{}"},{"issue_id":"lightning-zxak","depends_on_id":"lightning-hbwi","type":"blocks","created_at":"2025-12-19T16:20:26.394161-08:00","created_by":"honk","metadata":"{}"},{"issue_id":"lightning-zxak","depends_on_id":"lightning-zyh6","type":"blocks","created_at":"2025-12-19T16:20:31.758098-08:00","created_by":"honk","metadata":"{}"}],"deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"lightning-zyh6","title":"Design: Zap modal UI spec (tip-inspired)","description":"Capture the visual/interaction spec for the zap modal using the Lightning Tip demo as reference (QR, invoice box, actions, status).\n\nAcceptance Criteria:\n- Spec defines layout regions, typography, spacing, and responsive behavior.\n- Specifies overlay behavior (no layout shift, body scroll lock) and animation guidance.\n- Includes accessibility notes (dialog role, focus trap, ESC to close).\n\n## Files\n- docs/zap-ui-spec.md (create: UI spec + layout diagram)","status":"tombstone","priority":2,"issue_type":"task","created_at":"2025-12-19T16:18:52.474259-08:00","updated_at":"2026-01-04T15:34:57.372354-08:00","dependencies":[{"issue_id":"lightning-zyh6","depends_on_id":"lightning-k7bf","type":"parent-child","created_at":"2025-12-19T16:18:52.4759-08:00","created_by":"honk","metadata":"{}"}],"deleted_at":"2026-01-04T15:34:57.372354-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
