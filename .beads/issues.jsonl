{"id":"lightning-12s","title":"Fix TypeScript errors in Skeleton component","status":"closed","priority":0,"issue_type":"bug","created_at":"2026-01-04T21:18:28.474854-08:00","updated_at":"2026-01-04T21:19:01.662516-08:00","closed_at":"2026-01-04T21:19:01.662516-08:00"}
{"id":"lightning-2lx","title":"[Deleted]","description":"[RESURRECTED] This issue was deleted but recreated as a tombstone to preserve hierarchical structure.","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-05T00:06:22.907126Z","updated_at":"2026-01-05T22:24:32.295021107-08:00","closed_at":"2026-01-05T22:24:32.295021107-08:00"}
{"id":"lightning-4le","title":"Fix telemetry-summary response schema mismatch","status":"closed","priority":0,"issue_type":"bug","created_at":"2026-01-04T21:21:35.489429-08:00","updated_at":"2026-01-04T21:21:54.979737-08:00","closed_at":"2026-01-04T21:21:54.979737-08:00"}
{"id":"lightning-4nw","title":"Epic: UX Polish and Missing Features","description":"## Overview\nComprehensive UX improvements identified during deep review of the gallery application.\n\n## High Priority (P1)\n- lightning-9ur: Add edit profile button to ProfileView\n- lightning-hp7: Add repost/boost functionality to posts  \n- lightning-x0c: Add 'New Message' button to DMView\n\n## Medium Priority (P2)\n- lightning-ah3: Add proper 404 page for invalid routes\n- lightning-g9l: Add Help/Support button to Sidebar\n- lightning-kp8: Add pagination to SearchView note results\n- lightning-ln5: Show notification when payment times out\n\n## Future Enhancements\n- Add Explore/Discover feature\n- Add theme toggle to sidebar\n- Add notification mark-as-read functionality\n- Add skip-to-main-content link\n- Enable Lightning login by default\n- Add NIP-46 remote signer support\n\n## Success Criteria\n- All P1 issues resolved\n- All P2 issues resolved\n- QA passes with improved UX","status":"closed","priority":1,"issue_type":"epic","created_at":"2026-01-05T18:52:17.50746613-08:00","created_by":"klabo","updated_at":"2026-01-05T22:10:42.547055165-08:00","closed_at":"2026-01-05T22:10:42.547055165-08:00","close_reason":"Closed"}
{"id":"lightning-63p","title":"Epic: NostrStack UI/UX, Accessibility, and Performance Polish","description":"Comprehensive improvements for production readiness: accessibility, mobile UX, performance optimization, and developer experience","status":"closed","priority":1,"issue_type":"epic","created_at":"2026-01-04T21:23:13.229664-08:00","updated_at":"2026-01-04T23:17:11.23815-08:00","closed_at":"2026-01-04T23:17:11.23815-08:00"}
{"id":"lightning-7vy","title":"Accessibility audit \u0026 WCAG 2.1 AA compliance","description":"Comprehensive accessibility audit and enhancement to achieve WCAG 2.1 AA compliance. Current state: only 49 ARIA attributes across entire codebase. This is critical for production readiness, legal compliance, and expanding user reach by 15%+.\n\nScope:\n- Add ARIA labels, roles, landmarks to all interactive components\n- Implement keyboard navigation for modals, dropdowns, forms\n- Add focus management for invoice popover, payment modal, post editor\n- Create accessibility E2E tests with Playwright + axe-core\n- Document a11y patterns in design system\n\nTarget: WCAG 2.1 AA compliance, Lighthouse Accessibility score: 100\n\nComponents affected:\n- packages/blog-kit/src/ui/*.tsx (PaymentModal, SendSats, ReactionButton)\n- apps/gallery/src/*.tsx (FeedView, SearchView, Sidebar)\n- packages/embed/src/*.ts (invoicePopover, relayBadge, share)\n\nDeliverables:\n- Playwright test: tests/accessibility.spec.ts with axe violations assertions\n- Documentation: docs/accessibility.md with patterns + testing guide\n- All interactive components with proper ARIA attributes\n- Full keyboard navigation support","status":"closed","priority":1,"issue_type":"epic","created_at":"2026-01-05T00:02:41.722736-08:00","updated_at":"2026-01-05T17:32:01.800553421-08:00","closed_at":"2026-01-05T17:32:01.800553421-08:00","close_reason":"Closed"}
{"id":"lightning-7vy.1","title":"A11y: Add ARIA labels to blog-kit UI components","description":"Add comprehensive ARIA labels and roles to all blog-kit UI components.\n\nComponents to update:\n- PaymentModal.tsx: modal, dialog, status regions\n- SendSats.tsx: form controls, amount presets, error messages\n- ZapButton.tsx: button states (idle/pending/paid)\n- ReactionButton.tsx: toggle button with aria-pressed\n- PostEditor.tsx: textarea, character count, publish button\n- ReplyModal.tsx: modal dialog, form controls\n- TipActivityFeed.tsx: live region for updates\n\nAcceptance:\n- All interactive elements have aria-label or aria-labelledby\n- Form controls have aria-describedby for error messages\n- Buttons indicate state (aria-pressed, aria-expanded, aria-busy)\n- Live regions use aria-live for dynamic content\n- Modal components have role=dialog, aria-modal=true","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-05T00:05:10.994385-08:00","updated_at":"2026-01-05T08:55:25.402835-08:00","closed_at":"2026-01-05T08:55:25.402835-08:00","dependencies":[{"issue_id":"lightning-7vy.1","depends_on_id":"lightning-7vy","type":"parent-child","created_at":"2026-01-05T00:05:10.995276-08:00","created_by":"daemon"}]}
{"id":"lightning-7vy.2","title":"A11y: Add ARIA labels to gallery UI components","description":"Add comprehensive ARIA labels and roles to all gallery app components.\n\nComponents to update:\n- FeedView.tsx: main content region, search form, post list\n- SearchView.tsx: search input, results list, loading states\n- Sidebar.tsx: navigation landmarks, wallet section\n- WalletView.tsx: balance display, action buttons\n- LoginView.tsx: auth form, method selection\n- FindFriendCard.tsx: search card with call-to-action\n- NotificationItem.tsx: notification list items with grouping\n- OnboardingTour.tsx: dialog with step navigation\n\nAcceptance:\n- Main content areas use proper landmarks (nav, main, aside)\n- Search forms have aria-label for inputs\n- Lists use role=list and role=listitem where appropriate\n- Loading states use aria-busy or aria-live\n- Navigation items indicate current page with aria-current","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-05T00:06:29.747657-08:00","updated_at":"2026-01-05T09:43:02.380684-08:00","closed_at":"2026-01-05T09:43:02.380684-08:00","dependencies":[{"issue_id":"lightning-7vy.2","depends_on_id":"lightning-7vy","type":"parent-child","created_at":"2026-01-05T00:06:29.748686-08:00","created_by":"daemon"}]}
{"id":"lightning-7vy.3","title":"A11y: Implement keyboard navigation for all modals","description":"Ensure all modals support full keyboard navigation and focus management.\n\nModals to update:\n- PaymentModal (blog-kit): Tab order, Escape to close, focus trap\n- ReplyModal (blog-kit): Focus on textarea when opened, Escape closes\n- HelpModal (gallery): Focus management, keyboard shortcuts\n- OnboardingTour (gallery): Arrow keys for navigation, Escape to skip\n\nImplementation:\n- Focus trap: Tab cycles within modal\n- Auto-focus first interactive element on open\n- Escape key closes modal (return focus to trigger)\n- Arrow keys for multi-step flows (onboarding tour)\n- Focus visible indicator styles\n\nAcceptance:\n- All modals trap focus (Tab doesn't escape)\n- Escape key always closes modal\n- Opening modal focuses first input/button\n- Closing modal returns focus to trigger element\n- Keyboard navigation works without mouse","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-05T00:07:47.048772-08:00","updated_at":"2026-01-05T09:45:23.157394-08:00","closed_at":"2026-01-05T09:45:23.157394-08:00","dependencies":[{"issue_id":"lightning-7vy.3","depends_on_id":"lightning-7vy","type":"parent-child","created_at":"2026-01-05T00:07:47.049596-08:00","created_by":"daemon"}]}
{"id":"lightning-7vy.4","title":"A11y: Create Playwright accessibility test suite","description":"Create comprehensive E2E accessibility tests using Playwright + axe-core.\n\nTest file: apps/gallery/tests/accessibility.spec.ts\n\nTest coverage:\n- Run axe-core on all major pages/views\n- Test keyboard navigation flows\n- Test screen reader announcements (aria-live regions)\n- Test focus management in modals\n- Test form error associations (aria-describedby)\n- Test color contrast (WCAG AA minimum)\n\nPages to test:\n- / (feed view)\n- /login\n- /wallet\n- /search\n- Modal flows: zap, reply, help\n\nAcceptance:\n- Zero axe-core violations on all pages\n- All critical user flows work with keyboard only\n- Test suite runs in CI (add to .github/workflows/ci.yml)\n- Documentation includes running a11y tests locally\n- Coverage report shows tested components","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-05T00:09:03.13412-08:00","updated_at":"2026-01-05T09:49:22.240438-08:00","closed_at":"2026-01-05T09:49:22.240438-08:00","dependencies":[{"issue_id":"lightning-7vy.4","depends_on_id":"lightning-7vy","type":"parent-child","created_at":"2026-01-05T00:09:03.135487-08:00","created_by":"daemon"}]}
{"id":"lightning-7vy.5","title":"A11y: Document accessibility patterns and guidelines","description":"Create comprehensive accessibility documentation for contributors.\n\nCreate docs/accessibility.md with:\n\n1. Overview\n   - WCAG 2.1 AA compliance target\n   - Why accessibility matters for Nostr/Lightning\n   \n2. Component Patterns\n   - Modal dialogs (focus trap, escape key)\n   - Form controls (labels, errors, hints)\n   - Interactive buttons (states, loading)\n   - Live regions (status updates, notifications)\n   - Navigation (landmarks, skip links)\n\n3. Testing Guide\n   - Running axe-core tests locally\n   - Manual keyboard navigation testing\n   - Screen reader testing (VoiceOver/NVDA)\n   - Lighthouse accessibility audits\n\n4. Checklist for New Components\n   - ARIA attributes checklist\n   - Keyboard interaction patterns\n   - Focus management requirements\n   - Color contrast validation\n\n5. Resources\n   - WCAG 2.1 quick reference\n   - ARIA authoring practices\n   - MDN accessibility guides\n\nAcceptance:\n- docs/accessibility.md created and comprehensive\n- CONTRIBUTING.md links to accessibility guidelines\n- Pattern library includes a11y examples in Storybook stories","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-05T00:10:24.868771-08:00","updated_at":"2026-01-05T17:32:06.889210235-08:00","closed_at":"2026-01-05T17:32:06.889210235-08:00","close_reason":"Closed","dependencies":[{"issue_id":"lightning-7vy.5","depends_on_id":"lightning-7vy","type":"parent-child","created_at":"2026-01-05T00:10:24.869743-08:00","created_by":"daemon"}]}
{"id":"lightning-830","title":"Epic: NostrStack Comprehensive Improvements","description":"Implement all identified improvements across PWA, messaging, UX, performance, and DX. See plan at ~/.claude/plans/clever-purring-balloon.md","status":"closed","priority":1,"issue_type":"epic","created_at":"2026-01-04T16:26:16.431106-08:00","updated_at":"2026-01-04T21:12:03.940215-08:00","closed_at":"2026-01-04T21:12:03.940215-08:00"}
{"id":"lightning-830.1","title":"PWA: manifest + icons + meta tags","description":"Add PWA manifest, app icons, and meta tags for installability. Files: /apps/gallery/public/manifest.json, /apps/gallery/public/icons/, /apps/gallery/index.html","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-04T16:26:27.300488-08:00","updated_at":"2026-01-04T16:28:08.230159-08:00","closed_at":"2026-01-04T16:28:08.230159-08:00","dependencies":[{"issue_id":"lightning-830.1","depends_on_id":"lightning-830","type":"parent-child","created_at":"2026-01-04T16:26:27.301052-08:00","created_by":"daemon"}]}
{"id":"lightning-830.10","title":"Feature: push notifications","description":"Web Push API with service worker. Requires PWA manifest first.","status":"closed","priority":3,"issue_type":"feature","created_at":"2026-01-04T16:26:51.640805-08:00","updated_at":"2026-01-04T18:16:14.862512-08:00","closed_at":"2026-01-04T18:16:14.862512-08:00","close_reason":"Implemented PWA Service Worker and Notifications","dependencies":[{"issue_id":"lightning-830.10","depends_on_id":"lightning-830","type":"parent-child","created_at":"2026-01-04T16:26:51.641344-08:00","created_by":"daemon"}]}
{"id":"lightning-830.11","title":"Performance: IndexedDB event cache","description":"Cache events locally for faster loads. Files: cache/eventCache.ts, cache/profileCache.ts","status":"closed","priority":3,"issue_type":"task","created_at":"2026-01-04T16:26:51.716373-08:00","updated_at":"2026-01-04T18:25:23.983065-08:00","closed_at":"2026-01-04T18:25:23.983065-08:00","close_reason":"Implemented IndexedDB event cache","dependencies":[{"issue_id":"lightning-830.11","depends_on_id":"lightning-830","type":"parent-child","created_at":"2026-01-04T16:26:51.716875-08:00","created_by":"daemon"}]}
{"id":"lightning-830.12","title":"Performance: image lazy loading","description":"Add loading=lazy to images with skeleton placeholders","status":"closed","priority":3,"issue_type":"task","created_at":"2026-01-04T16:26:51.790741-08:00","updated_at":"2026-01-04T18:30:04.424147-08:00","closed_at":"2026-01-04T18:30:04.424147-08:00","close_reason":"Implemented image lazy loading with skeleton","dependencies":[{"issue_id":"lightning-830.12","depends_on_id":"lightning-830","type":"parent-child","created_at":"2026-01-04T16:26:51.791274-08:00","created_by":"daemon"}]}
{"id":"lightning-830.13","title":"UX: error recovery with retry","description":"Add retry buttons to Alert component, wire up in FeedView/ProfileView","status":"closed","priority":3,"issue_type":"task","created_at":"2026-01-04T16:26:51.869355-08:00","updated_at":"2026-01-04T19:04:35.094476-08:00","closed_at":"2026-01-04T19:04:35.094476-08:00","close_reason":"Implemented","dependencies":[{"issue_id":"lightning-830.13","depends_on_id":"lightning-830","type":"parent-child","created_at":"2026-01-04T16:26:51.869858-08:00","created_by":"daemon"}]}
{"id":"lightning-830.14","title":"DX: Storybook component library","description":"Set up Storybook for UI components. Files: .storybook/, *.stories.tsx","status":"closed","priority":3,"issue_type":"task","created_at":"2026-01-04T16:26:51.947235-08:00","updated_at":"2026-01-04T21:09:10.251483-08:00","closed_at":"2026-01-04T21:09:10.251483-08:00","dependencies":[{"issue_id":"lightning-830.14","depends_on_id":"lightning-830","type":"parent-child","created_at":"2026-01-04T16:26:51.947715-08:00","created_by":"daemon"}]}
{"id":"lightning-830.15","title":"Performance: multi-relay failover","description":"Health scoring and automatic failover. Files: nostr/relayHealth.ts","status":"closed","priority":3,"issue_type":"task","created_at":"2026-01-04T16:26:52.029362-08:00","updated_at":"2026-01-04T19:10:58.170116-08:00","closed_at":"2026-01-04T19:10:58.170116-08:00","close_reason":"Implemented","dependencies":[{"issue_id":"lightning-830.15","depends_on_id":"lightning-830","type":"parent-child","created_at":"2026-01-04T16:26:52.029864-08:00","created_by":"daemon"}]}
{"id":"lightning-830.16","title":"Feature: threaded reply view","description":"Nested reply display in NostrEventView. Files: ThreadedReplies.tsx","status":"closed","priority":3,"issue_type":"task","created_at":"2026-01-04T16:26:52.105023-08:00","updated_at":"2026-01-04T19:16:20.953842-08:00","closed_at":"2026-01-04T19:16:20.953842-08:00","close_reason":"Implemented","dependencies":[{"issue_id":"lightning-830.16","depends_on_id":"lightning-830","type":"parent-child","created_at":"2026-01-04T16:26:52.105623-08:00","created_by":"daemon"}]}
{"id":"lightning-830.17","title":"UX: onboarding tour","description":"First-time user walkthrough. Files: OnboardingTour.tsx, useOnboarding.ts","status":"closed","priority":3,"issue_type":"task","created_at":"2026-01-04T16:26:52.182391-08:00","updated_at":"2026-01-04T19:21:40.229627-08:00","closed_at":"2026-01-04T19:21:40.229627-08:00","close_reason":"Implemented","dependencies":[{"issue_id":"lightning-830.17","depends_on_id":"lightning-830","type":"parent-child","created_at":"2026-01-04T16:26:52.182906-08:00","created_by":"daemon"}]}
{"id":"lightning-830.18","title":"Feature: spam filtering","description":"Heuristic spam detection. Files: nostr/spamFilter.ts","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-04T16:26:52.25718-08:00","updated_at":"2026-01-04T21:10:24.355662-08:00","closed_at":"2026-01-04T21:10:24.355662-08:00","dependencies":[{"issue_id":"lightning-830.18","depends_on_id":"lightning-830","type":"parent-child","created_at":"2026-01-04T16:26:52.257699-08:00","created_by":"daemon"}]}
{"id":"lightning-830.19","title":"Distribution: create-nostrstack-site CLI","description":"npx create-nostrstack-site scaffolding tool","status":"closed","priority":4,"issue_type":"feature","created_at":"2026-01-04T16:26:52.333885-08:00","updated_at":"2026-01-04T21:11:55.738335-08:00","closed_at":"2026-01-04T21:11:55.738335-08:00","dependencies":[{"issue_id":"lightning-830.19","depends_on_id":"lightning-830","type":"parent-child","created_at":"2026-01-04T16:26:52.334385-08:00","created_by":"daemon"}]}
{"id":"lightning-830.2","title":"API: OpenAPI response schemas for Swagger UI","description":"Add response schemas to all API routes so /docs shows complete documentation. Files: /apps/api/src/routes/*.ts","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-04T16:26:27.388888-08:00","updated_at":"2026-01-04T21:03:31.294318-08:00","closed_at":"2026-01-04T21:03:31.294318-08:00","close_reason":"Implemented OpenAPI response schemas","dependencies":[{"issue_id":"lightning-830.2","depends_on_id":"lightning-830","type":"parent-child","created_at":"2026-01-04T16:26:27.389419-08:00","created_by":"daemon"}]}
{"id":"lightning-830.3","title":"UX: skeleton loaders for loading states","description":"Replace loading spinners with skeleton placeholders. Files: /apps/gallery/src/ui/Skeleton.tsx, gallery.css, FeedView.tsx, ProfileView.tsx","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-04T16:26:27.472685-08:00","updated_at":"2026-01-04T21:07:24.950395-08:00","closed_at":"2026-01-04T21:07:24.950395-08:00","close_reason":"Implemented skeleton loaders","dependencies":[{"issue_id":"lightning-830.3","depends_on_id":"lightning-830","type":"parent-child","created_at":"2026-01-04T16:26:27.473183-08:00","created_by":"daemon"}]}
{"id":"lightning-830.4","title":"UX: keyboard shortcuts","description":"Add keyboard navigation: j/k (navigate), / (search), ? (help), Esc (close), n (new post). Files: /apps/gallery/src/hooks/useKeyboardShortcuts.ts","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-04T16:26:27.550462-08:00","updated_at":"2026-01-04T21:07:24.952576-08:00","closed_at":"2026-01-04T21:07:24.952576-08:00","close_reason":"Implemented keyboard shortcuts and help modal","dependencies":[{"issue_id":"lightning-830.4","depends_on_id":"lightning-830","type":"parent-child","created_at":"2026-01-04T16:26:27.550981-08:00","created_by":"daemon"}]}
{"id":"lightning-830.5","title":"Mobile: viewport fixes and touch optimizations","description":"Replace 100vh with 100dvh, add touch optimizations, responsive bottom nav","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-04T16:26:51.239487-08:00","updated_at":"2026-01-04T16:54:21.807872-08:00","closed_at":"2026-01-04T16:54:21.807872-08:00","close_reason":"Implemented viewport fixes and bottom nav","dependencies":[{"issue_id":"lightning-830.5","depends_on_id":"lightning-830","type":"parent-child","created_at":"2026-01-04T16:26:51.240054-08:00","created_by":"daemon"}]}
{"id":"lightning-830.6","title":"Feature: follow/unfollow functionality","description":"Implement kind 3 contact list management. Files: useContactList.ts hook, ProfileView.tsx","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-04T16:26:51.320624-08:00","updated_at":"2026-01-04T16:57:36.039037-08:00","closed_at":"2026-01-04T16:57:36.039037-08:00","close_reason":"Implemented useContactList hook and follow buttons","dependencies":[{"issue_id":"lightning-830.6","depends_on_id":"lightning-830","type":"parent-child","created_at":"2026-01-04T16:26:51.321152-08:00","created_by":"daemon"}]}
{"id":"lightning-830.7","title":"Feature: direct messages (NIP-04/NIP-44)","description":"Encrypted DM support with DMView, DMConversation components. Files: dm.ts encryption, useDMs.ts hook","status":"closed","priority":2,"issue_type":"feature","created_at":"2026-01-04T16:26:51.408716-08:00","updated_at":"2026-01-04T18:10:36.21012-08:00","closed_at":"2026-01-04T18:10:36.21012-08:00","close_reason":"Implemented NIP-04 Direct Messages","dependencies":[{"issue_id":"lightning-830.7","depends_on_id":"lightning-830","type":"parent-child","created_at":"2026-01-04T16:26:51.409281-08:00","created_by":"daemon"}]}
{"id":"lightning-830.8","title":"Feature: mute/block lists (NIP-51)","description":"Kind 10000 mute list with useMuteList hook, filter in FeedView/NotificationsView","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-04T16:26:51.490277-08:00","updated_at":"2026-01-04T17:01:48.759537-08:00","closed_at":"2026-01-04T17:01:48.759537-08:00","close_reason":"Implemented mute list with filtering","dependencies":[{"issue_id":"lightning-830.8","depends_on_id":"lightning-830","type":"parent-child","created_at":"2026-01-04T16:26:51.490807-08:00","created_by":"daemon"}]}
{"id":"lightning-830.9","title":"Feature: content warning display","description":"Show content warnings with reveal toggle. Modify FeedView.tsx PostItem","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-04T16:26:51.565409-08:00","updated_at":"2026-01-04T17:05:01.371685-08:00","closed_at":"2026-01-04T17:05:01.371685-08:00","close_reason":"Implemented content warning display","dependencies":[{"issue_id":"lightning-830.9","depends_on_id":"lightning-830","type":"parent-child","created_at":"2026-01-04T16:26:51.565935-08:00","created_by":"daemon"}]}
{"id":"lightning-831","title":"Investigate and fix infinite update loop causing QA failures","description":"## Problem\n\nQA tests are failing with 'Maximum update depth exceeded' errors. This is a pre-existing issue (reproduced on main without the performance optimization changes).\n\n## Symptoms\n\n- Live Feed element not visible during QA tests\n- Console shows repeated 'Maximum update depth exceeded' errors\n- 'Rendered fewer hooks than expected' error\n- WebSocket connection failures to telemetry endpoint\n\n## Investigation Needed\n\n1. Identify which component is causing the infinite loop\n2. Check for setState calls inside useEffect without proper dependencies\n3. Look for dependencies that change on every render\n4. Check RelayProvider and other context providers\n\n## Related\n\n- Discovered during work on lightning-831 (performance optimizations)\n- Not caused by the batching changes (reproduces on main branch)","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-05T15:53:05.186380398-08:00","created_by":"klabo","updated_at":"2026-01-05T16:25:03.527390582-08:00","closed_at":"2026-01-05T16:25:04.527390582-08:00"}
{"id":"lightning-832","title":"Fix React hooks violations in custom hooks causing login failures","description":"## Problem\nLogin flow fails with React error: 'Rendered fewer hooks than expected. This may be caused by an accidental early return statement.'\n\n## Root Cause\nMultiple custom hooks have patterns that may violate React's Rules of Hooks during authentication state transitions (pubkey: null → value):\n\n### Hooks Requiring Investigation:\n1. **useMuteList.ts** (lines 19-24) - Conditional state updates in useCallback\n2. **useContactList.ts** - Early returns in async callbacks\n3. **useDMs.ts** (line 28-29) - Conditional useEffect returns\n4. **Auth Provider** (packages/blog-kit/src/auth.tsx) - Multiple conditional paths\n\n## Current Status\n- ✅ Fixed FeedView.tsx early return (commit 404231c)\n- ❌ Login still fails with hooks error\n\n## Impact\n**BLOCKER**: Users cannot log in to the application\n\n## Testing\nRun: `pnpm qa:regtest-demo`\n\nExpected: Login succeeds and 'Live Feed' appears\nActual: Timeout waiting for 'Live Feed', hooks error in console\n\n## References\n- Test report: See commit message and investigation notes\n- React Rules of Hooks: https://react.dev/reference/rules/rules-of-hooks","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-05T16:57:03.170545765-08:00","created_by":"klabo","updated_at":"2026-01-05T17:08:05.919336734-08:00","closed_at":"2026-01-05T17:08:06.919336734-08:00"}
{"id":"lightning-833","title":"QA: Regtest pay button missing after invoice ready","description":"## Problem\nThe QA test `pnpm qa:regtest-demo` fails with:\n```\nError: Regtest pay button missing after invoice ready.\n```\n\n## Context\n- Login works correctly\n- Onboarding is skipped\n- ZAP button is clickable (no more overlay issues)\n- Payment modal opens with invoice\n- But regtest pay button is not appearing\n\n## Investigation needed\n- Check PaymentModal component for regtest pay button rendering logic\n- Verify VITE_ENABLE_REGTEST_PAY env var is correctly set\n- Check if the button is conditionally rendered based on network detection\n\n## Acceptance Criteria\n- `pnpm qa:regtest-demo` passes completely","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-05T17:08:39.210423253-08:00","created_by":"klabo","updated_at":"2026-01-05T17:15:12.321556638-08:00","closed_at":"2026-01-05T17:15:13.321556638-08:00"}
{"id":"lightning-8y2","title":"Accessibility: prefers-reduced-motion support","description":"Respect user motion preferences in animations and transitions","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-04T21:23:35.556372-08:00","updated_at":"2026-01-04T23:13:14.443353-08:00","closed_at":"2026-01-04T23:13:14.443353-08:00","dependencies":[{"issue_id":"lightning-8y2","depends_on_id":"lightning-63p","type":"blocks","created_at":"2026-01-04T21:23:46.844957-08:00","created_by":"daemon"}]}
{"id":"lightning-9ur","title":"UX: Add edit profile button to ProfileView","description":"## Problem\nUsers cannot edit their profile from the profile view. They must navigate to Settings to find profile editing options.\n\n## Expected Behavior\nWhen viewing your own profile, there should be an 'Edit Profile' button that either:\n1. Opens an inline edit mode\n2. Navigates to Settings with profile section focused\n\n## Current Behavior\nProfileView shows Follow/Unfollow and Mute/Unmute buttons for OTHER users, but shows no action buttons when viewing your own profile.\n\n## Location\napps/gallery/src/ProfileView.tsx (around line 305-331)\n\n## Acceptance Criteria\n- [ ] Add 'Edit Profile' button visible when isMe === true\n- [ ] Button should navigate to Settings or open inline editor\n- [ ] Proper styling consistent with other buttons","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-05T18:50:17.133828633-08:00","created_by":"klabo","updated_at":"2026-01-05T18:58:45.805679784-08:00","closed_at":"2026-01-05T18:58:45.805679784-08:00","close_reason":"Closed"}
{"id":"lightning-ack","title":"Mobile: collapsible sidebar with hamburger menu","description":"Sidebar should collapse to hamburger on mobile viewports for better mobile UX","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-04T21:23:32.601422-08:00","updated_at":"2026-01-04T21:26:00.581045-08:00","closed_at":"2026-01-04T21:26:00.581045-08:00","dependencies":[{"issue_id":"lightning-ack","depends_on_id":"lightning-63p","type":"blocks","created_at":"2026-01-04T21:23:46.719281-08:00","created_by":"daemon"}]}
{"id":"lightning-ah3","title":"UX: Add proper 404 page for invalid routes","description":"## Problem\nInvalid routes silently redirect to the feed view. Users have no indication that the URL they entered was invalid.\n\n## Current Behavior\n- Navigating to /foo/bar/baz shows the feed\n- No error message or indication of invalid route\n- Invalid profile IDs (/p/invalid) show alert but still render current view\n\n## Expected Behavior\n- Clear 404 page with:\n  - 'Page not found' message\n  - Link back to home\n  - Helpful suggestions (search, explore)\n\n## Location\napps/gallery/src/App.tsx - routing logic\n\n## Acceptance Criteria\n- [ ] Create NotFoundView component\n- [ ] Route unmatched paths to NotFoundView\n- [ ] Include 'Go home' link\n- [ ] Styled consistently with app theme","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-05T18:51:16.63660324-08:00","created_by":"klabo","updated_at":"2026-01-05T19:11:37.467638216-08:00","closed_at":"2026-01-05T19:11:37.467638216-08:00","close_reason":"Closed"}
{"id":"lightning-b2d","title":"[Deleted]","description":"[RESURRECTED] This issue was deleted but recreated as a tombstone to preserve hierarchical structure.","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-05T00:06:22.714148Z","updated_at":"2026-01-05T22:52:18.945698328-08:00","closed_at":"2026-01-05T22:52:18.945698328-08:00"}
{"id":"lightning-b2d.2","title":"[Deleted]","status":"tombstone","priority":0,"issue_type":"task","created_at":"2026-01-05T00:06:22.706105Z","updated_at":"2026-01-05T17:25:51.268262812-08:00","deleted_at":"2026-01-05T00:06:22.706105Z","deleted_by":"honk","delete_reason":"batch delete","original_type":"task"}
{"id":"lightning-e40","title":"Expand Storybook component coverage","description":"Add Storybook stories for core UI components to improve DX, enable visual testing, and create living documentation. Target 80%+ coverage of reusable components.","status":"closed","priority":2,"issue_type":"epic","created_at":"2026-01-04T23:25:38.663176-08:00","updated_at":"2026-01-04T23:42:51.776724-08:00","closed_at":"2026-01-04T23:42:51.776724-08:00"}
{"id":"lightning-e40.1","title":"Stories: Core UI components (Image, BitcoinNodeCard, ProfileLink)","description":"Add Storybook stories for frequently-used presentational components.\n\nFiles:\n- apps/gallery/src/ui/Image.stories.tsx\n- apps/gallery/src/ui/BitcoinNodeCard.stories.tsx\n- apps/gallery/src/ui/ProfileLink.stories.tsx\n\nAcceptance:\n- All props/variants documented\n- Accessibility checks pass\n- Visual states covered (loading, error, success)","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-04T23:25:45.451019-08:00","updated_at":"2026-01-04T23:32:00.382018-08:00","closed_at":"2026-01-04T23:32:00.382018-08:00","dependencies":[{"issue_id":"lightning-e40.1","depends_on_id":"lightning-e40","type":"parent-child","created_at":"2026-01-04T23:25:45.451909-08:00","created_by":"daemon"}]}
{"id":"lightning-e40.2","title":"Stories: Payment components (PaymentModal, ZapButton, SendSats)","description":"Add Storybook stories for payment/Lightning components in blog-kit.\n\nFiles:\n- packages/blog-kit/src/ui/PaymentModal.stories.tsx\n- packages/blog-kit/src/zap-button.stories.tsx\n- packages/blog-kit/src/send-sats.stories.tsx\n\nAcceptance:\n- Mock Lightning interactions\n- All payment states: idle, loading, invoice, paid, error\n- QR code rendering verified\n- Regtest controls documented","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-04T23:25:51.931632-08:00","updated_at":"2026-01-04T23:36:31.24028-08:00","closed_at":"2026-01-04T23:36:31.24028-08:00","dependencies":[{"issue_id":"lightning-e40.2","depends_on_id":"lightning-e40","type":"parent-child","created_at":"2026-01-04T23:25:51.93238-08:00","created_by":"daemon"}]}
{"id":"lightning-e40.3","title":"Stories: Nostr components (PostEditor, ReplyModal, ReactionButton)","description":"Add Storybook stories for Nostr social components.\n\nFiles:\n- packages/blog-kit/src/post-editor.stories.tsx\n- packages/blog-kit/src/reply-modal.stories.tsx\n- packages/blog-kit/src/reaction-button.stories.tsx\n\nAcceptance:\n- Mock Nostr auth context\n- Character count variations\n- Draft/publishing states\n- Reply threading previewed","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-04T23:25:58.18287-08:00","updated_at":"2026-01-04T23:38:18.883075-08:00","closed_at":"2026-01-04T23:38:18.883075-08:00","dependencies":[{"issue_id":"lightning-e40.3","depends_on_id":"lightning-e40","type":"parent-child","created_at":"2026-01-04T23:25:58.183667-08:00","created_by":"daemon"}]}
{"id":"lightning-e40.4","title":"Stories: Complex components (FindFriendCard, NotificationItem, OnboardingTour)","description":"Add Storybook stories for interactive/stateful components.\n\nFiles:\n- apps/gallery/src/ui/FindFriendCard.stories.tsx\n- apps/gallery/src/ui/NotificationItem.stories.tsx\n- apps/gallery/src/ui/OnboardingTour.stories.tsx\n\nAcceptance:\n- Notification grouping variations (reaction, zap, mention)\n- Friend card states (loading, found, error)\n- Tour step navigation\n- Mock interactions documented","status":"closed","priority":3,"issue_type":"task","created_at":"2026-01-04T23:26:05.257794-08:00","updated_at":"2026-01-04T23:40:47.449604-08:00","closed_at":"2026-01-04T23:40:47.449604-08:00","dependencies":[{"issue_id":"lightning-e40.4","depends_on_id":"lightning-e40","type":"parent-child","created_at":"2026-01-04T23:26:05.258975-08:00","created_by":"daemon"}]}
{"id":"lightning-e40.5","title":"Storybook: Visual regression testing with Chromatic","description":"Set up automated visual regression testing for Storybook using Chromatic.\n\nFiles:\n- .github/workflows/chromatic.yml\n- apps/gallery/package.json (add chromatic script)\n- apps/gallery/.storybook/main.ts (verify chromatic addon)\n\nAcceptance:\n- Chromatic project linked to repo\n- CI runs visual tests on PR\n- Baseline snapshots captured\n- Review workflow documented in CONTRIBUTING.md\n\nQA Evidence:\n- Chromatic build link from CI\n- Sample diff screenshot","status":"closed","priority":3,"issue_type":"task","created_at":"2026-01-04T23:26:12.480481-08:00","updated_at":"2026-01-04T23:42:36.922464-08:00","closed_at":"2026-01-04T23:42:36.922464-08:00","dependencies":[{"issue_id":"lightning-e40.5","depends_on_id":"lightning-e40","type":"parent-child","created_at":"2026-01-04T23:26:12.481563-08:00","created_by":"daemon"}]}
{"id":"lightning-g9l","title":"UX: Add Help/Support button to Sidebar","description":"## Problem\nNo help, documentation, or FAQ link in the sidebar navigation. New users have no obvious way to get help.\n\n## Expected Behavior\n- Help button in sidebar (near bottom, before Settings)\n- Opens help modal with:\n  - Quick start guide\n  - FAQ/common questions\n  - Link to documentation\n  - Contact/support info\n\n## Current Navigation Items\nFeed, Find friend, Profile, Notifications, Messages, Site Kit, Relays, Offers, Settings\n\n## Missing\n- Help/Support button\n\n## Location\napps/gallery/src/Sidebar.tsx\n\n## Acceptance Criteria\n- [ ] Add Help nav item to sidebar\n- [ ] Create HelpModal component with useful content\n- [ ] Include keyboard shortcut reference\n- [ ] Link to external docs if available","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-05T18:51:34.146061425-08:00","created_by":"klabo","updated_at":"2026-01-05T19:21:53.419043624-08:00","closed_at":"2026-01-05T19:21:53.419043624-08:00","close_reason":"Closed"}
{"id":"lightning-gio","title":"Product UX Improvements","description":"Based on deep product review, identified key UX gaps that prevent the gallery from being a usable social network:\n\n## Problem\n1. **No Following feed** - Users see all posts from all relays, no way to filter to just people they follow. This is THE core social feature.\n2. **Terrible DM UX** - DM list shows only hex pubkeys, no profile names/avatars/previews. Users can't identify conversations.\n3. **No thread/conversation view** - Posts are flat. Clicking reply opens a modal but doesn't show thread context or nested replies.\n\n## Impact\n- Users can't follow the social graph (defeats purpose of social network)\n- DMs are unusable for real communication\n- Conversations are fragmented and hard to follow\n\n## Success Criteria\n- [ ] Following feed filter with toggle\n- [ ] DM list shows profile names, avatars, and last message preview\n- [ ] Thread view shows full conversation context with nested replies","status":"closed","priority":2,"issue_type":"epic","created_at":"2026-01-05T22:23:35.380789365-08:00","created_by":"klabo","updated_at":"2026-01-05T22:46:08.447434675-08:00","closed_at":"2026-01-05T22:46:08.447434675-08:00","close_reason":"Closed"}
{"id":"lightning-gio.1","title":"Add Following feed filter","description":"## Problem\nUsers see all posts from all connected relays. No way to filter to just people they follow. This is THE core social network feature.\n\n## User Story\nAs a user, I want to toggle between 'All Posts' and 'Following' feeds so I can see content from people I care about.\n\n## Technical Approach\n1. Fetch user's contact list (kind 3 event) on login\n2. Store follow list in state (already partially done in useMuteList pattern)\n3. Add toggle button in FeedView header: 'All' / 'Following'\n4. Filter subscription to only include posts from followed pubkeys\n5. Update subscription when toggle changes\n\n## Acceptance Criteria\n- Toggle button visible in feed header\n- 'Following' mode only shows posts from contacts\n- Toggle state persists across sessions\n- Empty state if no followed users","status":"closed","priority":1,"issue_type":"feature","created_at":"2026-01-05T22:23:49.352581587-08:00","created_by":"klabo","updated_at":"2026-01-05T22:39:33.237627981-08:00","closed_at":"2026-01-05T22:39:33.237627981-08:00","close_reason":"Closed","dependencies":[{"issue_id":"lightning-gio.1","depends_on_id":"lightning-gio","type":"parent-child","created_at":"2026-01-05T22:23:49.391006276-08:00","created_by":"klabo"}]}
{"id":"lightning-gio.2","title":"Improve DM list with profiles and previews","description":"## Problem\nDM list shows only hex pubkeys. Users cannot identify who they're talking to. No last message preview, no unread indicators.\n\n## User Story\nAs a user, I want to see profile names, avatars, and message previews in my DM list so I can identify conversations.\n\n## Technical Approach\n1. Resolve profile metadata (kind 0) for each conversation partner\n2. Display avatar, display name, and NIP-05 if available\n3. Show truncated last message text (decrypted)\n4. Add unread indicator (count or dot)\n5. Sort by most recent message\n\n## Acceptance Criteria\n- Avatar and display name shown for each conversation\n- Last message preview (50 chars) visible\n- Unread indicator for new messages\n- Sorted by recency","status":"closed","priority":1,"issue_type":"feature","created_at":"2026-01-05T22:24:02.762156526-08:00","created_by":"klabo","updated_at":"2026-01-05T22:42:39.467785757-08:00","closed_at":"2026-01-05T22:42:39.467785757-08:00","close_reason":"Closed","dependencies":[{"issue_id":"lightning-gio.2","depends_on_id":"lightning-gio","type":"parent-child","created_at":"2026-01-05T22:24:02.796181954-08:00","created_by":"klabo"}]}
{"id":"lightning-gio.3","title":"Add thread/conversation view for posts","description":"## Problem\nPosts are flat. Clicking a post or reply doesn't show the conversation context. Users can't follow threaded discussions.\n\n## User Story\nAs a user, I want to click on a post and see the full thread (parent posts and all replies) so I can follow conversations.\n\n## Technical Approach\n1. Create ThreadView component\n2. When post clicked, fetch parent chain (follow 'e' tags with 'reply' marker up to root)\n3. Fetch all replies (events with 'e' tag pointing to this event)\n4. Display as nested tree with indentation (max depth 5, already in code)\n5. Add navigation to go 'back to feed'\n\n## Acceptance Criteria\n- Clicking post opens thread view\n- Parent chain visible above clicked post\n- Replies shown below with nesting\n- 'Back to feed' navigation works\n- Loading states for async fetch","status":"closed","priority":1,"issue_type":"feature","created_at":"2026-01-05T22:24:17.444220689-08:00","created_by":"klabo","updated_at":"2026-01-05T22:46:03.384262957-08:00","closed_at":"2026-01-05T22:46:03.384262957-08:00","close_reason":"Closed","dependencies":[{"issue_id":"lightning-gio.3","depends_on_id":"lightning-gio","type":"parent-child","created_at":"2026-01-05T22:24:17.488456286-08:00","created_by":"klabo"}]}
{"id":"lightning-hbe","title":"UX: Escape key closes all modals","description":"Ensure all modals (LNURL, withdraw, etc.) close on Escape key","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-04T21:23:36.507245-08:00","updated_at":"2026-01-04T23:15:11.740767-08:00","closed_at":"2026-01-04T23:15:11.740767-08:00","dependencies":[{"issue_id":"lightning-hbe","depends_on_id":"lightning-63p","type":"blocks","created_at":"2026-01-04T21:23:46.904007-08:00","created_by":"daemon"}]}
{"id":"lightning-hp7","title":"Feature: Add repost/boost functionality to posts","description":"## Problem\nPostItem component lacks repost/boost functionality. Users can only:\n- React (like)\n- Zap (send sats)\n- Reply\n- View Source\n\nReposting is a core social media feature for content amplification.\n\n## Expected Behavior\nEach post should have a repost/boost button that creates a Kind 6 (repost) event.\n\n## Location\napps/gallery/src/FeedView.tsx - PostItem component (lines 36-197)\n\n## Implementation Notes\n- Add repost button next to existing action buttons\n- Create Kind 6 event when clicked\n- Show repost count similar to reactions\n- Optionally: support quote reposts (Kind 1 with reference)\n\n## Acceptance Criteria\n- [ ] Repost button visible on all posts\n- [ ] Clicking creates Kind 6 event\n- [ ] Visual feedback on successful repost\n- [ ] Show repost count if available","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-05T18:50:31.995957692-08:00","created_by":"klabo","updated_at":"2026-01-05T19:02:43.376788098-08:00","closed_at":"2026-01-05T19:02:43.376788098-08:00","close_reason":"Closed"}
{"id":"lightning-hpu","title":"Mainnet cutover for lightning","description":"Switch LNbits prod from mutinynet to mainnet LND; update API/keys, smoke test, observability.","notes":"Awaiting mainnet LND endpoint/cert/macaroon + admin key to execute cutover; prod smoke script added (test:lnbits-prod).","status":"blocked","priority":1,"issue_type":"epic","created_at":"2025-11-30T02:10:08.795817-08:00","updated_at":"2025-12-01T03:08:30.357833-08:00","comments":[{"id":1,"issue_id":"lightning-hpu","author":"honk","text":"Prepared for mainnet cutover: added prod LNbits smoke helper (apps/api/scripts/lnbits-prod-smoke.js) + npm script test:lnbits-prod; skips unless LNBITS_PROD_ADMIN_KEY is set. Docs already list prod endpoints/secrets (docs/prod-lightning.md). Next steps: load mainnet LND cert/macaroon into KV, set LND_NETWORK=mainnet on lnbits-prod-west, run smoke (health + 100-sat invoice, manual pay), then flip clients.","created_at":"2025-12-01T11:08:15Z"}]}
{"id":"lightning-hpu.1","title":"Swap LNbits prod to mainnet LND","description":"Update KV with mainnet LND endpoint/macaroon/tls, set LND_NETWORK=mainnet, redeploy with new REV, verify /status/health","notes":"Prepared helper script scripts/lnbits-cutover-mainnet.sh to flip ACA env to mainnet once secrets are filled. Still blocked on mainnet LND creds.","status":"blocked","priority":1,"issue_type":"task","created_at":"2025-11-30T02:10:24.056557-08:00","updated_at":"2025-11-30T02:14:58.327068-08:00","dependencies":[{"issue_id":"lightning-hpu.1","depends_on_id":"lightning-hpu","type":"parent-child","created_at":"2025-11-30T02:10:24.057487-08:00","created_by":"honk"}]}
{"id":"lightning-hpu.2","title":"Mainnet invoice/pay smoke","description":"After cutover, create+pay mainnet invoice via API (admin key), verify status settles.","notes":"Regtest playwright e2e passing locally. Mutinynet staging LNbits reset; new admin key 79572e... in KV, invoice smoke 100 sats success. Prod mutinynet invoice smoke also success.","status":"blocked","priority":1,"issue_type":"task","created_at":"2025-11-30T02:10:45.782184-08:00","updated_at":"2025-11-30T12:05:22.453939-08:00","dependencies":[{"issue_id":"lightning-hpu.2","depends_on_id":"lightning-hpu","type":"parent-child","created_at":"2025-11-30T02:10:45.783189-08:00","created_by":"honk"}]}
{"id":"lightning-hpu.3","title":"Point API + gallery to prod LNbits","description":"Set API env (satoshis-api-*) to prod LNbits URL/key via Key Vault; ensure gallery/demo use prod LNbits in mainnet mode.","notes":"No prod API container exists yet; need target service before wiring prod LNbits URL/key.","status":"blocked","priority":2,"issue_type":"task","created_at":"2025-11-30T02:11:09.326676-08:00","updated_at":"2025-11-30T02:12:23.403284-08:00","dependencies":[{"issue_id":"lightning-hpu.3","depends_on_id":"lightning-hpu","type":"parent-child","created_at":"2025-11-30T02:11:09.327792-08:00","created_by":"honk"}]}
{"id":"lightning-kp8","title":"UX: Add pagination to SearchView note results","description":"## Problem\nNote search in SearchView has a fixed 20 result limit with no pagination or 'load more' functionality.\n\n## Current Behavior\n- Search returns maximum 20 notes\n- No indication that more results may exist\n- No way to load additional results\n\n## Expected Behavior\n- 'Load more' button when more results available\n- Or infinite scroll with loading indicator\n- Clear indication of result count\n\n## Location\napps/gallery/src/SearchView.tsx (lines 57-61)\n\n## Acceptance Criteria\n- [ ] Implement 'Load more' or infinite scroll for notes\n- [ ] Show loading indicator during pagination\n- [ ] Handle end-of-results gracefully","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-05T18:51:47.111662529-08:00","created_by":"klabo","updated_at":"2026-01-05T22:05:44.596132611-08:00","closed_at":"2026-01-05T22:05:44.596132611-08:00","close_reason":"Closed"}
{"id":"lightning-ln12","title":"[Deleted]","description":"[RESURRECTED] This issue was deleted but recreated as a tombstone to preserve hierarchical structure.","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-05T00:06:23.086131Z","updated_at":"2026-01-05T17:32:18.580406282-08:00","closed_at":"2026-01-05T17:32:18.580406282-08:00"}
{"id":"lightning-ln5","title":"UX: Show notification when payment times out","description":"## Problem\nPayment modal has a 5-minute timeout that silently closes the modal without notifying the user. This leaves users confused about whether their payment succeeded.\n\n## Current Behavior\n- If payment not confirmed within 5 minutes, modal closes\n- No notification or error message shown\n- User left wondering what happened\n\n## Expected Behavior\n- Show clear timeout notification before closing\n- Suggest next steps (retry, check wallet, etc.)\n- Log telemetry for payment timeouts\n\n## Location\npackages/blog-kit/src/ui/send-sats.tsx (lines 287-290)\n\n## Acceptance Criteria\n- [ ] Show timeout alert before closing modal\n- [ ] Include helpful message about possible causes\n- [ ] Option to keep modal open or retry","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-05T18:52:01.010227141-08:00","created_by":"klabo","updated_at":"2026-01-05T22:10:37.460641713-08:00","closed_at":"2026-01-05T22:10:37.460641713-08:00","close_reason":"Closed"}
{"id":"lightning-mnc","title":"Performance: memoize PostItem and feed components","description":"Add React.memo to PostItem, NotificationItem to prevent unnecessary re-renders","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-04T21:23:33.872181-08:00","updated_at":"2026-01-04T21:26:41.369017-08:00","closed_at":"2026-01-04T21:26:41.369017-08:00","dependencies":[{"issue_id":"lightning-mnc","depends_on_id":"lightning-63p","type":"blocks","created_at":"2026-01-04T21:23:46.78538-08:00","created_by":"daemon"}]}
{"id":"lightning-vdr","title":"Developer Experience Improvements","description":"Based on deep codebase review, identified key developer experience improvements:\n\n## Problem\n1. **Type safety erosion in embed package** - 20+ @ts-ignore directives, unsafe casts, and no runtime validation. Makes debugging hard and introduces silent failures.\n2. **No pre-commit hooks or local validation** - Developers discover lint/type failures in CI (10+ min feedback loop) instead of locally.\n3. **Monolithic embed package** - 2,400 LOC single file with closure state hell, magic numbers, and potential memory leaks. Hard to maintain and test.\n\n## Impact\n- New contributors get confused by scattered docs and lack of setup validation\n- Type safety gaps in embed allow runtime bugs that slip past TypeScript\n- CI feedback loop too slow; devs push broken code that fails in CI\n\n## Success Criteria\n- [ ] Zero @ts-ignore in packages (replace with proper types)\n- [ ] Pre-commit hooks catch lint/type issues locally\n- [ ] Embed package split into testable modules with 80%+ coverage\n","status":"open","priority":2,"issue_type":"epic","created_at":"2026-01-05T22:22:14.101190266-08:00","created_by":"klabo","updated_at":"2026-01-05T22:22:14.101190266-08:00"}
{"id":"lightning-vdr.2","title":"Add type-safe DOM extensions for embed widgets","description":"## Problem\nThe embed package uses 20+ @ts-ignore directives for DOM property extensions (e.g., el.__nostrstackDestroy). This bypasses TypeScript's type safety and makes debugging difficult.\n\n## Solution\n1. Create proper type declarations for extended DOM elements\n2. Use WeakMap pattern instead of direct DOM property assignment\n3. Add Zod schemas for WebSocket/API message parsing\n\n## Acceptance Criteria\n- Zero @ts-ignore in embed/src\n- WeakMap pattern for widget lifecycle\n- Zod schemas for message parsing","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-05T22:22:52.90317021-08:00","created_by":"klabo","updated_at":"2026-01-05T22:56:20.979574313-08:00","closed_at":"2026-01-05T22:56:20.979574313-08:00","close_reason":"Closed","dependencies":[{"issue_id":"lightning-vdr.2","depends_on_id":"lightning-vdr","type":"parent-child","created_at":"2026-01-05T22:22:52.922153956-08:00","created_by":"klabo"}]}
{"id":"lightning-vdr.3","title":"Add pre-commit hooks with husky","description":"## Problem\nDevelopers discover lint/type failures in CI (10+ min feedback loop) instead of locally. No pre-commit hooks are configured.\n\n## Solution\n1. Add husky for Git hooks\n2. Configure lint-staged for incremental linting\n3. Run typecheck on staged files\n4. Add pnpm check-dev-setup script to validate prerequisites\n\n## Acceptance Criteria\n- Pre-commit hook runs eslint and prettier on staged files\n- Commit blocked if lint fails\n- Documentation updated with setup instructions","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-05T22:23:05.146014123-08:00","created_by":"klabo","updated_at":"2026-01-05T22:52:11.785177136-08:00","closed_at":"2026-01-05T22:52:11.785177136-08:00","close_reason":"Closed","dependencies":[{"issue_id":"lightning-vdr.3","depends_on_id":"lightning-vdr","type":"parent-child","created_at":"2026-01-05T22:23:05.184085108-08:00","created_by":"klabo"}]}
{"id":"lightning-vdr.4","title":"Refactor embed package into testable modules","description":"## Problem\nembed/src/index.ts is 2,400 LOC single file with:\n- 15+ closure state variables without clear ownership\n- 20+ try-catch-ignore patterns\n- Magic numbers (INVOICE_TTL_SECS, RING_CIRCUMFERENCE, polling intervals)\n- Memory leak potential in event listener cleanup\n- No unit tests for core widget logic\n\n## Solution\n1. Split into modules: widgets/, state/, network/, ui/\n2. Extract state management to state machine pattern\n3. Centralize constants in config.ts\n4. Add unit tests for renderTipWidget and renderCommentWidget (1000+ LOC each)\n\n## Acceptance Criteria\n- No file over 500 LOC\n- State machine for widget lifecycle\n- 80%+ test coverage on widget logic\n- Memory leak tests for mount/destroy cycles","status":"in_progress","priority":2,"issue_type":"task","created_at":"2026-01-05T22:23:19.678873043-08:00","created_by":"klabo","updated_at":"2026-01-05T22:57:00.804163896-08:00","dependencies":[{"issue_id":"lightning-vdr.4","depends_on_id":"lightning-vdr","type":"parent-child","created_at":"2026-01-05T22:23:19.729159658-08:00","created_by":"klabo"}]}
{"id":"lightning-w5s","title":"Accessibility: aria-labels for icon buttons and status indicators","description":"Add descriptive aria-labels to icon-only buttons and status elements","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-04T21:23:37.685049-08:00","updated_at":"2026-01-04T23:17:01.416584-08:00","closed_at":"2026-01-04T23:17:01.416584-08:00","dependencies":[{"issue_id":"lightning-w5s","depends_on_id":"lightning-63p","type":"blocks","created_at":"2026-01-04T21:23:46.964066-08:00","created_by":"daemon"}]}
{"id":"lightning-x0c","title":"UX: Add 'New Message' button to DMView","description":"## Problem\nUsers cannot initiate new DM conversations from the Messages view. They must already know a peer to message them.\n\n## Expected Behavior\n- A prominent 'New Message' or 'Compose' button in the Messages view\n- Clicking opens a modal or view to search/select a recipient\n- After selecting, opens the conversation\n\n## Current Behavior\n- Empty state just says 'No messages yet'\n- No way to start a new conversation from scratch\n\n## Location\napps/gallery/src/DMView.tsx\n\n## Acceptance Criteria\n- [ ] Add 'New Message' button to DMView header or empty state\n- [ ] Button opens recipient search/selection UI\n- [ ] After selection, user can compose and send message\n- [ ] Accessibility: proper ARIA labels","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-05T18:51:01.642394441-08:00","created_by":"klabo","updated_at":"2026-01-05T19:05:58.780240456-08:00","closed_at":"2026-01-05T19:05:58.780240456-08:00","close_reason":"Closed"}
{"id":"lightning-xg9","title":"Accessibility: focus-visible styling for all interactive elements","description":"Add visible focus rings to buttons, links, inputs for keyboard navigation","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-04T21:23:31.568322-08:00","updated_at":"2026-01-04T21:24:35.111338-08:00","closed_at":"2026-01-04T21:24:35.111338-08:00","dependencies":[{"issue_id":"lightning-xg9","depends_on_id":"lightning-63p","type":"blocks","created_at":"2026-01-04T21:23:46.65497-08:00","created_by":"daemon"}]}
