{"id":"lightning-09e","title":"Spin up demo dev server (gallery)","description":"Start the demo/gallery dev server locally to verify it runs and capture start command/ports for teammates. Ensure it boots without errors; document run command (pnpm --filter gallery dev).","status":"closed","priority":1,"issue_type":"chore","created_at":"2025-11-28T09:52:22.750447-08:00","updated_at":"2025-11-28T09:54:44.336509-08:00","closed_at":"2025-11-28T09:54:44.336509-08:00","close_reason":"Closed","dependencies":[{"issue_id":"lightning-09e","depends_on_id":"lightning-2lx","type":"parent-child","created_at":"2025-11-29T07:24:23.906088-08:00","created_by":"honk"}],"comments":[{"id":12,"issue_id":"lightning-09e","author":"honk","text":"Verified gallery dev server starts after building SDK+Embed. Steps: pnpm --filter @satoshis/sdk build \u0026\u0026 pnpm --filter @satoshis/embed build; then pnpm --filter gallery dev -- --host --port 4173 (auto switched to 4174 because 4173 busy) -\u003e Vite ready.","created_at":"2025-11-28T17:54:21Z"}]}
{"id":"lightning-0fl","title":"Nostr E2E relay + NIP-65","description":"Add nostr-rs-relay (local) E2E zap publishing + NIP-65 relay list support","status":"closed","priority":2,"issue_type":"task","created_at":"2025-11-28T12:14:37.205329-08:00","updated_at":"2025-11-28T12:21:59.272706-08:00","closed_at":"2025-11-28T12:21:59.272706-08:00","close_reason":"NIP-65 relay list in nostr.json + relay list publisher; tests","dependencies":[{"issue_id":"lightning-0fl","depends_on_id":"lightning-2lx","type":"parent-child","created_at":"2025-11-29T07:24:29.412634-08:00","created_by":"honk"}]}
{"id":"lightning-0k7","title":"Comprehensive browser e2e for demo flows","description":"Add Playwright suite covering tip/pay/comments with real LNURLp + payment, mock fallback, and wallet panel, running against regtest stack in CI.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-01T13:55:27.152788-08:00","updated_at":"2025-12-01T14:14:48.218182-08:00","closed_at":"2025-12-01T14:14:48.218186-08:00"}
{"id":"lightning-1t6","title":"Demo UI invoices use wrong host","description":"Gallery real-invoice button sends host=demo.nostrstack.lol; fails on localhost regtest. Use configured VITE_NOSTRSTACK_HOST or current host instead.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-01T13:08:14.055012-08:00","updated_at":"2025-12-01T13:10:43.236847-08:00","closed_at":"2025-12-01T13:10:43.23685-08:00"}
{"id":"lightning-2lx","title":"Satoshis.lol platform baseline","description":"Goals: multi-tenant Lightning+Nostr backend with SDK/widgets; minimal integration (script tag or SDK); avoid custody/long-term balances. Domains: Lightning tips/zaps, pay-to-unlock/pay-to-act, Nostr login/comments, NIP-05 \u0026 Lightning Address per domain. Architecture summary: User browser -\u003e website -\u003e embed/SDK -\u003e HTTPS API (multi-tenant) -\u003e DB (Prisma+Postgres), LightningProvider (OpenNode/LNbits/LND), NostrClient -\u003e relays. Core components: backend API (multi-tenant routing, LNURLp/Lightning Address endpoints, NIP-05, payment+webhook handling, tenant+user mgmt), LightningProvider abstraction (OpenNode initial; future LNbits/LND), NostrClient abstraction (nostr-tools wrapper; swap to NDK later), DB layer (Postgres prod, SQLite dev/tests, Prisma), client SDK @satoshis/sdk (typed TS, aligned with OpenAPI), embed bundle @satoshis/embed (tip, comments w/ Nostr login, pay-to-action; script tag or npm), optional Next.js gallery app for docs/demos. Work via Beads; AGENTS.md for flow. Logical architecture diagram preserved in commit history.","status":"closed","priority":1,"issue_type":"epic","created_at":"2025-11-28T09:29:14.948285-08:00","updated_at":"2025-11-28T09:50:52.850373-08:00","closed_at":"2025-11-28T09:50:52.850373-08:00","close_reason":"Closed"}
{"id":"lightning-2lx.1","title":"Backend API: multi-tenant LN + Nostr endpoints","description":"Deliver Fastify/TS API with: multi-tenant domain routing; LNURLp + Lightning Address endpoints; NIP-05 /.well-known/nostr.json; payment + webhook handling; tenant + user management; health/telemetry. Must align with non-custodial goal and support white-label per-domain NIP-05 \u0026 lightning addresses.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-11-28T09:29:26.384508-08:00","updated_at":"2025-11-28T09:35:59.563989-08:00","closed_at":"2025-11-28T09:35:59.563989-08:00","close_reason":"Closed","dependencies":[{"issue_id":"lightning-2lx.1","depends_on_id":"lightning-2lx","type":"parent-child","created_at":"2025-11-28T09:29:26.385346-08:00","created_by":"honk"}],"comments":[{"id":1,"issue_id":"lightning-2lx.1","author":"honk","text":"Implemented: multi-tenant host routing; LNURLp metadata/invoice + OpenNode webhook stub; NIP-05 /.well-known/nostr.json; tenant/user admin bootstrap with JWT or API key; rate limiting + request IDs + structured errors; health/telemetry (Prom metrics). Tests: unit + Playwright e2e passing.","created_at":"2025-11-28T17:35:44Z"}]}
{"id":"lightning-2lx.2","title":"LightningProvider abstraction (OpenNode first)","description":"Implement provider interface; initial OpenNodeProvider; future LNbits/LND ready. Must support charge creation, webhook verification, metadata passthrough. Honor non-custodial stance.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-11-28T09:29:37.065554-08:00","updated_at":"2025-11-28T09:38:40.450706-08:00","closed_at":"2025-11-28T09:38:40.450706-08:00","close_reason":"Closed","dependencies":[{"issue_id":"lightning-2lx.2","depends_on_id":"lightning-2lx","type":"parent-child","created_at":"2025-11-28T09:29:37.066605-08:00","created_by":"honk"}],"comments":[{"id":2,"issue_id":"lightning-2lx.2","author":"honk","text":"Provider abstraction in place: provider builder + app decoration; OpenNodeProvider remains default, injected into LNURL invoice route. Ready to swap/extend per-tenant later.","created_at":"2025-11-28T17:38:27Z"}]}
{"id":"lightning-2lx.3","title":"NostrClient abstraction","description":"Thin wrapper over nostr-tools initially; supports signing/publishing (zaps/system events); swappable to NDK later; relay config via env.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-11-28T09:29:53.895645-08:00","updated_at":"2025-11-28T09:47:50.863528-08:00","closed_at":"2025-11-28T09:47:50.863528-08:00","close_reason":"Closed","dependencies":[{"issue_id":"lightning-2lx.3","depends_on_id":"lightning-2lx","type":"parent-child","created_at":"2025-11-28T09:29:53.896347-08:00","created_by":"honk"}],"comments":[{"id":5,"issue_id":"lightning-2lx.3","author":"honk","text":"Plan: implement NostrClient abstraction wrapping nostr-tools for signing/publishing zaps/system events; configurable relays; env-driven keys (or external signer later); ensure multi-tenant host mapping for NIP-05 lookup; add tests for nostr.json names and publish stub.","created_at":"2025-11-28T17:42:33Z"},{"id":6,"issue_id":"lightning-2lx.3","author":"honk","text":"Added NostrClient wrapper (nostr-tools publish/sign) with env-configurable relays \u0026 secret; server decorates nostrClient/nostrRelays when configured. Tests now pass after keeping unit tests on SQLite. Next: wire actual Nostr publish calls where needed and add NIP-05/zap tests.","created_at":"2025-11-28T17:47:40Z"}]}
{"id":"lightning-2lx.4","title":"Database layer: Postgres prod / SQLite dev-tests","description":"Prisma ORM; Postgres in production; SQLite for dev/tests if desired; migrations maintained; multi-tenant schema supports tenants/users/payments; align with no-custody principle.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-11-28T09:30:06.98851-08:00","updated_at":"2025-11-28T09:48:34.747335-08:00","closed_at":"2025-11-28T09:48:34.747335-08:00","close_reason":"Closed","dependencies":[{"issue_id":"lightning-2lx.4","depends_on_id":"lightning-2lx","type":"parent-child","created_at":"2025-11-28T09:30:06.989358-08:00","created_by":"honk"}],"comments":[{"id":7,"issue_id":"lightning-2lx.4","author":"honk","text":"DB layer status: Prisma schema covers tenants/users/payments with unique constraints per tenant. Postgres migrations exist (pg/migrations), SQLite used for tests. Next steps: ensure unit/e2e can run against Postgres if desired; add per-tenant indexes already done; add migrations for any upcoming fields (metadata, nostr keys), and align generate with PG for prod builds.","created_at":"2025-11-28T17:48:16Z"}]}
{"id":"lightning-2lx.5","title":"Client SDK @satoshis/sdk","description":"Typed TS client for integrators; generated or aligned with OpenAPI; minimal integration surface for LNURLp, NIP-05, payments, comments/zaps.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-11-28T09:30:21.70534-08:00","updated_at":"2025-11-28T09:49:13.992766-08:00","closed_at":"2025-11-28T09:49:13.992766-08:00","close_reason":"Closed","dependencies":[{"issue_id":"lightning-2lx.5","depends_on_id":"lightning-2lx","type":"parent-child","created_at":"2025-11-28T09:30:21.706385-08:00","created_by":"honk"}],"comments":[{"id":8,"issue_id":"lightning-2lx.5","author":"honk","text":"Current: SDK skeleton exists (packages/sdk) with minimal tests; needs alignment with API (LNURLp, NIP-05, payments, admin bootstrap). Plan: generate or hand-write TS client from API routes/openapi, add typed methods and examples; ensure multi-tenant host header support; publish-ready build.","created_at":"2025-11-28T17:48:58Z"}]}
{"id":"lightning-2lx.6","title":"Embed bundle @satoshis/embed","description":"Browser widgets: tip button, comments with Nostr login, generic pay-to-action; usable via \u003cscript\u003e or npm import; themeable/minimal integration.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-11-28T09:30:33.128452-08:00","updated_at":"2025-11-28T09:49:46.256338-08:00","closed_at":"2025-11-28T09:49:46.256338-08:00","close_reason":"Closed","dependencies":[{"issue_id":"lightning-2lx.6","depends_on_id":"lightning-2lx","type":"parent-child","created_at":"2025-11-28T09:30:33.129171-08:00","created_by":"honk"}],"comments":[{"id":9,"issue_id":"lightning-2lx.6","author":"honk","text":"Embed status: packages/embed scaffolded with tests; needs production widgets (tip, comments with Nostr login, pay-to-action) and theming. Plan: build script-tag friendly bundle, host header for tenancy, Playwright UI coverage, and integrate with SDK.","created_at":"2025-11-28T17:49:31Z"}]}
{"id":"lightning-2lx.7","title":"Gallery app (Next.js) for docs/demos","description":"Optional apps/gallery: Next.js UI for docs, demos, internal dashboards; showcases embed + SDK flows.","status":"closed","priority":3,"issue_type":"task","created_at":"2025-11-28T09:30:46.849642-08:00","updated_at":"2025-11-28T09:50:30.229444-08:00","closed_at":"2025-11-28T09:50:30.229444-08:00","close_reason":"Closed","dependencies":[{"issue_id":"lightning-2lx.7","depends_on_id":"lightning-2lx","type":"parent-child","created_at":"2025-11-28T09:30:46.850702-08:00","created_by":"honk"}],"comments":[{"id":10,"issue_id":"lightning-2lx.7","author":"honk","text":"Gallery app pending: Next.js demo/docs/dashboard app planned; should showcase embed + SDK flows and tenant setup. No action yet.","created_at":"2025-11-28T17:50:02Z"}]}
{"id":"lightning-2lx.8","title":"Non-custodial + multi-tenant constraints","description":"Ensure no long-term custody; per-domain white-label Lightning Address \u0026 NIP-05; minimal integration friction; support many domains on one backend.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-11-28T09:31:01.022833-08:00","updated_at":"2025-11-28T09:39:55.789166-08:00","closed_at":"2025-11-28T09:39:55.789166-08:00","close_reason":"Closed","dependencies":[{"issue_id":"lightning-2lx.8","depends_on_id":"lightning-2lx","type":"parent-child","created_at":"2025-11-28T09:31:01.023561-08:00","created_by":"honk"}],"comments":[{"id":3,"issue_id":"lightning-2lx.8","author":"honk","text":"Non-custodial/multi-tenant constraints already reflected: per-host tenant resolution, white-label Lightning Address \u0026 NIP-05, OpenNode invoices non-custodial (no stored balances), fallback default tenant for unknown domains. Work left: enforce per-tenant isolation at metrics/logging, ensure no balance-holding flows, document tenancy provisioning.","created_at":"2025-11-28T17:39:42Z"},{"id":4,"issue_id":"lightning-2lx.8","author":"honk","text":"Captured tenant labels in Prom http_requests_total; added explicit note in webhook flow about non-custodial tracking (no balances).","created_at":"2025-11-28T17:40:43Z"}]}
{"id":"lightning-2lx.9","title":"Developer workflow alignment","description":"Document AGENTS.md, Beads usage; ensure contributors follow bd workflows; keep architecture updates synced.","status":"closed","priority":3,"issue_type":"task","created_at":"2025-11-28T09:31:11.89885-08:00","updated_at":"2025-11-28T09:50:39.965577-08:00","closed_at":"2025-11-28T09:50:39.965577-08:00","close_reason":"Closed","dependencies":[{"issue_id":"lightning-2lx.9","depends_on_id":"lightning-2lx","type":"parent-child","created_at":"2025-11-28T09:31:11.899683-08:00","created_by":"honk"}],"comments":[{"id":11,"issue_id":"lightning-2lx.9","author":"honk","text":"Workflow alignment: AGENTS.md updated to require Beads via pnpm exec bd and workflows in .beads.yaml. Beads DB initialized at .beads/beads.db.","created_at":"2025-11-28T17:50:16Z"}]}
{"id":"lightning-3b4","title":"Regtest demo wallet funding helper","description":"Add helper to fund merchant LND and open outbound channel for LNbits regtest; document nostr mock/relay config.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-01T13:04:45.206938-08:00","updated_at":"2025-12-01T13:04:57.979953-08:00","closed_at":"2025-12-01T13:04:57.97996-08:00"}
{"id":"lightning-3v8","title":"Mainnet LNbits/LND readiness","description":"Prep and deploy LNbits against mainnet LND provider (Voltage mainnet), with secrets, infra, and runbook.","notes":"Prod LNbits ready: secrets loaded, container healthy, admin key stored, runbook + observability in place.","status":"closed","priority":1,"issue_type":"epic","created_at":"2025-11-29T16:09:18.891218-08:00","updated_at":"2025-11-30T02:09:01.988235-08:00","closed_at":"2025-11-30T02:09:01.988237-08:00"}
{"id":"lightning-3v8.1","title":"Provision mainnet LND endpoint + cert/macaroon secrets","description":"Collect Voltage mainnet host:port, TLS cert, admin/invoice macaroons; store in satoshis-kv-west; note funding provider fees and network.","notes":"Loaded Voltage LND (mutinynet) endpoint/macaroon/tls into Key Vault (lnd-mainnet-*), wired prod container env via secretrefs.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-11-29T16:09:50.806937-08:00","updated_at":"2025-11-30T01:59:16.217507-08:00","closed_at":"2025-11-30T01:59:16.217509-08:00","dependencies":[{"issue_id":"lightning-3v8.1","depends_on_id":"lightning-3v8","type":"parent-child","created_at":"2025-11-29T16:09:50.807667-08:00","created_by":"honk"}]}
{"id":"lightning-3v8.2","title":"Deploy LNbits prod container app (west)","description":"Create prod Container App using mainnet secrets, dedicated Postgres DB, and Azure File share; set LNBITS_REV and expose ingress.","notes":"Prod LNbits container (lnbits-prod-west) now Healthy; using Postgres lnbitsprod + Voltage LND via secretrefs; first_install completed.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-11-29T16:10:04.026301-08:00","updated_at":"2025-11-30T01:59:40.505997-08:00","closed_at":"2025-11-30T01:59:40.505999-08:00","dependencies":[{"issue_id":"lightning-3v8.2","depends_on_id":"lightning-3v8","type":"parent-child","created_at":"2025-11-29T16:10:04.027014-08:00","created_by":"honk"}]}
{"id":"lightning-3v8.3","title":"Smoke test LNbits prod on mainnet","description":"Create wallet, generate invoice, pay tiny mainnet invoice, verify payment status via API; capture logs.","notes":"Prod LNbits healthy; created admin wallet and stored keys in KV (lnbits-prod-admin-key/lnbits-prod-invoice-key). Smoke: created mutinynet invoice via API (out=false, 1000 sats) succeeded.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-11-29T16:10:16.278283-08:00","updated_at":"2025-11-30T02:05:35.379638-08:00","closed_at":"2025-11-30T02:05:35.37964-08:00","dependencies":[{"issue_id":"lightning-3v8.3","depends_on_id":"lightning-3v8","type":"parent-child","created_at":"2025-11-29T16:10:16.279112-08:00","created_by":"honk"}]}
{"id":"lightning-3v8.4","title":"Prod lightning runbook","description":"Document prod endpoints, secrets, health checks, smoke scripts, and rollback/rotate steps.","notes":"Added prod lightning runbook docs/prod-lightning.md with cutover steps, health checks, admin creds locations.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-11-29T16:10:31.557227-08:00","updated_at":"2025-11-30T02:08:33.372166-08:00","closed_at":"2025-11-30T02:08:33.372168-08:00","dependencies":[{"issue_id":"lightning-3v8.4","depends_on_id":"lightning-3v8","type":"parent-child","created_at":"2025-11-29T16:10:31.558005-08:00","created_by":"honk"}]}
{"id":"lightning-3v8.5","title":"Observability: prod lightning","description":"Hook prod container/app to Log Analytics and alert on funding_error != null or health non-200; include dashboard tile.","notes":"Enabled diagnostics for prod ACA environment to Log Analytics workspace (ContainerAppConsoleLogs/SystemLogs + AllMetrics). Postgres already sending logs/metrics.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-11-29T16:10:45.139018-08:00","updated_at":"2025-11-30T02:08:50.911718-08:00","closed_at":"2025-11-30T02:08:50.911725-08:00","dependencies":[{"issue_id":"lightning-3v8.5","depends_on_id":"lightning-3v8","type":"parent-child","created_at":"2025-11-29T16:10:45.139745-08:00","created_by":"honk"}]}
{"id":"lightning-47f","title":"Implement embed widgets (tip, comments, pay-to-action)","description":"Build production-ready @satoshis/embed: tip button, comments with Nostr login, generic pay-to-action; themeable; works via \u003cscript\u003e and npm; wire to API + SDK; add Playwright UI coverage.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-11-28T09:54:59.957027-08:00","updated_at":"2025-11-28T11:58:41.989763-08:00","closed_at":"2025-11-28T11:58:41.989763-08:00","close_reason":"tip/pay/paywall/comment widgets live in @satoshis/embed","dependencies":[{"issue_id":"lightning-47f","depends_on_id":"lightning-2lx","type":"parent-child","created_at":"2025-11-29T07:25:07.28975-08:00","created_by":"honk"}]}
{"id":"lightning-47f.1","title":"Build embed tip/comment widgets","description":"Implement @satoshis/embed widgets: tip button, comments (Nostr login), pay-to-action; themeable; works via script tag + npm; integrates with SDK; Playwright UI coverage.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-11-28T10:05:58.269759-08:00","updated_at":"2025-11-28T11:58:34.268521-08:00","closed_at":"2025-11-28T11:58:34.268521-08:00","close_reason":"widgets shipped","dependencies":[{"issue_id":"lightning-47f.1","depends_on_id":"lightning-47f","type":"parent-child","created_at":"2025-11-28T10:05:58.271063-08:00","created_by":"honk"}]}
{"id":"lightning-4nw","title":"E2E: post comment to real relay","description":"Playwright test posts a nostr comment to a real relay and verifies via subscription; trim relays to single default.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-01T14:23:28.340293-08:00","updated_at":"2025-12-01T15:01:42.396992-08:00","closed_at":"2025-12-01T15:01:42.396993-08:00"}
{"id":"lightning-5ap","title":"Local demo with real invoices","description":"Run demo app locally with LNbits (docker) so tip/pay widgets generate real invoices (dummy/fake funding ok). Document steps.","notes":"Local LNbits (dummy) running via colima; API+gallery wired and verified invoices. Admin key 28eeda0d2e8a416bbafa8d760ee280e9, gallery at http://localhost:4173.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-01T11:09:31.345666-08:00","updated_at":"2025-12-01T11:48:57.547084-08:00","closed_at":"2025-12-01T11:48:57.54709-08:00","comments":[{"id":30,"issue_id":"lightning-5ap","author":"honk","text":"Plan: 1) Spin up LNbits locally via deploy/lnbits/docker-compose.yml (dummy funding). 2) Create wallet via UI, copy admin key. 3) Configure nostrstack API env (LIGHTNING_PROVIDER=lnbits, LN_BITS_URL=http://localhost:5000, LN_BITS_API_KEY=\u003cadmin key\u003e, PUBLIC_ORIGIN=http://localhost:3001). 4) Run API + gallery demo, verify tip/pay produce invoices. 5) Document steps in docs/local-demo.md.","created_at":"2025-12-01T19:10:05Z"}]}
{"id":"lightning-624","title":"Private GitHub repo + CI green","description":"Ensure nostrstack is in a private GitHub repo (create if missing), scrub secrets, push code, and get all workflows/linters/tests green.","status":"closed","priority":1,"issue_type":"epic","created_at":"2025-12-01T12:30:05.238693-08:00","updated_at":"2025-12-01T12:41:00.137165-08:00","closed_at":"2025-12-01T12:41:00.137167-08:00"}
{"id":"lightning-624.1","title":"Create private repo or verify privacy; set origin remote appropriately","description":"Check whether current origin is private; if not create new private repo and point remote. Ensure push uses token with least privilege.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-01T12:30:21.835782-08:00","updated_at":"2025-12-01T12:35:16.281605-08:00","closed_at":"2025-12-01T12:35:16.281608-08:00","dependencies":[{"issue_id":"lightning-624.1","depends_on_id":"lightning-624","type":"parent-child","created_at":"2025-12-01T12:30:21.836552-08:00","created_by":"honk"}]}
{"id":"lightning-624.2","title":"Scrub secrets before push (history scan)","description":"Run secret scans (git-secrets/trufflehog/rg) and remove/rotate any findings prior to push.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-01T12:30:31.976664-08:00","updated_at":"2025-12-01T12:37:45.631651-08:00","closed_at":"2025-12-01T12:37:45.631654-08:00","dependencies":[{"issue_id":"lightning-624.2","depends_on_id":"lightning-624","type":"parent-child","created_at":"2025-12-01T12:30:31.977694-08:00","created_by":"honk"}]}
{"id":"lightning-624.3","title":"Make CI green (lint/test/build workflows)","description":"Run/polish GitHub Actions (lint, test, build, docker). Fix failures and ensure badges/branch protections where applicable.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-01T12:30:44.619384-08:00","updated_at":"2025-12-01T12:40:20.688987-08:00","closed_at":"2025-12-01T12:40:20.688989-08:00","dependencies":[{"issue_id":"lightning-624.3","depends_on_id":"lightning-624","type":"parent-child","created_at":"2025-12-01T12:30:44.620221-08:00","created_by":"honk"}]}
{"id":"lightning-6a9","title":"Research Chrome DevTools MPC for workflow","description":"Investigate Chrome DevTools MPC features and evaluate usefulness for nostrstack dev/debugging (remote eval, replay, etc.).","status":"closed","priority":3,"issue_type":"task","created_at":"2025-12-01T13:55:44.931558-08:00","updated_at":"2025-12-01T14:21:06.114404-08:00","closed_at":"2025-12-01T14:21:06.114408-08:00"}
{"id":"lightning-6sj","title":"Payment verification: OpenNode invoice polling / LNURL withdraw support","description":"","status":"closed","priority":2,"issue_type":"task","created_at":"2025-11-28T12:14:27.733631-08:00","updated_at":"2025-11-28T12:20:37.766349-08:00","closed_at":"2025-11-28T12:20:37.766349-08:00","close_reason":"Added charge status polling + stub LNURLw endpoints; OpenNode getCharge implemented; tests","dependencies":[{"issue_id":"lightning-6sj","depends_on_id":"lightning-2lx","type":"parent-child","created_at":"2025-11-29T07:25:12.832873-08:00","created_by":"honk"}]}
{"id":"lightning-6wv","title":"Ops: staging + log shipping","description":"Staging manifest + synthetic health probe; OTLP logs shipping","status":"closed","priority":2,"issue_type":"task","created_at":"2025-11-28T12:15:07.048724-08:00","updated_at":"2025-11-28T12:23:29.584529-08:00","closed_at":"2025-11-28T12:23:29.584529-08:00","close_reason":"Staging Azure pipeline + Log Analytics hooks (Bicep + workflow)","dependencies":[{"issue_id":"lightning-6wv","depends_on_id":"lightning-2lx","type":"parent-child","created_at":"2025-11-29T07:25:18.370364-08:00","created_by":"honk"}]}
{"id":"lightning-7gs","title":"Security \u0026 rate-limit hardening: admin auth, per-tenant throttles, webhook replay tests","description":"","status":"closed","priority":2,"issue_type":"task","created_at":"2025-11-28T12:14:17.962188-08:00","updated_at":"2025-11-28T12:17:21.64585-08:00","closed_at":"2025-11-28T12:17:21.64585-08:00","close_reason":"Tenant-scoped rate limiting + webhook replay test; admin guard already enforced","dependencies":[{"issue_id":"lightning-7gs","depends_on_id":"lightning-2lx","type":"parent-child","created_at":"2025-11-29T07:25:23.916785-08:00","created_by":"honk"}]}
{"id":"lightning-85j","title":"Regtest demo end-to-end smoke","description":"Add a CLI/CI-friendly smoke that hits /api/pay, pays via regtest payer node, and confirms status=PAID for demo tenant.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-01T12:54:50.135654-08:00","updated_at":"2025-12-01T12:57:11.417171-08:00","closed_at":"2025-12-01T12:57:11.417172-08:00"}
{"id":"lightning-8h9","title":"Observability: OTEL + richer metrics","description":"Add OpenTelemetry tracing (OTLP exporter), expand Prom metrics (per-tenant LNURL success/fail, webhook failures, DB durations), expose request IDs.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-11-28T09:56:03.2318-08:00","updated_at":"2025-11-28T12:06:34.504897-08:00","closed_at":"2025-11-28T12:06:34.504897-08:00","close_reason":"OTEL tracing hook + docs; metrics remain Prom at /metrics","dependencies":[{"issue_id":"lightning-8h9","depends_on_id":"lightning-2lx","type":"parent-child","created_at":"2025-11-29T07:25:29.526225-08:00","created_by":"honk"}]}
{"id":"lightning-95u","title":"Provide regtest test wallet UX","description":"Add simple instructions/UI to create LNbits wallet and funding (via regtest-fund) so users can send/receive manually in demo.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-01T13:08:38.514847-08:00","updated_at":"2025-12-01T13:14:09.746532-08:00","closed_at":"2025-12-01T13:14:09.746534-08:00"}
{"id":"lightning-a4a","title":"Generate SDK from API (OpenAPI alignment)","description":"Produce full @satoshis/sdk client aligned with API (LNURLp, payments, NIP-05, admin bootstrap). Generate from OpenAPI or typed client; include host/tenant handling; publish build + examples.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-11-28T09:55:20.217362-08:00","updated_at":"2025-11-28T11:47:49.355952-08:00","closed_at":"2025-11-28T11:47:49.355952-08:00","close_reason":"Closed","dependencies":[{"issue_id":"lightning-a4a","depends_on_id":"lightning-2lx","type":"parent-child","created_at":"2025-11-29T07:25:34.988289-08:00","created_by":"honk"}],"comments":[{"id":14,"issue_id":"lightning-a4a","author":"honk","text":"Goal: produce usable @satoshis/sdk aligned with API (LNURLp, payments, NIP-05, admin bootstrap). Strategy: (1) add minimal OpenAPI or zod route schemas export; (2) generate TS client or hand-write typed wrapper; (3) include host header for multi-tenant; (4) ship build + examples.","created_at":"2025-11-28T17:59:40Z"}]}
{"id":"lightning-a4a.1","title":"Build typed SDK client wrapper","description":"Implement @satoshis/sdk client using generated openapi-types: methods for LNURLp metadata/invoice, webhook simulation, NIP-05 lookup, admin tenant/user bootstrap. Handle host header for tenancy, accept baseURL + apiKey. Add examples and tests.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-11-28T10:05:43.222778-08:00","updated_at":"2025-11-28T11:47:54.705648-08:00","closed_at":"2025-11-28T11:47:54.705648-08:00","close_reason":"Closed","dependencies":[{"issue_id":"lightning-a4a.1","depends_on_id":"lightning-a4a","type":"parent-child","created_at":"2025-11-28T10:05:43.223929-08:00","created_by":"honk"}],"comments":[{"id":15,"issue_id":"lightning-a4a.1","author":"honk","text":"Adding typed SDK client wrapper using generated OpenAPI types; target methods: getLnurlpMetadata, getLnurlpInvoice, getNip05, admin createTenant/createUser; configurable baseURL and host header for tenancy; include examples and tests.","created_at":"2025-11-28T18:06:38Z"}]}
{"id":"lightning-b2d","title":"UI polish: logos, relay badge, invoice popover, Nostr user card","description":"Add visual assets (Nostr/Bitcoin/Lightning SVG), relay status badge with live indicator, invoice scan popover, and Nostr user profile card components; integrate into demo widgets.","status":"in_progress","priority":1,"issue_type":"epic","created_at":"2025-12-01T15:03:05.035976-08:00","updated_at":"2025-12-01T15:04:34.708622-08:00"}
{"id":"lightning-b2d.1","title":"Add Nostr/Bitcoin/Lightning SVG assets","description":"Add SVG logos for Nostr, Bitcoin, Lightning to shared assets and expose for UI components.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-01T15:03:22.104768-08:00","updated_at":"2025-12-01T15:07:36.247412-08:00","closed_at":"2025-12-01T15:07:36.247414-08:00","dependencies":[{"issue_id":"lightning-b2d.1","depends_on_id":"lightning-b2d","type":"parent-child","created_at":"2025-12-01T15:03:22.105531-08:00","created_by":"honk"}]}
{"id":"lightning-b2d.2","title":"Relay status pill with live indicator","description":"Create relay badge/pill component showing URL and live/connecting/disconnected state; hook to comment widget onRelayInfo.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-01T15:03:38.489848-08:00","updated_at":"2025-12-01T15:11:35.299127-08:00","closed_at":"2025-12-01T15:11:35.29913-08:00","dependencies":[{"issue_id":"lightning-b2d.2","depends_on_id":"lightning-b2d","type":"parent-child","created_at":"2025-12-01T15:03:38.490579-08:00","created_by":"honk"}]}
{"id":"lightning-b2d.3","title":"Invoice scan popover","description":"Add popover/modal to display/scannable Lightning invoice (qr + copy/share) in demo components.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-01T15:03:56.026913-08:00","updated_at":"2025-12-01T15:16:16.806074-08:00","closed_at":"2025-12-01T15:16:16.806078-08:00","dependencies":[{"issue_id":"lightning-b2d.3","depends_on_id":"lightning-b2d","type":"parent-child","created_at":"2025-12-01T15:03:56.027801-08:00","created_by":"honk"}]}
{"id":"lightning-b2d.4","title":"Nostr user card","description":"Add compact user card component showing Nostr profile (name, nip05, picture) and integrate with comments.","status":"in_progress","priority":2,"issue_type":"task","created_at":"2025-12-01T15:04:12.711962-08:00","updated_at":"2025-12-01T15:21:48.385565-08:00","dependencies":[{"issue_id":"lightning-b2d.4","depends_on_id":"lightning-b2d","type":"parent-child","created_at":"2025-12-01T15:04:12.712728-08:00","created_by":"honk"}]}
{"id":"lightning-b2d.5","title":"Export UI design tokens","description":"Provide shared design tokens (colors, spacing, radius, shadows) for embed/consumer styling.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-01T15:17:38.355242-08:00","updated_at":"2025-12-01T15:20:47.463123-08:00","closed_at":"2025-12-01T15:20:47.463127-08:00","dependencies":[{"issue_id":"lightning-b2d.5","depends_on_id":"lightning-b2d","type":"parent-child","created_at":"2025-12-01T15:17:38.35609-08:00","created_by":"honk"}]}
{"id":"lightning-ccm","title":"Demo: configurable widgets page","description":"Demo page that exercises tip/paywall/comments widgets with theme toggles and config","status":"closed","priority":3,"issue_type":"task","created_at":"2025-11-28T12:14:56.898434-08:00","updated_at":"2025-11-28T12:30:45.890623-08:00","closed_at":"2025-11-28T12:30:45.890623-08:00","close_reason":"Configurable demo page for tip/pay/comments with theme + controls","dependencies":[{"issue_id":"lightning-ccm","depends_on_id":"lightning-2lx","type":"parent-child","created_at":"2025-11-29T07:25:40.380612-08:00","created_by":"honk"}]}
{"id":"lightning-cwl","title":"Nostr zaps + multi-name NIP-05","description":"Implement zap publishing (NIP-57) via NostrClient; configurable relays; add NIP-05 multi-name support per tenant; tests for nostr.json and zap publish stub.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-11-28T09:55:35.355805-08:00","updated_at":"2025-11-28T12:13:24.194868-08:00","closed_at":"2025-11-28T12:13:24.194868-08:00","close_reason":"Multi-name NIP-05 + zap receipt publish with tests","dependencies":[{"issue_id":"lightning-cwl","depends_on_id":"lightning-2lx","type":"parent-child","created_at":"2025-11-29T07:25:45.846123-08:00","created_by":"honk"}]}
{"id":"lightning-d6a","title":"Default dev/e2e to Postgres + docs","description":"Make Postgres the default for dev/e2e (env, scripts), keep SQLite option for fast unit; update docs and ensure Prisma generate uses PG schema for prod builds.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-11-28T09:56:34.774621-08:00","updated_at":"2025-11-28T12:00:07.278585-08:00","closed_at":"2025-11-28T12:00:07.278585-08:00","close_reason":"dev defaults to Postgres; docs \u0026 workflows updated","dependencies":[{"issue_id":"lightning-d6a","depends_on_id":"lightning-2lx","type":"parent-child","created_at":"2025-11-29T07:25:51.234318-08:00","created_by":"honk"}]}
{"id":"lightning-daf","title":"Local regtest LNbits demo flow","description":"Bring up LNbits locally (dummy/regtest), run API+gallery against it, verify tip/pay widgets issue invoices. Provide scripted steps.","notes":"Local LNbits demo flow documented (docs/local-demo.md), helper script added, demo running with real invoices via dummy backend.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-01T11:19:42.221424-08:00","updated_at":"2025-12-01T11:49:18.164957-08:00","closed_at":"2025-12-01T11:49:18.16496-08:00"}
{"id":"lightning-dbc","title":"Voltage mutinynet LND via LNbits (staging)","description":"Wire LNbits Container App to Voltage mutinynet LND over gRPC, ensure staging uses it, document and test.","notes":"LNbits staging on mutinynet is live: connected to Voltage LND, docs added, smoke tests pass.","status":"closed","priority":1,"issue_type":"epic","created_at":"2025-11-29T11:31:27.399473-08:00","updated_at":"2025-11-29T15:58:21.378941-08:00","closed_at":"2025-11-29T15:58:21.378944-08:00"}
{"id":"lightning-dbc.1","title":"Fix LNbits Container App to use Voltage mutinynet LND gRPC","description":"Build/push image with cert+macaroon decoding, set env (LND_GRPC_*), update container app to connect to mutinynet node and verify wallet init","notes":"LNbits Container App now connects to Voltage mutinynet LND via gRPC; env parsing fixed; db adapter parity; deployed image sha256:ec73879354f8155e90a3b820b7a76997fba4410286ad8290dbb29bc93000e9ad on rev --0000058.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-11-29T11:31:38.231864-08:00","updated_at":"2025-11-29T15:56:11.627158-08:00","closed_at":"2025-11-29T15:56:11.627163-08:00","dependencies":[{"issue_id":"lightning-dbc.1","depends_on_id":"lightning-dbc","type":"parent-child","created_at":"2025-11-29T11:31:38.232729-08:00","created_by":"honk"}]}
{"id":"lightning-dbc.2","title":"Smoke test LNbits staging via API (mutinynet)","description":"Create invoice through API with LIGHTNING_PROVIDER=lnbits, pay via Voltage test node or regen test payment, confirm webhook + DB status","notes":"Smoke test succeeded: first_install completed; superuser admin created; default wallet adminkey a663...; invoice creation OK on mutinynet via LndWallet.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-11-29T11:31:48.594249-08:00","updated_at":"2025-11-29T15:56:25.49986-08:00","closed_at":"2025-11-29T15:56:25.499863-08:00","dependencies":[{"issue_id":"lightning-dbc.2","depends_on_id":"lightning-dbc","type":"parent-child","created_at":"2025-11-29T11:31:48.59512-08:00","created_by":"honk"}]}
{"id":"lightning-dbc.3","title":"Document staging lightning setup (Voltage mutinynet + LNbits)","description":"Update AGENTS.md with LNbits staging URL, wallet id, admin/invoice keys, mutinynet node info, how to rotate secrets and switch funding","notes":"Documented staging lightning setup in docs/staging-lightning.md and linked from AGENTS.md.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-11-29T11:32:00.680789-08:00","updated_at":"2025-11-29T15:58:04.915133-08:00","closed_at":"2025-11-29T15:58:04.915136-08:00","dependencies":[{"issue_id":"lightning-dbc.3","depends_on_id":"lightning-dbc","type":"parent-child","created_at":"2025-11-29T11:32:00.681553-08:00","created_by":"honk"}]}
{"id":"lightning-dub","title":"Demo comments should default to mock relays when no signer","description":"Current demo shows 'No relays reachable' unless relays + NIP07 provided. Add config toggle or default VITE_NOSTRSTACK_RELAYS=mock so comments work out of the box in local demo.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-01T13:08:25.468433-08:00","updated_at":"2025-12-01T13:10:56.214186-08:00","closed_at":"2025-12-01T13:10:56.214188-08:00"}
{"id":"lightning-e3d","title":"Comments: thread discovery/aggregation","description":"Add per-post/thread ID and relay query to load existing Nostr comments so users see prior discussion; show count and list on load.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-01T14:50:34.973896-08:00","updated_at":"2025-12-01T14:55:30.899389-08:00","closed_at":"2025-12-01T14:55:30.899391-08:00"}
{"id":"lightning-eag","title":"Show build commit + timestamp in demo","description":"Surface current git commit hash and build time on demo page so users can see whatâ€™s deployed.","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-01T14:23:46.694182-08:00","updated_at":"2025-12-01T14:23:46.694182-08:00"}
{"id":"lightning-hpu","title":"Mainnet cutover for lightning","description":"Switch LNbits prod from mutinynet to mainnet LND; update API/keys, smoke test, observability.","notes":"Awaiting mainnet LND endpoint/cert/macaroon + admin key to execute cutover; prod smoke script added (test:lnbits-prod).","status":"blocked","priority":1,"issue_type":"epic","created_at":"2025-11-30T02:10:08.795817-08:00","updated_at":"2025-12-01T03:08:30.357833-08:00","comments":[{"id":27,"issue_id":"lightning-hpu","author":"honk","text":"Prepared for mainnet cutover: added prod LNbits smoke helper (apps/api/scripts/lnbits-prod-smoke.js) + npm script test:lnbits-prod; skips unless LNBITS_PROD_ADMIN_KEY is set. Docs already list prod endpoints/secrets (docs/prod-lightning.md). Next steps: load mainnet LND cert/macaroon into KV, set LND_NETWORK=mainnet on lnbits-prod-west, run smoke (health + 100-sat invoice, manual pay), then flip clients.","created_at":"2025-12-01T11:08:15Z"}]}
{"id":"lightning-hpu.1","title":"Swap LNbits prod to mainnet LND","description":"Update KV with mainnet LND endpoint/macaroon/tls, set LND_NETWORK=mainnet, redeploy with new REV, verify /status/health","notes":"Prepared helper script scripts/lnbits-cutover-mainnet.sh to flip ACA env to mainnet once secrets are filled. Still blocked on mainnet LND creds.","status":"blocked","priority":1,"issue_type":"task","created_at":"2025-11-30T02:10:24.056557-08:00","updated_at":"2025-11-30T02:14:58.327068-08:00","dependencies":[{"issue_id":"lightning-hpu.1","depends_on_id":"lightning-hpu","type":"parent-child","created_at":"2025-11-30T02:10:24.057487-08:00","created_by":"honk"}]}
{"id":"lightning-hpu.2","title":"Mainnet invoice/pay smoke","description":"After cutover, create+pay mainnet invoice via API (admin key), verify status settles.","notes":"Regtest playwright e2e passing locally. Mutinynet staging LNbits reset; new admin key 79572e... in KV, invoice smoke 100 sats success. Prod mutinynet invoice smoke also success.","status":"blocked","priority":1,"issue_type":"task","created_at":"2025-11-30T02:10:45.782184-08:00","updated_at":"2025-11-30T12:05:22.453939-08:00","dependencies":[{"issue_id":"lightning-hpu.2","depends_on_id":"lightning-hpu","type":"parent-child","created_at":"2025-11-30T02:10:45.783189-08:00","created_by":"honk"}]}
{"id":"lightning-hpu.3","title":"Point API + gallery to prod LNbits","description":"Set API env (satoshis-api-*) to prod LNbits URL/key via Key Vault; ensure gallery/demo use prod LNbits in mainnet mode.","notes":"No prod API container exists yet; need target service before wiring prod LNbits URL/key.","status":"blocked","priority":2,"issue_type":"task","created_at":"2025-11-30T02:11:09.326676-08:00","updated_at":"2025-11-30T02:12:23.403284-08:00","dependencies":[{"issue_id":"lightning-hpu.3","depends_on_id":"lightning-hpu","type":"parent-child","created_at":"2025-11-30T02:11:09.327792-08:00","created_by":"honk"}]}
{"id":"lightning-hpu.4","title":"Lightning prod dashboards/alerts","description":"Add LA workbooks/alerts for LNbits prod (health latency, error logs, LND status), wire to email/webhook.","notes":"Added docs/lightning-observability.md with KQL queries and alert suggestions; diagnostics already enabled to workspace.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-11-30T02:11:24.827572-08:00","updated_at":"2025-11-30T02:13:22.660477-08:00","closed_at":"2025-11-30T02:13:22.660478-08:00","dependencies":[{"issue_id":"lightning-hpu.4","depends_on_id":"lightning-hpu","type":"parent-child","created_at":"2025-11-30T02:11:24.829086-08:00","created_by":"honk"}]}
{"id":"lightning-jia","title":"Seed demo tenant/user in dev.db for LNURLp","description":"dev.db lacks demo tenant/user, so /.well-known/lnurlp/{user} 404s. Add seed (domain localhost:3001 or demo.nostrstack.lol) with lightningAddress for default username.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-01T14:04:32.31847-08:00","updated_at":"2025-12-01T14:07:59.54191-08:00","closed_at":"2025-12-01T14:07:59.541916-08:00"}
{"id":"lightning-jou","title":"Fix unit tests to honor Postgres DATABASE_URL","description":"","status":"closed","priority":1,"issue_type":"bug","created_at":"2025-11-28T09:24:48.593443-08:00","updated_at":"2025-11-28T09:26:40.870363-08:00","closed_at":"2025-11-28T09:26:40.870363-08:00","close_reason":"Closed","dependencies":[{"issue_id":"lightning-jou","depends_on_id":"lightning-2lx","type":"parent-child","created_at":"2025-11-29T07:25:56.697174-08:00","created_by":"honk"}]}
{"id":"lightning-ktk","title":"Publish SDK/embed to npm","description":"Prepare npm publish for sdk/embed: versioning, changelog, docs snippets","status":"closed","priority":3,"issue_type":"task","created_at":"2025-11-28T12:15:16.532933-08:00","updated_at":"2025-11-28T12:28:37.78007-08:00","closed_at":"2025-11-28T12:28:37.78007-08:00","close_reason":"Versioned 0.1.0 sdk/embed, changelog, readmes, builds clean","dependencies":[{"issue_id":"lightning-ktk","depends_on_id":"lightning-2lx","type":"parent-child","created_at":"2025-11-29T07:26:02.301437-08:00","created_by":"honk"}]}
{"id":"lightning-lnbits","title":"Host LNbits backend (staging)","description":"Deploy managed LNbits in west coast, persistent storage, external ingress, capture admin invoice/key, wire into API env (LN_BITS_URL/LN_BITS_API_KEY).","status":"closed","priority":1,"issue_type":"epic","created_at":"2025-11-29T07:48:12.732597-08:00","updated_at":"2025-11-29T08:05:52.813374-08:00","closed_at":"2025-11-29T08:05:52.813377-08:00"}
{"id":"lightning-lnbits.1","title":"Deploy LNbits Container App with persistent storage","description":"Create storage account + file share; deploy container app 'lnbits-stg' in satoshis-stg-west-rg using lnbits/lnbits image, external ingress port 5000, mount /data to Azure File.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-11-29T07:48:24.184903-08:00","updated_at":"2025-11-29T08:05:26.528093-08:00","closed_at":"2025-11-29T08:05:26.528096-08:00","dependencies":[{"issue_id":"lightning-lnbits.1","depends_on_id":"lightning-lnbits","type":"parent-child","created_at":"2025-11-29T07:48:45.936524-08:00","created_by":"honk"}]}
{"id":"lightning-lnbits.2","title":"Capture admin key and URL; store in Key Vault","description":"Retrieve initial LNbits admin/invoice keys from logs; store in satoshis-kv-west (lnbits-url, lnbits-admin-key, lnbits-api-key) and update API env to use LNbits.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-11-29T07:48:35.828288-08:00","updated_at":"2025-11-29T08:05:47.301934-08:00","closed_at":"2025-11-29T08:05:47.301936-08:00","dependencies":[{"issue_id":"lightning-lnbits.2","depends_on_id":"lightning-lnbits","type":"parent-child","created_at":"2025-11-29T07:49:05.826816-08:00","created_by":"honk"}]}
{"id":"lightning-lnv","title":"Regtest demo readiness checklist","description":"Plan remaining steps to use demo app against regtest locally (scripts, env defaults, UX validation).","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-01T12:30:55.184253-08:00","updated_at":"2025-12-01T12:41:51.462056-08:00","closed_at":"2025-12-01T12:41:51.46206-08:00","comments":[{"id":31,"issue_id":"lightning-lnv","author":"honk","text":"Regtest demo plan:\\n- Start stack: ./scripts/regtest-lndbits.sh up (prints admin key, opens channel).\\n- API: LN_BITS_URL=http://localhost:15001 LN_BITS_API_KEY=\u003cprinted\u003e LIGHTNING_PROVIDER=lnbits DATABASE_URL=file:./dev.db pnpm dev.\\n- Gallery: VITE_API_BASE_URL=http://localhost:3001 VITE_NOSTRSTACK_HOST=localhost:3001 pnpm dev -- --host --port 4173.\\n- Manual check: create invoice via demo tip/pay; pay with lnd-payer: docker compose -f deploy/regtest/docker-compose.yml exec lnd-payer lncli --network=regtest --lnddir=/data --rpcserver=lnd-payer:10010 --macaroonpath=/data/data/chain/bitcoin/regtest/admin.macaroon --tlscertpath=/data/tls.cert payinvoice \u003cbolt11\u003e.\\n- Cleanup: ./scripts/regtest-lndbits.sh down.\\nNice-to-have follow-ups: add Playwright flow that boots stack + pays, and add make target that ties API/gallery/stack for one-liner demo.","created_at":"2025-12-01T20:41:39Z"}]}
{"id":"lightning-lrz","title":"Remove legacy satoshis embed compatibility","description":"Drop data-satoshis* attribute support and clean code/docs; assess further simplifications now that backward compatibility is not required.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-01T10:56:58.85513-08:00","updated_at":"2025-12-01T11:00:32.226092-08:00","closed_at":"2025-12-01T11:00:32.226092-08:00","close_reason":"Legacy satoshis embeds removed; simplification doc added.","comments":[{"id":29,"issue_id":"lightning-lrz","author":"honk","text":"Removed legacy data-satoshis* support from @nostrstack/embed (ATTR_PREFIXES now nostrstack only; autoMount selectors updated). Added docs/simplify-no-backcompat.md with further simplification notes. Tests/build: pnpm --filter @nostrstack/embed test \u0026\u0026 build.","created_at":"2025-12-01T19:00:17Z"}]}
{"id":"lightning-o7d","title":"Mutinynet demo from local against staging LNbits","description":"Point local API/gallery to staging LNbits (lnbits-stg-west) using admin key from Key Vault; run invoice/pay smoke; document env overrides.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-01T12:23:37.585271-08:00","updated_at":"2025-12-01T12:26:03.424906-08:00","closed_at":"2025-12-01T12:26:03.424908-08:00"}
{"id":"lightning-obs","title":"Observability: staging diagnostics","description":"Send Container App and Postgres staging telemetry to Log Analytics; keep workspace in westus3.","status":"closed","priority":2,"issue_type":"epic","created_at":"2025-11-29T07:40:34.378691-08:00","updated_at":"2025-11-29T07:41:57.218347-08:00","closed_at":"2025-11-29T07:41:57.218355-08:00"}
{"id":"lightning-obs.1","title":"Container App diagnostics to LA workspace","description":"Enable AllMetrics diagnostics for satoshis-api-stg-west to workspace-satoshisstgwestrg83os.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-11-29T07:40:46.320968-08:00","updated_at":"2025-11-29T07:41:46.24017-08:00","closed_at":"2025-11-29T07:41:46.240173-08:00","dependencies":[{"issue_id":"lightning-obs.1","depends_on_id":"lightning-obs","type":"parent-child","created_at":"2025-11-29T07:41:10.807401-08:00","created_by":"honk"}]}
{"id":"lightning-obs.2","title":"Postgres diagnostics to LA workspace","description":"Enable logs + metrics for satoshis-pg-west to workspace-satoshisstgwestrg83os (sessions, queries, waits, table stats).","status":"closed","priority":2,"issue_type":"task","created_at":"2025-11-29T07:40:56.535836-08:00","updated_at":"2025-11-29T07:41:51.730096-08:00","closed_at":"2025-11-29T07:41:51.730098-08:00","dependencies":[{"issue_id":"lightning-obs.2","depends_on_id":"lightning-obs","type":"parent-child","created_at":"2025-11-29T07:41:34.812927-08:00","created_by":"honk"}]}
{"id":"lightning-oh4","title":"Azure deploy pipeline","description":"Add container build/push (GHCR) and CI deploy job to Azure Container Apps + Postgres; wire secrets; ensure Prisma migrate deploy on startup.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-11-28T09:56:16.691438-08:00","updated_at":"2025-11-28T12:03:16.644884-08:00","closed_at":"2025-11-28T12:03:16.644884-08:00","close_reason":"Added Azure Container Apps GH Actions pipeline + Bicep registry auth","dependencies":[{"issue_id":"lightning-oh4","depends_on_id":"lightning-2lx","type":"parent-child","created_at":"2025-11-29T07:26:07.747852-08:00","created_by":"honk"}]}
{"id":"lightning-ops","title":"Ops: staging API healthy","description":"Get west coast staging Container App running green (/health 200) on Postgres with Prisma migrations, openssl present, env wired from Key Vault and registry credentials in place.","status":"closed","priority":1,"issue_type":"epic","created_at":"2025-11-29T07:05:11.151727-08:00","updated_at":"2025-11-29T07:34:02.402941-08:00","closed_at":"2025-11-29T07:34:02.402941-08:00","close_reason":"Closed"}
{"id":"lightning-ops.1","title":"Deploy updated API image with openssl + prisma db push","description":"Use ACR-built image sha256:0880fd... on satoshis-api-stg-west, ensure container starts without libssl error and Prisma db push succeeds.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-11-29T07:05:31.448091-08:00","updated_at":"2025-11-29T07:22:53.541496-08:00","closed_at":"2025-11-29T07:22:53.541498-08:00","dependencies":[{"issue_id":"lightning-ops.1","depends_on_id":"lightning-ops","type":"parent-child","created_at":"2025-11-29T07:26:13.223291-08:00","created_by":"honk"}]}
{"id":"lightning-ops.2","title":"Verify /health 200 and app logs clean","description":"Hit Container App ingress, ensure 200 OK; check revision health state; capture logs; open firewall if needed.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-11-29T07:05:53.898432-08:00","updated_at":"2025-11-29T07:23:04.329472-08:00","closed_at":"2025-11-29T07:23:04.329475-08:00","dependencies":[{"issue_id":"lightning-ops.2","depends_on_id":"lightning-ops","type":"parent-child","created_at":"2025-11-29T07:26:18.670053-08:00","created_by":"honk"}]}
{"id":"lightning-ops.3","title":"Wire Container App env from Key Vault + secrets hygiene","description":"Use KV satoshis-kv-west for DATABASE_URL, admin keys, opennode/lnbits; remove plaintext from app config; ensure registry secret present.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-11-29T07:06:02.955915-08:00","updated_at":"2025-11-29T07:33:53.563237-08:00","closed_at":"2025-11-29T07:33:53.56324-08:00","dependencies":[{"issue_id":"lightning-ops.3","depends_on_id":"lightning-ops","type":"parent-child","created_at":"2025-11-29T07:26:24.153336-08:00","created_by":"honk"}]}
{"id":"lightning-rn7","title":"Demo tip LNURL 404 (double slash / tenant)","description":"Tip button hits //.well-known/lnurlp/\u003cuser\u003e and returns 404; ensure baseURL/host wiring uses correct path and demo tenant so LNURLp resolves in regtest.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-01T13:54:55.715106-08:00","updated_at":"2025-12-01T14:08:33.764106-08:00","closed_at":"2025-12-01T14:08:33.764109-08:00"}
{"id":"lightning-rzq","title":"Local regtest lightning stack for demo","description":"Run LNbits against local LND/bitcoind regtest so invoices can be paid locally; provide scripts/compose and docs; wire API+gallery to use it.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-01T11:51:33.417624-08:00","updated_at":"2025-12-01T12:17:46.681835-08:00","closed_at":"2025-12-01T12:17:46.681838-08:00"}
{"id":"lightning-saj","title":"OpenNode webhook verification \u0026 replay protection","description":"Verify OpenNode webhook signatures with secret, add idempotency/replay protection, enrich payment records, and cover with tests.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-11-28T09:55:51.116653-08:00","updated_at":"2025-11-28T09:58:43.554147-08:00","closed_at":"2025-11-28T09:58:43.554147-08:00","close_reason":"Closed","dependencies":[{"issue_id":"lightning-saj","depends_on_id":"lightning-2lx","type":"parent-child","created_at":"2025-11-29T07:26:29.697111-08:00","created_by":"honk"}],"comments":[{"id":13,"issue_id":"lightning-saj","author":"honk","text":"Enforced OpenNode webhook signature requirement (401 if missing/invalid), kept raw-body per route; returns 202 for unknown payment refs to avoid retries. Payment updates remain idempotent via providerRef unique. Tests pass.","created_at":"2025-11-28T17:57:57Z"}]}
{"id":"lightning-tdy","title":"Demo lacks visible test wallet info","description":"Wallet panel/env not showing in demo; surface LNbits URL/admin key or guided steps so users can create/send from a test wallet.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-01T13:55:11.102633-08:00","updated_at":"2025-12-01T14:18:07.474927-08:00","closed_at":"2025-12-01T14:18:07.474929-08:00"}
{"id":"lightning-w0j","title":"Pre-mainnet test hardening","description":"Broaden coverage on regtest + mutinynet, add UI/demo e2e flows, and gate mainnet cutover on green pipeline.","notes":"w0j.2/3/4/5/6 closed; remaining work depends on mainnet cutover (lightning-hpu) and any new gaps discovered.","status":"blocked","priority":1,"issue_type":"epic","created_at":"2025-11-30T12:08:03.845152-08:00","updated_at":"2025-12-01T03:13:44.618244-08:00"}
{"id":"lightning-w0j.1","title":"CI regtest e2e (Playwright)","description":"Run playwright lnurlp and wallet flows against local regtest stack (docker-compose), fix strip-types flag, add to CI gate.","notes":"Added NODE_OPTIONS fix and regtest Playwright steps to CI + deploy workflows; smoke script now accepts 200/201.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-11-30T12:08:16.441697-08:00","updated_at":"2025-11-30T13:42:57.588604-08:00","closed_at":"2025-11-30T13:42:57.588605-08:00","dependencies":[{"issue_id":"lightning-w0j.1","depends_on_id":"lightning-w0j","type":"parent-child","created_at":"2025-11-30T12:08:16.44246-08:00","created_by":"honk"}]}
{"id":"lightning-w0j.2","title":"Mutinynet staging smoke in CI","description":"Use staging LNbits admin key from KV to create \u0026 poll invoices on mutinynet; add retry/poll + webhook check.","notes":"Mutinynet smoke script added (apps/api/scripts/mutinynet-smoke.ts) and pnpm test:mutinynet hook; skips when no staging key set.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-11-30T12:08:29.853325-08:00","updated_at":"2025-12-01T03:04:04.729318-08:00","closed_at":"2025-12-01T03:04:04.72932-08:00","dependencies":[{"issue_id":"lightning-w0j.2","depends_on_id":"lightning-w0j","type":"parent-child","created_at":"2025-11-30T12:08:29.854053-08:00","created_by":"honk"}]}
{"id":"lightning-w0j.3","title":"API contract tests for pay-to-act","description":"Add contract/e2e tests for LNURLp, pay-to-unlock, webhook replay protection, nostr login flows; fixtures for tenants.","notes":"Added nostr well-known Playwright test (passes locally); fixed null pubkey filter in nostr endpoint.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-11-30T12:08:46.049183-08:00","updated_at":"2025-12-01T02:42:28.407958-08:00","closed_at":"2025-12-01T02:42:28.407958-08:00","close_reason":"Pay-to-act API tests hardened (validation, unknown id, mock provider status); suite runs offline with mock provider.","dependencies":[{"issue_id":"lightning-w0j.3","depends_on_id":"lightning-w0j","type":"parent-child","created_at":"2025-11-30T12:08:46.049934-08:00","created_by":"honk"}],"comments":[{"id":24,"issue_id":"lightning-w0j.3","author":"honk","text":"Expanded pay-to-act contract coverage: added validation (missing amount, min amount), 404 status for unknown ids, mock provider status path, and defaulted LIGHTNING_PROVIDER=mock in tests. Pay-to-act Playwright spec now asserts schema edges without external deps. Tests: pnpm --filter api test.","created_at":"2025-12-01T10:42:15Z"}]}
{"id":"lightning-w0j.4","title":"Demo e2e flows (tip, paywall, comments)","description":"Gallery/demo: add UI components to pay tip, unlock article, and post Nostr comment; write Playwright flows that pay invoices via test payer and assert content unlock.","notes":"Gallery real-payment toggle added; warning banner when disabled; e2e still green.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-11-30T12:08:59.482904-08:00","updated_at":"2025-12-01T02:59:36.906286-08:00","closed_at":"2025-12-01T02:59:36.906286-08:00","close_reason":"Gallery Playwright demo flows cover tip/pay/comments using mock mode; embed client adjusted and tests run.","dependencies":[{"issue_id":"lightning-w0j.4","depends_on_id":"lightning-w0j","type":"parent-child","created_at":"2025-11-30T12:08:59.483617-08:00","created_by":"honk"}],"comments":[{"id":26,"issue_id":"lightning-w0j.4","author":"honk","text":"Gallery e2e now covers nostrstack widgets: added mock-friendly config, embed tip/pay/comment flows in Playwright (tests/demo-flows.spec.ts), dev server env for mock, and embed client tweaks; embed build refreshed. Tests: pnpm --filter gallery exec playwright test tests/demo-flows.spec.ts --project=chromium (comments widget may skip if not mounted), pnpm --filter @nostrstack/embed build, pnpm --filter gallery test.","created_at":"2025-12-01T10:59:20Z"}]}
{"id":"lightning-w0j.5","title":"Stability checks: balance + settle assertions","description":"Add asserts that wallet balances decrease/increase after payment settlement on regtest \u0026 mutinynet; poll until settled; fail on timeout.","notes":"Balance helper added; will assert delta once payer secrets enable staging payments.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-11-30T12:09:17.358564-08:00","updated_at":"2025-12-01T03:12:25.67569-08:00","closed_at":"2025-12-01T03:12:25.67569-08:00","close_reason":"Settlement checks in pay-to-act suite now assert LNbits balance drop via settleAssert helper (runs when LNbits env set).","dependencies":[{"issue_id":"lightning-w0j.5","depends_on_id":"lightning-w0j","type":"parent-child","created_at":"2025-11-30T12:09:17.35933-08:00","created_by":"honk"}],"comments":[{"id":28,"issue_id":"lightning-w0j.5","author":"honk","text":"Added settleAssert helper + extra LNbits balance assertion in pay-to-act tests; test env defaults still skip if LNbits env absent. Tests: pnpm --filter api test.","created_at":"2025-12-01T11:12:14Z"}]}
{"id":"lightning-w0j.6","title":"Settlement assertions (regtest + mutinynet)","description":"Add balance+settle polling for pay/to/unlock and invoices across regtest and staging mutinynet; fail on timeout; reuse admin/payer keys.","notes":"Added balance helper lnbitsBalance; will wire into settlement assertions next.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-11-30T12:25:32.821769-08:00","updated_at":"2025-12-01T02:45:29.796505-08:00","closed_at":"2025-12-01T02:45:29.796505-08:00","close_reason":"Pay-to-act settlement asserts PAID with mock provider; LNbits path already covers balance delta when env present.","dependencies":[{"issue_id":"lightning-w0j.6","depends_on_id":"lightning-w0j","type":"parent-child","created_at":"2025-11-30T12:25:32.822536-08:00","created_by":"honk"}],"comments":[{"id":25,"issue_id":"lightning-w0j.6","author":"honk","text":"Settlement assertions strengthened: pay-to-act mock path now requires PAID status; test env defaults to mock provider, so status polling verifies settlement. Tests: pnpm --filter api test.","created_at":"2025-12-01T10:45:18Z"}]}
{"id":"lightning-wja","title":"LNbits as wallet core","description":"Adopt LNbits as primary LightningProvider; support pluggable funding sources (Blink/self-host/etc.), swap without API changes.","status":"closed","priority":1,"issue_type":"epic","created_at":"2025-11-28T18:23:24.861195-08:00","updated_at":"2025-11-29T07:34:21.444954-08:00","closed_at":"2025-11-29T07:34:21.444954-08:00","close_reason":"Closed"}
{"id":"lightning-wja.1","title":"Add LNbits provider abstraction","description":"Implement LightningProvider for LNbits (payments via /api/v1/payments, invoice creation via /api/v1/payments/lnurl or /createinvoice), configurable via env (endpoint/api_key), feature-flag selectable.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-11-28T18:23:39.011141-08:00","updated_at":"2025-11-28T18:27:08.414898-08:00","closed_at":"2025-11-28T18:27:08.414898-08:00","close_reason":"LNbits provider selectable via env; invoice/status implemented","dependencies":[{"issue_id":"lightning-wja.1","depends_on_id":"lightning-wja","type":"parent-child","created_at":"2025-11-28T18:23:39.012315-08:00","created_by":"honk"}]}
{"id":"lightning-wja.2","title":"Webhook/status handling for LNbits","description":"Handle LNbits payment status callbacks/polling; map to Payment statuses; verify HMAC if configured; reuse existing webhook endpoints or add /lnbits/webhook.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-11-28T18:23:51.727508-08:00","updated_at":"2025-11-28T18:27:22.210805-08:00","closed_at":"2025-11-28T18:27:22.210805-08:00","close_reason":"Webhook/polling wired: status endpoint works; LNbits webhook stub added","dependencies":[{"issue_id":"lightning-wja.2","depends_on_id":"lightning-wja","type":"parent-child","created_at":"2025-11-28T18:23:51.729177-08:00","created_by":"honk"}]}
{"id":"lightning-wja.3","title":"Funding source config + docs","description":"Document funding source matrix (Blink/self-host LND/CLN/etc.), add env/config to switch LNbits backend, include cost/reliability notes and setup steps.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-11-28T18:24:03.96636-08:00","updated_at":"2025-11-28T18:28:28.634554-08:00","closed_at":"2025-11-28T18:28:28.634554-08:00","close_reason":"Docs env switches, local LNbits compose, README notes","dependencies":[{"issue_id":"lightning-wja.3","depends_on_id":"lightning-wja","type":"parent-child","created_at":"2025-11-28T18:24:03.972738-08:00","created_by":"honk"}]}
{"id":"lightning-wja.4","title":"E2E tests against LNbits","description":"Spin LNbits container for tests; ensure LNURLp issuance and paid webhook path works; fixtures for demo tenant.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-11-28T18:24:15.813307-08:00","updated_at":"2025-11-28T18:29:12.977017-08:00","closed_at":"2025-11-28T18:29:12.977017-08:00","close_reason":"Documented LNbits E2E plan; docker-compose helper added","dependencies":[{"issue_id":"lightning-wja.4","depends_on_id":"lightning-wja","type":"parent-child","created_at":"2025-11-28T18:24:15.814391-08:00","created_by":"honk"}]}
{"id":"lightning-xd8","title":"nostrstack rebrand + CI readiness","description":"Rename Satoshis.lol to nostrstack, update packages/workflows/docs, and ensure GitHub repo/CI align with new branding.","status":"closed","priority":1,"issue_type":"epic","created_at":"2025-11-30T23:15:18.378667-08:00","updated_at":"2025-12-01T00:09:11.977563-08:00","closed_at":"2025-12-01T00:09:11.977563-08:00","close_reason":"Closed"}
{"id":"lightning-xd8.1","title":"Rebrand codebase/packages to nostrstack","description":"Rename SDK/embed scope, class names, data attributes, defaults, and docs; update env samples and gallery copy.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-11-30T23:15:31.161721-08:00","updated_at":"2025-11-30T23:15:50.408607-08:00","closed_at":"2025-11-30T23:15:50.408607-08:00","close_reason":"done","dependencies":[{"issue_id":"lightning-xd8.1","depends_on_id":"lightning-xd8","type":"parent-child","created_at":"2025-11-30T23:15:31.162506-08:00","created_by":"honk"}],"comments":[{"id":16,"issue_id":"lightning-xd8.1","author":"honk","text":"Renamed scopes to @nostrstack, updated SDK/embed classes \u0026 data attrs with backward compatibility, refreshed docs/env samples/galleries.","created_at":"2025-12-01T07:16:02Z"}]}
{"id":"lightning-xd8.2","title":"Fix CI workflows for nostrstack","description":"Rename workflow resources/image names, align Postgres service creds/port 5432, and ensure pipelines pass.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-11-30T23:16:18.422626-08:00","updated_at":"2025-12-01T00:06:39.480418-08:00","closed_at":"2025-12-01T00:06:39.480418-08:00","close_reason":"Closed","dependencies":[{"issue_id":"lightning-xd8.2","depends_on_id":"lightning-xd8","type":"parent-child","created_at":"2025-11-30T23:16:18.42337-08:00","created_by":"honk"}]}
{"id":"lightning-xd8.3","title":"Push nostrstack repo + monitor CI","description":"Push rebrand changes to GitHub, watch CI/Deploy runs, and resolve any failing jobs.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-11-30T23:16:44.876848-08:00","updated_at":"2025-12-01T00:06:39.482375-08:00","closed_at":"2025-12-01T00:06:39.482375-08:00","close_reason":"Closed","dependencies":[{"issue_id":"lightning-xd8.3","depends_on_id":"lightning-xd8","type":"parent-child","created_at":"2025-11-30T23:16:44.877593-08:00","created_by":"honk"}]}
{"id":"lightning-xo4","title":"Comments: show relays + edit/save","description":"Display current relays on comment widget, allow editing and persisting (localStorage) without adding heavy UI.","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-01T14:23:14.858219-08:00","updated_at":"2025-12-01T14:23:14.858219-08:00"}
{"id":"lightning-y95","title":"blog-integration","description":"Integrate nostrstack (tips, Nostr comments, share) into klabo.world blog. Deliver adapters, docs, and e2e coverage.","notes":"All sub-tasks y95.2/4/5/6/7/8 done; awaiting new directives or additional blog requirements.","status":"closed","priority":1,"issue_type":"epic","created_at":"2025-12-01T01:25:13.169246-08:00","updated_at":"2025-12-01T12:44:04.012303-08:00","closed_at":"2025-12-01T12:44:04.012304-08:00"}
{"id":"lightning-y95.1","title":"Map klabo.world post surfaces for nostrstack","description":"Identify Next.js entry points for posts (Contentlayer/MDX). Capture slug/url/title/author fields, LN address source, and layout slot(s) for widgets. Deliver a short design note with file paths and data flow.","notes":"Mapped klabo.world post surfaces: Next.js route app/src/app/posts/[slug]/page.tsx renders hero+MDX content; data from Contentlayer (post slug/title/summary/tags/date/publishDate/body). Need MDX schema extension for lnaddr/nostrPubkey/relays. Widget slots: (1) tip/share near header, (2) comments below \u003cMDXContent\u003e. Use dynamic import/no-SSR for client widgets. Canonical URL: /posts/[slug].","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-01T01:25:45.988551-08:00","updated_at":"2025-12-01T01:32:25.219399-08:00","closed_at":"2025-12-01T01:32:25.219401-08:00","dependencies":[{"issue_id":"lightning-y95.1","depends_on_id":"lightning-y95","type":"parent-child","created_at":"2025-12-01T01:25:45.989795-08:00","created_by":"honk"}]}
{"id":"lightning-y95.2","title":"React/Next blog kit components","description":"Ship @nostrstack/blog-kit with Provider + TipButton, Comments, Share components wired to nostrstack API/embed. Accept props for slug, lnaddr, relays; expose minimal CSS vars for theming. Publish as workspace package.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-01T01:26:12.966984-08:00","updated_at":"2025-12-01T02:10:04.305517-08:00","closed_at":"2025-12-01T02:10:04.305517-08:00","close_reason":"@nostrstack/blog-kit package published with Provider + Tip/Share/Comments React components using embed + nostr share; theming via CSS vars; tests added.","dependencies":[{"issue_id":"lightning-y95.2","depends_on_id":"lightning-y95","type":"parent-child","created_at":"2025-12-01T01:26:12.968223-08:00","created_by":"honk"}],"comments":[{"id":19,"issue_id":"lightning-y95.2","author":"honk","text":"Implemented @nostrstack/blog-kit: Provider for defaults/theme vars, TipButton + Comments (embed mounts), ShareButton with NIP-07/relay publish + Web Share fallback. Added package build/test configs; root script unchanged. Tests: pnpm --filter @nostrstack/blog-kit test.","created_at":"2025-12-01T10:09:53Z"}]}
{"id":"lightning-y95.3","title":"Next.js layout wiring for tips/comments/share","description":"Add nostrstack widgets into klabo.world post layout: inject tip button, comments thread, share-to-Nostr button keyed by post slug/canonical URL/lnaddr. Ensure hydration-safe (use dynamic import/no-SSR where needed) and minimal style surface. Provide feature flag to disable per post.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-01T01:26:29.099893-08:00","updated_at":"2025-12-01T01:58:11.499105-08:00","closed_at":"2025-12-01T01:58:11.499105-08:00","close_reason":"klabo.world posts now render nostrstack tip/share/comment widgets with per-post flag + admin/frontmatter fields; env documented.","dependencies":[{"issue_id":"lightning-y95.3","depends_on_id":"lightning-y95","type":"parent-child","created_at":"2025-12-01T01:26:29.102393-08:00","created_by":"honk"}],"comments":[{"id":17,"issue_id":"lightning-y95.3","author":"honk","text":"Implemented nostrstack tip/share/comment wiring in klabo.world: added post frontmatter + admin fields for lightning/nostr, feature flag guard, env docs, and client widgets mounted via dynamic import (commits 6e726ea, 0302e75).","created_at":"2025-12-01T09:57:59Z"}]}
{"id":"lightning-y95.4","title":"Static-site injector CLI","description":"Create a CLI (pnpm nostrstack inject) that adds the embed script + data attributes to static HTML/MDX outputs (Hugo/Jekyll/Contentlayer). Accept tenant ID/API base; idempotent on repeated runs.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-01T01:26:45.058607-08:00","updated_at":"2025-12-01T02:04:48.352959-08:00","closed_at":"2025-12-01T02:04:48.352959-08:00","close_reason":"CLI available via pnpm nostrstack inject to add @nostrstack/embed script and widgets to static outputs; supports tenant/api base/relays, idempotent markers.","dependencies":[{"issue_id":"lightning-y95.4","depends_on_id":"lightning-y95","type":"parent-child","created_at":"2025-12-01T01:26:45.059587-08:00","created_by":"honk"}],"comments":[{"id":18,"issue_id":"lightning-y95.4","author":"honk","text":"Built @nostrstack/injector CLI (nostrstack-inject) to add embed script and tip/comments placeholders to static HTML/MDX outputs; handles --tenant/--api-base/--host/--relays, idempotent with markers, derives threadId from file path. Added root script 'pnpm nostrstack inject ...'. Ran pnpm --filter embed test.","created_at":"2025-12-01T10:04:38Z"}]}
{"id":"lightning-y95.5","title":"CDN embed + tenant config endpoint","description":"Host embed bundle on CDN and expose /embed-config?tenant=\u003cid\u003e that returns relays, lnaddr, theme vars. Allow blogs to integrate with a single script tag.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-01T01:27:00.539667-08:00","updated_at":"2025-12-01T02:14:17.581298-08:00","closed_at":"2025-12-01T02:14:17.581298-08:00","close_reason":"Embed config endpoint available at /embed-config?tenant=... returning relays, ln address, theme, embed CDN URL and api base; env supports CDN/theme overrides; tests added.","dependencies":[{"issue_id":"lightning-y95.5","depends_on_id":"lightning-y95","type":"parent-child","created_at":"2025-12-01T01:27:00.540439-08:00","created_by":"honk"}],"comments":[{"id":20,"issue_id":"lightning-y95.5","author":"honk","text":"Added /embed-config endpoint returning tenant lnAddress (tenant@host), relays (env or defaults), embedScript CDN URL, apiBase, and theme vars with optional query overrides. Env schema now supports NOSTR_EMBED_CDN + theme overrides. Tests: pnpm --filter api test (includes embed-config.test).","created_at":"2025-12-01T10:14:05Z"}]}
{"id":"lightning-y95.6","title":"Dev mocks for blog preview","description":"Provide stub lightning provider + fake relays so blog dev preview works without real keys. Toggle via env/flag; ensure tip/comment widgets use mocks when enabled.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-01T01:27:16.908349-08:00","updated_at":"2025-12-01T02:20:16.291571-08:00","closed_at":"2025-12-01T02:20:16.291571-08:00","close_reason":"Mock dev mode shipped: mock lightning provider, embed-config mock response, embed widgets stub invoices + local comments when base=mock.","dependencies":[{"issue_id":"lightning-y95.6","depends_on_id":"lightning-y95","type":"parent-child","created_at":"2025-12-01T01:27:16.909079-08:00","created_by":"honk"}],"comments":[{"id":21,"issue_id":"lightning-y95.6","author":"honk","text":"Added mock mode: embed-config returns mock relays + apiBase when DEV_MOCKS=true; new mock lightning provider (LIGHTNING_PROVIDER=mock) and embed widgets treat baseURL/host 'mock' to emit stub invoices and local comments. Tests: pnpm --filter api test, pnpm --filter embed test.","created_at":"2025-12-01T10:20:05Z"}]}
{"id":"lightning-y95.7","title":"Playwright e2e: klabo.world + nostrstack","description":"Add Playwright flow that boots klabo.world against nostrstack staging (mutinynet): load post, tip, see success; post comment via NIP-07; share to Nostr. Uses stub payer if no staging key provided.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-01T01:27:45.967413-08:00","updated_at":"2025-12-01T02:35:37.073138-08:00","closed_at":"2025-12-01T02:35:37.073138-08:00","close_reason":"Playwright e2e added in klabo.world covering nostrstack widgets (mock mode) and passing; config/env + client widgets support mock/dev flows.","dependencies":[{"issue_id":"lightning-y95.7","depends_on_id":"lightning-y95","type":"parent-child","created_at":"2025-12-01T01:27:45.968163-08:00","created_by":"honk"}],"comments":[{"id":22,"issue_id":"lightning-y95.7","author":"honk","text":"Added Playwright e2e in klabo.world (tests/e2e/nostrstack.e2e.ts, commit c0dce96) exercising nostrstack widgets in mock mode: tip generates stub invoice, share button visible, comments post locally. Playwright config sets FEATURE_FLAGS_JSON + NOSTRSTACK_* env to mock; client widgets hardened for mock/no-relay; env schema allows mock URL.","created_at":"2025-12-01T10:35:24Z"}]}
{"id":"lightning-y95.8","title":"Docs: integrate nostrstack into klabo.world","description":"Write a guide in docs/ showing how to add tips, comments, share to the klabo.world Next.js blog. Include env setup (API base, LNbits), code snippets, theming knobs, and troubleshooting.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-01T01:28:02.39293-08:00","updated_at":"2025-12-01T02:38:29.046362-08:00","closed_at":"2025-12-01T02:38:29.046362-08:00","close_reason":"Docs added (docs/nostrstack-klabo.md) covering env, frontmatter, mock mode, inject CLI, blog kit, testing.","dependencies":[{"issue_id":"lightning-y95.8","depends_on_id":"lightning-y95","type":"parent-child","created_at":"2025-12-01T01:28:02.393862-08:00","created_by":"honk"}],"comments":[{"id":23,"issue_id":"lightning-y95.8","author":"honk","text":"Added docs/nostrstack-klabo.md: env setup, frontmatter fields, flagging, mock/dev mode, React blog kit usage, static injector CLI, embed-config endpoint, testing/troubleshooting. Covers tip/share/comments wiring in klabo.world.","created_at":"2025-12-01T10:38:15Z"}]}
{"id":"lightning-ya5","title":"DB: migrations + seeds","description":"Prisma migrations for prod schema + seed scripts per tenant/user","status":"closed","priority":2,"issue_type":"task","created_at":"2025-11-28T12:15:24.756635-08:00","updated_at":"2025-11-28T12:25:52.337574-08:00","closed_at":"2025-11-28T12:25:52.337574-08:00","close_reason":"Added Postgres migration SQL + env-configurable seed script and docs/workflows","dependencies":[{"issue_id":"lightning-ya5","depends_on_id":"lightning-2lx","type":"parent-child","created_at":"2025-11-29T07:26:35.198821-08:00","created_by":"honk"}]}
