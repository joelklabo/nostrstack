# NostrStack Web App

A "Nerd Hacker" aesthetic networked feed client built on Nostr and Lightning, serving as the flagship implementation of the NostrStack SDK.

## Features

- **Auth**: NIP-07 (Browser Extension) and Encrypted Local NSEC login.
- **Feed**: Real-time global feed (Kind 1) streamed from relays.
- **Activity**: Post notes, view user profiles (metadata + history).
- **Lightning**:
  - **Zaps**: NIP-57 one-click zaps via WebLN or QR code.
  - **Paywall**: L402-style paywalled content unlockable via Lightning.
- **Telemetry**: Real-time system monitoring and debug logs.

## Development

### Prerequisites

- Node.js 20+
- PNPM 10+

### Run Locally

```bash
pnpm dev
```

Runs at `https://localhost:4173`. Connects to `https://localhost:3001` (API) by default.

### Regtest zaps (local)

To pay zap invoices using the regtest wallet:

1. Start the regtest stack and API (see `docs/local-demo.md`).
2. Ensure the API has `ENABLE_REGTEST_PAY=true`.
3. Run the web app with `VITE_ENABLE_REGTEST_PAY=true` and `VITE_API_BASE_URL` pointing to the API.
4. Click **ZAP** and choose **PAY_REGTEST** in the modal.

### Build

```bash
pnpm build
```

Artifacts output to `dist/`.

## Testing

### E2E (Playwright)

Run the full web flow test suite:

```bash
pnpm exec playwright test tests/web-flow.spec.ts
```

## Configuration

- `VITE_API_BASE_URL`: URL of the NostrStack API (default: `http://localhost:3001`).
- `VITE_NOSTRSTACK_HOST`: Hostname for display/logic (default: `localhost`).
- `VITE_ENABLE_REGTEST_PAY`: Set to `true` to show the regtest pay action in the zap modal (requires API regtest pay enabled).

## Visuals

These screenshots are generated by the E2E test suite. (CI uploads them as artifacts; update the `docs/screenshots/` copies when they change.)

### Login Screen

![Login Screen](../../docs/screenshots/login.png)

### Global Feed

![Feed View](../../docs/screenshots/feed.png)

### Posting Interface

![Posting](../../docs/screenshots/posting.png)

### Post Result

![Post Result](../../docs/screenshots/post-result.png)

### Lightning Zap

![Zap Modal](../../docs/screenshots/zap-modal.png)

### User Profile

![Profile View](../../docs/screenshots/profile.png)
