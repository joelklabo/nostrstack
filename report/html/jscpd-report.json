{
  "statistics": {
    "detectionDate": "2025-12-16T01:49:19.891Z",
    "formats": {
      "sql": {
        "sources": {
          "/Users/honk/code/nostrstack/apps/api/prisma/pg/migrations/20251128164619_init/migration.sql": {
            "lines": 68,
            "tokens": 598,
            "sources": 1,
            "clones": 1,
            "duplicatedLines": 68,
            "duplicatedTokens": 598,
            "percentage": 100,
            "percentageTokens": 100,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "/Users/honk/code/nostrstack/apps/api/prisma/pg-migrations/20251128_init.sql": {
            "lines": 68,
            "tokens": 598,
            "sources": 1,
            "clones": 1,
            "duplicatedLines": 68,
            "duplicatedTokens": 598,
            "percentage": 100,
            "percentageTokens": 100,
            "newDuplicatedLines": 0,
            "newClones": 0
          }
        },
        "total": {
          "lines": 136,
          "tokens": 1196,
          "sources": 2,
          "clones": 1,
          "duplicatedLines": 68,
          "duplicatedTokens": 598,
          "percentage": 50,
          "percentageTokens": 50,
          "newDuplicatedLines": 0,
          "newClones": 0
        }
      },
      "typescript": {
        "sources": {
          "/Users/honk/code/nostrstack/packages/sdk/src/generated/openapi-types.ts": {
            "lines": 130,
            "tokens": 731,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "/Users/honk/code/nostrstack/packages/embed/src/tokens/designTokens.ts": {
            "lines": 32,
            "tokens": 202,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "/Users/honk/code/nostrstack/apps/gallery/src/types/relay.ts": {
            "lines": 52,
            "tokens": 446,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "/Users/honk/code/nostrstack/apps/gallery/src/admin/schema.ts": {
            "lines": 4,
            "tokens": 49,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "/Users/honk/code/nostrstack/apps/gallery/src/admin/actions.ts": {
            "lines": 25,
            "tokens": 236,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "/Users/honk/code/nostrstack/apps/api/tests/utils/wait-for-health.ts": {
            "lines": 16,
            "tokens": 192,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "/Users/honk/code/nostrstack/apps/api/tests/utils/pay-config.ts": {
            "lines": 8,
            "tokens": 63,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "/Users/honk/code/nostrstack/apps/api/tests/utils/pay-and-settle.ts": {
            "lines": 108,
            "tokens": 1425,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "/Users/honk/code/nostrstack/apps/api/src/well-known/nostr.ts": {
            "lines": 52,
            "tokens": 623,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "/Users/honk/code/nostrstack/apps/api/src/well-known/lnurlp.ts": {
            "lines": 38,
            "tokens": 371,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "/Users/honk/code/nostrstack/apps/api/src/telemetry/tracing.ts": {
            "lines": 41,
            "tokens": 406,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "/Users/honk/code/nostrstack/apps/api/src/telemetry/routes.ts": {
            "lines": 52,
            "tokens": 504,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "/Users/honk/code/nostrstack/apps/api/src/telemetry/request-id.ts": {
            "lines": 9,
            "tokens": 125,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "/Users/honk/code/nostrstack/apps/api/src/telemetry/metrics.ts": {
            "lines": 35,
            "tokens": 382,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "/Users/honk/code/nostrstack/apps/api/src/services/regtest-fund.ts": {
            "lines": 109,
            "tokens": 1184,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "/Users/honk/code/nostrstack/apps/api/src/services/payment-reconciler.ts": {
            "lines": 72,
            "tokens": 780,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "/Users/honk/code/nostrstack/apps/api/src/services/pay-events.ts": {
            "lines": 69,
            "tokens": 645,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "/Users/honk/code/nostrstack/apps/api/src/services/log-hub.ts": {
            "lines": 33,
            "tokens": 328,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "/Users/honk/code/nostrstack/apps/api/src/routes/wallet.ts": {
            "lines": 50,
            "tokens": 708,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "/Users/honk/code/nostrstack/apps/api/src/routes/wallet-ws.ts": {
            "lines": 91,
            "tokens": 1045,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "/Users/honk/code/nostrstack/apps/api/src/routes/tips.ts": {
            "lines": 68,
            "tokens": 687,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "/Users/honk/code/nostrstack/apps/api/src/routes/tenants.ts": {
            "lines": 29,
            "tokens": 267,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "/Users/honk/code/nostrstack/apps/api/src/routes/telemetry-ws.ts": {
            "lines": 189,
            "tokens": 2263,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "/Users/honk/code/nostrstack/apps/api/src/routes/regtest-pay.ts": {
            "lines": 81,
            "tokens": 955,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "/Users/honk/code/nostrstack/apps/api/src/routes/regtest-fund.ts": {
            "lines": 17,
            "tokens": 215,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "/Users/honk/code/nostrstack/apps/api/src/routes/pay.ts": {
            "lines": 156,
            "tokens": 1674,
            "sources": 1,
            "clones": 3,
            "duplicatedLines": 36,
            "duplicatedTokens": 315,
            "percentage": 23.08,
            "percentageTokens": 18.82,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "/Users/honk/code/nostrstack/apps/api/src/routes/pay-webhook.ts": {
            "lines": 56,
            "tokens": 695,
            "sources": 1,
            "clones": 1,
            "duplicatedLines": 13,
            "duplicatedTokens": 114,
            "percentage": 23.21,
            "percentageTokens": 16.4,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "/Users/honk/code/nostrstack/apps/api/src/routes/log-stream.ts": {
            "lines": 29,
            "tokens": 349,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "/Users/honk/code/nostrstack/apps/api/src/routes/lnurlp-provider.test.ts": {
            "lines": 49,
            "tokens": 514,
            "sources": 1,
            "clones": 5,
            "duplicatedLines": 60,
            "duplicatedTokens": 638,
            "percentage": 122.45,
            "percentageTokens": 124.12,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "/Users/honk/code/nostrstack/apps/api/src/routes/lnurlp-callback.ts": {
            "lines": 281,
            "tokens": 3117,
            "sources": 1,
            "clones": 2,
            "duplicatedLines": 23,
            "duplicatedTokens": 201,
            "percentage": 8.19,
            "percentageTokens": 6.45,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "/Users/honk/code/nostrstack/apps/api/src/routes/lnurlp-callback.test.ts": {
            "lines": 63,
            "tokens": 706,
            "sources": 1,
            "clones": 2,
            "duplicatedLines": 26,
            "duplicatedTokens": 280,
            "percentage": 41.27,
            "percentageTokens": 39.66,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "/Users/honk/code/nostrstack/apps/api/src/routes/index.ts": {
            "lines": 42,
            "tokens": 404,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "/Users/honk/code/nostrstack/apps/api/src/routes/embed-config.ts": {
            "lines": 61,
            "tokens": 559,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "/Users/honk/code/nostrstack/apps/api/src/routes/embed-config.test.ts": {
            "lines": 68,
            "tokens": 782,
            "sources": 1,
            "clones": 1,
            "duplicatedLines": 15,
            "duplicatedTokens": 156,
            "percentage": 22.06,
            "percentageTokens": 19.95,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "/Users/honk/code/nostrstack/apps/api/src/routes/admin-users.ts": {
            "lines": 49,
            "tokens": 523,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "/Users/honk/code/nostrstack/apps/api/src/routes/admin-tenants.ts": {
            "lines": 28,
            "tokens": 292,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "/Users/honk/code/nostrstack/apps/api/src/providers/opennode.ts": {
            "lines": 98,
            "tokens": 973,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "/Users/honk/code/nostrstack/apps/api/src/providers/opennode-signature.ts": {
            "lines": 7,
            "tokens": 125,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "/Users/honk/code/nostrstack/apps/api/src/providers/mock.ts": {
            "lines": 10,
            "tokens": 168,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "/Users/honk/code/nostrstack/apps/api/src/providers/lnbits.ts": {
            "lines": 55,
            "tokens": 760,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "/Users/honk/code/nostrstack/apps/api/src/providers/index.ts": {
            "lines": 26,
            "tokens": 251,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "/Users/honk/code/nostrstack/apps/api/src/plugins/prisma.ts": {
            "lines": 15,
            "tokens": 131,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "/Users/honk/code/nostrstack/apps/api/src/plugins/admin-guard.ts": {
            "lines": 29,
            "tokens": 304,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "/Users/honk/code/nostrstack/apps/api/src/nostr/relaylist.test.ts": {
            "lines": 67,
            "tokens": 691,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "/Users/honk/code/nostrstack/apps/api/src/nostr/nostr.test.ts": {
            "lines": 92,
            "tokens": 1121,
            "sources": 1,
            "clones": 2,
            "duplicatedLines": 19,
            "duplicatedTokens": 202,
            "percentage": 20.65,
            "percentageTokens": 18.02,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "/Users/honk/code/nostrstack/apps/api/src/nostr/nostr-client.ts": {
            "lines": 61,
            "tokens": 589,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "/Users/honk/code/nostrstack/apps/api/src/hooks/raw-body.ts": {
            "lines": 37,
            "tokens": 360,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "/Users/honk/code/nostrstack/packages/sdk/src/index.ts": {
            "lines": 93,
            "tokens": 1057,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "/Users/honk/code/nostrstack/packages/sdk/src/index.test.ts": {
            "lines": 32,
            "tokens": 398,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "/Users/honk/code/nostrstack/packages/sdk/scripts/generate.ts": {
            "lines": 18,
            "tokens": 223,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "/Users/honk/code/nostrstack/packages/embed/src/themePresets.ts": {
            "lines": 60,
            "tokens": 864,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "/Users/honk/code/nostrstack/packages/embed/src/relayBadge.ts": {
            "lines": 30,
            "tokens": 368,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "/Users/honk/code/nostrstack/packages/embed/src/qr.ts": {
            "lines": 350,
            "tokens": 4107,
            "sources": 1,
            "clones": 2,
            "duplicatedLines": 14,
            "duplicatedTokens": 394,
            "percentage": 4,
            "percentageTokens": 9.59,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "/Users/honk/code/nostrstack/packages/embed/src/nostrUserCard.ts": {
            "lines": 53,
            "tokens": 571,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "/Users/honk/code/nostrstack/packages/embed/src/invoicePopover.ts": {
            "lines": 118,
            "tokens": 1162,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "/Users/honk/code/nostrstack/packages/embed/src/index.test.ts": {
            "lines": 197,
            "tokens": 2139,
            "sources": 1,
            "clones": 6,
            "duplicatedLines": 66,
            "duplicatedTokens": 834,
            "percentage": 33.5,
            "percentageTokens": 38.99,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "/Users/honk/code/nostrstack/packages/embed/src/copyButton.ts": {
            "lines": 156,
            "tokens": 1475,
            "sources": 1,
            "clones": 2,
            "duplicatedLines": 18,
            "duplicatedTokens": 204,
            "percentage": 11.54,
            "percentageTokens": 13.83,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "/Users/honk/code/nostrstack/packages/blog-kit/src/utils.ts": {
            "lines": 18,
            "tokens": 243,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "/Users/honk/code/nostrstack/packages/blog-kit/src/index.ts": {
            "lines": 7,
            "tokens": 148,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "/Users/honk/code/nostrstack/apps/gallery/tests/helpers.ts": {
            "lines": 43,
            "tokens": 534,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "/Users/honk/code/nostrstack/apps/gallery/tests/demo-regtest.spec.ts": {
            "lines": 65,
            "tokens": 733,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "/Users/honk/code/nostrstack/apps/gallery/tests/demo-flows.spec.ts": {
            "lines": 115,
            "tokens": 1530,
            "sources": 1,
            "clones": 1,
            "duplicatedLines": 10,
            "duplicatedTokens": 217,
            "percentage": 8.7,
            "percentageTokens": 14.18,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "/Users/honk/code/nostrstack/apps/gallery/tests/comment-relay.spec.ts": {
            "lines": 21,
            "tokens": 237,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "/Users/honk/code/nostrstack/apps/gallery/src/useNow.ts": {
            "lines": 44,
            "tokens": 359,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "/Users/honk/code/nostrstack/apps/gallery/src/useCopyAction.ts": {
            "lines": 71,
            "tokens": 757,
            "sources": 1,
            "clones": 2,
            "duplicatedLines": 18,
            "duplicatedTokens": 204,
            "percentage": 25.35,
            "percentageTokens": 26.95,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "/Users/honk/code/nostrstack/apps/gallery/src/tokens.ts": {
            "lines": 15,
            "tokens": 100,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "/Users/honk/code/nostrstack/apps/gallery/src/clipboard.ts": {
            "lines": 35,
            "tokens": 370,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "/Users/honk/code/nostrstack/apps/gallery/scripts/qa-regtest-demo.ts": {
            "lines": 397,
            "tokens": 5813,
            "sources": 1,
            "clones": 5,
            "duplicatedLines": 30,
            "duplicatedTokens": 621,
            "percentage": 7.56,
            "percentageTokens": 10.68,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "/Users/honk/code/nostrstack/apps/api/tests/pay-to-act.spec.ts": {
            "lines": 207,
            "tokens": 2181,
            "sources": 1,
            "clones": 4,
            "duplicatedLines": 61,
            "duplicatedTokens": 819,
            "percentage": 29.47,
            "percentageTokens": 37.55,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "/Users/honk/code/nostrstack/apps/api/tests/nostr-auth.spec.ts": {
            "lines": 60,
            "tokens": 712,
            "sources": 1,
            "clones": 2,
            "duplicatedLines": 36,
            "duplicatedTokens": 485,
            "percentage": 60,
            "percentageTokens": 68.12,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "/Users/honk/code/nostrstack/apps/api/tests/lnurlp.spec.ts": {
            "lines": 67,
            "tokens": 819,
            "sources": 1,
            "clones": 2,
            "duplicatedLines": 25,
            "duplicatedTokens": 334,
            "percentage": 37.31,
            "percentageTokens": 40.78,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "/Users/honk/code/nostrstack/apps/api/src/tenant-resolver.ts": {
            "lines": 20,
            "tokens": 387,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "/Users/honk/code/nostrstack/apps/api/src/setup-routes.ts": {
            "lines": 42,
            "tokens": 326,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "/Users/honk/code/nostrstack/apps/api/src/server.ts": {
            "lines": 222,
            "tokens": 2604,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "/Users/honk/code/nostrstack/apps/api/src/server.test.ts": {
            "lines": 44,
            "tokens": 476,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "/Users/honk/code/nostrstack/apps/api/src/env.ts": {
            "lines": 58,
            "tokens": 758,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "/Users/honk/code/nostrstack/apps/api/scripts/seed.ts": {
            "lines": 36,
            "tokens": 387,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "/Users/honk/code/nostrstack/apps/api/scripts/regtest-demo-smoke.ts": {
            "lines": 132,
            "tokens": 1463,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "/Users/honk/code/nostrstack/apps/api/scripts/openapi-schema.ts": {
            "lines": 44,
            "tokens": 453,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "/Users/honk/code/nostrstack/apps/api/scripts/mutinynet-smoke.ts": {
            "lines": 45,
            "tokens": 569,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "/Users/honk/code/nostrstack/apps/api/scripts/mutinynet-demo-smoke.ts": {
            "lines": 44,
            "tokens": 497,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "/Users/honk/code/nostrstack/apps/api/scripts/e2e-server.ts": {
            "lines": 15,
            "tokens": 174,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "/Users/honk/code/nostrstack/apps/api/prisma/seed-dev.ts": {
            "lines": 33,
            "tokens": 300,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "/Users/honk/code/nostrstack/packages/embed/vitest.config.ts": {
            "lines": 11,
            "tokens": 73,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "/Users/honk/code/nostrstack/packages/blog-kit/vitest.config.ts": {
            "lines": 8,
            "tokens": 56,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "/Users/honk/code/nostrstack/apps/gallery/vitest.config.ts": {
            "lines": 16,
            "tokens": 129,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "/Users/honk/code/nostrstack/apps/gallery/vite.config.ts": {
            "lines": 99,
            "tokens": 832,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "/Users/honk/code/nostrstack/apps/gallery/playwright.config.ts": {
            "lines": 37,
            "tokens": 298,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "/Users/honk/code/nostrstack/apps/api/vitest.config.ts": {
            "lines": 20,
            "tokens": 140,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "/Users/honk/code/nostrstack/apps/api/playwright.config.ts": {
            "lines": 14,
            "tokens": 94,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          }
        },
        "total": {
          "lines": 6001,
          "tokens": 66836,
          "sources": 90,
          "clones": 21,
          "duplicatedLines": 235,
          "duplicatedTokens": 3009,
          "percentage": 3.92,
          "percentageTokens": 4.5,
          "newDuplicatedLines": 0,
          "newClones": 0
        }
      },
      "javascript": {
        "sources": {
          "/Users/honk/code/nostrstack/apps/gallery/src/ui/JsonView.tsx": {
            "lines": 17,
            "tokens": 203,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "/Users/honk/code/nostrstack/apps/gallery/src/ui/Callout.tsx": {
            "lines": 1,
            "tokens": 35,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "/Users/honk/code/nostrstack/apps/gallery/src/ui/Badge.tsx": {
            "lines": 1,
            "tokens": 35,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "/Users/honk/code/nostrstack/apps/gallery/src/comments/CommentsPanel.tsx": {
            "lines": 255,
            "tokens": 1882,
            "sources": 1,
            "clones": 1,
            "duplicatedLines": 17,
            "duplicatedTokens": 173,
            "percentage": 6.67,
            "percentageTokens": 9.19,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "/Users/honk/code/nostrstack/apps/gallery/src/admin/SubmitButton.tsx": {
            "lines": 0,
            "tokens": 3,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "/Users/honk/code/nostrstack/apps/gallery/src/admin/DashboardForm.tsx": {
            "lines": 25,
            "tokens": 266,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "/Users/honk/code/nostrstack/packages/injector/bin/nostrstack-inject.js": {
            "lines": 157,
            "tokens": 1373,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "/Users/honk/code/nostrstack/packages/blog-kit/src/tip-widget.tsx": {
            "lines": 0,
            "tokens": 9,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "/Users/honk/code/nostrstack/packages/blog-kit/src/tip-button.tsx": {
            "lines": 0,
            "tokens": 9,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "/Users/honk/code/nostrstack/packages/blog-kit/src/tip-activity-feed.tsx": {
            "lines": 0,
            "tokens": 9,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "/Users/honk/code/nostrstack/packages/blog-kit/src/share-widget.tsx": {
            "lines": 224,
            "tokens": 1884,
            "sources": 1,
            "clones": 3,
            "duplicatedLines": 72,
            "duplicatedTokens": 648,
            "percentage": 32.14,
            "percentageTokens": 34.39,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "/Users/honk/code/nostrstack/packages/blog-kit/src/share-button.tsx": {
            "lines": 13,
            "tokens": 126,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "/Users/honk/code/nostrstack/packages/blog-kit/src/index.test.tsx": {
            "lines": 65,
            "tokens": 775,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "/Users/honk/code/nostrstack/packages/blog-kit/src/context.tsx": {
            "lines": 1,
            "tokens": 26,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "/Users/honk/code/nostrstack/packages/blog-kit/src/comments.tsx": {
            "lines": 0,
            "tokens": 9,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "/Users/honk/code/nostrstack/apps/gallery/src/toast.tsx": {
            "lines": 21,
            "tokens": 166,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "/Users/honk/code/nostrstack/apps/gallery/src/WalletPanel.tsx": {
            "lines": 18,
            "tokens": 255,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "/Users/honk/code/nostrstack/apps/gallery/src/WalletBalance.tsx": {
            "lines": 230,
            "tokens": 2945,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "/Users/honk/code/nostrstack/apps/gallery/src/TelemetryCard.tsx": {
            "lines": 185,
            "tokens": 1763,
            "sources": 1,
            "clones": 2,
            "duplicatedLines": 52,
            "duplicatedTokens": 404,
            "percentage": 28.11,
            "percentageTokens": 22.92,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "/Users/honk/code/nostrstack/apps/gallery/src/ShareWidget.tsx": {
            "lines": 207,
            "tokens": 1815,
            "sources": 1,
            "clones": 3,
            "duplicatedLines": 72,
            "duplicatedTokens": 648,
            "percentage": 34.78,
            "percentageTokens": 35.7,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "/Users/honk/code/nostrstack/apps/gallery/src/RelayRibbon.tsx": {
            "lines": 41,
            "tokens": 262,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "/Users/honk/code/nostrstack/apps/gallery/src/RelayCard.tsx": {
            "lines": 200,
            "tokens": 2085,
            "sources": 1,
            "clones": 1,
            "duplicatedLines": 17,
            "duplicatedTokens": 173,
            "percentage": 8.5,
            "percentageTokens": 8.3,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "/Users/honk/code/nostrstack/apps/gallery/src/QrLabCard.tsx": {
            "lines": 251,
            "tokens": 2487,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "/Users/honk/code/nostrstack/apps/gallery/src/PayToUnlockCard.tsx": {
            "lines": 128,
            "tokens": 1122,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "/Users/honk/code/nostrstack/apps/gallery/src/NpubBar.tsx": {
            "lines": 31,
            "tokens": 268,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "/Users/honk/code/nostrstack/apps/gallery/src/NostrProfileCard.tsx": {
            "lines": 311,
            "tokens": 3756,
            "sources": 1,
            "clones": 2,
            "duplicatedLines": 74,
            "duplicatedTokens": 1014,
            "percentage": 23.79,
            "percentageTokens": 27,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "/Users/honk/code/nostrstack/apps/gallery/src/Nip07Status.tsx": {
            "lines": 139,
            "tokens": 1105,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "/Users/honk/code/nostrstack/apps/gallery/src/LogViewer.tsx": {
            "lines": 217,
            "tokens": 2026,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "/Users/honk/code/nostrstack/apps/gallery/src/KeyToggle.tsx": {
            "lines": 17,
            "tokens": 202,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "/Users/honk/code/nostrstack/apps/gallery/src/KeyChip.tsx": {
            "lines": 44,
            "tokens": 375,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "/Users/honk/code/nostrstack/apps/gallery/src/InvoicePopover.tsx": {
            "lines": 155,
            "tokens": 1472,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "/Users/honk/code/nostrstack/apps/gallery/src/FaucetButton.tsx": {
            "lines": 12,
            "tokens": 210,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "/Users/honk/code/nostrstack/apps/gallery/src/CopyButton.tsx": {
            "lines": 15,
            "tokens": 123,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "/Users/honk/code/nostrstack/apps/gallery/src/BrandedQr.tsx": {
            "lines": 0,
            "tokens": 15,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "/Users/honk/code/nostrstack/apps/api/scripts/lnbits-prod-smoke.js": {
            "lines": 35,
            "tokens": 421,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "/Users/honk/code/nostrstack/packages/embed/README.md": {
            "lines": 0,
            "tokens": 0,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "/Users/honk/code/nostrstack/packages/config/prettier.cjs": {
            "lines": 5,
            "tokens": 36,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "/Users/honk/code/nostrstack/packages/config/eslint.cjs": {
            "lines": 24,
            "tokens": 176,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "/Users/honk/code/nostrstack/.eslintrc.cjs": {
            "lines": 4,
            "tokens": 44,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          }
        },
        "total": {
          "lines": 3049,
          "tokens": 29773,
          "sources": 39,
          "clones": 6,
          "duplicatedLines": 152,
          "duplicatedTokens": 1530,
          "percentage": 4.99,
          "percentageTokens": 5.14,
          "newDuplicatedLines": 0,
          "newClones": 0
        }
      },
      "tsx": {
        "sources": {
          "/Users/honk/code/nostrstack/apps/gallery/src/ui/JsonView.tsx": {
            "lines": 92,
            "tokens": 1019,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "/Users/honk/code/nostrstack/apps/gallery/src/ui/Callout.tsx": {
            "lines": 30,
            "tokens": 295,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "/Users/honk/code/nostrstack/apps/gallery/src/ui/Badge.tsx": {
            "lines": 26,
            "tokens": 245,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "/Users/honk/code/nostrstack/apps/gallery/src/comments/CommentsPanel.tsx": {
            "lines": 344,
            "tokens": 2893,
            "sources": 1,
            "clones": 1,
            "duplicatedLines": 40,
            "duplicatedTokens": 291,
            "percentage": 11.63,
            "percentageTokens": 10.06,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "/Users/honk/code/nostrstack/apps/gallery/src/admin/SubmitButton.tsx": {
            "lines": 14,
            "tokens": 92,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "/Users/honk/code/nostrstack/apps/gallery/src/admin/DashboardForm.tsx": {
            "lines": 50,
            "tokens": 509,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "/Users/honk/code/nostrstack/packages/blog-kit/src/tip-widget.tsx": {
            "lines": 95,
            "tokens": 774,
            "sources": 1,
            "clones": 1,
            "duplicatedLines": 10,
            "duplicatedTokens": 122,
            "percentage": 10.53,
            "percentageTokens": 15.76,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "/Users/honk/code/nostrstack/packages/blog-kit/src/tip-button.tsx": {
            "lines": 45,
            "tokens": 441,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "/Users/honk/code/nostrstack/packages/blog-kit/src/tip-activity-feed.tsx": {
            "lines": 52,
            "tokens": 494,
            "sources": 1,
            "clones": 1,
            "duplicatedLines": 10,
            "duplicatedTokens": 122,
            "percentage": 19.23,
            "percentageTokens": 24.7,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "/Users/honk/code/nostrstack/packages/blog-kit/src/share-widget.tsx": {
            "lines": 613,
            "tokens": 5932,
            "sources": 1,
            "clones": 24,
            "duplicatedLines": 394,
            "duplicatedTokens": 4208,
            "percentage": 64.27,
            "percentageTokens": 70.94,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "/Users/honk/code/nostrstack/packages/blog-kit/src/share-button.tsx": {
            "lines": 139,
            "tokens": 1303,
            "sources": 1,
            "clones": 3,
            "duplicatedLines": 43,
            "duplicatedTokens": 344,
            "percentage": 30.94,
            "percentageTokens": 26.4,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "/Users/honk/code/nostrstack/packages/blog-kit/src/index.test.tsx": {
            "lines": 135,
            "tokens": 1573,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "/Users/honk/code/nostrstack/packages/blog-kit/src/context.tsx": {
            "lines": 81,
            "tokens": 710,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "/Users/honk/code/nostrstack/packages/blog-kit/src/comments.tsx": {
            "lines": 40,
            "tokens": 357,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "/Users/honk/code/nostrstack/apps/gallery/src/toast.tsx": {
            "lines": 91,
            "tokens": 901,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "/Users/honk/code/nostrstack/apps/gallery/src/main.tsx": {
            "lines": 17,
            "tokens": 113,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "/Users/honk/code/nostrstack/apps/gallery/src/WalletPanel.tsx": {
            "lines": 48,
            "tokens": 541,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "/Users/honk/code/nostrstack/apps/gallery/src/WalletBalance.tsx": {
            "lines": 442,
            "tokens": 5581,
            "sources": 1,
            "clones": 1,
            "duplicatedLines": 14,
            "duplicatedTokens": 122,
            "percentage": 3.17,
            "percentageTokens": 2.19,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "/Users/honk/code/nostrstack/apps/gallery/src/TelemetryCard.tsx": {
            "lines": 505,
            "tokens": 4976,
            "sources": 1,
            "clones": 1,
            "duplicatedLines": 5,
            "duplicatedTokens": 82,
            "percentage": 0.99,
            "percentageTokens": 1.65,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "/Users/honk/code/nostrstack/apps/gallery/src/ShareWidget.tsx": {
            "lines": 576,
            "tokens": 5632,
            "sources": 1,
            "clones": 21,
            "duplicatedLines": 351,
            "duplicatedTokens": 3864,
            "percentage": 60.94,
            "percentageTokens": 68.61,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "/Users/honk/code/nostrstack/apps/gallery/src/RelayRibbon.tsx": {
            "lines": 95,
            "tokens": 760,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "/Users/honk/code/nostrstack/apps/gallery/src/RelayCard.tsx": {
            "lines": 488,
            "tokens": 5407,
            "sources": 1,
            "clones": 2,
            "duplicatedLines": 28,
            "duplicatedTokens": 156,
            "percentage": 5.74,
            "percentageTokens": 2.89,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "/Users/honk/code/nostrstack/apps/gallery/src/RelayCard.stories.tsx": {
            "lines": 54,
            "tokens": 429,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "/Users/honk/code/nostrstack/apps/gallery/src/QrLabCard.tsx": {
            "lines": 371,
            "tokens": 3923,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "/Users/honk/code/nostrstack/apps/gallery/src/PayToUnlockCard.tsx": {
            "lines": 424,
            "tokens": 4334,
            "sources": 1,
            "clones": 2,
            "duplicatedLines": 22,
            "duplicatedTokens": 250,
            "percentage": 5.19,
            "percentageTokens": 5.77,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "/Users/honk/code/nostrstack/apps/gallery/src/NpubBar.tsx": {
            "lines": 207,
            "tokens": 1996,
            "sources": 1,
            "clones": 1,
            "duplicatedLines": 6,
            "duplicatedTokens": 89,
            "percentage": 2.9,
            "percentageTokens": 4.46,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "/Users/honk/code/nostrstack/apps/gallery/src/NostrProfileCard.tsx": {
            "lines": 387,
            "tokens": 4766,
            "sources": 1,
            "clones": 1,
            "duplicatedLines": 40,
            "duplicatedTokens": 291,
            "percentage": 10.34,
            "percentageTokens": 6.11,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "/Users/honk/code/nostrstack/apps/gallery/src/Nip07Status.tsx": {
            "lines": 303,
            "tokens": 2892,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "/Users/honk/code/nostrstack/apps/gallery/src/LogViewer.tsx": {
            "lines": 488,
            "tokens": 6197,
            "sources": 1,
            "clones": 3,
            "duplicatedLines": 15,
            "duplicatedTokens": 242,
            "percentage": 3.07,
            "percentageTokens": 3.91,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "/Users/honk/code/nostrstack/apps/gallery/src/KeyToggle.tsx": {
            "lines": 97,
            "tokens": 899,
            "sources": 1,
            "clones": 1,
            "duplicatedLines": 6,
            "duplicatedTokens": 89,
            "percentage": 6.19,
            "percentageTokens": 9.9,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "/Users/honk/code/nostrstack/apps/gallery/src/KeyChip.tsx": {
            "lines": 97,
            "tokens": 1008,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "/Users/honk/code/nostrstack/apps/gallery/src/InvoicePopover.tsx": {
            "lines": 347,
            "tokens": 3128,
            "sources": 1,
            "clones": 1,
            "duplicatedLines": 8,
            "duplicatedTokens": 128,
            "percentage": 2.31,
            "percentageTokens": 4.09,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "/Users/honk/code/nostrstack/apps/gallery/src/FaucetButton.tsx": {
            "lines": 56,
            "tokens": 772,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "/Users/honk/code/nostrstack/apps/gallery/src/CopyButton.tsx": {
            "lines": 122,
            "tokens": 868,
            "sources": 1,
            "clones": 2,
            "duplicatedLines": 28,
            "duplicatedTokens": 166,
            "percentage": 22.95,
            "percentageTokens": 19.12,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "/Users/honk/code/nostrstack/apps/gallery/src/BrandedQr.tsx": {
            "lines": 76,
            "tokens": 811,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "/Users/honk/code/nostrstack/apps/gallery/src/App.test.tsx": {
            "lines": 25,
            "tokens": 200,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          }
        },
        "total": {
          "lines": 7072,
          "tokens": 72771,
          "sources": 36,
          "clones": 33,
          "duplicatedLines": 510,
          "duplicatedTokens": 5283,
          "percentage": 7.21,
          "percentageTokens": 7.26,
          "newDuplicatedLines": 0,
          "newClones": 0
        }
      },
      "markup": {
        "sources": {
          "/Users/honk/code/nostrstack/packages/embed/assets/nostr.svg": {
            "lines": 6,
            "tokens": 169,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "/Users/honk/code/nostrstack/packages/embed/assets/lightning.svg": {
            "lines": 3,
            "tokens": 70,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "/Users/honk/code/nostrstack/packages/embed/assets/bitcoin.svg": {
            "lines": 8,
            "tokens": 197,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "/Users/honk/code/nostrstack/apps/gallery/index.html": {
            "lines": 18,
            "tokens": 208,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          }
        },
        "total": {
          "lines": 35,
          "tokens": 644,
          "sources": 4,
          "clones": 0,
          "duplicatedLines": 0,
          "duplicatedTokens": 0,
          "percentage": 0,
          "percentageTokens": 0,
          "newDuplicatedLines": 0,
          "newClones": 0
        }
      },
      "json": {
        "sources": {
          "/Users/honk/code/nostrstack/deploy/azure/observability/workbook-lnbits.json": {
            "lines": 72,
            "tokens": 403,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "/Users/honk/code/nostrstack/packages/tsconfig/tsconfig.base.json": {
            "lines": 5,
            "tokens": 24,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "/Users/honk/code/nostrstack/packages/tsconfig/package.json": {
            "lines": 7,
            "tokens": 38,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "/Users/honk/code/nostrstack/packages/sdk/tsconfig.json": {
            "lines": 8,
            "tokens": 52,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "/Users/honk/code/nostrstack/packages/sdk/package.json": {
            "lines": 25,
            "tokens": 154,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "/Users/honk/code/nostrstack/packages/injector/package.json": {
            "lines": 9,
            "tokens": 52,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "/Users/honk/code/nostrstack/packages/embed/tsconfig.json": {
            "lines": 9,
            "tokens": 59,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "/Users/honk/code/nostrstack/packages/embed/package.json": {
            "lines": 27,
            "tokens": 168,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "/Users/honk/code/nostrstack/packages/config/package.json": {
            "lines": 16,
            "tokens": 96,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "/Users/honk/code/nostrstack/packages/blog-kit/tsconfig.json": {
            "lines": 9,
            "tokens": 59,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "/Users/honk/code/nostrstack/packages/blog-kit/package.json": {
            "lines": 34,
            "tokens": 214,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "/Users/honk/code/nostrstack/apps/gallery/tsconfig.json": {
            "lines": 10,
            "tokens": 77,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "/Users/honk/code/nostrstack/apps/gallery/package.json": {
            "lines": 35,
            "tokens": 224,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "/Users/honk/code/nostrstack/apps/api/tsconfig.json": {
            "lines": 11,
            "tokens": 70,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "/Users/honk/code/nostrstack/apps/api/package.json": {
            "lines": 67,
            "tokens": 448,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "/Users/honk/code/nostrstack/apps/api/openapi.json": {
            "lines": 252,
            "tokens": 1252,
            "sources": 1,
            "clones": 2,
            "duplicatedLines": 64,
            "duplicatedTokens": 314,
            "percentage": 25.4,
            "percentageTokens": 25.08,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "/Users/honk/code/nostrstack/.beads/metadata.json": {
            "lines": 4,
            "tokens": 22,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "/Users/honk/code/nostrstack/tsconfig.base.json": {
            "lines": 14,
            "tokens": 94,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "/Users/honk/code/nostrstack/package.json": {
            "lines": 55,
            "tokens": 351,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "/Users/honk/code/nostrstack/mcp.config.json": {
            "lines": 11,
            "tokens": 51,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "/Users/honk/code/nostrstack/knip.json": {
            "lines": 39,
            "tokens": 200,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "/Users/honk/code/nostrstack/.jscpd.json": {
            "lines": 14,
            "tokens": 71,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          }
        },
        "total": {
          "lines": 733,
          "tokens": 4179,
          "sources": 22,
          "clones": 1,
          "duplicatedLines": 32,
          "duplicatedTokens": 157,
          "percentage": 4.37,
          "percentageTokens": 3.76,
          "newDuplicatedLines": 0,
          "newClones": 0
        }
      },
      "bash": {
        "sources": {
          "/Users/honk/code/nostrstack/deploy/azure/observability/create-alerts.sh": {
            "lines": 61,
            "tokens": 319,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "/Users/honk/code/nostrstack/apps/api/scripts/prisma-generate.sh": {
            "lines": 3,
            "tokens": 18,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "/Users/honk/code/nostrstack/apps/api/scripts/prisma-generate-pg.sh": {
            "lines": 4,
            "tokens": 22,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "/Users/honk/code/nostrstack/apps/api/scripts/pg-migrate.sh": {
            "lines": 5,
            "tokens": 31,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "/Users/honk/code/nostrstack/apps/api/scripts/local-lnbits-start.sh": {
            "lines": 10,
            "tokens": 71,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "/Users/honk/code/nostrstack/apps/api/scripts/dev-seed.sh": {
            "lines": 9,
            "tokens": 69,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "/Users/honk/code/nostrstack/deploy/lnbits/entrypoint.sh": {
            "lines": 60,
            "tokens": 504,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "/Users/honk/code/nostrstack/scripts/regtest-status.sh": {
            "lines": 39,
            "tokens": 279,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "/Users/honk/code/nostrstack/scripts/regtest-lndbits.sh": {
            "lines": 326,
            "tokens": 2670,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "/Users/honk/code/nostrstack/scripts/mcp-devtools-server.sh": {
            "lines": 20,
            "tokens": 133,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "/Users/honk/code/nostrstack/scripts/mcp-chrome.sh": {
            "lines": 12,
            "tokens": 82,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "/Users/honk/code/nostrstack/scripts/lnbits-status.sh": {
            "lines": 19,
            "tokens": 134,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "/Users/honk/code/nostrstack/scripts/lnbits-smoke.sh": {
            "lines": 40,
            "tokens": 250,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "/Users/honk/code/nostrstack/scripts/lnbits-cutover-mainnet.sh": {
            "lines": 110,
            "tokens": 800,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "/Users/honk/code/nostrstack/scripts/entr-gallery.sh": {
            "lines": 11,
            "tokens": 47,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "/Users/honk/code/nostrstack/scripts/entr-api.sh": {
            "lines": 13,
            "tokens": 51,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "/Users/honk/code/nostrstack/scripts/dev-logs.sh": {
            "lines": 97,
            "tokens": 784,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "/Users/honk/code/nostrstack/scripts/dev-demo.sh": {
            "lines": 92,
            "tokens": 272,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "/Users/honk/code/nostrstack/scripts/demo-regtest.sh": {
            "lines": 77,
            "tokens": 305,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "/Users/honk/code/nostrstack/scripts/demo-mutinynet.sh": {
            "lines": 58,
            "tokens": 198,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "/Users/honk/code/nostrstack/scripts/demo-mainnet.sh": {
            "lines": 52,
            "tokens": 205,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          }
        },
        "total": {
          "lines": 1118,
          "tokens": 7244,
          "sources": 21,
          "clones": 0,
          "duplicatedLines": 0,
          "duplicatedTokens": 0,
          "percentage": 0,
          "percentageTokens": 0,
          "newDuplicatedLines": 0,
          "newClones": 0
        }
      },
      "css": {
        "sources": {
          "/Users/honk/code/nostrstack/apps/gallery/src/TelemetryCard.tsx": {
            "lines": 2,
            "tokens": 49,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "/Users/honk/code/nostrstack/apps/gallery/src/LogViewer.tsx": {
            "lines": 41,
            "tokens": 1325,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "/Users/honk/code/nostrstack/apps/gallery/src/InvoicePopover.tsx": {
            "lines": 0,
            "tokens": 2,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          }
        },
        "total": {
          "lines": 43,
          "tokens": 1376,
          "sources": 3,
          "clones": 0,
          "duplicatedLines": 0,
          "duplicatedTokens": 0,
          "percentage": 0,
          "percentageTokens": 0,
          "newDuplicatedLines": 0,
          "newClones": 0
        }
      },
      "markdown": {
        "sources": {
          "/Users/honk/code/nostrstack/apps/api/tests/lnbits.e2e.md": {
            "lines": 13,
            "tokens": 179,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "/Users/honk/code/nostrstack/packages/sdk/README.md": {
            "lines": 35,
            "tokens": 219,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "/Users/honk/code/nostrstack/packages/embed/README.md": {
            "lines": 99,
            "tokens": 936,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "/Users/honk/code/nostrstack/packages/blog-kit/README.md": {
            "lines": 62,
            "tokens": 329,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "/Users/honk/code/nostrstack/docs/mcp-scripts/invoice-flow.md": {
            "lines": 29,
            "tokens": 273,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "/Users/honk/code/nostrstack/docs/mcp-scripts/evidence.md": {
            "lines": 9,
            "tokens": 134,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "/Users/honk/code/nostrstack/docs/mcp-scripts/comment-flow.md": {
            "lines": 18,
            "tokens": 213,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "/Users/honk/code/nostrstack/deploy/azure/README.md": {
            "lines": 43,
            "tokens": 607,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "/Users/honk/code/nostrstack/apps/gallery/README.md": {
            "lines": 10,
            "tokens": 161,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "/Users/honk/code/nostrstack/docs/testing.md": {
            "lines": 16,
            "tokens": 209,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "/Users/honk/code/nostrstack/docs/staging-lightning.md": {
            "lines": 43,
            "tokens": 439,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "/Users/honk/code/nostrstack/docs/simplify-no-backcompat.md": {
            "lines": 8,
            "tokens": 160,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "/Users/honk/code/nostrstack/docs/relay-card-redesign.md": {
            "lines": 60,
            "tokens": 1062,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "/Users/honk/code/nostrstack/docs/qr.md": {
            "lines": 48,
            "tokens": 758,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "/Users/honk/code/nostrstack/docs/prod-lightning.md": {
            "lines": 33,
            "tokens": 603,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "/Users/honk/code/nostrstack/docs/nostrstack-klabo.md": {
            "lines": 80,
            "tokens": 826,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "/Users/honk/code/nostrstack/docs/nip07-setup.md": {
            "lines": 17,
            "tokens": 262,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "/Users/honk/code/nostrstack/docs/mcp-setup.md": {
            "lines": 51,
            "tokens": 473,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "/Users/honk/code/nostrstack/docs/local-demo.md": {
            "lines": 116,
            "tokens": 920,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "/Users/honk/code/nostrstack/docs/lightning-observability.md": {
            "lines": 73,
            "tokens": 864,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "/Users/honk/code/nostrstack/docs/devtools-mcp-research.md": {
            "lines": 24,
            "tokens": 354,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "/Users/honk/code/nostrstack/docs/dev-logs-and-ui-checks.md": {
            "lines": 14,
            "tokens": 411,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "/Users/honk/code/nostrstack/docs/design-system.md": {
            "lines": 69,
            "tokens": 631,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "/Users/honk/code/nostrstack/docs/demo-modes.md": {
            "lines": 21,
            "tokens": 269,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "/Users/honk/code/nostrstack/docs/ci-real-relay.md": {
            "lines": 27,
            "tokens": 354,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "/Users/honk/code/nostrstack/docs/branded-qr.md": {
            "lines": 47,
            "tokens": 735,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "/Users/honk/code/nostrstack/docs/architecture.md": {
            "lines": 29,
            "tokens": 450,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "/Users/honk/code/nostrstack/deploy/azure-app-service.md": {
            "lines": 8,
            "tokens": 154,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "/Users/honk/code/nostrstack/.beads/README.md": {
            "lines": 78,
            "tokens": 543,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "/Users/honk/code/nostrstack/verification-plan.md": {
            "lines": 18,
            "tokens": 255,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "/Users/honk/code/nostrstack/README.md": {
            "lines": 46,
            "tokens": 483,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "/Users/honk/code/nostrstack/CHANGELOG.md": {
            "lines": 3,
            "tokens": 103,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "/Users/honk/code/nostrstack/AGENTS.md": {
            "lines": 29,
            "tokens": 376,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          }
        },
        "total": {
          "lines": 1276,
          "tokens": 14745,
          "sources": 33,
          "clones": 0,
          "duplicatedLines": 0,
          "duplicatedTokens": 0,
          "percentage": 0,
          "percentageTokens": 0,
          "newDuplicatedLines": 0,
          "newClones": 0
        }
      },
      "yaml": {
        "sources": {
          "/Users/honk/code/nostrstack/deploy/regtest/docker-compose.yml": {
            "lines": 121,
            "tokens": 794,
            "sources": 1,
            "clones": 2,
            "duplicatedLines": 32,
            "duplicatedTokens": 232,
            "percentage": 26.45,
            "percentageTokens": 29.22,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "/Users/honk/code/nostrstack/deploy/lnbits/docker-compose.yml": {
            "lines": 15,
            "tokens": 86,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "/Users/honk/code/nostrstack/deploy/lnbits/docker-compose.local.yml": {
            "lines": 3,
            "tokens": 14,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "/Users/honk/code/nostrstack/.github/workflows/ci.yml": {
            "lines": 119,
            "tokens": 879,
            "sources": 1,
            "clones": 2,
            "duplicatedLines": 24,
            "duplicatedTokens": 186,
            "percentage": 20.17,
            "percentageTokens": 21.16,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "/Users/honk/code/nostrstack/.github/workflows/build-ghcr-amd64.yml": {
            "lines": 30,
            "tokens": 226,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "/Users/honk/code/nostrstack/.github/workflows/azure-deploy.yml": {
            "lines": 117,
            "tokens": 764,
            "sources": 1,
            "clones": 2,
            "duplicatedLines": 59,
            "duplicatedTokens": 402,
            "percentage": 50.43,
            "percentageTokens": 52.62,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "/Users/honk/code/nostrstack/.github/workflows/azure-deploy-staging.yml": {
            "lines": 121,
            "tokens": 750,
            "sources": 1,
            "clones": 2,
            "duplicatedLines": 59,
            "duplicatedTokens": 402,
            "percentage": 48.76,
            "percentageTokens": 53.6,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "/Users/honk/code/nostrstack/.beads/config.yaml": {
            "lines": 58,
            "tokens": 106,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "/Users/honk/code/nostrstack/docker-compose.yml": {
            "lines": 22,
            "tokens": 118,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "/Users/honk/code/nostrstack/.beads.yaml": {
            "lines": 36,
            "tokens": 419,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          }
        },
        "total": {
          "lines": 642,
          "tokens": 4156,
          "sources": 10,
          "clones": 4,
          "duplicatedLines": 87,
          "duplicatedTokens": 611,
          "percentage": 13.55,
          "percentageTokens": 14.7,
          "newDuplicatedLines": 0,
          "newClones": 0
        }
      },
      "python": {
        "sources": {
          "/Users/honk/code/nostrstack/deploy/lnbits/status_public.py": {
            "lines": 17,
            "tokens": 136,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "/Users/honk/code/nostrstack/deploy/lnbits/sitecustomize.py": {
            "lines": 96,
            "tokens": 638,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "/Users/honk/code/nostrstack/deploy/lnbits/lndgrpc.py": {
            "lines": 429,
            "tokens": 3581,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "/Users/honk/code/nostrstack/deploy/lnbits/lnd_shim.py": {
            "lines": 35,
            "tokens": 235,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "/Users/honk/code/nostrstack/deploy/lnbits/db.py": {
            "lines": 735,
            "tokens": 6602,
            "sources": 1,
            "clones": 2,
            "duplicatedLines": 22,
            "duplicatedTokens": 238,
            "percentage": 2.99,
            "percentageTokens": 3.6,
            "newDuplicatedLines": 0,
            "newClones": 0
          }
        },
        "total": {
          "lines": 1312,
          "tokens": 11192,
          "sources": 5,
          "clones": 1,
          "duplicatedLines": 11,
          "duplicatedTokens": 119,
          "percentage": 0.84,
          "percentageTokens": 1.06,
          "newDuplicatedLines": 0,
          "newClones": 0
        }
      }
    },
    "total": {
      "lines": 21417,
      "tokens": 214112,
      "sources": 265,
      "clones": 67,
      "duplicatedLines": 1095,
      "duplicatedTokens": 11307,
      "percentage": 5.11,
      "percentageTokens": 5.28,
      "newDuplicatedLines": 0,
      "newClones": 0
    }
  },
  "duplicates": [
    {
      "format": "typescript",
      "lines": 14,
      "fragment": "} });\n      let metadata: unknown | undefined;\n      if (payment.metadata) {\n        try {\n          metadata = JSON.parse(payment.metadata) as unknown;\n        } catch {\n          metadata = undefined;\n        }\n      }\n      const ts = Date.now();\n      app.payEventHub?.broadcast({\n        type: 'invoice-status',\n        ts,\n        providerRef: payment",
      "tokens": 0,
      "firstFile": {
        "name": "/Users/honk/code/nostrstack/apps/api/src/routes/pay-webhook.ts",
        "start": 17,
        "end": 30,
        "startLoc": {
          "line": 17,
          "column": 2,
          "position": 330
        },
        "endLoc": {
          "line": 30,
          "column": 8,
          "position": 444
        }
      },
      "secondFile": {
        "name": "/Users/honk/code/nostrstack/apps/api/src/routes/pay.ts",
        "start": 109,
        "end": 122,
        "startLoc": {
          "line": 109,
          "column": 2,
          "position": 1237
        },
        "endLoc": {
          "line": 122,
          "column": 3,
          "position": 1351
        }
      }
    },
    {
      "format": "typescript",
      "lines": 14,
      "fragment": "let metadata: unknown | undefined;\n      if (payment.metadata) {\n        try {\n          metadata = JSON.parse(payment.metadata) as unknown;\n        } catch {\n          metadata = undefined;\n        }\n      }\n      const ts = Date.now();\n      app.payEventHub?.broadcast({\n        type: 'invoice-status',\n        ts,\n        providerRef: id,\n        status: normalizedStatus",
      "tokens": 0,
      "firstFile": {
        "name": "/Users/honk/code/nostrstack/apps/api/src/routes/lnurlp-callback.ts",
        "start": 194,
        "end": 207,
        "startLoc": {
          "line": 194,
          "column": 7,
          "position": 2029
        },
        "endLoc": {
          "line": 207,
          "column": 17,
          "position": 2143
        }
      },
      "secondFile": {
        "name": "/Users/honk/code/nostrstack/apps/api/src/routes/pay.ts",
        "start": 110,
        "end": 123,
        "startLoc": {
          "line": 110,
          "column": 9,
          "position": 1244
        },
        "endLoc": {
          "line": 123,
          "column": 11,
          "position": 1358
        }
      }
    },
    {
      "format": "typescript",
      "lines": 11,
      "fragment": ")) {\n        app.payEventHub?.broadcast({\n          type: 'invoice-paid',\n          ts,\n          pr: payment.invoice,\n          providerRef: id,\n          amount: payment.amountSats,\n          action: payment.action ?? undefined,\n          itemId: payment.itemId ?? undefined,\n          metadata,\n          source: 'lnurl'",
      "tokens": 0,
      "firstFile": {
        "name": "/Users/honk/code/nostrstack/apps/api/src/routes/lnurlp-callback.ts",
        "start": 216,
        "end": 226,
        "startLoc": {
          "line": 216,
          "column": 11,
          "position": 2230
        },
        "endLoc": {
          "line": 226,
          "column": 8,
          "position": 2317
        }
      },
      "secondFile": {
        "name": "/Users/honk/code/nostrstack/apps/api/src/routes/pay.ts",
        "start": 132,
        "end": 142,
        "startLoc": {
          "line": 132,
          "column": 11,
          "position": 1440
        },
        "endLoc": {
          "line": 142,
          "column": 7,
          "position": 1527
        }
      }
    },
    {
      "format": "typescript",
      "lines": 12,
      "fragment": "import { execSync } from 'node:child_process';\nimport { resolve } from 'node:path';\n\nimport { afterAll,beforeAll, describe, expect, it } from 'vitest';\n\nimport type { buildServer as buildServerFn } from '../server.js';\n\nprocess.env.NODE_ENV = 'test';\nprocess.env.VITEST = 'true';\nprocess.env.LOG_LEVEL = 'error';\nprocess.env.OP_NODE_WEBHOOK_SECRET = '';\nprocess.env.DATABASE_URL = 'file:./tmp-lnurl.db'",
      "tokens": 0,
      "firstFile": {
        "name": "/Users/honk/code/nostrstack/apps/api/src/routes/lnurlp-callback.test.ts",
        "start": 1,
        "end": 12,
        "startLoc": {
          "line": 1,
          "column": 1,
          "position": 0
        },
        "endLoc": {
          "line": 12,
          "column": 22,
          "position": 124
        }
      },
      "secondFile": {
        "name": "/Users/honk/code/nostrstack/apps/api/src/routes/lnurlp-provider.test.ts",
        "start": 1,
        "end": 12,
        "startLoc": {
          "line": 1,
          "column": 1,
          "position": 0
        },
        "endLoc": {
          "line": 12,
          "column": 31,
          "position": 125
        }
      }
    },
    {
      "format": "typescript",
      "lines": 16,
      "fragment": ", () => {\n  beforeAll(async () => {\n    const schema = resolve(process.cwd(), 'prisma/schema.prisma');\n    execSync(`./node_modules/.bin/prisma db push --skip-generate --accept-data-loss --schema ${schema}`, {\n      stdio: 'inherit',\n      env: { ...process.env, DATABASE_URL: process.env.DATABASE_URL }\n    });\n    const { buildServer } = await import('../server.js');\n    server = await buildServer();\n  });\n\n  afterAll(async () => {\n    await server.close();\n  });\n\n  it('returns 202 for unknown payment (replay-safe)'",
      "tokens": 0,
      "firstFile": {
        "name": "/Users/honk/code/nostrstack/apps/api/src/routes/lnurlp-callback.test.ts",
        "start": 16,
        "end": 31,
        "startLoc": {
          "line": 16,
          "column": 16,
          "position": 147
        },
        "endLoc": {
          "line": 31,
          "column": 48,
          "position": 303
        }
      },
      "secondFile": {
        "name": "/Users/honk/code/nostrstack/apps/api/src/routes/lnurlp-provider.test.ts",
        "start": 17,
        "end": 32,
        "startLoc": {
          "line": 17,
          "column": 31,
          "position": 159
        },
        "endLoc": {
          "line": 32,
          "column": 58,
          "position": 315
        }
      }
    },
    {
      "format": "typescript",
      "lines": 16,
      "fragment": ", () => {\n  beforeAll(async () => {\n    const schema = resolve(process.cwd(), 'prisma/schema.prisma');\n    execSync(`./node_modules/.bin/prisma db push --skip-generate --accept-data-loss --schema ${schema}`, {\n      stdio: 'inherit',\n      env: { ...process.env, DATABASE_URL: process.env.DATABASE_URL }\n    });\n    const { buildServer } = await import('../server.js');\n    server = await buildServer();\n  });\n\n  afterAll(async () => {\n    await server.close();\n  });\n\n  it('requires tenant param'",
      "tokens": 0,
      "firstFile": {
        "name": "/Users/honk/code/nostrstack/apps/api/src/routes/embed-config.test.ts",
        "start": 20,
        "end": 35,
        "startLoc": {
          "line": 20,
          "column": 16,
          "position": 199
        },
        "endLoc": {
          "line": 35,
          "column": 24,
          "position": 355
        }
      },
      "secondFile": {
        "name": "/Users/honk/code/nostrstack/apps/api/src/routes/lnurlp-provider.test.ts",
        "start": 17,
        "end": 32,
        "startLoc": {
          "line": 17,
          "column": 31,
          "position": 159
        },
        "endLoc": {
          "line": 32,
          "column": 58,
          "position": 315
        }
      }
    },
    {
      "format": "typescript",
      "lines": 9,
      "fragment": "} from 'vitest';\n\nimport type { buildServer as buildServerFn } from '../server.js';\n\nprocess.env.NODE_ENV = 'test';\nprocess.env.VITEST = 'true';\nprocess.env.LOG_LEVEL = 'error';\nprocess.env.OP_NODE_WEBHOOK_SECRET = '';\nprocess.env.NOSTR_SECRET_KEY",
      "tokens": 0,
      "firstFile": {
        "name": "/Users/honk/code/nostrstack/apps/api/src/nostr/nostr.test.ts",
        "start": 4,
        "end": 12,
        "startLoc": {
          "line": 4,
          "column": 2,
          "position": 51
        },
        "endLoc": {
          "line": 12,
          "column": 17,
          "position": 127
        }
      },
      "secondFile": {
        "name": "/Users/honk/code/nostrstack/apps/api/src/routes/lnurlp-provider.test.ts",
        "start": 4,
        "end": 12,
        "startLoc": {
          "line": 4,
          "column": 2,
          "position": 45
        },
        "endLoc": {
          "line": 12,
          "column": 13,
          "position": 121
        }
      }
    },
    {
      "format": "typescript",
      "lines": 12,
      "fragment": ", () => {\n  beforeAll(async () => {\n    const schema = resolve(process.cwd(), 'prisma/schema.prisma');\n    execSync(`./node_modules/.bin/prisma db push --skip-generate --accept-data-loss --schema ${schema}`, {\n      stdio: 'inherit',\n      env: { ...process.env, DATABASE_URL: process.env.DATABASE_URL }\n    });\n    const { buildServer } = await import('../server.js');\n    server = await buildServer();\n  });\n\n  beforeEach",
      "tokens": 0,
      "firstFile": {
        "name": "/Users/honk/code/nostrstack/apps/api/src/nostr/nostr.test.ts",
        "start": 17,
        "end": 28,
        "startLoc": {
          "line": 17,
          "column": 8,
          "position": 170
        },
        "endLoc": {
          "line": 28,
          "column": 11,
          "position": 296
        }
      },
      "secondFile": {
        "name": "/Users/honk/code/nostrstack/apps/api/src/routes/lnurlp-provider.test.ts",
        "start": 17,
        "end": 28,
        "startLoc": {
          "line": 17,
          "column": 31,
          "position": 159
        },
        "endLoc": {
          "line": 28,
          "column": 9,
          "position": 285
        }
      }
    },
    {
      "format": "sql",
      "lines": 69,
      "fragment": "-- CreateTable\nCREATE TABLE \"Tenant\" (\n    \"id\" TEXT NOT NULL,\n    \"domain\" TEXT NOT NULL,\n    \"displayName\" TEXT NOT NULL,\n    \"createdAt\" TIMESTAMP(3) NOT NULL DEFAULT CURRENT_TIMESTAMP,\n    \"updatedAt\" TIMESTAMP(3) NOT NULL,\n\n    CONSTRAINT \"Tenant_pkey\" PRIMARY KEY (\"id\")\n);\n\n-- CreateTable\nCREATE TABLE \"User\" (\n    \"id\" TEXT NOT NULL,\n    \"tenantId\" TEXT NOT NULL,\n    \"pubkey\" TEXT NOT NULL,\n    \"lightningAddress\" TEXT,\n    \"createdAt\" TIMESTAMP(3) NOT NULL DEFAULT CURRENT_TIMESTAMP,\n    \"updatedAt\" TIMESTAMP(3) NOT NULL,\n\n    CONSTRAINT \"User_pkey\" PRIMARY KEY (\"id\")\n);\n\n-- CreateTable\nCREATE TABLE \"Payment\" (\n    \"id\" TEXT NOT NULL,\n    \"tenantId\" TEXT NOT NULL,\n    \"userId\" TEXT,\n    \"provider\" TEXT NOT NULL,\n    \"providerRef\" TEXT NOT NULL,\n    \"invoice\" TEXT NOT NULL,\n    \"amountSats\" INTEGER NOT NULL,\n    \"status\" TEXT NOT NULL DEFAULT 'PENDING',\n    \"metadata\" TEXT,\n    \"createdAt\" TIMESTAMP(3) NOT NULL DEFAULT CURRENT_TIMESTAMP,\n    \"updatedAt\" TIMESTAMP(3) NOT NULL,\n\n    CONSTRAINT \"Payment_pkey\" PRIMARY KEY (\"id\")\n);\n\n-- CreateIndex\nCREATE UNIQUE INDEX \"Tenant_domain_key\" ON \"Tenant\"(\"domain\");\n\n-- CreateIndex\nCREATE UNIQUE INDEX \"User_tenantId_pubkey_key\" ON \"User\"(\"tenantId\", \"pubkey\");\n\n-- CreateIndex\nCREATE UNIQUE INDEX \"User_tenantId_lightningAddress_key\" ON \"User\"(\"tenantId\", \"lightningAddress\");\n\n-- CreateIndex\nCREATE UNIQUE INDEX \"Payment_invoice_key\" ON \"Payment\"(\"invoice\");\n\n-- CreateIndex\nCREATE INDEX \"Payment_tenantId_idx\" ON \"Payment\"(\"tenantId\");\n\n-- CreateIndex\nCREATE INDEX \"Payment_tenantId_userId_idx\" ON \"Payment\"(\"tenantId\", \"userId\");\n\n-- CreateIndex\nCREATE UNIQUE INDEX \"Payment_provider_providerRef_tenantId_key\" ON \"Payment\"(\"provider\", \"providerRef\", \"tenantId\");\n\n-- AddForeignKey\nALTER TABLE \"User\" ADD CONSTRAINT \"User_tenantId_fkey\" FOREIGN KEY (\"tenantId\") REFERENCES \"Tenant\"(\"id\") ON DELETE CASCADE ON UPDATE CASCADE;\n\n-- AddForeignKey\nALTER TABLE \"Payment\" ADD CONSTRAINT \"Payment_tenantId_fkey\" FOREIGN KEY (\"tenantId\") REFERENCES \"Tenant\"(\"id\") ON DELETE CASCADE ON UPDATE CASCADE;\n\n-- AddForeignKey\nALTER TABLE \"Payment\" ADD CONSTRAINT \"Payment_userId_fkey\" FOREIGN KEY (\"userId\") REFERENCES \"User\"(\"id\") ON DELETE SET NULL ON UPDATE CASCADE;",
      "tokens": 0,
      "firstFile": {
        "name": "/Users/honk/code/nostrstack/apps/api/prisma/pg-migrations/20251128_init.sql",
        "start": 1,
        "end": 69,
        "startLoc": {
          "line": 1,
          "column": 1,
          "position": 0
        },
        "endLoc": {
          "line": 69,
          "column": 2,
          "position": 598
        }
      },
      "secondFile": {
        "name": "/Users/honk/code/nostrstack/apps/api/prisma/pg/migrations/20251128164619_init/migration.sql",
        "start": 1,
        "end": 69,
        "startLoc": {
          "line": 1,
          "column": 1,
          "position": 0
        },
        "endLoc": {
          "line": 69,
          "column": 2,
          "position": 598
        }
      }
    },
    {
      "format": "typescript",
      "lines": 8,
      "fragment": ";\n    for (let i = 0; i < imageData.data.length; i += 4) {\n      const a = imageData.data[i + 3] ?? 0;\n      const r = imageData.data[i] ?? 0;\n      const g = imageData.data[i + 1] ?? 0;\n      const b = imageData.data[i + 2] ?? 0;\n      const lum = a < 20 ? 255 : Math.max(0, Math.min(255, Math.round((r * 299 + g * 587 + b * 114) / 1000)));\n      const",
      "tokens": 0,
      "firstFile": {
        "name": "/Users/honk/code/nostrstack/packages/embed/src/qr.ts",
        "start": 203,
        "end": 210,
        "startLoc": {
          "line": 203,
          "column": 2,
          "position": 2245
        },
        "endLoc": {
          "line": 210,
          "column": 6,
          "position": 2442
        }
      },
      "secondFile": {
        "name": "/Users/honk/code/nostrstack/packages/embed/src/qr.ts",
        "start": 170,
        "end": 177,
        "startLoc": {
          "line": 170,
          "column": 2,
          "position": 1740
        },
        "endLoc": {
          "line": 177,
          "column": 5,
          "position": 1937
        }
      }
    },
    {
      "format": "typescript",
      "lines": 15,
      "fragment": ";\n    vi.spyOn(globalThis as unknown as { fetch: typeof fetch }, 'fetch').mockResolvedValueOnce({\n      ok: true,\n      json: async () => ({ callback: 'http://localhost:3001/api/lnurlp/alice/invoice' })\n    } as Response).mockResolvedValueOnce({\n      ok: true,\n      json: async () => ({ pr })\n    } as Response);\n\n    const write = vi.fn();\n    (globalThis.navigator as unknown as { clipboard: { writeText: (s: string) => Promise<void> | void } }).clipboard = {\n      writeText: write\n    };\n\n    const onUnlock",
      "tokens": 0,
      "firstFile": {
        "name": "/Users/honk/code/nostrstack/packages/embed/src/index.test.ts",
        "start": 46,
        "end": 60,
        "startLoc": {
          "line": 46,
          "column": 18,
          "position": 529
        },
        "endLoc": {
          "line": 60,
          "column": 9,
          "position": 719
        }
      },
      "secondFile": {
        "name": "/Users/honk/code/nostrstack/packages/embed/src/index.test.ts",
        "start": 18,
        "end": 31,
        "startLoc": {
          "line": 18,
          "column": 19,
          "position": 191
        },
        "endLoc": {
          "line": 31,
          "column": 7,
          "position": 380
        }
      }
    },
    {
      "format": "typescript",
      "lines": 12,
      "fragment": ");\n\n    const write = vi.fn();\n    (globalThis.navigator as unknown as { clipboard: { writeText: (s: string) => Promise<void> | void } }).clipboard = {\n      writeText: write\n    };\n\n    const onUnlock = vi.fn();\n    const button = mountPayToAction(host, {\n      username: 'alice',\n      amountSats: 10,\n      onUnlock",
      "tokens": 0,
      "firstFile": {
        "name": "/Users/honk/code/nostrstack/packages/embed/src/index.test.ts",
        "start": 104,
        "end": 115,
        "startLoc": {
          "line": 104,
          "column": 2,
          "position": 1182
        },
        "endLoc": {
          "line": 115,
          "column": 9,
          "position": 1305
        }
      },
      "secondFile": {
        "name": "/Users/honk/code/nostrstack/packages/embed/src/index.test.ts",
        "start": 53,
        "end": 64,
        "startLoc": {
          "line": 53,
          "column": 9,
          "position": 636
        },
        "endLoc": {
          "line": 64,
          "column": 14,
          "position": 759
        }
      }
    },
    {
      "format": "typescript",
      "lines": 9,
      "fragment": ", async () => {\n    const host = document.createElement('div');\n    const write = vi.fn();\n    (globalThis.navigator as unknown as { clipboard: { writeText: (s: string) => Promise<void> | void } }).clipboard =\n      {\n        writeText: write\n      };\n\n    const",
      "tokens": 0,
      "firstFile": {
        "name": "/Users/honk/code/nostrstack/packages/embed/src/index.test.ts",
        "start": 157,
        "end": 165,
        "startLoc": {
          "line": 157,
          "column": 56,
          "position": 1698
        },
        "endLoc": {
          "line": 165,
          "column": 6,
          "position": 1802
        }
      },
      "secondFile": {
        "name": "/Users/honk/code/nostrstack/packages/embed/src/index.test.ts",
        "start": 131,
        "end": 139,
        "startLoc": {
          "line": 131,
          "column": 41,
          "position": 1416
        },
        "endLoc": {
          "line": 139,
          "column": 15,
          "position": 1520
        }
      }
    },
    {
      "format": "tsx",
      "lines": 11,
      "fragment": "host: host ?? parsed?.domain ?? cfg.host,\n      baseUrl: baseUrl ?? cfg.baseUrl,\n    };\n  }, [lnAddress, baseUrl, host, cfg.lnAddress, cfg.baseUrl, cfg.host]);\n\n  useEffect(() => {\n    const node = ref.current;\n    if (!node) return;\n    node.innerHTML = '';\n\n    const handle = mountTipFeed",
      "tokens": 0,
      "firstFile": {
        "name": "/Users/honk/code/nostrstack/packages/blog-kit/src/tip-activity-feed.tsx",
        "start": 25,
        "end": 35,
        "startLoc": {
          "line": 25,
          "column": 7,
          "position": 233
        },
        "endLoc": {
          "line": 35,
          "column": 13,
          "position": 355
        }
      },
      "secondFile": {
        "name": "/Users/honk/code/nostrstack/packages/blog-kit/src/tip-widget.tsx",
        "start": 47,
        "end": 57,
        "startLoc": {
          "line": 47,
          "column": 7,
          "position": 431
        },
        "endLoc": {
          "line": 57,
          "column": 15,
          "position": 553
        }
      }
    },
    {
      "format": "tsx",
      "lines": 21,
      "fragment": "} from 'nostr-tools/relay';\nimport React, { useCallback, useEffect, useMemo, useRef, useState } from 'react';\n\nimport { useNostrstackConfig } from './context';\n\nconst DEFAULT_RELAYS = ['wss://relay.damus.io', 'wss://relay.snort.social'];\n\ntype UnsignedEvent = {\n  kind: number;\n  created_at: number;\n  tags: string[][];\n  content: string;\n  pubkey: string;\n};\n\ntype SignedEvent = UnsignedEvent & {\n  id: string;\n  sig: string;\n};\n\nasync",
      "tokens": 0,
      "firstFile": {
        "name": "/Users/honk/code/nostrstack/packages/blog-kit/src/share-button.tsx",
        "start": 4,
        "end": 24,
        "startLoc": {
          "line": 4,
          "column": 2,
          "position": 23
        },
        "endLoc": {
          "line": 24,
          "column": 6,
          "position": 169
        }
      },
      "secondFile": {
        "name": "/Users/honk/code/nostrstack/packages/blog-kit/src/share-widget.tsx",
        "start": 4,
        "end": 24,
        "startLoc": {
          "line": 4,
          "column": 2,
          "position": 28
        },
        "endLoc": {
          "line": 24,
          "column": 5,
          "position": 174
        }
      }
    },
    {
      "format": "tsx",
      "lines": 10,
      "fragment": "async function publishToRelays(relays: string[], event: SignedEvent) {\n  const connections: Relay[] = [];\n  try {\n    for (const url of relays) {\n      const relay = await Relay.connect(url);\n      connections.push(relay);\n      await relay.publish(event);\n    }\n  } finally {\n    connections",
      "tokens": 0,
      "firstFile": {
        "name": "/Users/honk/code/nostrstack/packages/blog-kit/src/share-button.tsx",
        "start": 24,
        "end": 33,
        "startLoc": {
          "line": 24,
          "column": 1,
          "position": 169
        },
        "endLoc": {
          "line": 33,
          "column": 12,
          "position": 275
        }
      },
      "secondFile": {
        "name": "/Users/honk/code/nostrstack/packages/blog-kit/src/share-widget.tsx",
        "start": 64,
        "end": 73,
        "startLoc": {
          "line": 64,
          "column": 1,
          "position": 723
        },
        "endLoc": {
          "line": 73,
          "column": 6,
          "position": 829
        }
      }
    },
    {
      "format": "tsx",
      "lines": 15,
      "fragment": ");\n  }\n}\n\nasync function copyText(text: string) {\n  try {\n    if (navigator?.clipboard?.writeText) {\n      await navigator.clipboard.writeText(text);\n    }\n  } catch (error) {\n    console.warn('clipboard copy failed', error);\n  }\n}\n\nexport type ShareButtonProps",
      "tokens": 0,
      "firstFile": {
        "name": "/Users/honk/code/nostrstack/packages/blog-kit/src/share-button.tsx",
        "start": 33,
        "end": 47,
        "startLoc": {
          "line": 33,
          "column": 2,
          "position": 290
        },
        "endLoc": {
          "line": 47,
          "column": 17,
          "position": 382
        }
      },
      "secondFile": {
        "name": "/Users/honk/code/nostrstack/packages/blog-kit/src/share-widget.tsx",
        "start": 88,
        "end": 102,
        "startLoc": {
          "line": 88,
          "column": 2,
          "position": 940
        },
        "endLoc": {
          "line": 102,
          "column": 17,
          "position": 1032
        }
      }
    },
    {
      "format": "typescript",
      "lines": 10,
      "fragment": "(label: string) {\n  const trimmed = (label ?? '').trim();\n  if (!trimmed) return 'Copied';\n  const lower = trimmed.toLowerCase();\n  if (lower === 'copy') return 'Copied';\n  if (lower.startsWith('copy ')) return `Copied ${trimmed.slice(5)}`;\n  return `${trimmed} copied`;\n}\n\nexport",
      "tokens": 0,
      "firstFile": {
        "name": "/Users/honk/code/nostrstack/apps/gallery/src/useCopyAction.ts",
        "start": 8,
        "end": 17,
        "startLoc": {
          "line": 8,
          "column": 22,
          "position": 72
        },
        "endLoc": {
          "line": 17,
          "column": 7,
          "position": 184
        }
      },
      "secondFile": {
        "name": "/Users/honk/code/nostrstack/packages/embed/src/copyButton.ts",
        "start": 13,
        "end": 22,
        "startLoc": {
          "line": 13,
          "column": 20,
          "position": 110
        },
        "endLoc": {
          "line": 22,
          "column": 6,
          "position": 222
        }
      }
    },
    {
      "format": "typescript",
      "lines": 10,
      "fragment": ";\n    } catch (err) {\n      console.warn('copy failed', err);\n      try {\n        if (typeof navigator !== 'undefined' && typeof navigator.vibrate === 'function') navigator.vibrate([15, 25, 15]);\n      } catch {\n        /* ignore */\n      }\n      setState('error');\n      toast",
      "tokens": 0,
      "firstFile": {
        "name": "/Users/honk/code/nostrstack/apps/gallery/src/useCopyAction.ts",
        "start": 55,
        "end": 64,
        "startLoc": {
          "line": 55,
          "column": 5,
          "position": 583
        },
        "endLoc": {
          "line": 64,
          "column": 6,
          "position": 675
        }
      },
      "secondFile": {
        "name": "/Users/honk/code/nostrstack/packages/embed/src/copyButton.ts",
        "start": 131,
        "end": 140,
        "startLoc": {
          "line": 131,
          "column": 2,
          "position": 1212
        },
        "endLoc": {
          "line": 140,
          "column": 2,
          "position": 1304
        }
      }
    },
    {
      "format": "javascript",
      "lines": 27,
      "fragment": " }}>\n            Check API logs (.logs/dev/api.log) and bitcoind RPC health.\n          </span>\n        </div>\n      )}\n      {status === 'error' && (\n        <div\n          style={{\n            fontSize: '0.9rem',\n            color: 'color-mix(in oklab, var(--nostrstack-color-danger) 70%, var(--nostrstack-color-text))',\n            background:\n              'color-mix(in oklab, var(--nostrstack-color-danger) 12%, var(--nostrstack-color-surface))',\n            border:\n              '1px solid color-mix(in oklab, var(--nostrstack-color-danger) 35%, var(--nostrstack-color-border))',\n            padding: '0.45rem 0.6rem',\n            borderRadius: 'var(--nostrstack-radius-md)',\n            display: 'grid',\n            gap: 4\n          }}\n        >\n          <span>Stream error: {errorMsg ?? 'disconnected'}  retrying</span>\n          {suggestFix(activeUrl, errorMsg)?.length ? (\n            <span style={{ color: 'color-mix(in oklab, var(--nostrstack-color-danger) 80%, var(--nostrstack-color-text))' }}>\n              {suggestFix(activeUrl, errorMsg)}\n            </span>\n          ) : null}\n          <span style={{ color",
      "tokens": 0,
      "firstFile": {
        "name": "/Users/honk/code/nostrstack/apps/gallery/src/TelemetryCard.tsx",
        "start": 380,
        "end": 406,
        "startLoc": {
          "line": 380,
          "column": 88,
          "position": 3603
        },
        "endLoc": {
          "line": 406,
          "column": 7,
          "position": 3805
        }
      },
      "secondFile": {
        "name": "/Users/honk/code/nostrstack/apps/gallery/src/TelemetryCard.tsx",
        "start": 359,
        "end": 388,
        "startLoc": {
          "line": 359,
          "column": 89,
          "position": 3488
        },
        "endLoc": {
          "line": 388,
          "column": 21,
          "position": 3669
        }
      }
    },
    {
      "format": "javascript",
      "lines": 30,
      "fragment": " }}>\n            No shares yet. Be the first.\n          </div>\n        )}\n      </div>\n\n      {events.slice(0, 6).length > 0 && (\n        <div style={{ marginTop: 12, display: 'grid', gap: 8 }}>\n          {events.slice(0, 6).map((ev) => {\n            const profile = profiles[ev.pubkey];\n            const name = profile?.display_name || profile?.name || profile?.nip05 || shortKey(ev.pubkey);\n            const pic = profile?.picture;\n            const href = `https://njump.me/${ev.id}`;\n            return (\n              <a\n                key={ev.id}\n                href={href}\n                target=\"_blank\"\n                rel=\"noreferrer\"\n                style={{\n                  display: 'flex',\n                  gap: 10,\n                  alignItems: 'center',\n                  padding: '8px 10px',\n                  borderRadius: 12,\n                  border: '1px solid var(--nostrstack-color-border)',\n                  background: 'color-mix(in oklab, var(--nostrstack-color-surface) 90%, white)',\n                  textDecoration: 'none',\n                  color: 'var(--nostrstack-color-text)'\n                ",
      "tokens": 0,
      "firstFile": {
        "name": "/Users/honk/code/nostrstack/apps/gallery/src/ShareWidget.tsx",
        "start": 498,
        "end": 527,
        "startLoc": {
          "line": 498,
          "column": 37,
          "position": 4881
        },
        "endLoc": {
          "line": 527,
          "column": 17,
          "position": 5150
        }
      },
      "secondFile": {
        "name": "/Users/honk/code/nostrstack/packages/blog-kit/src/share-widget.tsx",
        "start": 531,
        "end": 555,
        "startLoc": {
          "line": 531,
          "column": 3,
          "position": 5210
        },
        "endLoc": {
          "line": 555,
          "column": 2,
          "position": 5440
        }
      }
    },
    {
      "format": "javascript",
      "lines": 15,
      "fragment": "\n                }}\n              >\n                <div\n                  style={{\n                    width: 30,\n                    height: 30,\n                    borderRadius: 999,\n                    overflow: 'hidden',\n                    border: '1px solid var(--nostrstack-color-border)',\n                    display: 'grid',\n                    placeItems: 'center',\n                    background: 'var(--nostrstack-color-surface)',\n                    flex: '0 0 auto'\n                  ",
      "tokens": 0,
      "firstFile": {
        "name": "/Users/honk/code/nostrstack/apps/gallery/src/ShareWidget.tsx",
        "start": 526,
        "end": 540,
        "startLoc": {
          "line": 526,
          "column": 31,
          "position": 5150
        },
        "endLoc": {
          "line": 540,
          "column": 19,
          "position": 5208
        }
      },
      "secondFile": {
        "name": "/Users/honk/code/nostrstack/packages/blog-kit/src/share-widget.tsx",
        "start": 555,
        "end": 568,
        "startLoc": {
          "line": 555,
          "column": 2,
          "position": 5441
        },
        "endLoc": {
          "line": 568,
          "column": 2,
          "position": 5499
        }
      }
    },
    {
      "format": "javascript",
      "lines": 30,
      "fragment": "\n                  }}\n                >\n                  {pic ? (\n                    <img src={pic} alt=\"\" style={{ width: '100%', height: '100%', objectFit: 'cover' }} />\n                  ) : (\n                    <span style={{ fontSize: 12, fontWeight: 800 }}>\n                      {(profile?.display_name || profile?.name || ev.pubkey).slice(0, 1).toUpperCase()}\n                    </span>\n                  )}\n                </div>\n                <div style={{ minWidth: 0, display: 'grid' }}>\n                  <div style={{ fontWeight: 800, overflow: 'hidden', textOverflow: 'ellipsis', whiteSpace: 'nowrap' }}>\n                    {name}\n                  </div>\n                  <div style={{ fontSize: 12, color: 'var(--nostrstack-color-text-muted)' }}>\n                    {timeAgo(now, ev.created_at)}\n                  </div>\n                </div>\n                <div style={{ marginLeft: 'auto', fontSize: 12, color: 'var(--nostrstack-color-text-muted)' }}>\n                  Open\n                </div>\n              </a>\n            );\n          })}\n        </div>\n      )}\n\n      {error && (\n        <div role=\"alert\" style={{ marginTop",
      "tokens": 0,
      "firstFile": {
        "name": "/Users/honk/code/nostrstack/apps/gallery/src/ShareWidget.tsx",
        "start": 539,
        "end": 568,
        "startLoc": {
          "line": 539,
          "column": 11,
          "position": 5208
        },
        "endLoc": {
          "line": 568,
          "column": 11,
          "position": 5529
        }
      },
      "secondFile": {
        "name": "/Users/honk/code/nostrstack/packages/blog-kit/src/share-widget.tsx",
        "start": 568,
        "end": 601,
        "startLoc": {
          "line": 568,
          "column": 2,
          "position": 5500
        },
        "endLoc": {
          "line": 601,
          "column": 22,
          "position": 5827
        }
      }
    },
    {
      "format": "tsx",
      "lines": 18,
      "fragment": ";\n\ntype UnsignedEvent = {\n  kind: number;\n  created_at: number;\n  tags: string[][];\n  content: string;\n  pubkey: string;\n};\n\ntype SignedEvent = UnsignedEvent & {\n  id: string;\n  sig: string;\n};\n\ntype ShareEvent = Pick<SignedEvent, 'id' | 'pubkey' | 'created_at' | 'content' | 'tags'>;\n\ntype",
      "tokens": 0,
      "firstFile": {
        "name": "/Users/honk/code/nostrstack/apps/gallery/src/ShareWidget.tsx",
        "start": 4,
        "end": 21,
        "startLoc": {
          "line": 4,
          "column": 11,
          "position": 55
        },
        "endLoc": {
          "line": 21,
          "column": 5,
          "position": 171
        }
      },
      "secondFile": {
        "name": "/Users/honk/code/nostrstack/packages/blog-kit/src/share-widget.tsx",
        "start": 9,
        "end": 26,
        "startLoc": {
          "line": 9,
          "column": 2,
          "position": 90
        },
        "endLoc": {
          "line": 26,
          "column": 7,
          "position": 206
        }
      }
    },
    {
      "format": "tsx",
      "lines": 36,
      "fragment": "type NostrProfile = {\n  pubkey: string;\n  name?: string;\n  display_name?: string;\n  picture?: string;\n  nip05?: string;\n  about?: string;\n};\n\nfunction shortKey(pk?: string) {\n  return pk ? `${pk.slice(0, 8)}${pk.slice(-6)}` : 'nostr user';\n}\n\nfunction timeAgo(nowMs: number, createdAtSec: number) {\n  const ageSec = Math.max(0, Math.floor(nowMs / 1000) - createdAtSec);\n  if (ageSec < 10) return 'just now';\n  if (ageSec < 60) return `${ageSec}s ago`;\n  const ageMin = Math.floor(ageSec / 60);\n  if (ageMin < 60) return `${ageMin}m ago`;\n  const ageHr = Math.floor(ageMin / 60);\n  if (ageHr < 48) return `${ageHr}h ago`;\n  const ageDay = Math.floor(ageHr / 24);\n  return `${ageDay}d ago`;\n}\n\nfunction parseProfile(pubkey: string, raw: unknown): NostrProfile | null {\n  if (!raw || typeof raw !== 'object') return null;\n  const rec = raw as Record<string, unknown>;\n  return {\n    pubkey,\n    name: typeof rec.name === 'string' ? rec.name : undefined,\n    display_name: typeof rec.display_name === 'string' ? rec.display_name : undefined,\n    picture: typeof rec.picture === 'string' ? rec.picture : undefined,\n    nip05: typeof rec.nip05 === 'string' ? rec.nip05 : undefined,\n    about: typeof rec.about === 'string' ? rec.about : undefined\n  }",
      "tokens": 0,
      "firstFile": {
        "name": "/Users/honk/code/nostrstack/apps/gallery/src/ShareWidget.tsx",
        "start": 21,
        "end": 56,
        "startLoc": {
          "line": 21,
          "column": 1,
          "position": 171
        },
        "endLoc": {
          "line": 56,
          "column": 2,
          "position": 679
        }
      },
      "secondFile": {
        "name": "/Users/honk/code/nostrstack/packages/blog-kit/src/share-widget.tsx",
        "start": 26,
        "end": 60,
        "startLoc": {
          "line": 26,
          "column": 2,
          "position": 208
        },
        "endLoc": {
          "line": 60,
          "column": 2,
          "position": 714
        }
      }
    },
    {
      "format": "tsx",
      "lines": 14,
      "fragment": "};\n}\n\nasync function publishToRelays(relays: string[], event: SignedEvent) {\n  const connections: Relay[] = [];\n  try {\n    for (const url of relays) {\n      const relay = await Relay.connect(url);\n      connections.push(relay);\n      await relay.publish(event);\n    }\n  } finally {\n    const toClose = connections.slice();\n    window",
      "tokens": 0,
      "firstFile": {
        "name": "/Users/honk/code/nostrstack/apps/gallery/src/ShareWidget.tsx",
        "start": 56,
        "end": 69,
        "startLoc": {
          "line": 56,
          "column": 3,
          "position": 679
        },
        "endLoc": {
          "line": 69,
          "column": 7,
          "position": 805
        }
      },
      "secondFile": {
        "name": "/Users/honk/code/nostrstack/packages/blog-kit/src/share-widget.tsx",
        "start": 61,
        "end": 74,
        "startLoc": {
          "line": 61,
          "column": 3,
          "position": 717
        },
        "endLoc": {
          "line": 74,
          "column": 11,
          "position": 843
        }
      }
    },
    {
      "format": "tsx",
      "lines": 24,
      "fragment": ".setTimeout(() => {\n      toClose.forEach((r) => {\n        try {\n          // eslint-disable-next-line @typescript-eslint/no-explicit-any\n          (r as any)._connected = false;\n        } catch {\n          // ignore\n        }\n        try {\n          r.close();\n        } catch {\n          // ignore\n        }\n      });\n    }, 0);\n  }\n}\n\nasync function copyText(text: string) {\n  try {\n    if (navigator?.clipboard?.writeText) {\n      await navigator.clipboard.writeText(text);\n    }\n  } catch {",
      "tokens": 0,
      "firstFile": {
        "name": "/Users/honk/code/nostrstack/apps/gallery/src/ShareWidget.tsx",
        "start": 69,
        "end": 92,
        "startLoc": {
          "line": 69,
          "column": 7,
          "position": 806
        },
        "endLoc": {
          "line": 92,
          "column": 2,
          "position": 966
        }
      },
      "secondFile": {
        "name": "/Users/honk/code/nostrstack/packages/blog-kit/src/share-widget.tsx",
        "start": 74,
        "end": 97,
        "startLoc": {
          "line": 74,
          "column": 11,
          "position": 844
        },
        "endLoc": {
          "line": 97,
          "column": 2,
          "position": 1004
        }
      }
    },
    {
      "format": "tsx",
      "lines": 8,
      "fragment": ">('idle');\n  const [shareState, setShareState] = useState<'idle' | 'sharing' | 'shared' | 'error'>('idle');\n  const [error, setError] = useState<string | null>(null);\n  const [events, setEvents] = useState<ShareEvent[]>([]);\n  const [profiles, setProfiles] = useState<Record<string, NostrProfile>>({});\n  const profilesRef = useRef<Record<string, NostrProfile>>({});\n\n  useEffect",
      "tokens": 0,
      "firstFile": {
        "name": "/Users/honk/code/nostrstack/apps/gallery/src/ShareWidget.tsx",
        "start": 113,
        "end": 120,
        "startLoc": {
          "line": 113,
          "column": 7,
          "position": 1111
        },
        "endLoc": {
          "line": 120,
          "column": 10,
          "position": 1250
        }
      },
      "secondFile": {
        "name": "/Users/honk/code/nostrstack/packages/blog-kit/src/share-widget.tsx",
        "start": 130,
        "end": 137,
        "startLoc": {
          "line": 130,
          "column": 8,
          "position": 1242
        },
        "endLoc": {
          "line": 137,
          "column": 6,
          "position": 1381
        }
      }
    },
    {
      "format": "tsx",
      "lines": 14,
      "fragment": "]);\n\n  const uniqueSharers = useMemo(() => {\n    const set = new Set<string>();\n    for (const ev of events) set.add(ev.pubkey);\n    return Array.from(set);\n  }, [events]);\n\n  const countLabel = useMemo(() => {\n    if (events.length >= maxItems) return `${maxItems}+`;\n    return String(events.length);\n  }, [events.length, maxItems]);\n\n  const hydrateProfile",
      "tokens": 0,
      "firstFile": {
        "name": "/Users/honk/code/nostrstack/apps/gallery/src/ShareWidget.tsx",
        "start": 131,
        "end": 144,
        "startLoc": {
          "line": 131,
          "column": 13,
          "position": 1484
        },
        "endLoc": {
          "line": 144,
          "column": 15,
          "position": 1635
        }
      },
      "secondFile": {
        "name": "/Users/honk/code/nostrstack/packages/blog-kit/src/share-widget.tsx",
        "start": 160,
        "end": 173,
        "startLoc": {
          "line": 160,
          "column": 2,
          "position": 1689
        },
        "endLoc": {
          "line": 173,
          "column": 14,
          "position": 1840
        }
      }
    },
    {
      "format": "tsx",
      "lines": 8,
      "fragment": "]);\n\n  const hydrateProfile = useCallback((pubkey: string, content: string) => {\n    try {\n      const raw = JSON.parse(content) as unknown;\n      const parsed = parseProfile(pubkey, raw);\n      if (!parsed) return;\n      setProfiles((prev) => ({",
      "tokens": 0,
      "firstFile": {
        "name": "/Users/honk/code/nostrstack/apps/gallery/src/ShareWidget.tsx",
        "start": 142,
        "end": 149,
        "startLoc": {
          "line": 142,
          "column": 9,
          "position": 1627
        },
        "endLoc": {
          "line": 149,
          "column": 2,
          "position": 1719
        }
      },
      "secondFile": {
        "name": "/Users/honk/code/nostrstack/packages/blog-kit/src/share-widget.tsx",
        "start": 173,
        "end": 180,
        "startLoc": {
          "line": 173,
          "column": 14,
          "position": 1864
        },
        "endLoc": {
          "line": 180,
          "column": 5,
          "position": 1956
        }
      }
    },
    {
      "format": "tsx",
      "lines": 18,
      "fragment": "if (!relayTargets.length) {\n      setStatus('error');\n      setError('No relays configured.');\n      return;\n    }\n\n    let cancelled = false;\n    let connections: Relay[] = [];\n    let shareSub: Subscription[] = [];\n    const profileFetchInFlight = new Set<string>();\n    let closeTimer: number | null = null;\n\n    const closeAll = () => {\n      shareSub = [];\n      const toClose = connections;\n      connections = [];\n\n      // React can unmount/mount components within the same click handler task. `nostr-tools` uses",
      "tokens": 0,
      "firstFile": {
        "name": "/Users/honk/code/nostrstack/apps/gallery/src/ShareWidget.tsx",
        "start": 162,
        "end": 179,
        "startLoc": {
          "line": 162,
          "column": 5,
          "position": 1802
        },
        "endLoc": {
          "line": 179,
          "column": 93,
          "position": 1956
        }
      },
      "secondFile": {
        "name": "/Users/honk/code/nostrstack/packages/blog-kit/src/share-widget.tsx",
        "start": 187,
        "end": 204,
        "startLoc": {
          "line": 187,
          "column": 5,
          "position": 2019
        },
        "endLoc": {
          "line": 204,
          "column": 3,
          "position": 2173
        }
      }
    },
    {
      "format": "tsx",
      "lines": 24,
      "fragment": "// eslint-disable-next-line @typescript-eslint/no-explicit-any\n            (c as any)._connected = false;\n          } catch {\n            // ignore\n          }\n          try {\n            c.close();\n          } catch {\n            // ignore\n          }\n        });\n      }, 0);\n    };\n\n    const connect = async () => {\n      setStatus('connecting');\n      setError(null);\n      try {\n        const results = await Promise.allSettled(relayTargets.map((r) => Relay.connect(r)));\n        const ok = results\n          .filter((r): r is PromiseFulfilledResult<Relay> => r.status === 'fulfilled')\n          .map((r) => r.value);\n        if (cancelled) {\n          window",
      "tokens": 0,
      "firstFile": {
        "name": "/Users/honk/code/nostrstack/apps/gallery/src/ShareWidget.tsx",
        "start": 191,
        "end": 214,
        "startLoc": {
          "line": 191,
          "column": 13,
          "position": 2033
        },
        "endLoc": {
          "line": 214,
          "column": 7,
          "position": 2240
        }
      },
      "secondFile": {
        "name": "/Users/honk/code/nostrstack/packages/blog-kit/src/share-widget.tsx",
        "start": 211,
        "end": 234,
        "startLoc": {
          "line": 211,
          "column": 13,
          "position": 2235
        },
        "endLoc": {
          "line": 234,
          "column": 11,
          "position": 2442
        }
      }
    },
    {
      "format": "tsx",
      "lines": 29,
      "fragment": ".setTimeout(() => {\n            ok.forEach((r) => {\n              try {\n                // eslint-disable-next-line @typescript-eslint/no-explicit-any\n                (r as any)._connected = false;\n              } catch {\n                // ignore\n              }\n              try {\n                r.close();\n              } catch {\n                // ignore\n              }\n            });\n          }, 0);\n          return;\n        }\n        connections = ok;\n        if (!connections.length) {\n          setStatus('error');\n          setError('No relays reachable.');\n          return;\n        }\n        setStatus('connected');\n\n        const filters = [\n          { kinds: [1], '#r': [url], limit: Math.min(500, Math.max(1, maxItems)) },\n          { kinds: [1], '#t': [effectiveTag], limit: Math.min(500, Math.max(1, maxItems)) }\n        ]",
      "tokens": 0,
      "firstFile": {
        "name": "/Users/honk/code/nostrstack/apps/gallery/src/ShareWidget.tsx",
        "start": 214,
        "end": 242,
        "startLoc": {
          "line": 214,
          "column": 7,
          "position": 2241
        },
        "endLoc": {
          "line": 242,
          "column": 2,
          "position": 2491
        }
      },
      "secondFile": {
        "name": "/Users/honk/code/nostrstack/packages/blog-kit/src/share-widget.tsx",
        "start": 234,
        "end": 262,
        "startLoc": {
          "line": 234,
          "column": 11,
          "position": 2443
        },
        "endLoc": {
          "line": 262,
          "column": 2,
          "position": 2692
        }
      }
    },
    {
      "format": "tsx",
      "lines": 16,
      "fragment": "];\n\n        shareSub = connections.map((relay) =>\n          relay.subscribe(filters, {\n            onevent: (ev: SignedEvent) => {\n              if (cancelled) return;\n              if (!ev?.id || typeof ev.id !== 'string') return;\n              if (!ev.pubkey || typeof ev.pubkey !== 'string') return;\n              if (!ev.created_at || typeof ev.created_at !== 'number') return;\n              const next: ShareEvent = {\n                id: ev.id,\n                pubkey: ev.pubkey,\n                created_at: ev.created_at,\n                content: ev.content ?? '',\n                tags: Array.isArray(ev.tags) ? ev.tags : []\n              }",
      "tokens": 0,
      "firstFile": {
        "name": "/Users/honk/code/nostrstack/apps/gallery/src/ShareWidget.tsx",
        "start": 242,
        "end": 257,
        "startLoc": {
          "line": 242,
          "column": 9,
          "position": 2491
        },
        "endLoc": {
          "line": 257,
          "column": 2,
          "position": 2699
        }
      },
      "secondFile": {
        "name": "/Users/honk/code/nostrstack/packages/blog-kit/src/share-widget.tsx",
        "start": 263,
        "end": 277,
        "startLoc": {
          "line": 263,
          "column": 9,
          "position": 2695
        },
        "endLoc": {
          "line": 277,
          "column": 2,
          "position": 2901
        }
      }
    },
    {
      "format": "tsx",
      "lines": 18,
      "fragment": "};\n              setEvents((prev) => {\n                if (prev.some((p) => p.id === next.id)) return prev;\n                const merged = [next, ...prev].sort((a, b) => b.created_at - a.created_at);\n                return merged.slice(0, maxItems);\n              });\n\n              if (!profilesRef.current[ev.pubkey] && !profileFetchInFlight.has(ev.pubkey)) {\n                profileFetchInFlight.add(ev.pubkey);\n                const subs: Subscription[] = [];\n                for (const r of connections) {\n                  subs.push(\n                    r.subscribe([{ kinds: [0], authors: [ev.pubkey], limit: 1 }], {\n                      onevent: (meta: SignedEvent) => {\n                        if (cancelled) return;\n                        hydrateProfile(ev.pubkey, meta.content ?? '');\n                        profileFetchInFlight.delete(ev.pubkey);\n                        subs.forEach((s) => {",
      "tokens": 0,
      "firstFile": {
        "name": "/Users/honk/code/nostrstack/apps/gallery/src/ShareWidget.tsx",
        "start": 257,
        "end": 274,
        "startLoc": {
          "line": 257,
          "column": 15,
          "position": 2699
        },
        "endLoc": {
          "line": 274,
          "column": 2,
          "position": 2982
        }
      },
      "secondFile": {
        "name": "/Users/honk/code/nostrstack/packages/blog-kit/src/share-widget.tsx",
        "start": 278,
        "end": 295,
        "startLoc": {
          "line": 278,
          "column": 15,
          "position": 2904
        },
        "endLoc": {
          "line": 295,
          "column": 2,
          "position": 3187
        }
      }
    },
    {
      "format": "tsx",
      "lines": 14,
      "fragment": ");\n      } catch (err) {\n        setStatus('error');\n        setError(err instanceof Error ? err.message : 'Failed to connect to relays');\n        closeAll();\n      }\n    };\n\n    connect();\n    return () => {\n      cancelled = true;\n      closeAll();\n    };\n  }",
      "tokens": 0,
      "firstFile": {
        "name": "/Users/honk/code/nostrstack/apps/gallery/src/ShareWidget.tsx",
        "start": 291,
        "end": 304,
        "startLoc": {
          "line": 291,
          "column": 9,
          "position": 3066
        },
        "endLoc": {
          "line": 304,
          "column": 2,
          "position": 3157
        }
      },
      "secondFile": {
        "name": "/Users/honk/code/nostrstack/packages/blog-kit/src/share-widget.tsx",
        "start": 307,
        "end": 320,
        "startLoc": {
          "line": 307,
          "column": 9,
          "position": 3253
        },
        "endLoc": {
          "line": 320,
          "column": 56,
          "position": 3344
        }
      }
    },
    {
      "format": "tsx",
      "lines": 11,
      "fragment": "as unknown as {\n        nostr?: {\n          getPublicKey: () => Promise<string>;\n          signEvent: (ev: UnsignedEvent) => Promise<SignedEvent>;\n        };\n      }\n    ).nostr;\n\n    const tags: string[][] = [['r', url], ['t', effectiveTag]];\n\n    try",
      "tokens": 0,
      "firstFile": {
        "name": "/Users/honk/code/nostrstack/apps/gallery/src/ShareWidget.tsx",
        "start": 310,
        "end": 320,
        "startLoc": {
          "line": 310,
          "column": 2,
          "position": 3229
        },
        "endLoc": {
          "line": 320,
          "column": 4,
          "position": 3326
        }
      },
      "secondFile": {
        "name": "/Users/honk/code/nostrstack/packages/blog-kit/src/share-widget.tsx",
        "start": 327,
        "end": 336,
        "startLoc": {
          "line": 327,
          "column": 2,
          "position": 3418
        },
        "endLoc": {
          "line": 336,
          "column": 6,
          "position": 3514
        }
      }
    },
    {
      "format": "tsx",
      "lines": 12,
      "fragment": ");\n        await publishToRelays(relayTargets, signed);\n        setShareState('shared');\n        setEvents((prev) => {\n          if (prev.some((p) => p.id === signed.id)) return prev;\n          const next: ShareEvent = {\n            id: signed.id,\n            pubkey: signed.pubkey,\n            created_at: signed.created_at,\n            content: signed.content,\n            tags: signed.tags\n          }",
      "tokens": 0,
      "firstFile": {
        "name": "/Users/honk/code/nostrstack/apps/gallery/src/ShareWidget.tsx",
        "start": 331,
        "end": 342,
        "startLoc": {
          "line": 331,
          "column": 9,
          "position": 3451
        },
        "endLoc": {
          "line": 342,
          "column": 2,
          "position": 3572
        }
      },
      "secondFile": {
        "name": "/Users/honk/code/nostrstack/packages/blog-kit/src/share-widget.tsx",
        "start": 354,
        "end": 364,
        "startLoc": {
          "line": 354,
          "column": 2,
          "position": 3696
        },
        "endLoc": {
          "line": 364,
          "column": 2,
          "position": 3815
        }
      }
    },
    {
      "format": "tsx",
      "lines": 21,
      "fragment": "};\n          return [next, ...prev].sort((a, b) => b.created_at - a.created_at).slice(0, maxItems);\n        });\n        return;\n      }\n\n      if (navigator?.share) {\n        await navigator.share({ title, text: note, url });\n        setShareState('shared');\n        return;\n      }\n\n      await copyText(note);\n      setShareState('shared');\n    } catch (err) {\n      setError(err instanceof Error ? err.message : 'Share failed');\n      setShareState('error');\n    }\n  }, [effectiveTag, maxItems, note, relayTargets, title, url]);\n\n  const avatarPubkeys",
      "tokens": 0,
      "firstFile": {
        "name": "/Users/honk/code/nostrstack/apps/gallery/src/ShareWidget.tsx",
        "start": 342,
        "end": 362,
        "startLoc": {
          "line": 342,
          "column": 11,
          "position": 3572
        },
        "endLoc": {
          "line": 362,
          "column": 14,
          "position": 3768
        }
      },
      "secondFile": {
        "name": "/Users/honk/code/nostrstack/packages/blog-kit/src/share-widget.tsx",
        "start": 365,
        "end": 385,
        "startLoc": {
          "line": 365,
          "column": 11,
          "position": 3818
        },
        "endLoc": {
          "line": 385,
          "column": 7,
          "position": 4014
        }
      }
    },
    {
      "format": "tsx",
      "lines": 12,
      "fragment": "<div style={{ display: 'flex', justifyContent: 'space-between', gap: 10, flexWrap: 'wrap' }}>\n        <div style={{ display: 'grid', gap: 2 }}>\n          <div style={{ fontWeight: 800 }}>Shares</div>\n          <div style={{ fontSize: 13, color: 'var(--nostrstack-color-text-muted)' }}>\n            <strong style={{ color: 'var(--nostrstack-color-text)' }}>{countLabel}</strong>{' '}\n            {Number(countLabel.replace('+', '')) === 1 ? 'share' : 'shares'}\n            {uniqueSharers.length ? `  ${uniqueSharers.length} people` : ''}\n          </div>\n        </div>\n        <div style={{ display: 'flex', alignItems: 'center', gap: 8, flexWrap: 'wrap' }}>\n          <span\n            ",
      "tokens": 0,
      "firstFile": {
        "name": "/Users/honk/code/nostrstack/apps/gallery/src/ShareWidget.tsx",
        "start": 375,
        "end": 386,
        "startLoc": {
          "line": 375,
          "column": 7,
          "position": 3828
        },
        "endLoc": {
          "line": 386,
          "column": 13,
          "position": 4044
        }
      },
      "secondFile": {
        "name": "/Users/honk/code/nostrstack/packages/blog-kit/src/share-widget.tsx",
        "start": 386,
        "end": 397,
        "startLoc": {
          "line": 386,
          "column": 5,
          "position": 4021
        },
        "endLoc": {
          "line": 397,
          "column": 11,
          "position": 4242
        }
      }
    },
    {
      "format": "tsx",
      "lines": 9,
      "fragment": "<div style={{ marginTop: 10, display: 'flex', alignItems: 'center', gap: 8, flexWrap: 'wrap' }}>\n        <div style={{ display: 'flex', alignItems: 'center' }}>\n          {avatarPubkeys.map((pk, idx) => {\n            const profile = profiles[pk];\n            const label = profile?.display_name || profile?.name || profile?.nip05 || shortKey(pk);\n            const pic = profile?.picture;\n            return (\n              <div\n                ",
      "tokens": 0,
      "firstFile": {
        "name": "/Users/honk/code/nostrstack/apps/gallery/src/ShareWidget.tsx",
        "start": 444,
        "end": 452,
        "startLoc": {
          "line": 444,
          "column": 7,
          "position": 4363
        },
        "endLoc": {
          "line": 452,
          "column": 17,
          "position": 4506
        }
      },
      "secondFile": {
        "name": "/Users/honk/code/nostrstack/packages/blog-kit/src/share-widget.tsx",
        "start": 452,
        "end": 460,
        "startLoc": {
          "line": 452,
          "column": 5,
          "position": 4548
        },
        "endLoc": {
          "line": 460,
          "column": 15,
          "position": 4686
        }
      }
    },
    {
      "format": "tsx",
      "lines": 14,
      "fragment": ">\n                {pic ? (\n                  <img src={pic} alt=\"\" style={{ width: '100%', height: '100%', objectFit: 'cover' }} />\n                ) : (\n                  <span style={{ fontSize: 12, fontWeight: 800 }}>\n                    {(profile?.display_name || profile?.name || pk).slice(0, 1).toUpperCase()}\n                  </span>\n                )}\n              </div>\n            );\n          })}\n          {uniqueSharers.length > avatarPubkeys.length && (\n            <div\n              ",
      "tokens": 0,
      "firstFile": {
        "name": "/Users/honk/code/nostrstack/apps/gallery/src/ShareWidget.tsx",
        "start": 466,
        "end": 479,
        "startLoc": {
          "line": 466,
          "column": 15,
          "position": 4587
        },
        "endLoc": {
          "line": 479,
          "column": 15,
          "position": 4740
        }
      },
      "secondFile": {
        "name": "/Users/honk/code/nostrstack/packages/blog-kit/src/share-widget.tsx",
        "start": 475,
        "end": 488,
        "startLoc": {
          "line": 475,
          "column": 13,
          "position": 4774
        },
        "endLoc": {
          "line": 488,
          "column": 13,
          "position": 4932
        }
      }
    },
    {
      "format": "tsx",
      "lines": 36,
      "fragment": ".map((ev) => {\n            const profile = profiles[ev.pubkey];\n            const name = profile?.display_name || profile?.name || profile?.nip05 || shortKey(ev.pubkey);\n            const pic = profile?.picture;\n            const href = `https://njump.me/${ev.id}`;\n            return (\n              <a\n                key={ev.id}\n                href={href}\n                target=\"_blank\"\n                rel=\"noreferrer\"\n                style={{\n                  display: 'flex',\n                  gap: 10,\n                  alignItems: 'center',\n                  padding: '8px 10px',\n                  borderRadius: 12,\n                  border: '1px solid var(--nostrstack-color-border)',\n                  background: 'color-mix(in oklab, var(--nostrstack-color-surface) 90%, white)',\n                  textDecoration: 'none',\n                  color: 'var(--nostrstack-color-text)'\n                }}\n              >\n                <div\n                  style={{\n                    width: 30,\n                    height: 30,\n                    borderRadius: 999,\n                    overflow: 'hidden',\n                    border: '1px solid var(--nostrstack-color-border)',\n                    display: 'grid',\n                    placeItems: 'center',\n                    background: 'var(--nostrstack-color-surface)',\n                    flex: '0 0 auto'\n                  }}\n                ",
      "tokens": 0,
      "firstFile": {
        "name": "/Users/honk/code/nostrstack/apps/gallery/src/ShareWidget.tsx",
        "start": 506,
        "end": 541,
        "startLoc": {
          "line": 506,
          "column": 2,
          "position": 4976
        },
        "endLoc": {
          "line": 541,
          "column": 17,
          "position": 5211
        }
      },
      "secondFile": {
        "name": "/Users/honk/code/nostrstack/packages/blog-kit/src/share-widget.tsx",
        "start": 535,
        "end": 570,
        "startLoc": {
          "line": 535,
          "column": 7,
          "position": 5266
        },
        "endLoc": {
          "line": 570,
          "column": 19,
          "position": 5503
        }
      }
    },
    {
      "format": "tsx",
      "lines": 16,
      "fragment": "\n                >\n                  {pic ? (\n                    <img src={pic} alt=\"\" style={{ width: '100%', height: '100%', objectFit: 'cover' }} />\n                  ) : (\n                    <span style={{ fontSize: 12, fontWeight: 800 }}>\n                      {(profile?.display_name || profile?.name || ev.pubkey).slice(0, 1).toUpperCase()}\n                    </span>\n                  )}\n                </div>\n                <div style={{ minWidth: 0, display: 'grid' }}>\n                  <div style={{ fontWeight: 800, overflow: 'hidden', textOverflow: 'ellipsis', whiteSpace: 'nowrap' }}>\n                    {name}\n                  </div>\n                  <div style={{ fontSize: 12, color: 'var(--nostrstack-color-text-muted)' }}>\n                    {timeAgo(now",
      "tokens": 0,
      "firstFile": {
        "name": "/Users/honk/code/nostrstack/apps/gallery/src/ShareWidget.tsx",
        "start": 540,
        "end": 555,
        "startLoc": {
          "line": 540,
          "column": 2,
          "position": 5211
        },
        "endLoc": {
          "line": 555,
          "column": 4,
          "position": 5429
        }
      },
      "secondFile": {
        "name": "/Users/honk/code/nostrstack/packages/blog-kit/src/share-widget.tsx",
        "start": 570,
        "end": 585,
        "startLoc": {
          "line": 570,
          "column": 2,
          "position": 5509
        },
        "endLoc": {
          "line": 585,
          "column": 6,
          "position": 5727
        }
      }
    },
    {
      "format": "javascript",
      "lines": 18,
      "fragment": ")}\n                className=\"nostrstack-btn nostrstack-btn--sm nostrstack-btn--ghost\"\n                style={{ borderRadius: 'var(--nostrstack-radius-pill)', padding: '0.25rem 0.6rem' }}\n                aria-label=\"Close relay event details\"\n              >\n                \n              </button>\n            </div>\n\n            <div style={{ display: 'grid', gap: '0.75rem' }}>\n              <div style={{ display: 'grid', gap: 6 }}>\n                <strong style={{ color: 'var(--nostrstack-color-text)' }}>{lastEvent.label}</strong>\n                {lastEvent.sublabel ? (\n                  <div style={{ color: 'var(--nostrstack-color-text-muted)' }}>{lastEvent.sublabel}</div>\n                ) : null}\n              </div>\n\n              <div style={{",
      "tokens": 0,
      "firstFile": {
        "name": "/Users/honk/code/nostrstack/apps/gallery/src/RelayCard.tsx",
        "start": 345,
        "end": 362,
        "startLoc": {
          "line": 345,
          "column": 6,
          "position": 3969
        },
        "endLoc": {
          "line": 362,
          "column": 2,
          "position": 4142
        }
      },
      "secondFile": {
        "name": "/Users/honk/code/nostrstack/apps/gallery/src/comments/CommentsPanel.tsx",
        "start": 317,
        "end": 335,
        "startLoc": {
          "line": 317,
          "column": 5,
          "position": 2664
        },
        "endLoc": {
          "line": 335,
          "column": 9,
          "position": 2842
        }
      }
    },
    {
      "format": "tsx",
      "lines": 15,
      "fragment": "() {\n  return (\n    <svg\n      viewBox=\"0 0 24 24\"\n      width=\"18\"\n      height=\"18\"\n      fill=\"none\"\n      stroke=\"currentColor\"\n      strokeWidth=\"2.25\"\n      strokeLinecap=\"round\"\n      strokeLinejoin=\"round\"\n      focusable=\"false\"\n      aria-hidden=\"true\"\n    >\n      <circle",
      "tokens": 0,
      "firstFile": {
        "name": "/Users/honk/code/nostrstack/apps/gallery/src/RelayCard.tsx",
        "start": 471,
        "end": 485,
        "startLoc": {
          "line": 471,
          "column": 12,
          "position": 5286
        },
        "endLoc": {
          "line": 485,
          "column": 7,
          "position": 5364
        }
      },
      "secondFile": {
        "name": "/Users/honk/code/nostrstack/apps/gallery/src/RelayCard.tsx",
        "start": 450,
        "end": 464,
        "startLoc": {
          "line": 450,
          "column": 17,
          "position": 5159
        },
        "endLoc": {
          "line": 464,
          "column": 5,
          "position": 5237
        }
      }
    },
    {
      "format": "tsx",
      "lines": 15,
      "fragment": "if (ws.readyState === WebSocket.CONNECTING) {\n        const pending = ws;\n        pending.onopen = () => {\n          try {\n            if (pending.readyState === WebSocket.OPEN) pending.close();\n          } catch {\n            /* ignore */\n          }\n        };\n        pending.onmessage = null;\n        pending.onerror = null;\n        pending.onclose = null;\n        return;\n      }\n      try",
      "tokens": 0,
      "firstFile": {
        "name": "/Users/honk/code/nostrstack/apps/gallery/src/PayToUnlockCard.tsx",
        "start": 159,
        "end": 173,
        "startLoc": {
          "line": 159,
          "column": 7,
          "position": 1849
        },
        "endLoc": {
          "line": 173,
          "column": 4,
          "position": 1971
        }
      },
      "secondFile": {
        "name": "/Users/honk/code/nostrstack/apps/gallery/src/WalletBalance.tsx",
        "start": 93,
        "end": 107,
        "startLoc": {
          "line": 93,
          "column": 7,
          "position": 1266
        },
        "endLoc": {
          "line": 107,
          "column": 77,
          "position": 1388
        }
      }
    },
    {
      "format": "javascript",
      "lines": 38,
      "fragment": "}>Profile details</div>\n        <div>Profile fetch failed.</div>\n      </div>\n    );\n  }\n  if (!fullProfile) {\n    return (\n      <div style={{ border: '1px solid var(--nostrstack-color-border)', borderRadius: 'var(--nostrstack-radius-lg)', padding: '0.55rem 0.7rem', background: 'var(--nostrstack-color-surface)', color: 'var(--nostrstack-color-text-muted)' }}>\n        <div style={{ fontWeight: 700, marginBottom: '0.35rem', color: 'var(--nostrstack-color-text)' }}>Profile details</div>\n        <div>Connect a signer to load profile metadata.</div>\n      </div>\n    );\n  }\n  const rowsRaw: Array<[string, unknown]> = [\n    ['Display name', fullProfile.display_name],\n    ['Name', fullProfile.name],\n    ['NIP-05', fullProfile.nip05],\n    ['Lightning', fullProfile.lud16],\n    ['LNURL (lud06)', fullProfile.lud06],\n    ['Website', fullProfile.website],\n    ['Picture', fullProfile.picture],\n    ['Banner', fullProfile.banner],\n    ['About', fullProfile.about],\n    ['Updated', metaEvent?.created_at ? new Date(metaEvent.created_at * 1000).toLocaleString() : undefined],\n    ['Event id', metaEvent?.id],\n    ['Relay', metaRelay]\n  ];\n  const rows = rowsRaw.filter(([, v]) => Boolean(v));\n  if (!rows.length) {\n    return (\n      <div style={{ border: '1px solid var(--nostrstack-color-border)', borderRadius: 'var(--nostrstack-radius-lg)', padding: '0.55rem 0.7rem', background: 'var(--nostrstack-color-surface)', color: 'var(--nostrstack-color-text-muted)' }}>\n        <div style={{ fontWeight: 700, marginBottom: '0.35rem', color: 'var(--nostrstack-color-text)' }}>Profile details</div>\n        <div>No profile metadata available.</div>\n      </div>\n    );\n  }\n  return (\n    <div style={{ border: '1px solid var(--nostrstack-color-border)', borderRadius: 'var(--nostrstack-radius-lg)', padding: '0.55rem 0.7rem', background: 'var(--nostrstack-color-surface)' ",
      "tokens": 0,
      "firstFile": {
        "name": "/Users/honk/code/nostrstack/apps/gallery/src/NostrProfileCard.tsx",
        "start": 272,
        "end": 309,
        "startLoc": {
          "line": 272,
          "column": 2,
          "position": 3253
        },
        "endLoc": {
          "line": 309,
          "column": 2,
          "position": 3760
        }
      },
      "secondFile": {
        "name": "/Users/honk/code/nostrstack/apps/gallery/src/NostrProfileCard.tsx",
        "start": 231,
        "end": 271,
        "startLoc": {
          "line": 231,
          "column": 12,
          "position": 2881
        },
        "endLoc": {
          "line": 271,
          "column": 2,
          "position": 3219
        }
      }
    },
    {
      "format": "tsx",
      "lines": 41,
      "fragment": ";\n          return (\n            <RelayCard\n              key={r}\n              url={r}\n              meta={{\n                name: stat?.name,\n                software: stat?.software,\n                version: stat?.version,\n                description: stat?.description,\n                icon: stat?.icon,\n                supportedNips: stat?.supportedNips,\n                paymentRequired: stat?.paymentRequired,\n                authRequired: stat?.authRequired,\n                contact: stat?.contact,\n                pubkey: stat?.pubkey,\n                paymentsUrl: stat?.paymentsUrl,\n                language: stat?.language,\n                tags: stat?.tags,\n                limitation: stat?.limitation\n              }}\n              recv={stat?.recv ?? 0}\n              recvPerMin={stat?.recvPerMin}\n              recvHistory={stat?.recvHistory}\n              send={stat?.send ?? 0}\n              sendPerMin={stat?.sendPerMin}\n              sendHistory={stat?.sendHistory}\n              errorCount={stat?.errorCount ?? 0}\n              lastError={stat?.lastError}\n              sendStatus={stat?.sendStatus}\n              last={stat?.last}\n              lastSentAt={stat?.lastSentAt}\n              lastEvent={stat?.lastEvent}\n              latencyMs={stat?.latencyMs}\n              online={stat?.online}\n              lastProbeAt={stat?.lastProbeAt}\n            />\n          );\n        })}\n      </div>\n    </",
      "tokens": 0,
      "firstFile": {
        "name": "/Users/honk/code/nostrstack/apps/gallery/src/NostrProfileCard.tsx",
        "start": 196,
        "end": 236,
        "startLoc": {
          "line": 196,
          "column": 2,
          "position": 2609
        },
        "endLoc": {
          "line": 236,
          "column": 3,
          "position": 2900
        }
      },
      "secondFile": {
        "name": "/Users/honk/code/nostrstack/apps/gallery/src/comments/CommentsPanel.tsx",
        "start": 132,
        "end": 172,
        "startLoc": {
          "line": 132,
          "column": 2,
          "position": 1402
        },
        "endLoc": {
          "line": 172,
          "column": 2,
          "position": 1660
        }
      }
    },
    {
      "format": "tsx",
      "lines": 6,
      "fragment": ".filter((l) => {\n      if (minLevel !== 'all' && levelRank(l.level) < min) return false;\n      if (!f) return true;\n      return l.message.toLowerCase().includes(f);\n    });\n  }, [frontendLines",
      "tokens": 0,
      "firstFile": {
        "name": "/Users/honk/code/nostrstack/apps/gallery/src/LogViewer.tsx",
        "start": 103,
        "end": 108,
        "startLoc": {
          "line": 103,
          "column": 14,
          "position": 1377
        },
        "endLoc": {
          "line": 108,
          "column": 14,
          "position": 1457
        }
      },
      "secondFile": {
        "name": "/Users/honk/code/nostrstack/apps/gallery/src/LogViewer.tsx",
        "start": 93,
        "end": 98,
        "startLoc": {
          "line": 93,
          "column": 13,
          "position": 1234
        },
        "endLoc": {
          "line": 98,
          "column": 13,
          "position": 1314
        }
      }
    },
    {
      "format": "tsx",
      "lines": 6,
      "fragment": "background: tone.dot,\n                  animation: status === 'open' ? 'nostrstack-pulse-soft 1.8s infinite' : 'none',\n                  ...(status === 'open' ? ({ '--nostrstack-pulse-color': tone.dot } as Record<string, string>) : {})\n                } as React.CSSProperties}\n              />\n              <",
      "tokens": 0,
      "firstFile": {
        "name": "/Users/honk/code/nostrstack/apps/gallery/src/LogViewer.tsx",
        "start": 321,
        "end": 326,
        "startLoc": {
          "line": 321,
          "column": 19,
          "position": 3584
        },
        "endLoc": {
          "line": 326,
          "column": 2,
          "position": 3666
        }
      },
      "secondFile": {
        "name": "/Users/honk/code/nostrstack/apps/gallery/src/TelemetryCard.tsx",
        "start": 325,
        "end": 330,
        "startLoc": {
          "line": 325,
          "column": 17,
          "position": 3218
        },
        "endLoc": {
          "line": 330,
          "column": 2,
          "position": 3300
        }
      }
    },
    {
      "format": "tsx",
      "lines": 7,
      "fragment": "};\n\nfunction middleTruncate(value: string, keep = 10) {\n  if (!value) return value;\n  if (value.length <= keep * 2 + 3) return value;\n  return `${value.slice(0, keep)}${value.slice(-keep)}`;\n}",
      "tokens": 0,
      "firstFile": {
        "name": "/Users/honk/code/nostrstack/apps/gallery/src/KeyToggle.tsx",
        "start": 92,
        "end": 98,
        "startLoc": {
          "line": 92,
          "column": 1,
          "position": 810
        },
        "endLoc": {
          "line": 98,
          "column": 2,
          "position": 899
        }
      },
      "secondFile": {
        "name": "/Users/honk/code/nostrstack/apps/gallery/src/NpubBar.tsx",
        "start": 202,
        "end": 208,
        "startLoc": {
          "line": 202,
          "column": 1,
          "position": 1907
        },
        "endLoc": {
          "line": 208,
          "column": 2,
          "position": 1996
        }
      }
    },
    {
      "format": "tsx",
      "lines": 9,
      "fragment": "= useMemo(() => {\n    const secs = Math.max(0, Math.floor(ageMs / 1000));\n    const m = Math.floor(secs / 60)\n      .toString()\n      .padStart(2, '0');\n    const s = (secs % 60).toString().padStart(2, '0');\n    return `${m}:${s}`;\n  }, [ageMs]);\n  const fmtRemaining",
      "tokens": 0,
      "firstFile": {
        "name": "/Users/honk/code/nostrstack/apps/gallery/src/InvoicePopover.tsx",
        "start": 26,
        "end": 34,
        "startLoc": {
          "line": 26,
          "column": 2,
          "position": 259
        },
        "endLoc": {
          "line": 34,
          "column": 13,
          "position": 387
        }
      },
      "secondFile": {
        "name": "/Users/honk/code/nostrstack/apps/gallery/src/PayToUnlockCard.tsx",
        "start": 252,
        "end": 261,
        "startLoc": {
          "line": 252,
          "column": 2,
          "position": 2862
        },
        "endLoc": {
          "line": 261,
          "column": 12,
          "position": 2991
        }
      }
    },
    {
      "format": "tsx",
      "lines": 15,
      "fragment": "() {\n  return (\n    <svg\n      viewBox=\"0 0 24 24\"\n      width=\"20\"\n      height=\"20\"\n      fill=\"none\"\n      stroke=\"currentColor\"\n      strokeWidth=\"2.5\"\n      strokeLinecap=\"round\"\n      strokeLinejoin=\"round\"\n      focusable=\"false\"\n      aria-hidden=\"true\"\n    >\n      <path d=\"M18 6 6 18",
      "tokens": 0,
      "firstFile": {
        "name": "/Users/honk/code/nostrstack/apps/gallery/src/CopyButton.tsx",
        "start": 105,
        "end": 119,
        "startLoc": {
          "line": 105,
          "column": 10,
          "position": 759
        },
        "endLoc": {
          "line": 119,
          "column": 11,
          "position": 842
        }
      },
      "secondFile": {
        "name": "/Users/honk/code/nostrstack/apps/gallery/src/CopyButton.tsx",
        "start": 86,
        "end": 100,
        "startLoc": {
          "line": 86,
          "column": 10,
          "position": 656
        },
        "endLoc": {
          "line": 100,
          "column": 16,
          "position": 739
        }
      }
    },
    {
      "format": "typescript",
      "lines": 11,
      "fragment": "page.evaluate(() => {\n        const paywall = document.querySelector('.nostrstack-paywall') as HTMLElement | null;\n        const card = paywall?.closest('section') as HTMLElement | null;\n        if (!paywall || !card) return null;\n        const cardRect = card.getBoundingClientRect();\n        let maxDelta = 0;\n        let offender: { tag: string; cls: string; text: string; delta: number } | null = null;\n        for (const el of Array.from(card.querySelectorAll('*'))) {\n          const rect = (el as HTMLElement).getBoundingClientRect();\n          const delta = rect.right - cardRect.right;\n          if (delta > maxDelta + 0.5",
      "tokens": 0,
      "firstFile": {
        "name": "/Users/honk/code/nostrstack/apps/gallery/scripts/qa-regtest-demo.ts",
        "start": 269,
        "end": 279,
        "startLoc": {
          "line": 269,
          "column": 2,
          "position": 3715
        },
        "endLoc": {
          "line": 279,
          "column": 4,
          "position": 3932
        }
      },
      "secondFile": {
        "name": "/Users/honk/code/nostrstack/apps/gallery/tests/demo-flows.spec.ts",
        "start": 6,
        "end": 16,
        "startLoc": {
          "line": 6,
          "column": 2,
          "position": 56
        },
        "endLoc": {
          "line": 16,
          "column": 5,
          "position": 273
        }
      }
    },
    {
      "format": "typescript",
      "lines": 6,
      "fragment": ").toMatch(/^ln/i);\n    await page.evaluate(async (invoice) => {\n      await navigator.clipboard.writeText(invoice);\n      const paste = Array.from(document.querySelectorAll('button')).find((b) => b.textContent?.trim() === 'Paste') as HTMLButtonElement | undefined;\n      paste?.click();\n    }, bolt11Unlock",
      "tokens": 0,
      "firstFile": {
        "name": "/Users/honk/code/nostrstack/apps/gallery/scripts/qa-regtest-demo.ts",
        "start": 302,
        "end": 307,
        "startLoc": {
          "line": 302,
          "column": 13,
          "position": 4231
        },
        "endLoc": {
          "line": 307,
          "column": 13,
          "position": 4332
        }
      },
      "secondFile": {
        "name": "/Users/honk/code/nostrstack/apps/gallery/scripts/qa-regtest-demo.ts",
        "start": 254,
        "end": 259,
        "startLoc": {
          "line": 254,
          "column": 7,
          "position": 3479
        },
        "endLoc": {
          "line": 259,
          "column": 7,
          "position": 3580
        }
      }
    },
    {
      "format": "typescript",
      "lines": 6,
      "fragment": ").toMatch(/^ln/i);\n    await page.evaluate(async (invoice) => {\n      await navigator.clipboard.writeText(invoice);\n      const paste = Array.from(document.querySelectorAll('button')).find((b) => b.textContent?.trim() === 'Paste') as HTMLButtonElement | undefined;\n      paste?.click();\n    }, bolt11Real",
      "tokens": 0,
      "firstFile": {
        "name": "/Users/honk/code/nostrstack/apps/gallery/scripts/qa-regtest-demo.ts",
        "start": 329,
        "end": 334,
        "startLoc": {
          "line": 329,
          "column": 11,
          "position": 4765
        },
        "endLoc": {
          "line": 334,
          "column": 11,
          "position": 4866
        }
      },
      "secondFile": {
        "name": "/Users/honk/code/nostrstack/apps/gallery/scripts/qa-regtest-demo.ts",
        "start": 254,
        "end": 259,
        "startLoc": {
          "line": 254,
          "column": 7,
          "position": 3479
        },
        "endLoc": {
          "line": 259,
          "column": 7,
          "position": 3580
        }
      }
    },
    {
      "format": "typescript",
      "lines": 10,
      "fragment": ";\n\ntest.beforeAll(async ({ playwright }) => {\n  test.setTimeout(120_000);\n  process.env.NODE_ENV = 'test';\n  process.env.VITEST = 'true';\n  process.env.ADMIN_API_KEY = process.env.ADMIN_API_KEY ?? 'test-admin';\n  process.env.OP_NODE_API_KEY = process.env.OP_NODE_API_KEY ?? 'test-key';\n  process.env.OP_NODE_WEBHOOK_SECRET = process.env.OP_NODE_WEBHOOK_SECRET ?? 'whsec_test';\n  const",
      "tokens": 0,
      "firstFile": {
        "name": "/Users/honk/code/nostrstack/apps/api/tests/nostr-auth.spec.ts",
        "start": 11,
        "end": 20,
        "startLoc": {
          "line": 11,
          "column": 22,
          "position": 68
        },
        "endLoc": {
          "line": 20,
          "column": 6,
          "position": 187
        }
      },
      "secondFile": {
        "name": "/Users/honk/code/nostrstack/apps/api/tests/pay-to-act.spec.ts",
        "start": 13,
        "end": 22,
        "startLoc": {
          "line": 13,
          "column": 2,
          "position": 102
        },
        "endLoc": {
          "line": 22,
          "column": 8,
          "position": 221
        }
      }
    },
    {
      "format": "typescript",
      "lines": 28,
      "fragment": ";\n  const dbPath = process.env.DATABASE_URL ?? 'postgresql://nostrstack:nostrstack@localhost:5432/nostrstack';\n  process.env.DATABASE_URL = dbPath;\n  const schema = dbPath.startsWith('postgres') ? 'prisma/pg/schema.prisma' : 'prisma/schema.prisma';\n  execSync(`pnpm exec prisma db push --skip-generate --accept-data-loss --schema ${schema}`, {\n    stdio: 'inherit',\n    env: { ...process.env, DATABASE_URL: process.env.DATABASE_URL }\n  });\n\n  const { buildServer } = await import('../src/server.js');\n  const server = await buildServer();\n  await server.listen({ port: 0, host: '127.0.0.1' });\n  const port = server.server.address()?.port;\n  const baseUrl = `http://127.0.0.1:${port}`;\n  stopServer = async () => server.close();\n  await waitForHealth(`${baseUrl}/health`, 30000, true);\n\n  api = await playwright.request.newContext({\n    baseURL: baseUrl,\n    extraHTTPHeaders: { host: DOMAIN }\n  });\n\n  await api.post('/api/admin/tenants', {\n    data: { domain: DOMAIN, displayName: 'Demo Tenant' },\n    headers: { 'x-api-key': process.env.ADMIN_API_KEY ?? '' }\n  });\n  await api.post('/api/admin/users', {\n    data: { domain: DOMAIN, lightningAddress: 'demo@demo.nostrstack.lol', pubkey: 'f'",
      "tokens": 0,
      "firstFile": {
        "name": "/Users/honk/code/nostrstack/apps/api/tests/nostr-auth.spec.ts",
        "start": 19,
        "end": 46,
        "startLoc": {
          "line": 19,
          "column": 13,
          "position": 184
        },
        "endLoc": {
          "line": 46,
          "column": 4,
          "position": 550
        }
      },
      "secondFile": {
        "name": "/Users/honk/code/nostrstack/apps/api/tests/pay-to-act.spec.ts",
        "start": 22,
        "end": 49,
        "startLoc": {
          "line": 22,
          "column": 7,
          "position": 239
        },
        "endLoc": {
          "line": 49,
          "column": 12,
          "position": 605
        }
      }
    },
    {
      "format": "typescript",
      "lines": 14,
      "fragment": ";\n\ntest.beforeAll(async ({ playwright }) => {\n  test.setTimeout(120_000);\n  process.env.NODE_ENV = 'test';\n  process.env.VITEST = 'true';\n  process.env.ADMIN_API_KEY = process.env.ADMIN_API_KEY ?? 'test-admin';\n  process.env.OP_NODE_API_KEY = process.env.OP_NODE_API_KEY ?? 'test-key';\n  process.env.OP_NODE_WEBHOOK_SECRET = process.env.OP_NODE_WEBHOOK_SECRET ?? 'whsec_test';\n  const dbPath = process.env.DATABASE_URL ?? 'postgresql://nostrstack:nostrstack@localhost:5432/nostrstack';\n  process.env.DATABASE_URL = dbPath;\n  const schema = dbPath.startsWith('postgres') ? 'prisma/pg/schema.prisma' : 'prisma/schema.prisma';\n\n  const",
      "tokens": 0,
      "firstFile": {
        "name": "/Users/honk/code/nostrstack/apps/api/tests/lnurlp.spec.ts",
        "start": 10,
        "end": 23,
        "startLoc": {
          "line": 10,
          "column": 5,
          "position": 84
        },
        "endLoc": {
          "line": 23,
          "column": 6,
          "position": 258
        }
      },
      "secondFile": {
        "name": "/Users/honk/code/nostrstack/apps/api/tests/pay-to-act.spec.ts",
        "start": 13,
        "end": 23,
        "startLoc": {
          "line": 13,
          "column": 2,
          "position": 102
        },
        "endLoc": {
          "line": 23,
          "column": 9,
          "position": 241
        }
      }
    },
    {
      "format": "typescript",
      "lines": 13,
      "fragment": ", {\n    stdio: 'inherit',\n    env: { ...process.env, DATABASE_URL: process.env.DATABASE_URL }\n  });\n\n  const { buildServer } = await import('../src/server.js');\n  const server = await buildServer();\n  await server.listen({ port: 0, host: '127.0.0.1' });\n  const port = server.server.address()?.port;\n  const baseUrl = `http://127.0.0.1:${port}`;\n  stopServer = async () => server.close();\n\n  await waitForHealth(`${baseUrl}/health`)",
      "tokens": 0,
      "firstFile": {
        "name": "/Users/honk/code/nostrstack/apps/api/tests/lnurlp.spec.ts",
        "start": 24,
        "end": 36,
        "startLoc": {
          "line": 24,
          "column": 8,
          "position": 275
        },
        "endLoc": {
          "line": 36,
          "column": 2,
          "position": 435
        }
      },
      "secondFile": {
        "name": "/Users/honk/code/nostrstack/apps/api/tests/pay-to-act.spec.ts",
        "start": 26,
        "end": 37,
        "startLoc": {
          "line": 26,
          "column": 2,
          "position": 303
        },
        "endLoc": {
          "line": 37,
          "column": 2,
          "position": 462
        }
      }
    },
    {
      "format": "yaml",
      "lines": 17,
      "fragment": ":\n    image: lightninglabs/lnd:v0.18.4-beta\n    restart: unless-stopped\n    depends_on:\n      bitcoind:\n        condition: service_healthy\n    command:\n      - --lnddir=/data\n      - --bitcoin.active\n      - --bitcoin.regtest\n      - --bitcoin.node=bitcoind\n      - --bitcoind.rpchost=bitcoind\n      - --bitcoind.rpcuser=bitcoin\n      - --bitcoind.rpcpass=bitcoin\n      - --bitcoind.zmqpubrawblock=tcp://bitcoind:28332\n      - --bitcoind.zmqpubrawtx=tcp://bitcoind:28333\n      - --rpclisten=0.0.0.0:10010",
      "tokens": 0,
      "firstFile": {
        "name": "/Users/honk/code/nostrstack/deploy/regtest/docker-compose.yml",
        "start": 64,
        "end": 80,
        "startLoc": {
          "line": 64,
          "column": 10,
          "position": 419
        },
        "endLoc": {
          "line": 80,
          "column": 6,
          "position": 535
        }
      },
      "secondFile": {
        "name": "/Users/honk/code/nostrstack/deploy/regtest/docker-compose.yml",
        "start": 30,
        "end": 46,
        "startLoc": {
          "line": 30,
          "column": 13,
          "position": 189
        },
        "endLoc": {
          "line": 46,
          "column": 6,
          "position": 305
        }
      }
    },
    {
      "format": "python",
      "lines": 12,
      "fragment": ")\n\n    async def fetch_page(\n        self,\n        query: str,\n        where: list[str] | None = None,\n        values: dict | None = None,\n        filters: Filters | None = None,\n        model: type[TModel] | None = None,\n        group_by: list[str] | None = None,\n    ) -> Page[TModel]:\n        async",
      "tokens": 0,
      "firstFile": {
        "name": "/Users/honk/code/nostrstack/deploy/lnbits/db.py",
        "start": 420,
        "end": 431,
        "startLoc": {
          "line": 420,
          "column": 6,
          "position": 3737
        },
        "endLoc": {
          "line": 431,
          "column": 6,
          "position": 3856
        }
      },
      "secondFile": {
        "name": "/Users/honk/code/nostrstack/deploy/lnbits/db.py",
        "start": 227,
        "end": 238,
        "startLoc": {
          "line": 227,
          "column": 2,
          "position": 1982
        },
        "endLoc": {
          "line": 238,
          "column": 3,
          "position": 2101
        }
      }
    },
    {
      "format": "json",
      "lines": 33,
      "fragment": ": {\n      \"post\": {\n        \"requestBody\": {\n          \"content\": {\n            \"application/json\": {\n              \"schema\": {\n                \"type\": \"object\",\n                \"properties\": {\n                  \"domain\": {\n                    \"type\": \"string\"\n                  },\n                  \"displayName\": {\n                    \"type\": \"string\"\n                  }\n                },\n                \"required\": [\n                  \"domain\",\n                  \"displayName\"\n                ],\n                \"additionalProperties\": false\n              }\n            }\n          },\n          \"required\": true\n        },\n        \"responses\": {\n          \"200\": {\n            \"description\": \"Default Response\"\n          }\n        }\n      }\n    },\n    \"/api/admin/users\"",
      "tokens": 0,
      "firstFile": {
        "name": "/Users/honk/code/nostrstack/apps/api/openapi.json",
        "start": 177,
        "end": 209,
        "startLoc": {
          "line": 177,
          "column": 21,
          "position": 882
        },
        "endLoc": {
          "line": 209,
          "column": 19,
          "position": 1039
        }
      },
      "secondFile": {
        "name": "/Users/honk/code/nostrstack/apps/api/openapi.json",
        "start": 145,
        "end": 177,
        "startLoc": {
          "line": 145,
          "column": 15,
          "position": 724
        },
        "endLoc": {
          "line": 177,
          "column": 21,
          "position": 881
        }
      }
    },
    {
      "format": "yaml",
      "lines": 13,
      "fragment": "steps:\n      - uses: actions/checkout@v4\n      - uses: pnpm/action-setup@v4\n        with:\n          version: 9.11.0\n      - name: Setup Node\n        uses: actions/setup-node@v4\n        with:\n          node-version: 20\n          cache: 'pnpm'\n      - name: Install\n        run: pnpm install --frozen-lockfile\n      - name: Restore",
      "tokens": 0,
      "firstFile": {
        "name": "/Users/honk/code/nostrstack/.github/workflows/ci.yml",
        "start": 93,
        "end": 105,
        "startLoc": {
          "line": 93,
          "column": 5,
          "position": 662
        },
        "endLoc": {
          "line": 105,
          "column": 8,
          "position": 755
        }
      },
      "secondFile": {
        "name": "/Users/honk/code/nostrstack/.github/workflows/ci.yml",
        "start": 22,
        "end": 34,
        "startLoc": {
          "line": 22,
          "column": 5,
          "position": 139
        },
        "endLoc": {
          "line": 34,
          "column": 8,
          "position": 232
        }
      }
    },
    {
      "format": "yaml",
      "lines": 35,
      "fragment": "services:\n      postgres:\n        image: postgres:15\n        ports: [\"5432:5432\"]\n        env:\n          POSTGRES_USER: nostrstack\n          POSTGRES_PASSWORD: nostrstack\n          POSTGRES_DB: nostrstack\n        options: >-\n          --health-cmd \"pg_isready -U nostrstack\" --health-interval=10s --health-timeout=5s --health-retries=5\n    permissions:\n      contents: read\n      packages: write\n      id-token: write\n    steps:\n      - uses: actions/checkout@v4\n\n      - uses: pnpm/action-setup@v4\n        with:\n          version: 9.11.0\n\n      - uses: actions/setup-node@v4\n        with:\n          node-version: 20\n          cache: pnpm\n\n      - name: Install deps\n        run: pnpm install --frozen-lockfile\n\n      - name: Run tests\n        run: pnpm test\n        env:\n          DATABASE_URL: postgresql://nostrstack:nostrstack@localhost:5432/nostrstack\n\n      -",
      "tokens": 0,
      "firstFile": {
        "name": "/Users/honk/code/nostrstack/.github/workflows/azure-deploy-staging.yml",
        "start": 31,
        "end": 65,
        "startLoc": {
          "line": 31,
          "column": 5,
          "position": 213
        },
        "endLoc": {
          "line": 65,
          "column": 2,
          "position": 441
        }
      },
      "secondFile": {
        "name": "/Users/honk/code/nostrstack/.github/workflows/azure-deploy.yml",
        "start": 31,
        "end": 64,
        "startLoc": {
          "line": 31,
          "column": 5,
          "position": 197
        },
        "endLoc": {
          "line": 64,
          "column": 13,
          "position": 424
        }
      }
    },
    {
      "format": "yaml",
      "lines": 26,
      "fragment": "- name: Set image tag\n        id: vars\n        run: |\n          tag=\"${{ github.event.inputs.image_tag }}\"\n          if [ -z \"$tag\" ]; then tag=\"${GITHUB_SHA}\"; fi\n          echo \"IMAGE=${{ env.REGISTRY }}/${{ env.IMAGE_NAME }}:${tag}\" >> $GITHUB_OUTPUT\n\n      - name: Login to GHCR\n        uses: docker/login-action@v3\n        with:\n          registry: ${{ env.REGISTRY }}\n          username: ${{ github.actor }}\n          password: ${{ secrets.GITHUB_TOKEN }}\n\n      - name: Build & push image\n        uses: docker/build-push-action@v6\n        with:\n          context: .\n          file: apps/api/Dockerfile\n\n      - name: Azure login\n        uses: azure/login@v2\n        with:\n          creds: ${{ secrets.AZURE_CREDENTIALS }}\n\n      - name: Deploy Bicep (staging)",
      "tokens": 0,
      "firstFile": {
        "name": "/Users/honk/code/nostrstack/.github/workflows/azure-deploy-staging.yml",
        "start": 65,
        "end": 90,
        "startLoc": {
          "line": 65,
          "column": 7,
          "position": 441
        },
        "endLoc": {
          "line": 90,
          "column": 10,
          "position": 615
        }
      },
      "secondFile": {
        "name": "/Users/honk/code/nostrstack/.github/workflows/azure-deploy.yml",
        "start": 71,
        "end": 96,
        "startLoc": {
          "line": 71,
          "column": 7,
          "position": 451
        },
        "endLoc": {
          "line": 96,
          "column": 11,
          "position": 625
        }
      }
    }
  ],
  "filename": "/Users/honk/code/nostrstack/node_modules/.pnpm/@jscpd+html-reporter@4.0.1/node_modules/@jscpd/html-reporter/dist/templates/main.pug"
}